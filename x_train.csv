Purpose of ACLs ACL OperationACLs define the set of rules that give added control for packets that enter inbound interfaces  packets that relay through the router  and packets that exit outbound interfaces of the router ACLs can be configured to apply to inbound traffic and outbound traffic Note  ACLs do not act on packets that originate from the router itself An inbound ACL filters packets before they are routed to the outbound interface  An inbound ACL is efficient because it saves the overhead of routing lookups if the packet is discarded An outbound ACL filters packets after being routed  regardless of the inbound interface 
Purpose of ACLs ACL Operation  Cont  When an ACL is applied to an interface  it follows a specific operating procedure  Here are the operational steps used when traffic has entered a router interface with an inbound standard IPv4 ACL configured The router extracts the source IPv4 address from the packet header The router starts at the top of the ACL and compares the source IPv4 address to each ACE in a sequential order When a match is made  the router carries out the instruction  either permitting or denying the packet  and the remaining ACEs in the ACL  if any  are not analyzed If the source IPv4 address does not match any ACEs in the ACL  the packet is discarded because there is an implicit deny ACE automatically applied to all ACLs The last ACE statement of an ACL is always an implicit deny that blocks all traffic  It is hidden and not displayed in the configuration Note  An ACL must have at least one permit statement otherwise all traffic will be denied due to the implicit deny ACE statement 
Purpose of ACLs Packet Tracer - ACL DemonstrationIn this Packet Tracer  you will complete the following objectives Part 1  Verify Local Connectivity and Test Access Control List Part 2  Remove Access Control List and Repeat Test
Types of IPv4 ACLs Standard and Extended ACLsThere are two types of IPv4 ACLs Standard ACLs - These permit or deny packets based only on the source IPv4 address Extended ACLs - These permit or deny packets based on the source IPv4 address and destination IPv4 address  protocol type  source and destination TCP or UDP ports and more 
Types of IPv4 ACLs Numbered and Named ACLsNumbered ACLsACLs numbered 1-99  or 1300-1999 are standard ACLs  while ACLs numbered 100-199  or 2000-2699 are extended ACLs R1 config   access-list   1-99  IP standard access list  100-199  IP extended access list  1100-1199  Extended 48-bit MAC address access list  1300-1999  IP standard access list  expanded range   200-299  Protocol type-code access list  2000-2699  IP extended access list  expanded range   700-799  48-bit MAC address access list rate-limit Simple rate-limit specific access list template Enable IP template acls Router config   access-list  
Types of IPv4 ACLs Numbered and Named ACLs  Cont  Named ACLsNamed ACLs are the preferred method to use when configuring ACLs  Specifically  standard and extended ACLs can be named to provide information about the purpose of the ACL  For example  naming an extended ACL FTP-FILTER is far better than having a numbered ACL 100 The ip access-list global configuration command is used to create a named ACL  as shown in the following example R1 config   ip access-list extended FTP-FILTER R1 config-ext-nacl   permit tcp 192 168 10 0 0 0 0 255 any eq ftp R1 config-ext-nacl   permit tcp 192 168 10 0 0 0 0 255 any eq ftp-data R1 config-ext-nacl  
Types of IPv4 ACLs Where to Place ACLsEvery ACL should be placed where it has the greatest impact on efficiency Extended ACLs should be located as close as possible to the source of the traffic to be filtered Standard ACLs should be located as close to the destination as possible  
Types of IPv4 ACLs Where to Place ACLs  Cont  Factors Influencing ACL PlacementExplanationThe extent of organizational controlPlacement of the ACL can depend on whether or not the organization has control of both the source and destination networks Bandwidth of the networks involvedIt may be desirable to filter unwanted traffic at the source to prevent transmission of bandwidth-consuming traffic Ease of configurationIt may be easier to implement an ACL at the destination  but traffic will use bandwidth unnecessarily  An extended ACL could be used on each router where the traffic originated  This would save bandwidth by filtering the traffic at the source  but it would require creating extended ACLs on multiple routers 
Types of IPv4 ACLs Standard ACL Placement ExampleIn the figure  the administrator wants to prevent traffic originating in the 192 168 10 0 24 network from reaching the 192 168 30 0 24 network Following the basic placement guidelines  the administrator would place a standard ACL on router R3  
Types of IPv4 ACLs Standard ACL Placement Example  Cont  There are two possible interfaces on R3 to apply the standard ACL R3 S0 1 1 interface  inbound  - The standard ACL can be applied inbound on the R3 S0 1 1 interface to deny traffic from  10 network  However  it would also filter  10 traffic to the 192 168 31 0 24   31 in this example  network  Therefore  the standard ACL should not be applied to this interface R3 G0 0 interface  outbound  - The standard ACL can be applied outbound on the R3 G0 0 0 interface  This will not affect other networks that are reachable by R3  Packets from  10 network will still be able to reach the  31 network  This is the best interface to place the standard ACL to meet the traffic requirements 
Types of IPv4 ACLs Extended ACL Placement ExampleExtended ACLs should be located as close to the source as possible However  the organization can only place ACLs on devices that they control  Therefore  the extended ACL placement must be determined in the context of where organizational control extends In the figure  for example  Company A wants to deny Telnet and FTP traffic to Company B s 192 168 30 0 24 network from their 192 168 11 0 24 network  while permitting all other traffic 
Types of IPv4 ACLs Extended ACL Placement Example  Cont  An extended ACL on R3 would accomplish the task  but the administrator does not control R3  In addition  this solution allows unwanted traffic to cross the entire network  only to be blocked at the destination The solution is to place an extended ACL on R1 that specifies both source and destination addresses There are two possible interfaces on R1 to apply the extended ACL R1 S0 1 0 interface  outbound  - The extended ACL can be applied outbound on the S0 1 0 interface  This solution will process all packets leaving R1 including packets from 192 168 10 0 24 R1 G0 0 1 interface  inbound  - The extended ACL can be applied inbound on the G0 0 1 and only packets from the 192 168 11 0 24 network are subject to ACL processing on R1  Because the filter is to be limited to only those packets leaving the 192 168 11 0 24 network  applying the extended ACL to G0 1 is the best solution 
Wildcard Masks in ACLs Wildcard Mask OverviewA wildcard-mask is similar to a subnet-mask in that it uses the ANDing process to identify which bits in an IPv4 address to match  Unlike a subnet-mask  in which binary 1 is equal to a match and binary 0 is not a match  in a wildcard-mask  the reverse is true An IPv4 ACE uses a 32-bit wildcard-mask to determine which bits of the address to examine for a match Wildcard masks use the following rules to match binary 1s and 0s Wildcard mask bit 0 - Match the corresponding bit value in the addressWildcard mask bit 1 - Ignore the corresponding bit value in the address
Wildcard Masks in ACLs Wildcard Mask Overview  Cont  Wildcard MaskLast Octet  in Binary Meaning  0 - match  1 - ignore 0 0 0 000000000Match all octets 0 0 0 6300111111Match the first three octets Match the two left most bits of the last octet Ignore the last 6 bits0 0 0 1500001111Match the first three octets Match the four left most bits of the last octet Ignore the last 4 bits of the last octet0 0 0 24811111100Match the first three octets Ignore the six left most bits of the last octet Match the last two bits0 0 0 25511111111Match the first three octet Ignore the last octet
Wildcard Masks in ACLs Wildcard Mask TypesWildcard to Match a Host  Assume ACL 10 needs an ACE that only permits the host with IPv4 address 192 168 1 1  Recall that  0  equals a match and  1  equals ignore  To match a specific host IPv4 address  a wildcard-mask consisting of all zeroes  i e   0 0 0 0  is required When the ACE is processed  the wildcard-mask will permit only the 192 168 1 1 address  The resulting ACE in ACL 10 would be access-list 10 permit 192 168 1 1 0 0 0 0 DecimalBinaryIPv4 address192 168 1 111000000 10101000 00000001 00000001Wildcard Mask0 0 0 000000000 00000000 00000000 00000000Permitted IPv4 Address192 168 1 111000000 10101000 00000001 00000001
Wildcard Masks in ACLs Wildcard Mask Types  Cont  Wildcard Mask to Match an IPv4 SubnetACL 10 needs an ACE that permits all hosts in the 192 168 1 0 24 network  The wildcard-mask 0 0 0 255 stipulates that the very first three octets must match exactly but the fourth octet does not When processed  the wildcard-mask 0 0 0 255 permits all hosts in the 192 168 1 0 24 network  The resulting ACE in ACL 10 would be access-list 10 permit 192 168 1 0 0 0 0 255 DecimalBinaryIPv4 address192 168 1 111000000 10101000 00000001 00000001Wildcard Mask0 0 0 25500000000 00000000 00000000 11111111Permitted IPv4 Address192 168 1 0 2411000000 10101000 00000001 00000000
Wildcard Masks in ACLs Wildcard Mask Types  Cont  Wildcard Mask to Match an IPv4 Address RangeACL 10 needs an ACE that permits all hosts in the 192 168 16 0 24  192 168 17 0 24     192 168 31 0 24 networks  When processed  the wildcard-mask 0 0 15 255 permits all hosts in the 192 168 16 0 24 to 192 168 31 0 24 networks  The resulting ACE in ACL 10 would be access-list 10 permit 192 168 16 0 0 0 15 255 DecimalBinaryIPv4 address192 168 16 011000000 10101000 00010000 00000000Wildcard Mask0 0 15 25500000000 00000000 00001111 11111111Permitted IPv4 Address192 168 16 0 24 to 192 168 31 0 2411000000 10101000 00010000 00000000   11000000 10101000 00011111 00000000
Wildcard Masks in ACLs Wildcard Mask CalculationCalculating wildcard-masks can be challenging  One shortcut method is to subtract the subnet-mask from 255 255 255 255  Some examples Assume you wanted an ACE in ACL 10 to permit access to all users in the 192 168 3 0 24 network  To calculate the wildcard-mask  subtract the subnet-mask  255 255 255 0  from 255 255 255 255  This produces the wildcard-mask 0 0 0 255  The ACE would be access-list 10 permit 192 168 3 0 0 0 0 255 Assume you wanted an ACE in ACL 10 to permit network access for the 14 users in the subnet 192 168 3 32 28  Subtract the subnet  i e   255 255 255 240  from 255 255 255 255  This produces the wildcard-mask 0 0 0 15  The ACE would be access-list 10 permit 192 168 3 32 0 0 0 15 Assume you needed an ACE in ACL 10 to permit only networks 192 168 10 0 and 192 168 11 0  These two networks could be summarized as 192 168 10 0 23 which is a subnet-mask of 255 255 254 0  Subtract 255 255 254 0 subnet-mask from 255 255 255 255  This produces the wildcard-mask 0 0 1 255  The ACE would be access-list 10 permit 192 168 10 0 0 0 1 255 
Wildcard Masks in ACLs Wildcard Mask KeywordsThe Cisco IOS provides two keywords to identify the most common uses of wildcard-masking  The two keywords are host - This keyword substitutes for the 0 0 0 0 mask  This mask states that all IPv4 address bits must match to filter just one host address any - This keyword substitutes for the 255 255 255 255 mask  This mask says to ignore the entire IPv4 address or to accept any addresses 
ARP ARP OverviewA device uses ARP to determine the destination MAC address of a local device when it knows its IPv4 address ARP provides two basic functions Resolving IPv4 addresses to MAC addressesMaintaining an ARP table of IPv4 to MAC address mappings
ARP ARP FunctionsTo send a frame  a device will search its ARP table for a destination IPv4 address and a corresponding MAC address If the packet s destination IPv4 address is on the same network  the device will search the ARP table for the destination IPv4 address If the destination IPv4 address is on a different network  the device will search the ARP table for the IPv4 address of the default gateway If the device locates the IPv4 address  its corresponding MAC address is used as the destination MAC address in the frame  If there is no ARP table entry is found  then the device sends an ARP request 
ARP Video - ARP RequestThis video will cover an ARP request for a MAC address 
ARP Video   ARP Operation - ARP ReplyThis video will cover an ARP reply in response to an ARP request 
ARP Video - ARP Role in Remote CommunicationsThis video will cover how an ARP request will provide a host the MAC address of the default gateway 
ARP Removing Entries from an ARP TableEntries in the ARP table are not permanent and are removed when an ARP cache timer expires after a specified period of time The duration of the ARP cache timer differs depending on the operating system ARP table entries can also be removed manually by the administrator  
ARP ARP Tables on Networking DevicesThe show ip arp command displays the ARP table on a Cisco router The arp  a command displays the ARP table on a Windows 10 PC R1  show ip arp          Protocol  Address          Age  min   Hardware Addr   Type   InterfaceInternet  192 168 10 1            -   a0e0 af0d e140  ARPA   GigabitEthernet0 0 0C \Users\PC  arp -aInterface  192 168 1 124 --- 0x10Internet Address      Physical Address      Type192 168 1 1           c8-d7-19-cc-a0-86     dynamic192 168 1 101         08-3e-0c-f5-f7-77     dynamic
ARP ARP Issues   ARP Broadcasting and ARP SpoofingARP requests are received and processed by every device on the local network Excessive ARP broadcasts can cause some reduction in performance ARP replies can be spoofed by a threat actor to perform an ARP poisoning attack Enterprise level switches include mitigation techniques to protect against ARP attacks 
ARP Packet Tracer   Examine the ARP TableIn this Packet Tracer  you will complete the following objectives Examine an ARP RequestExamine a Switch MAC Address TableExamine the ARP Process in Remote Communications
IPv6 Neighbor Discovery Video   IPv6 Neighbor DiscoveryThis video will explain the process of how IPv6 performs address resolution using ICMPv6 neighbor solicitation and neighbor advertisement messages 
IPv6 Neighbor Discovery IPv6 Neighbor Discovery MessagesIPv6 Neighbor Discovery  ND  protocol provides Address resolutionRouter discoveryRedirection servicesICMPv6 Neighbor Solicitation  NS  and Neighbor Advertisement  NA  messages are used for device-to-device messaging such as address resolution ICMTPv6 Router Solicitation  RS  and Router Advertisement  RA  messages are used for messaging between devices and routers for router discovery ICMPv6 redirect messages are used by routers for better next-hop selection 
IPv6 Neighbor Discovery IPv6 Neighbor Discovery   Address ResolutionIPv6 devices use ND to resolve the MAC address of a known IPv6 address ICMPv6 Neighbor Solicitation messages are sent using special Ethernet and IPv6 multicast addresses  
In this Packet Tracer  you will complete the following objectives Part 1  IPv6 Neighbor Discovery Local NetworkPart 2  IPv6 Neighbor discovery Remote NetworkIPv6 Neighbor Discovery Packet Tracer   IPv6 Neighbor Discovery
Devices in a Small Network Small Network TopologiesThe majority of businesses are small most of the business networks are also small A small network design is usually simple Small networks typically have a single WAN connection provided by DSL  cable  or an Ethernet connection Large networks require an IT department to maintain  secure  and troubleshoot network devices and to protect organizational data  Small networks are managed by a local IT technician or by a contracted professional 
Devices in a Small Network Device Selection for a Small NetworkLike large networks  small networks require planning and design to meet user requirements  Planning ensures that all requirements  cost factors  and deployment options are given due consideration  One of the first design considerations is the type of intermediary devices to use to support the network Factors that must be considered when selecting network devices include costspeed and types of ports interfacesexpandabilityoperating system features and services
Devices in a Small Network IP Addressing for a Small NetworkWhen implementing a network  create an IP addressing scheme and use it  All hosts and devices within an internetwork must have a unique address  Devices that will factor into the IP addressing scheme include the following End user devices - The number and type of connections  i e   wired  wireless  remote access Servers and peripherals devices  e g   printers and security cameras Intermediary devices including switches and access pointsIt is recommended that you plan  document  and maintain an IP addressing scheme based on device type  The use of a planned IP addressing scheme makes it easier to identify a type of device and to troubleshoot problems 
Devices in a Small Network Redundancy in a Small NetworkIn order to maintain a high degree of reliability  redundancy is required in the network design  Redundancy helps to eliminate single points of failure Redundancy can be accomplished by installing duplicate equipment  It can also be accomplished by supplying duplicate network links for critical areas 
Devices in a Small Network Traffic ManagementThe goal for a good network design is to enhance the productivity of the employees and minimize network downtime The routers and switches in a small network should be configured to support real-time traffic  such as voice and video  in an appropriate manner relative to other data traffic  A good network design will implement quality of service  QoS  Priority queuing has four queues  The high-priority queue is always emptied first 
Scale to Larger Networks Small Network GrowthGrowth is a natural process for many small businesses  and their networks must grow accordingly  Ideally  the network administrator has enough lead-time to make intelligent decisions about growing the network in alignment with the growth of the company To scale a network  several elements are required Network documentation - Physical and logical topologyDevice inventory - List of devices that use or comprise the networkBudget - Itemized IT budget  including fiscal year equipment purchasing budgetTraffic analysis - Protocols  applications  and services and their respective traffic requirements should be documentedThese elements are used to inform the decision-making that accompanies the scaling of a small network 
Scale to Larger Networks Protocol AnalysisIt is important to understand the type of traffic that is crossing the network as well as the current traffic flow  There are several network management tools that can be used for this purpose To determine traffic flow patterns  it is important to do the following Capture traffic during peak utilization times to get a good representation of the different traffic types Perform the capture on different network segments and devices as some traffic will be local to a particular segment Information gathered by the protocol analyzer is evaluated based on the source and destination of the traffic  as well as the type of traffic being sent  This analysis can be used to make decisions on how to manage the traffic more efficiently 
Scale to Larger Networks Employee Network UtilizationMany operating systems provide built-in tools to display such network utilization information  These tools can be used to capture a  snapshot  of information such as the following OS and OS VersionCPU utilizationRAM utilizationDrive utilizationNon-Network applicationsNetwork applicationsDocumenting snapshots for employees in a small network over a period of time is very useful to identify evolving protocol requirements and associated traffic flows  
Small Network Applications and Protocols Common ApplicationsAfter you have set it up  your network still needs certain types of applications and protocols in order to work  The network is only as useful as the applications that are on it  There are two forms of software programs or processes that provide access to the network  Network Applications  Applications that implement application-layer protocols and are able to communicate directly with the lower layers of the protocol stack Application Layer Services  For applications that are not network-aware  the programs that interface with the network and prepare the data for transfer  
Small Network Applications and Protocols Common Protocols  Cont  These network protocols comprise the fundamental toolset of a network professional  defining Processes on either end of a communication session Types of messages Syntax of the messages Meaning of informational fields How messages are sent and the expected response Interaction with the next lower layer Many companies have established a policy of using secure versions  e g   SSH  SFTP  and HTTPS  of these protocols whenever possible 
Small Network Applications and Protocols Voice and Video ApplicationsBusinesses today are increasingly using IP telephony and streaming media to communicate with customers and business partners  as well as enabling their employees to work remotely The network administrator must ensure the proper equipment is installed in the network and that the network devices are configured to ensure priority delivery The factors that a small network administrator must consider when supporting real-time applications Infrastructure - Does it have the capacity and capability to support real-time applications VoIP - VoIP is typically less expensive than IP Telephony  but at the cost of quality and features IP Telephony - This employs dedicated servers form call control and signaling Real-Time Applications - The network must support Quality of Service  QoS  mechanisms to minimize latency issues  Real-Time Transport Protocol  RTP  and Real-Time Transport Control Protocol  RTCP  and two protocols that support real-time applications 
Configure EtherChannel Configuration GuidelinesThe following guidelines and restrictions are useful for configuring EtherChannel EtherChannel support - All Ethernet interfaces must support EtherChannel with no requirement that interfaces be physically contiguous Speed and duplex - Configure all interfaces in an EtherChannel to operate at the same speed and in the same duplex mode VLAN match - All interfaces in the EtherChannel bundle must be assigned to the same VLAN or be configured as a trunk  shown in the figure  Range of VLANs - An EtherChannel supports the same allowed range of VLANs on all the interfaces in a trunking EtherChannel  If the allowed range of VLANs is not the same  the interfaces do not form an EtherChannel  even when they are set to auto or desirable mode 
Configure EtherChannel Configuration Guidelines  Cont  The figure shows a configuration that would allow an EtherChannel to form between S1 and S2 If these settings must be changed  configure them in port-channel interface configuration mode  Any configuration that is applied to the port-channel interface also affects individual interfaces  However  configurations that are applied to the individual interfaces do not affect the port-channel interface  Therefore  making configuration changes to an interface that is part of an EtherChannel link may cause interface compatibility issues The port-channel can be configured in access mode  trunk mode  most common   or on a routed port 
Configure EtherChannel LACP Configuration ExampleConfiguring EtherChannel with LACP requires the following three steps Step 1  Specify the interfaces that compose the EtherChannel group using the interface range interface global configuration mode command  The range keyword allows you to select several interfaces and configure them all together Step 2  Create the port-channel interface with the channel-group identifier mode active command in interface range configuration mode  The identifier specifies a channel group number  The mode active keywords identify this as an LACP EtherChannel configuration Step3  To change Layer 2 settings on the port-channel interface  enter port-channel interface configuration mode using the interface port-channel command  followed by the interface identifier  In the example  S1 is configured with an LACP EtherChannel  The port-channel is configured as a trunk interface with the allowed VLANs specified 
Configure EtherChannel Packet Tracer   Configure EtherChannelIn this Packet Tracer  you will complete the following objectives Configure Basic Switch SettingsConfigure an EtherChannel with Cisco PAgPConfigure and 802 3ad EtherChannelConfigure a Redundant EtherChannel Link
Module ObjectivesModule Title  EtherChannelModule Objective  Troubleshoot EtherChannel on switched links Topic TitleTopic ObjectiveEtherChannel OperationDescribe EtherChannel technology Configure EtherChannelConfigure EtherChannel Verify and Troubleshoot EtherChannelTroubleshoot EtherChannel 
EtherChannel Operation Link AggregationThere are scenarios in which more bandwidth or redundancy between devices is needed than what can be provided by a single link  Multiple links could be connected between devices to increase bandwidth  However  Spanning Tree Protocol  STP   which is enabled on Layer 2 devices like Cisco switches by default  will block redundant links to prevent switching loops A link aggregation technology is needed that allows redundant links between devices that will not be blocked by STP  That technology is known as EtherChannel EtherChannel is a link aggregation technology that groups multiple physical Ethernet links together into one single logical link  It is used to provide fault-tolerance  load sharing  increased bandwidth  and redundancy between switches  routers  and servers EtherChannel technology makes it possible to combine the number of physical links between the switches to increase the overall speed of switch-to-switch communication 
EtherChannel Operation EtherChannelEtherChannel technology was originally developed by Cisco as a LAN switch-to-switch technique of grouping several Fast Ethernet or Gigabit Ethernet ports into one logical channel  When an EtherChannel is configured  the resulting virtual interface is called a port-channel  The physical interfaces are bundled together into a port-channel interface  as shown in the figure 
EtherChannel Operation Advantages of EtherChannelEtherChannel technology has many advantages  including the following Most configuration tasks can be done on the EtherChannel interface instead of on each individual port  ensuring configuration consistency throughout the links EtherChannel relies on existing switch ports  There is no need to upgrade the link to a faster and more expensive connection to have more bandwidth Load balancing takes place between links that are part of the same EtherChannel  EtherChannel creates an aggregation that is seen as one logical link  When several EtherChannel bundles exist between two switches  STP may block one of the bundles to prevent switching loops  When STP blocks one of the redundant links  it blocks the entire EtherChannel  This blocks all the ports belonging to that EtherChannel link  Where there is only one EtherChannel link  all physical links in the EtherChannel are active because STP sees only one  logical  link EtherChannel provides redundancy because the overall link is seen as one logical connection  Additionally  the loss of one physical link within the channel does not create a change in the topology  
EtherChannel Operation Implementation RestrictionsEtherChannel has certain implementation restrictions  including the following Interface types cannot be mixed  For example  Fast Ethernet and Gigabit Ethernet cannot be mixed within a single EtherChannel Currently each EtherChannel can consist of up to eight compatibly-configured Ethernet ports  EtherChannel provides full-duplex bandwidth up to 800 Mbps  Fast EtherChannel  or 8 Gbps  Gigabit EtherChannel  between one switch and another switch or host The Cisco Catalyst 2960 Layer 2 switch currently supports up to six EtherChannels  The individual EtherChannel group member port configuration must be consistent on both devices  If the physical ports of one side are configured as trunks  the physical ports of the other side must also be configured as trunks within the same native VLAN  Additionally  all ports in each EtherChannel link must be configured as Layer 2 ports Each EtherChannel has a logical port-channel interface  A configuration applied to the port-channel interface affects all physical interfaces that are assigned to that interface 
EtherChannel Operation AutoNegotiation ProtocolsEtherChannels can be formed through negotiation using one of two protocols  Port Aggregation Protocol  PAgP  or Link Aggregation Control Protocol  LACP   These protocols allow ports with similar characteristics to form a channel through dynamic negotiation with adjoining switches Note  It is also possible to configure a static or unconditional EtherChannel without PAgP or LACP 
EtherChannel Operation PAgP OperationPAgP  pronounced  Pag - P   is a Cisco-proprietary protocol that aids in the automatic creation of EtherChannel links  When an EtherChannel link is configured using PAgP  PAgP packets are sent between EtherChannel-capable ports to negotiate the forming of a channel  When PAgP identifies matched Ethernet links  it groups the links into an EtherChannel  The EtherChannel is then added to the spanning-tree as a single port When enabled  PAgP also manages the EtherChannel  PAgP packets are sent every 30 seconds  PAgP checks for configuration consistency and manages link additions and failures between two switches  It ensures that when an EtherChannel is created  all ports have the same type of configuration Note  In EtherChannel  it is mandatory that all ports have the same speed  duplex setting  and VLAN information  Any port modification after the creation of the channel also changes all other channel ports 
EtherChannel Operation PAgP Operation  Cont  PAgP helps create the EtherChannel link by detecting the configuration of each side and ensuring that links are compatible so that the EtherChannel link can be enabled when needed  The modes for PAgP as follows On - This mode forces the interface to channel without PAgP  Interfaces configured in the on mode do not exchange PAgP packets PAgP desirable - This PAgP mode places an interface in an active negotiating state in which the interface initiates negotiations with other interfaces by sending PAgP packets PAgP auto - This PAgP mode places an interface in a passive negotiating state in which the interface responds to the PAgP packets that it receives but does not initiate PAgP negotiation The modes must be compatible on each side  If one side is configured to be in auto mode  it is placed in a passive state  waiting for the other side to initiate the EtherChannel negotiation  If the other side is also set to auto  the negotiation never starts and the EtherChannel does not form  If all modes are disabled by using the no command  or if no mode is configured  then the EtherChannel is disabled  The on mode manually places the interface in an EtherChannel  without any negotiation  It works only if the other side is also set to on  If the other side is set to negotiate parameters through PAgP  no EtherChannel forms  because the side that is set to on mode does not negotiate  No negotiation between the two switches means there is no checking to make sure that all the links in the EtherChannel are terminating on the other side  or that there is PAgP compatibility on the other switch 
EtherChannel Operation PAgP Mode Settings ExampleThe table shows the various combination of PAgP modes on S1 and S2 and the resulting channel establishment outcome S1S2Channel EstablishmentOnOnYesOnDesirable AutoNoDesirableDesirableYesDesirableAutoYesAutoDesirableYesAutoAutoNo
EtherChannel Operation LACP OperationLACP is part of an IEEE specification  802 3ad  that allows several physical ports to be bundled to form a single logical channel  LACP allows a switch to negotiate an automatic bundle by sending LACP packets to the other switch  It performs a function similar to PAgP with Cisco EtherChannel  Because LACP is an IEEE standard  it can be used to facilitate EtherChannels in multivendor environments  On Cisco devices  both protocols are supported LACP provides the same negotiation benefits as PAgP  LACP helps create the EtherChannel link by detecting the configuration of each side and making sure that they are compatible so that the EtherChannel link can be enabled when needed  The modes for LACP are as follows On - This mode forces the interface to channel without LACP  Interfaces configured in the on mode do not exchange LACP packets LACP active - This LACP mode places a port in an active negotiating state  In this state  the port initiates negotiations with other ports by sending LACP packets LACP passive - This LACP mode places a port in a passive negotiating state  In this state  the port responds to the LACP packets that it receives but does not initiate LACP packet negotiation 
EtherChannel Operation LACP Mode Settings ExampleThe table shows the various combination of LACP modes on S1 and S2 and the resulting channel establishment outcome S1S2Channel EstablishmentOnOnYesOnActive PassiveNoActiveActiveYesActivePassiveYesPassiveActiveYesPassivePassiveNo
Verify and Troubleshoot EtherChannel Verify EtherChannelAs always  when you configure devices in your network  you must verify your configuration  If there are problems  you will also need to be able to troubleshoot and fix them  There are a number of commands to verify an EtherChannel configuration The show interfaces port-channel command displays the general status of the port-channel interface  The show etherchannel summary command displays one line of information per port-channel The show etherchannel port-channel command displays information about a specific port-channel interface The show interfaces etherchannel command can provide information about the role of a physical member interface of the EtherChannel 
Verify and Troubleshoot EtherChannel Common Issues with EtherChannel ConfigurationsAll interfaces within an EtherChannel must have the same configuration of speed and duplex mode  native and allowed VLANs on trunks  and access VLAN on access-ports  Ensuring these configurations will significantly reduce network problems related to EtherChannel  Common EtherChannel issues include the following Assigned ports in the EtherChannel are not part of the same VLAN  or not configured as trunks  Ports with different native VLANs cannot form an EtherChannel Trunking was configured on some of the ports that make up the EtherChannel  but not all of them  It is not recommended that you configure trunking mode on individual ports that make up the EtherChannel  When configuring a trunk on an EtherChannel  verify the trunking mode on the EtherChannel If the allowed range of VLANs is not the same  the ports do not form an EtherChannel even when PAgP is set to the auto or desirable mode The dynamic negotiation options for PAgP and LACP are not compatibly configured on both ends of the EtherChannel 
Verify and Troubleshoot EtherChannel Troubleshoot EtherChannel ExampleIn the figure  interfaces F0 1 and F0 2 on switches S1 and S2 are connected with an EtherChannel  However  the EtherChannel is not operational 
Verify and Troubleshoot EtherChannel Troubleshoot EtherChannel Example  Cont  Step 1  View the EtherChannel Summary Information  The output of the show etherchannel summary command indicates that the EtherChannel is down  
Verify and Troubleshoot EtherChannel Troubleshoot EtherChannel Example  Cont  Step 2  View Port Channel Configuration  In the show run   begin interface port-channel output  more detailed output indicates that there are incompatible PAgP modes configured on S1 and S2 
Verify and Troubleshoot EtherChannel Troubleshoot EtherChannel Example  Cont  Step 3  Correct the Misconfiguration  To correct the issue  the PAgP mode on the EtherChannel is changed to desirable Note  EtherChannel and STP must interoperate  For this reason  the order in which EtherChannel-related commands are entered is important  which is why you see interface Port-Channel 1 removed and then re-added with the channel-group command  as opposed to directly changed  If one tries to change the configuration directly  STP errors cause the associated ports to go into blocking or errdisabled state 
Verify and Troubleshoot EtherChannel Troubleshoot EtherChannel Example  Cont  Step 4  Verify EtherChannel is Operational  The EtherChannel is now active as verified by the output of the show etherchannel summary command 
Verify and Troubleshoot EtherChannel Packet Tracer   Troubleshoot EtherChannelIn this Packet Tracer  you will complete the following Examine the Physical Layer and Correct Switch Port Mode IssuesIdentify and Correct Port Channel Assignment IssuesIdentify and Correct Port Channel Assignment Issues
Configure EtherChannel Configuration GuidelinesThe following guidelines and restrictions are useful for configuring EtherChannel EtherChannel support - All Ethernet interfaces must support EtherChannel with no requirement that interfaces be physically contiguous Speed and duplex - Configure all interfaces in an EtherChannel to operate at the same speed and in the same duplex mode VLAN match - All interfaces in the EtherChannel bundle must be assigned to the same VLAN or be configured as a trunk  shown in the figure  Range of VLANs - An EtherChannel supports the same allowed range of VLANs on all the interfaces in a trunking EtherChannel  If the allowed range of VLANs is not the same  the interfaces do not form an EtherChannel  even when they are set to auto or desirable mode 
Configure EtherChannel Configuration Guidelines  Cont  The figure shows a configuration that would allow an EtherChannel to form between S1 and S2 If these settings must be changed  configure them in port-channel interface configuration mode  Any configuration that is applied to the port-channel interface also affects individual interfaces  However  configurations that are applied to the individual interfaces do not affect the port-channel interface  Therefore  making configuration changes to an interface that is part of an EtherChannel link may cause interface compatibility issues The port-channel can be configured in access mode  trunk mode  most common   or on a routed port 
Configure EtherChannel LACP Configuration ExampleConfiguring EtherChannel with LACP requires the following three steps Step 1  Specify the interfaces that compose the EtherChannel group using the interface range interface global configuration mode command  The range keyword allows you to select several interfaces and configure them all together Step 2  Create the port-channel interface with the channel-group identifier mode active command in interface range configuration mode  The identifier specifies a channel group number  The mode active keywords identify this as an LACP EtherChannel configuration Step3  To change Layer 2 settings on the port-channel interface  enter port-channel interface configuration mode using the interface port-channel command  followed by the interface identifier  In the example  S1 is configured with an LACP EtherChannel  The port-channel is configured as a trunk interface with the allowed VLANs specified 
Configure EtherChannel Packet Tracer   Configure EtherChannelIn this Packet Tracer  you will complete the following objectives Configure Basic Switch SettingsConfigure an EtherChannel with Cisco PAgPConfigure and 802 3ad EtherChannelConfigure a Redundant EtherChannel Link
Module ObjectivesModule Title  EtherChannelModule Objective  Troubleshoot EtherChannel on switched links Topic TitleTopic ObjectiveEtherChannel OperationDescribe EtherChannel technology Configure EtherChannelConfigure EtherChannel Verify and Troubleshoot EtherChannelTroubleshoot EtherChannel 
EtherChannel Operation Link AggregationThere are scenarios in which more bandwidth or redundancy between devices is needed than what can be provided by a single link  Multiple links could be connected between devices to increase bandwidth  However  Spanning Tree Protocol  STP   which is enabled on Layer 2 devices like Cisco switches by default  will block redundant links to prevent switching loops A link aggregation technology is needed that allows redundant links between devices that will not be blocked by STP  That technology is known as EtherChannel EtherChannel is a link aggregation technology that groups multiple physical Ethernet links together into one single logical link  It is used to provide fault-tolerance  load sharing  increased bandwidth  and redundancy between switches  routers  and servers EtherChannel technology makes it possible to combine the number of physical links between the switches to increase the overall speed of switch-to-switch communication 
EtherChannel Operation EtherChannelEtherChannel technology was originally developed by Cisco as a LAN switch-to-switch technique of grouping several Fast Ethernet or Gigabit Ethernet ports into one logical channel  When an EtherChannel is configured  the resulting virtual interface is called a port-channel  The physical interfaces are bundled together into a port-channel interface  as shown in the figure 
EtherChannel Operation Advantages of EtherChannelEtherChannel technology has many advantages  including the following Most configuration tasks can be done on the EtherChannel interface instead of on each individual port  ensuring configuration consistency throughout the links EtherChannel relies on existing switch ports  There is no need to upgrade the link to a faster and more expensive connection to have more bandwidth Load balancing takes place between links that are part of the same EtherChannel  EtherChannel creates an aggregation that is seen as one logical link  When several EtherChannel bundles exist between two switches  STP may block one of the bundles to prevent switching loops  When STP blocks one of the redundant links  it blocks the entire EtherChannel  This blocks all the ports belonging to that EtherChannel link  Where there is only one EtherChannel link  all physical links in the EtherChannel are active because STP sees only one  logical  link EtherChannel provides redundancy because the overall link is seen as one logical connection  Additionally  the loss of one physical link within the channel does not create a change in the topology  
EtherChannel Operation Implementation RestrictionsEtherChannel has certain implementation restrictions  including the following Interface types cannot be mixed  For example  Fast Ethernet and Gigabit Ethernet cannot be mixed within a single EtherChannel Currently each EtherChannel can consist of up to eight compatibly-configured Ethernet ports  EtherChannel provides full-duplex bandwidth up to 800 Mbps  Fast EtherChannel  or 8 Gbps  Gigabit EtherChannel  between one switch and another switch or host The Cisco Catalyst 2960 Layer 2 switch currently supports up to six EtherChannels  The individual EtherChannel group member port configuration must be consistent on both devices  If the physical ports of one side are configured as trunks  the physical ports of the other side must also be configured as trunks within the same native VLAN  Additionally  all ports in each EtherChannel link must be configured as Layer 2 ports Each EtherChannel has a logical port-channel interface  A configuration applied to the port-channel interface affects all physical interfaces that are assigned to that interface 
EtherChannel Operation AutoNegotiation ProtocolsEtherChannels can be formed through negotiation using one of two protocols  Port Aggregation Protocol  PAgP  or Link Aggregation Control Protocol  LACP   These protocols allow ports with similar characteristics to form a channel through dynamic negotiation with adjoining switches Note  It is also possible to configure a static or unconditional EtherChannel without PAgP or LACP 
EtherChannel Operation PAgP OperationPAgP  pronounced  Pag - P   is a Cisco-proprietary protocol that aids in the automatic creation of EtherChannel links  When an EtherChannel link is configured using PAgP  PAgP packets are sent between EtherChannel-capable ports to negotiate the forming of a channel  When PAgP identifies matched Ethernet links  it groups the links into an EtherChannel  The EtherChannel is then added to the spanning-tree as a single port When enabled  PAgP also manages the EtherChannel  PAgP packets are sent every 30 seconds  PAgP checks for configuration consistency and manages link additions and failures between two switches  It ensures that when an EtherChannel is created  all ports have the same type of configuration Note  In EtherChannel  it is mandatory that all ports have the same speed  duplex setting  and VLAN information  Any port modification after the creation of the channel also changes all other channel ports 
EtherChannel Operation PAgP Operation  Cont  PAgP helps create the EtherChannel link by detecting the configuration of each side and ensuring that links are compatible so that the EtherChannel link can be enabled when needed  The modes for PAgP as follows On - This mode forces the interface to channel without PAgP  Interfaces configured in the on mode do not exchange PAgP packets PAgP desirable - This PAgP mode places an interface in an active negotiating state in which the interface initiates negotiations with other interfaces by sending PAgP packets PAgP auto - This PAgP mode places an interface in a passive negotiating state in which the interface responds to the PAgP packets that it receives but does not initiate PAgP negotiation The modes must be compatible on each side  If one side is configured to be in auto mode  it is placed in a passive state  waiting for the other side to initiate the EtherChannel negotiation  If the other side is also set to auto  the negotiation never starts and the EtherChannel does not form  If all modes are disabled by using the no command  or if no mode is configured  then the EtherChannel is disabled  The on mode manually places the interface in an EtherChannel  without any negotiation  It works only if the other side is also set to on  If the other side is set to negotiate parameters through PAgP  no EtherChannel forms  because the side that is set to on mode does not negotiate  No negotiation between the two switches means there is no checking to make sure that all the links in the EtherChannel are terminating on the other side  or that there is PAgP compatibility on the other switch 
EtherChannel Operation PAgP Mode Settings ExampleThe table shows the various combination of PAgP modes on S1 and S2 and the resulting channel establishment outcome S1S2Channel EstablishmentOnOnYesOnDesirable AutoNoDesirableDesirableYesDesirableAutoYesAutoDesirableYesAutoAutoNo
EtherChannel Operation LACP OperationLACP is part of an IEEE specification  802 3ad  that allows several physical ports to be bundled to form a single logical channel  LACP allows a switch to negotiate an automatic bundle by sending LACP packets to the other switch  It performs a function similar to PAgP with Cisco EtherChannel  Because LACP is an IEEE standard  it can be used to facilitate EtherChannels in multivendor environments  On Cisco devices  both protocols are supported LACP provides the same negotiation benefits as PAgP  LACP helps create the EtherChannel link by detecting the configuration of each side and making sure that they are compatible so that the EtherChannel link can be enabled when needed  The modes for LACP are as follows On - This mode forces the interface to channel without LACP  Interfaces configured in the on mode do not exchange LACP packets LACP active - This LACP mode places a port in an active negotiating state  In this state  the port initiates negotiations with other ports by sending LACP packets LACP passive - This LACP mode places a port in a passive negotiating state  In this state  the port responds to the LACP packets that it receives but does not initiate LACP packet negotiation 
EtherChannel Operation LACP Mode Settings ExampleThe table shows the various combination of LACP modes on S1 and S2 and the resulting channel establishment outcome S1S2Channel EstablishmentOnOnYesOnActive PassiveNoActiveActiveYesActivePassiveYesPassiveActiveYesPassivePassiveNo
Verify and Troubleshoot EtherChannel Verify EtherChannelAs always  when you configure devices in your network  you must verify your configuration  If there are problems  you will also need to be able to troubleshoot and fix them  There are a number of commands to verify an EtherChannel configuration The show interfaces port-channel command displays the general status of the port-channel interface  The show etherchannel summary command displays one line of information per port-channel The show etherchannel port-channel command displays information about a specific port-channel interface The show interfaces etherchannel command can provide information about the role of a physical member interface of the EtherChannel 
Verify and Troubleshoot EtherChannel Common Issues with EtherChannel ConfigurationsAll interfaces within an EtherChannel must have the same configuration of speed and duplex mode  native and allowed VLANs on trunks  and access VLAN on access-ports  Ensuring these configurations will significantly reduce network problems related to EtherChannel  Common EtherChannel issues include the following Assigned ports in the EtherChannel are not part of the same VLAN  or not configured as trunks  Ports with different native VLANs cannot form an EtherChannel Trunking was configured on some of the ports that make up the EtherChannel  but not all of them  It is not recommended that you configure trunking mode on individual ports that make up the EtherChannel  When configuring a trunk on an EtherChannel  verify the trunking mode on the EtherChannel If the allowed range of VLANs is not the same  the ports do not form an EtherChannel even when PAgP is set to the auto or desirable mode The dynamic negotiation options for PAgP and LACP are not compatibly configured on both ends of the EtherChannel 
Verify and Troubleshoot EtherChannel Troubleshoot EtherChannel ExampleIn the figure  interfaces F0 1 and F0 2 on switches S1 and S2 are connected with an EtherChannel  However  the EtherChannel is not operational 
Verify and Troubleshoot EtherChannel Troubleshoot EtherChannel Example  Cont  Step 1  View the EtherChannel Summary Information  The output of the show etherchannel summary command indicates that the EtherChannel is down  
Verify and Troubleshoot EtherChannel Troubleshoot EtherChannel Example  Cont  Step 2  View Port Channel Configuration  In the show run   begin interface port-channel output  more detailed output indicates that there are incompatible PAgP modes configured on S1 and S2 
Verify and Troubleshoot EtherChannel Troubleshoot EtherChannel Example  Cont  Step 3  Correct the Misconfiguration  To correct the issue  the PAgP mode on the EtherChannel is changed to desirable Note  EtherChannel and STP must interoperate  For this reason  the order in which EtherChannel-related commands are entered is important  which is why you see interface Port-Channel 1 removed and then re-added with the channel-group command  as opposed to directly changed  If one tries to change the configuration directly  STP errors cause the associated ports to go into blocking or errdisabled state 
Verify and Troubleshoot EtherChannel Troubleshoot EtherChannel Example  Cont  Step 4  Verify EtherChannel is Operational  The EtherChannel is now active as verified by the output of the show etherchannel summary command 
Verify and Troubleshoot EtherChannel Packet Tracer   Troubleshoot EtherChannelIn this Packet Tracer  you will complete the following Examine the Physical Layer and Correct Switch Port Mode IssuesIdentify and Correct Port Channel Assignment IssuesIdentify and Correct Port Channel Assignment Issues
Module ObjectivesModule Title  FHRP ConceptsModule Objective   Explain how FHRPs provide default gateway services in a redundant network Topic TitleTopic ObjectiveFirst Hop Redundancy ProtocolsExplain the purpose and operation of first hop redundancy protocols HSRPExplain how HSRP operates 
First Hop Redundancy Protocols Default Gateway LimitationsEnd devices are typically configured with a single default gateway IPv4 address  If the default gateway router interface fails  LAN hosts lose outside LAN connectivity This occurs even if a redundant router or Layer 3 switch that could serve as a default gateway exists First hop redundancy protocols  FHRPs  are mechanisms that provide alternate default gateways in switched networks where two or more routers are connected to the same VLANs  
First Hop Redundancy Protocols Router RedundancyOne way to prevent a single point of failure at the default gateway is to implement a virtual router  To implement this type of router redundancy  multiple routers are configured to work together to present the illusion of a single router to the hosts on the LAN  By sharing an IP address and a MAC address  two or more routers can act as a single virtual router The IPv4 address of the virtual router is configured as the default gateway for the workstations on a specific IPv4 segment  When frames are sent from host devices to the default gateway  the hosts use ARP to resolve the MAC address that is associated with the IPv4 address of the default gateway  The ARP resolution returns the MAC address of the virtual router  Frames that are sent to the MAC address of the virtual router can then be physically processed by the currently active router within the virtual router group  A protocol is used to identify two or more routers as the devices that are responsible for processing frames that are sent to the MAC or IP address of a single virtual router  Host devices send traffic to the address of the virtual router  The physical router that forwards this traffic is transparent to the host devices 
First Hop Redundancy Protocols Router Redundancy  Cont  A redundancy protocol provides the mechanism for determining which router should take the active role in forwarding traffic  It also determines when the forwarding role must be taken over by a standby router  The transition from one forwarding router to another is transparent to the end devices The ability of a network to dynamically recover from the failure of a device acting as a default gateway is known as first-hop redundancy 
First Hop Redundancy Protocols Steps for Router FailoverWhen the active router fails  the redundancy protocol transitions the standby router to the new active router role  as shown in the figure  These are the steps that take place when the active router fails The standby router stops seeing Hello messages from the forwarding router The standby router assumes the role of the forwarding router Because the new forwarding router assumes both the IPv4 and MAC addresses of the virtual router  the host devices see no disruption in service 
First Hop Redundancy Protocols FHRP OptionsFHRP OptionsDescriptionHot Standby Router Protocol  HSRP HRSP is a Cisco-proprietary FHRP that is designed to allow for transparent failover of a first-hop IPv4 device  HSRP is used in a group of routers for selecting an active device and a standby device  The active device is the device that is used for routing-packets  the standby device is the device that takes over when the active device fails  or when pre-set conditions are met  HSRP for IPv6This is a Cisco-proprietary FHRP that provides the same functionality of HSRP  but in an IPv6 environment  An HSRP IPv6 group has a virtual MAC address derived from the HSRP group number and a virtual IPv6 link-local address derived from the HSRP virtual MAC address  Periodic router advertisements  RAs  are sent for the HSRP virtual IPv6 link-local address when the HSRP group is active  When the group becomes inactive  these RAs stop after a final RA is sent Virtual Router Redundancy Protocol version 2  VRRPv2 This is a non-proprietary election protocol that dynamically assigns responsibility for one or more virtual routers to the VRRP routers on an IPv4 LAN  This allows several routers on a multiaccess link to use the same virtual IPv4 address  In a VRRP configuration  one router is elected as the virtual router master  with the other routers acting as backups  in case the virtual router master fails VRRPv3This provides the capability to support IPv4 and IPv6 addresses  VRRPv3 works in multi-vendor environments and is more scalable than VRRPv2 Gateway Load Balancing Protocol  GLBP This is a Cisco-proprietary FHRP that protects data traffic from a failed router or circuit  like HSRP and VRRP  while also allowing load-balancing  also called load sharing  between a group of redundant routers GLBP for IPv6This is a Cisco-proprietary FHRP that provides the same functionality of GLBP  but in an IPv6 environment  GLBP for IPv6 provides automatic router backup for IPv6 hosts configured with a single default gateway on a LAN  Multiple first-hop routers on the LAN combine to offer a single virtual first-hop IPv6 router while sharing the IPv6 packet forwarding load ICMP Router Discovery Protocol  IRDP Specified in RFC 1256  IRDP is a legacy FHRP solution  IRDP allows IPv4 hosts to locate routers that provide IPv4 connectivity to other  nonlocal  IP networks 
HSRP HSRP OverviewCisco provides HSRP and HSRP for IPv6 as a way to avoid losing outside network access if your default router fails  HSRP is a Cisco-proprietary FHRP that is designed to allow for transparent failover of a first-hop IP device HSRP ensures high network availability by providing first-hop routing redundancy for IP hosts on networks configured with an IP default gateway address  HSRP is used in a group of routers for selecting an active device and a standby device  In a group of device interfaces  the active device is the device that is used for routing-packets  the standby device is the device that takes over when the active device fails  or when pre-set conditions are met  The function of the HSRP standby router is to monitor the operational status of the HSRP group and to quickly assume packet-forwarding responsibility if the active router fails 
HSRP HSRP Priority and PreemptionThe role of the active and standby routers is determined during the HSRP election process  By default  the router with the numerically highest IPv4 address is elected as the active router  However  it is always better to control how your network will operate under normal conditions rather than leaving it to chance HSRP priority can be used to determine the active router  The router with the highest HSRP priority will become the active router  By default  the HSRP priority is 100 If the priorities are equal  the router with the numerically highest IPv4 address is elected as the active router To configure a router to be the active router  use the standby priority interface command  The range of the HSRP priority is 0 to 255 
HSRP HSRP Priority and Preemption  Cont  By default  after a router becomes the active router  it will remain the active router even if another router comes online with a higher HSRP priority To force a new HSRP election process to take place when a higher priority router comes online  preemption must be enabled using the standby preempt interface command  Preemption is the ability of an HSRP router to trigger the re-election process  With preemption enabled  a router that comes online with a higher HSRP priority will assume the role of the active router Preemption only allows a router to become the active router if it has a higher priority  A router enabled for preemption  with equal priority but a higher IPv4 address will not preempt an active router  Refer to the topology in the figure Note  With preemption disabled  the router that boots up first will become the active router if there are no other routers online during the election process 
HSRP HSRP States and TimesHSRP StateDescriptionInitialThis state is entered through a configuration change or when an interface first becomes available LearnThe router has not determined the virtual IP address and has not yet seen a hello message from the active router  In this state  the router waits to hear from the active router ListenThe router knows the virtual IP address  but the router is neither the active router nor the standby router  It listens for hello messages from those routers SpeakThe router sends periodic hello messages and actively participates in the election of the active and or standby router StandbyThe router is a candidate to become the next active router and sends periodic hello messages The active and standby HSRP routers send hello-packets to the HSRP group multicast address every 3 seconds by default  The standby router will become active if it does not receive a hello message from the active router after 10 seconds  You can lower these timer settings to speed up the failover or preemption  However  to avoid increased CPU usage and unnecessary standby state changes  do not set the hello-timer below 1 second or the hold timer below 4 seconds 
IPv4 Packet IPv4 Packet HeaderIPv4 is the primary communication protocol for the network-layer The network header has many purposes It ensures the packet is sent in the correct direction  to the destination  It contains information for network-layer processing in various fields The information in the header is used by all layer-3 devices that handle the packet
IPv4 Packet IPv4 Packet Header FieldsThe IPv4 network header characteristics It is in binary Contains several fields of informationDiagram is read from left to right  4 bytes per lineThe two most important fields are the source and destination Protocols may have may have one or more functions 
IPv4 Packet IPv4 Packet Header FieldsSignificant fields in the IPv4 header FunctionDescriptionVersionThis will be for v4  as opposed to v6  a 4 bit field  0100  Differentiated ServicesUsed for QoS  DiffServ   DS field or the older IntServ   ToS or Type of Service Header ChecksumDetect corruption in the IPv4 headerTime to Live  TTL Layer 3 hop count  When it becomes zero the router will discard the packet ProtocolI D s next level protocol  ICMP  TCP  UDP  etc Source IPv4 Address32 bit source addressDestination IPV4 Address32 bit destination address
IPv4 Packet Video   Sample IPv4 Headers in WiresharkThis video will cover the following IPv4 Ethernet packets in WiresharkThe control informationThe difference between packets
IPv6 Packets Limitations of IPv4IPv4 has three major limitations IPv4 address depletion   We have basically run out of IPv4 addressing Lack of end-to-end connectivity   To make IPv4 survive this long  private addressing and NAT were created  This ended direct communications with public addressing Increased network complexity   NAT was meant as temporary solution and creates issues on the network as a side effect of manipulating the network headers addressing  NAT causes latency and troubleshooting issues 
IPv6 Packets IPv6 OverviewIPv6 was developed by Internet Engineering Task Force  IETF  IPv6 overcomes the limitations of IPv4 Improvements that IPv6 provides Increased address space   based on 128 bit address  not 32 bitsImproved packet handling   simplified header with fewer fieldsEliminates the need for NAT   since there is a huge amount of addressing  there is no need to use private addressing internally and be mapped to a shared public address
IPv6 Packets IPv4 Packet Header Fields in the IPv6 Packet HeaderThe IPv6 header is simplified  but not smaller The header is fixed at 40 Bytes or octets long Several IPv4 fields were removed to improve performance Some IPv4 fields were removed to improve performance FlagFragment OffsetHeader Checksum
IPv6 Packets IPv6 Packet HeaderSignificant fields in the IPv4 header FunctionDescriptionVersionThis will be for v6  as opposed to v4  a 4 bit field  0110  Traffic ClassUsed for QoS  Equivalent to DiffServ   DS field Flow LabelInforms device to handle identical flow labels the same way  20 bit fieldPayload LengthThis 16-bit field indicates the length of the data portion or payload of the IPv6 packetNext HeaderI D s next level protocol  ICMP  TCP  UDP  etc Hop LimitReplaces TTL field Layer 3 hop countSource IPv4 Address128 bit source addressDestination IPV4 Address128 bit destination address
IPv6 Packets IPv6 Packet Header  Cont  IPv6 packet may also contain extension headers  EH   EH headers characteristics  provide optional network-layer informationare optionalare placed between IPv6 header and the payloadmay be used for fragmentation  security  mobility support  etc Note  Unlike IPv4  routers do not fragment IPv6 packets 
IPv6 Packets Video   Sample IPv6 Headers in WiresharkThis video will cover the following IPv6 Ethernet packets in WiresharkThe control informationThe difference between packets
Module ObjectivesModule Title  Number SystemsModule Objective  Calculate numbers between decimal  binary  and hexadecimal systems Topic TitleTopic ObjectiveBinary Number SystemCalculate numbers between decimal and binary systems Hexadecimal Number SystemCalculate numbers between decimal and hexadecimal systems 
Binary Number System Binary and IPv4 AddressesBinary numbering system consists of 1s and 0s  called bitsDecimal numbering system consists of digits 0 through 9Hosts  servers  and network equipment using binary-addressing to identify each other Each address is made up of a string of 32 bits  divided into four sections called octets Each octet contains 8 bits  or 1 byte  separated by a dot For ease of use by people  this dotted notation is converted to dotted decimal 
Binary Number System Video   Convert Between Binary and Decimal Numbering SystemsThis video will cover the following Positional notation reviewPowers of 10 reviewDecimal   base 10 numbering reviewBinary   base 2 numbering reviewConvert an P address in binary to decimal numbering
Binary Number System Binary Positional NotationPositional notation means that a digit represents different values depending on the  position  the digit occupies in the sequence of numbers The decimal positional notation system operates as shown in the tables below Radix10101010Position in NumberCalculate 103  102  101  100 Position Value100010010ThousandsHundredsTensOnesPositional Value100010010Decimal Number  1234 Calculate1 x 10002 x 1003 x 104 x 1Add them up 1000  200  30  4Result1 234
Binary Number System Binary Positional Notation  Cont  The binary positional notation system operates as shown in the tables below RadixPosition in NumberCalculate 27  26  25  24  23  22  21  20 Position Value128643216Positional Value128643216Binary Number  11000000 Calculate1x1281x640x320x160x80x40x20x1Add Them Up 128  64  0  0  0  0  0  0Result192
Binary Number System Convert Binary to DecimalConvert 11000000 10101000 00001011 00001010 to decimal Positional Value128643216Binary Number  11000000 Calculate1x1281x640x320x160x80x40x20x1Add Them Up 128  64  0  0  0  0  0  0Binary Number  10101000 Calculate1x1280x641x320x161x80x40x20x1Add Them Up 128  0  32  0  8  0  0  0Binary Number  00001011 Calculate0x1280x640x320x161x80x41x21x1Add Them Up   0  0  0  8  0  2  1Binary Number  00001010 Calculate0x1280x640x320x161x80x41x20x1Add Them Up   0  0  0  8  0  2  01921681110192 168 11 10
Binary Number System Decimal to Binary ConversionThe binary positional value table is useful in converting a dotted decimal IPv4 address to binary Start in the 128 position  the most significant bit   Is the decimal number of the octet  n  equal to or greater than 128 If no  record a binary 0 in the 128 positional value and move to the 64 positional value If yes  record a binary 1 in the 128 positional value  subtract 128 from the decimal number  and move to the 64 positional value Repeat these steps through the 1 positional value 
Binary Number System Decimal to Binary Conversion ExampleConvert decimal 168 to binaryIs 168   128 Yes  enter 1 in 128 position and subtract 128  168-128 40 Is 40   64 No  enter 0 in 64 position and move onIs 40   32 Yes  enter 1 in 32 position and subtract 32  40-32 8 Is 8   16 No  enter 0 in 16 position and move onIs 8   8 Equal  Enter 1 in 8 position and subtract 8  8-8 0 No values left  Enter 0 in remaining binary positions128643216Decimal 168 is written as 10101000 in binary
Binary Number System IPv4 AddressesRouters and computers only understand binary  while humans work in decimal  It is important for you to gain a thorough understanding of these two numbering systems and how they are used in networking 
Hexadecimal Number System Hexadecimal and IPv6 AddressesTo understand IPv6 addresses  you must be able to convert hexadecimal to decimal and vice versa Hexadecimal is a base sixteen numbering system  using the digits 0 through 9 and letters A to F It is easier to express a value as a single-hexadecimal-digit than as four binary bit Hexadecimal is used to represent IPv6 addresses and MAC addresses 
Hexadecimal Number System Hexadecimal and IPv6 Addresses  Cont  IPv6 addresses are 128 bits in length  Every 4 bits is represented by a single-hexadecimal-digit  That makes the IPv6 address a total of 32 hexadecimal values The figure shows the preferred method of writing out an IPv6 address  with each X representing four hexadecimal values Each four hexadecimal character group is referred to as a hextet 
Hexadecimal Number System Video   Converting Between Hexadecimal and Decimal Numbering SystemsThis video will cover the following Characteristics of the Hexadecimal SystemConvert from Hexadecimal to DecimalConvert from Decimal to Hexadecimal
Hexadecimal Number System Decimal to Hexadecimal ConversionsFollow the steps listed to convert decimal numbers to hexadecimal values Convert the decimal number to 8-bit binary strings Divide the binary strings in groups of four starting from the rightmost position Convert each four binary numbers into their equivalent hexadecimal digit For example  168 converted into hex using the three-step process 168 in binary is 10101000 10101000 in two groups of four binary-digits is 1010 and 1000 1010 is hex A and 1000 is hex 8  so 168 is A8 in hexadecimal 
Hexadecimal Number System Hexadecimal to Decimal ConversionsFollow the steps listed to convert hexadecimal numbers to decimal values Convert the hexadecimal number to 4-bit binary strings Create 8-bit binary grouping starting from the rightmost position Convert each 8-bit binary grouping into their equivalent decimal digit For example  D2 converted into decimal using the three-step process D2 in 4-bit binary strings is 1110 and 0010 1110 and 0010 is 11100010 in an 8-bit grouping 11100010 in binary is equivalent to 210 in decimal  so D2 is 210 is decimal
APIs Video - APIsThis video will cover the following Define APISee examples of popular APIs SOAPRESTNETCONFRESTCONFExecute an API call in a browser and in Postman 
APIs The API ConceptAn API is software that allows other applications to access its data or services  It is a set of rules describing how one application can interact with another  and the instructions to allow the interaction to occur  The user sends an API request to a server asking for specific information and receives an API response in return from the server along with the requested information An API is similar to a waiter in a restaurant  as shown in the following figure  
APIs An API ExampleTo really understand how APIs can be used to provide data and services  we will look at two options for booking airline reservations  The first option uses the web site of a specific airline  Using the airline s web site  the user enters the information to make a reservation request  The web site interacts directly with the airline s own database and provides the user with information matching the user s request 
APIs An API Example  Cont  A travel site can access this same information  not only from a specific airline but a variety of airlines  In this case  the user enters in similar reservation information  The travel service web site interacts with the various airline databases using APIs provided by each airline  The travel service uses each airline API to request information from that specific airline  and then it displays the information from all the airlines on the its web page  The API acts as a kind of messenger between the requesting application and the application on the server that provides the data or service  The message from the requesting application to the server where the data resides is known as an API call 
APIs Open  Internal  and Partner APIsAn important consideration when developing an API is the distinction between open  internal  and partner APIs Open APIs or Public APIs - These APIs are publicly available and can be used with no restrictions  Because these APIs are public  many API providers require the user to get a free key  or token  prior to using the API  This is to help control the number of API requests they receive and process  Internal or Private APIs - These are APIs that are used by an organization or company to access data and services for internal use only  An example of an internal API is allowing authorized salespeople access to internal sales data on their mobile devices Partner APIs - These are APIs that are used between a company and its business partners or contractors to facilitate business between them  The business partner must have a license or other form of permission to use the API  A travel service using an airline s API is an example of a partner API 
APIs Types of Web Service APIsA web service is a service that is available over the internet  using the World Wide Web  There are four types of web service APIs Simple Object Access Protocol  SOAP Representational State Transfer  REST eXtensible Markup Language-Remote Procedure Call  XML-RPC JavaScript Object Notation-Remote Procedure Call  JSON-RPC CharacteristicSOAPRESTXML-RPCJSON-RPCData FormatXMLJSON  XML  YAML  and othersXMLJSONFirst released1998200019982005StrengthsWell-establishedFlexible formatting and most widely usedWell-established  simplicitySimplicity
Module ObjectivesModule Title  Network VirtualizationModule Objective  Explain the purpose and characteristics of network virtualization Topic TitleTopic ObjectiveCloud ComputingExplain the importance of cloud-computing VirtualizationExplain the importance of virtualization Virtual Network InfrastructureDescribe the virtualization of network devices and services Software-Defined NetworkingDescribe software-defined networking ControllersDescribe controllers used in network-programming 
Automation Overview Video - Automation EverywhereWe now see automation everywhere  from self-serve checkouts at stores and automatic building environmental controls  to autonomous cars and planes  How many automated systems do you encounter in a single day 
Automation Overview The Increase in AutomationThese are some of the benefits of automation Machines can work 24 hours a day without breaks  which results in greater output Machines provide a more uniform product Automation allows the collection of vast amounts of data that can be quickly analyzed to provide information which can help guide an event or process Robots are used in dangerous conditions such as mining  firefighting  and cleaning up industrial accidents  This reduces the risk to humans Under certain circumstances  smart devices can alter their behavior to reduce energy usage  make a medical diagnosis  and improve automobile driving safety 
Automation Overview Thinking DevicesMany devices now incorporate smart technology to help to govern their behavior  This can be as simple as a smart appliance lowering its power consumption during periods of peak demand or as complex as a self-driving car Whenever a device takes a course of action based on an outside piece of information  then that device is referred to as a smart device  Many devices that we interact with now have the word smart in their names  This indicates that the device has the ability to alter its behavior depending on its environment In order for devices to  think   they need to be programmed using network automation tools 
Configuration Management Tools Video - Configuration Management ToolsThis video will cover the following Compare configuration management tools including Ansible  Puppet  Chef and SaltStack Review plays  tasks  modules  parameters  and variables in a sample playbook
Configuration Management Tools Traditional Network ConfigurationNetwork devices have traditionally been configured by a network administrator using the CLI  Whenever there is a change or new feature  the necessary configuration commands must be manually entered on all of the appropriate devices  This becomes a major issue on larger networks or with more complex configurations 
Configuration Management Tools Traditional Network ConfigurationSimple Network Management Protocol  SNMP  lets administrators manage nodes on an IP network  With a network management station  NMS   network administrators use SNMP to monitor and manage network performance  find and solve network problems  and perform queries for statistics  SNMP is not typically used for configuration due to security concerns and difficulty in implementation You can also use APIs to automate the deployment and management of network resources  Instead of manually configuring ports  access lists  QoS  and load-balancing policies  you can use tools to automate configurations  
Configuration Management Tools Network AutomationWe are rapidly moving away from a world where a network administrator manages a few dozen network devices  to one where they are deploying and managing a great number of complex network devices  both physical and virtual  with the help of software  This transformation is quickly spreading to all places in the network  There are new and different methods for network administrators to automatically monitor  manage  and configure the network  These include protocols and technologies such as REST  Ansible  Puppet  Chef  Python  JSON  XML  and more 
Configuration Management Tools Configuration Management ToolsConfiguration management tools make use of RESTful API requests to automate tasks and can scale across thousands of devices  These are some characteristics of the network that administrators benefit from automating Software and version controlDevice attributes such as names  addressing  and securityProtocol configurationsACL configurationsConfiguration management tools typically include automation and orchestration  Automation is when a tool automatically performs a task on a system  Orchestration is the arranging of the automated tasks that results in a coordinate process or workflow 
Configuration Management Tools Configuration Management Tools  Cont  There are several tools available to make configuration management easier AnsibleChefPuppetSaltStackThe goal of all of these tools is to reduce the complexity and time involved in configuring and maintaining a large-scale network infrastructure with hundreds  even thousands of devices  These same tools can benefit smaller networks as well 
Configuration Management Tools Compare Ansible  Chef  Puppet  and SaltStackAnsible  Chef  Puppet  and SaltStack all come with API documentation for configuring RESTful API requests  All of them support JSON and YAML as well as other data-formats  The following table shows a summary of a comparison of major characteristics of Ansible  Puppet  Chef  and SaltStack configuration management tools CharacteristicAnsibleChefPuppetSaltStackWhat programming language Python   YAMLRubyRubyPythonAgent-based or agentless AgentlessAgent-basedSupports bothSupports bothHow are devices managed Any device can be  controller Chef MasterPuppet MasterSalt MasterWhat is created by the tool PlaybookCookbookManifestPillar
Data Formats Video - Data FormatsThis video covers the following HTMLXMLJSONYAML
Data Formats The Data Formats ConceptData formats are simply a way to store and exchange data in a structured format  One such format is called Hypertext Markup Language  HTML   HTML is a standard markup language for describing the structure of web pages These are some common data-formats that are used in many applications including network automation and programmability JavaScript Object Notation  JSON eXtensible Markup Language  XML YAML Ain t Markup Language  YAML The data format that is selected will depend on the format that is used by the application  tool  or script that you are using  Many systems will be able to support more than one data format  which allows the user to choose their preferred one 
Data Formats Data Format RulesData formats have rules and structure similar to what we have with programming and written languages  Each data format will have specific characteristics Syntax  which includes the types of brackets used  such as                the use of white space  or indentation  quotes  commas  and more How objects are represented  such as characters  strings  lists  and arrays How key value pairs are represented  The key is usually on the left side and it identifies or describes the data  The value on the right is the data itself and can be a character  string  number  list or another type of data 
Data Formats Compare Data FormatsJSON Format   message    success     timestamp   1560789260    iss position      latitude    25 9990       longitude    -132 6992    YAML Formatmessage  success timestamp  1560789260 iss position  latitude   25 9990   longitude   -132 6992 XML Format  xml version  1 0  encoding  UTF-8      root   message success  message   timestamp 1560789260  timestamp  iss position   latitude 25 9990  latitude   longitude -132 6992  longitude    iss position    root 
Data Formats JSON Data Format JSON is a human readable data format used by applications for storing  transferring and reading data  JSON is a very popular format used by web services and APIs to provide public data  This is because it is easy to parse and can be used with most modern programming languages  including Python 
Data Formats JSON Data Format  Cont  Compare the IOS output above to the output in JSON format  Notice that each object  each key value pair  is a different piece of data about the interface including its name  a description  and whether the interface is enabled GigabitEthernet0 0 0 is up  line protocol is up  connected  Description  Wide Area Network Internet address is 172 16 0 2 24   ietf-interfaces interface      name    GigabitEthernet0 0 0   description    Wide Area Network    enabled   true   ietf-ip ipv4      address        ip    172 16 0 2    netmask    255 255 255 0          
Data Formats JSON Syntax RulesThese are some of the characteristics of JSON It uses a hierarchical structure and contains nested values It uses braces     to hold objects and square-brackets     hold arrays Its data is written as key value pairs With JSON  the data known as an object is one or more key value pairs enclosed in braces      The syntax for a JSON object includes Keys must be strings within double quotation marks     Values must be a valid JSON data type  string  number  array  Boolean  null  or another object  Keys and values are separated by a colon Multiple key value pairs within an object are separated by commas White space is not significant 
Data Formats JSON Syntax Rules  Cont  At times a key may contain more than one value  This is known as an array  An array in JSON is an ordered list of values  Characteristics of arrays in JSON include The key followed by a colon and a list of values enclosed in square-brackets     The array is an ordered list of values The array can contain multiple value types including a string  number  Boolean  object or another array inside the array Each value in the array is separated by a comma 
Data Formats JSON Syntax Rules  Cont  For example  a list of IPv4 addresses might look like the following output  The key is  addresses   Each item in the list is a separate object  separated by braces      The objects are two key value pairs  an IPv4 address   ip   and a subnet-mask   netmask   separated by a comma  The array of objects in the list is also separated by a comma following the closing brace for each object     addresses        ip    172 16 0 2    netmask    255 255 255 0        ip    172 16 0 3    netmask    255 255 255 0        ip    172 16 0 4    netmask    255 255 255 0      
Data Formats YAML Data FormatYAML is another type of human readable data format used by applications for storing  transferring  and reading data  Some of the characteristic of YAML include It is like JSON and is considered a superset of JSON It has a minimalist format making it easy to both read and write It uses indentation to define its structure  without the use of brackets or commas 
Data Formats YAML Data Format  Cont  IOS output in JSON is to the left  The same data in YAML format is below  It is easier to read  Similar to JSON  a YAML object is one or more key value pairs  Key value pairs are separated by a colon without the use of quotation marks  In YAML  a hyphen is used to separate each element in a list    ietf-interfaces interface      name    GigabitEthernet2    description    Wide Area Network    enabled   true   ietf-ip ipv4      address        ip    172 16 0 2    netmask    255 255 255 0        ip    172 16 0 3    netmask    255 255 255 0        ip    172 16 0 4    netmask    255 255 255 0          ietf-interfaces interface  name  GigabitEthernet2 description  Wide Area Network enabled  true ietf-ip ipv4  address  - ip  172 16 0 2 netmask  255 255 255 0 - ip  172 16 0 3 netmask  255 255 255 0 - ip  172 16 0 4 netmask  255 255 255 0
Data Formats XML Data FormatXML is one more type of human readable data format used to store  transfer  and read data by applications  Some of the characteristics of XML include It is like HTML   which is the standardized markup language for creating web pages and web applications It is self-descriptive  It encloses data within a related set of tags   tag data  tag Unlike HTML  XML uses no predefined tags or document structure XML objects are one or more key value pairs  with the beginning tag used as the name of the key   key value  key 
Data Formats XML Data Format  Cont  The output shows the same data for GigabitEthernet2 formatted as an XML data structure  Notice how the values are enclosed within the object tags  In this example  each key value pair is on a separate line and some lines are indented  This is not required but is done for readability  The list uses repeated instances of  tag   tag  for each element in the list  The elements within these repeated instances represent one or more key value pairs   xml version  1 0  encoding  UTF-8      ietf-interfaces interface  name GigabitEthernet2  name   description Wide Area Network  description  enabled true  enabled   ietf-ip ipv4   address   ip 172 16 0 2  ip   netmask 255 255 255 0  netmask    address   address   ip 172 16 0 3  ip   netmask 255 255 255 0  netmask    address   address   ip 172 16 0 4  ip   netmask 255 255 255 0  netmask    address    ietf-ip ipv4    ietf-interfaces interface 
IBN and Cisco DNA Center Video - Intent-Based NetworkingYou have learned of the many tools and software that can help you automate your network  Intent-Based Networking  IBN  and Cisco Digital Network Architecture  DNA  Center can help you bring it all together to create an automated network Play the video by Cisco s John Apostolopoulos and Anand Oswal explaining how artificial intelligence and intent-based networking  IBN  can improve networks 
IBN and Cisco DNA Center Intent-Based Networking OverviewIBN is the emerging industry model for the next generation of networking  IBN builds on Software-Defined Networking  SDN   transforming a hardware-centric and manual approach to designing and operating networks to one that is software-centric and fully automated Business objectives for the network are expressed as intent  IBN captures business intent and uses analytics  machine learning  and automation to align the network continuously and dynamically as business needs change IBN captures and translates business intent into network policies that can be automated and applied consistently across the network 
IBN and Cisco DNA Center Intent-Based Networking Overview  Cont  Cisco views IBN as having three essential functions  translation  activation  and assurance  These functions interact with the underlying physical and virtual infrastructure  as shown in the figure Translation - The translation function enables the network administrator to express the expected networking behavior that will best support the business intent Activation - The captured intent then needs to be interpreted into policies that can be applied across the network  The activation function installs these policies into the physical and virtual network infrastructure using networkwide automation Assurance - In order to continuously check that the expressed intent is honored by the network at any point in time  the assurance function maintains a continuous validation-and-verification loop 
IBN and Cisco DNA Center Network Infrastructure as FabricFrom the perspective of IBN  the physical and virtual network infrastructure is a fabric  an overlay that represents the logical topology used to virtually connect to devices  The overlay limits the number of devices the network administrator must program and provides services and alternative forwarding methods not controlled by the underlying physical devices  The overlay is where encapsulation protocols like IPsec and CAPWAP occur  Using an IBN solution  the network administrator can use policies to specify exactly what happens in the overlay control-plane  Notice that how the switches are physically connected is not a concern of the overlay 
IBN and Cisco DNA Center Network Infrastructure as Fabric  Cont  The underlay network is the physical topology that includes all hardware required to meet business objectives  The underlay reveals additional devices and specifies how these devices are connected  End points  such as the servers in the figure  access the network through the Layer 2 devices  The underlay control-plane is responsible for simple forwarding tasks 
IBN and Cisco DNA Center Cisco Digital Network Architecture  DNA Cisco implements the IBN fabric using Cisco DNA  The business intent is securely deployed into the network infrastructure  the fabric   Cisco DNA then continuously gathers data from a multitude of sources  devices and applications  to provide a rich context of information  This information can then be analyzed to make sure the network is performing securely at its optimal level and in accordance with business intent and network policies 
IBN and Cisco DNA Center Cisco Digital Network Architecture  DNA   Cont  Cisco DNA SolutionDescriptionBenefitsSD-AccessFirst intent-based enterprise networking solution built using Cisco DNA  It uses a single network fabric across LAN and WLAN to create a consistent  highly secure user experience  It segments user  device  and application traffic and automates user-access policies to establish the right policy for any user or device  with any application  across a network Enables network access in minutes for any user or device to any application without compromising security SD-WANIt uses a secure cloud-delivered architecture to centrally manage WAN connections  It simplifies and accelerates delivery of secure  flexible and rich WAN services to connect data centers  branches  campuses  and colocation facilities Delivers better user experiences for applications residing on-premise or in the cloud  Achieve greater agility and cost savings through easier deployments and transport independence 
IBN and Cisco DNA Center Cisco Digital Network Architecture  DNA   Cont  Cisco DNA SolutionDescriptionBenefitsCisco DNA AssuranceUsed to troubleshoot and increase IT productivity  It applies advanced analytics and machine learning to improve performance and issue resolution  and predict to assure network performance  It provides real-time notification for network conditions that require attention Allows you to identify root causes and provides suggested remediation for faster troubleshooting  The Cisco DNA Center provides an easy-to-use single dashboard with insights and drill-down capabilities  Machine learning continually improves network intelligence to predict problems before they occur Cisco DNA SecurityUsed to provide visibility by using the network as a sensor for real-time analysis and intelligence  It provides increased granular control to enforce policy and contain threats across the network Reduce risk and protect your organization against threats - even in encrypted traffic  Gain 360-degree visibility through real-time analytics for deep intelligence across the network  Lower complexity with end-to-end security 
IBN and Cisco DNA Center Cisco DNA CenterCisco DNA Center is the foundational controller and analytics platform at the heart of Cisco DNA  It supports the expression of intent for multiple use cases  including basic automation capabilities  fabric provisioning  and policy-based segmentation in the enterprise network  Cisco DNA Center is a network management and command center for provisioning and configuring network devices  It is a hardware and software platform providing a  single-pane-of-glass   single interface  that focuses on assurance  analytics  and automation The DNA Center interface launch page gives you an overall health summary and network snapshot  From here  the network administrator can quickly drill down into areas of interest 
IBN and Cisco DNA Center Cisco DNA Center  Cont  At the top  menus provide you access to DNA Center s five main areas  As shown in the figure  these are Design - Model your entire network  from sites and buildings to devices and links  both physical and virtual  across campus  branch  WAN  and cloud Policy - Use policies to automate and simplify network management  reducing cost and risk while speeding rollout of new and enhanced services Provision - Provide new services to users with ease  speed  and security across your enterprise network  regardless of network size and complexity Assurance - Use proactive monitoring and insights from the network  devices  and applications to predict problems faster and ensure that policy and configuration changes achieve the business intent and the user experience you want Platform - Use APIs to integrate with your preferred IT systems to create end-to-end solutions and add support for multi-vendor devices 
IBN and Cisco DNA Center Video - DNA Center Overview and Platform APIsThis video is an overview of the Cisco DNA Center GUI  It includes design  policy  provision  and assurance tools used to control multiple sites and multiple devices 
IBN and Cisco DNA Center Video - DNA Center Design and ProvisionThis video is an overview of the Cisco DNA Center design and provision areas where you can add new devices and update existing devices 
IBN and Cisco DNA Center Video - DNA Center Policy and AssuranceThis video explains the Cisco DNA Center policy and assurance areas  The policy area enables you to create policies that reflect your organization s business intent and deploy them across networks and devices  Assurance provides you with an interface to quickly view and troubleshoot devices connected to the network 
IBN and Cisco DNA Center Video - DNA Center Troubleshooting User ConnectivityThis video explains how to use Cisco DNA Center to troubleshoot devices 
Video - RESTThis video covers the following Execute a REST API requestWeb browser - HTTPCommand Line - CURLApplication - PostmanProgramming Language - Python  Javascript  Ruby  and more
REST and RESTful APIWeb browsers use HTTP or HTTPS to request  GET  a web page  If successfully requested  HTTP status code 200   web servers respond to GET requests with an HTML coded web page Simply stated  a REST API is an API that works on top of the HTTP protocol  It defines a set of functions developers can use to perform requests and receive responses via HTTP protocol such as GET and POST Conforming to the constraints of the REST architecture is generally referred to as being  RESTful   An API can be considered  RESTful  if it has the following features Client-Server - The client handles the front end and the server handles the back end  Either can be replaced independently of the other Stateless - No client data is stored on the server between requests  The session state is stored on the client Cacheable - Clients can cache responses to improve performance 
RESTful ImplementationA RESTful web service is implemented using HTTP  It is a collection of resources with four defined aspects The base Uniform Resource Identifier  URI  for the web service  such as http example com resources The data format supported by the web service  This is often JSON  YAML  or XML but could be any other data format that is a valid hypertext standard The set of operations supported by the web service using HTTP methods The API must be hypertext driven RESTful APIs use common HTTP methods including POST  GET  PUT  PATCH and DELETE  As shown in the following table  these correspond to RESTful operations  Create  Read  Update  and Delete  or CRUD  HTTP MethodRESTful OperationPOSTCreateGETReadPUT PATCHUpdateDELETEDelete
URI  URN  and URLWeb resources and web services such as RESTful APIs are identified using a URI  A URI is a string of characters that identifies a specific network resource  A URI has two specializations Uniform Resource Name  URN  - identifies only the namespace of the resource  web page  document  image  etc   without reference to the protocol Uniform Resource Locator  URL  - defines the network location of a specific resource  HTTP or HTTPS URLs are typically used with web browsers  Protocols such as FTP  SFTP  SSH  and others can use a URL  A URL using SFTP might look like  sftp sftp example com These are the parts of the URI https www example com author book html page155  Protocol scheme   HTTPS or other protocols such as FTP  SFTP  mailto  and NNTPHostname - www example comPath and file name -  author book htmlFragment -  page155
Anatomy of a RESTful RequestIn a RESTful Web service  a request made to a resource s URI will elicit a response  The response will be a payload typically formatted in JSON  but could be HTML  XML  or some other format  The figure shows the URI for the MapQuest directions API  The API request is for directions from San Jose  California to Monterey  California 
Anatomy of a RESTful Request  Cont  These are the different parts of the API request API Server - This is the URL for the server that answers REST requests  In this example it is the MapQuest API server Resources - Specifies the API that is being requested  In this example it is the MapQuest directions API Query - Specifies the data format and information the client is requesting from the API service  Queries can include Format   This is usually JSON but can be YAML or XML  In this example JSON is requested Key - The key is for authorization  if required  MapQuest requires a key for their directions API  In the above URI  you would need to replace  KEY  with a valid key to submit a valid request Parameters - Parameters are used to send information pertaining to the request  In this example  the query parameters include information about the directions that the API needs so it knows what directions to return   from San Jose Ca  and  to Monterey Ca  
Software-Defined Networking Anatomy of a RESTful Request  Cont  Many RESTful APIs  including public APIs  require a key  The key is used to identify the source of the request  Here are some reasons why an API provider may require a key To authenticate the source to make sure they are authorized to use the API To limit the number of people using the API To limit the number of requests per user To better capture and track the data being requested by users To gather-information on the people using the API Note  The MapQuest API does require a key  Search the internet for the URL to obtain a MapQuest key  Use the search parameters  developer mapquest  You can also search the internet for the current URL that outlines the MapQuest privacy policy 
RESTful API ApplicationsMany web sites and applications use APIs to access information and provide service for their customers Some RESTful API requests can be made by typing in the URI from within a web browser  The MapQuest directions API is an example of this  A RESTful API request can also be made in other ways Developer Web Site  Developers often maintain web sites that include information about the API  parameter information  and usage examples  These sites may also allow the user to perform the API request within the developer web page by entering in the parameters and other information Postman  Postman is an application for testing and using REST APIs  It contains everything required for constructing and sending REST API requests  including entering query parameters and keys  Python  APIs can also be called from within a Python program  This allows for possible automation  customization  and App integration of the API  Network Operating Systems  Using protocols such as NETCONF  NET CONFiguration  and RESTCONF  network operating systems are beginning to provide an alternative method for configuration  monitoring  and management   
Hierarchical Networks Video - Three-Layer Network DesignThis video will demonstrate a three-layer model in network design 
Hierarchical Networks The Need to Scale the NetworkOrganizations increasingly rely on their network infrastructure to provide mission-critical services  Evolving organizations require networks that can scale and support Converged network trafficCritical applicationsDiverse business needsCentralized administrative controlCampus network designs include small networks that use a single LAN switch  up to very large networks with thousands of connections 
Hierarchical Networks Borderless Switched NetworksThe Cisco Borderless Network is a network-architecture that can connect anyone  anywhere  anytime  on any device  securely  reliably  and seamlessly  It provides the framework to unify wired and wireless-access  built on a hierarchical infrastructure of hardware that is scalable and resilient Borderless switched networks are hierarchical  modular  resilient  and flexible 
Hierarchical Networks Hierarchy in the Borderless Switched NetworkHierarchical networks use a tiered design of access  distribution  and core layers with each layer performing a well-defined role in the campus network  There are two time-tested and proven hierarchical design frameworks for campus networks Three-tier layerTwo-tier layer
Hierarchical Networks Access  Distribution  and Core Layer FunctionsAccess LayerThe access layer provide network access to the user  Access layer switches connect to distribution-layer switches Distribution LayerThe distribution-layer implements routing  quality of service  and security It aggregates large-scale wiring closet networks and limits Layer 2 broadcast-domains Distribution layer switches connect to access layer and core layer switches Core LayerThe core layer is the network backbone and connects several layers of the network  The core layer provides fault isolation and high-speed backbone connectivity 
Hierarchical Networks Three-Tier and Two-Tier ExamplesThree-tier Campus NetworkUsed by organizations requiring access  distribution  and core layers  The recommendation is to build an extended-star physical network topology from a centralized building location to all other buildings on the same campus Two-tier Campus NetworkUsed when separate distribution and core layers is not required  Useful for smaller campus locations  or in campus sites consisting of a single building Also known as the collapsed core network design 
Hierarchical Networks Role of Switched NetworksNetworks have fundamentally changed from a flat network of hubs to switched LANs in a hierarchical network  A switched LAN allows additional flexibility  traffic management  quality of service  security A switched LAN may also support wireless networking and other technologies such as IP telephone and mobility services 
Scalable Networks Design for ScalabilityScalability is the term for a network that can grow without losing availability and reliability Network designers must develop strategies to enable the network to be available and to scale effectively and easily This is accomplished using RedundancyMultiple LinksScalable Routing protocolWireless Connectivity
Scalable Networks Plan for RedundancyRedundancy can prevent disruption of network services by minimizing the possibility of a single point of failure by Installing duplicate equipment Providing failover services for critical devicesRedundant paths offer alternate physical paths for data to traverse the network supporting high availability  However  redundant paths in an Ethernet network may cause logical Layer 2 loops  Therefore  Spanning Tree Protocol  STP  is required 
Scalable Networks Reduce Failure Domain SizeA well-designed network controls traffic and limits the size of failure domains  i e   the area of a network that is impacted when the network experiences problems  In the hierarchical design model  failure domains are terminated at the distribution-layer  Every router functions as a gateway for a limited number of access layer users Routers  or multilayer switches  are usually deployed in pairs in a configuration referred to as a building  or departmental  switch block  Each switch block acts independently of the others  As a result  the failure of a single device does not cause the network to go down 
Scalable Networks Increase BandwidthLink aggregation  e g   EtherChannel  allows an administrator to increase the amount of bandwidth between devices by creating one logical link made up of several physical links EtherChannel combines existing switch ports into one logical link using a Port Channel interface  Most configuration tasks are done on the Port Channel interface  instead of on each individual port  to ensure configuration consistency on the links  EtherChannel can load balance between links 
Scalable Networks Expand the Access LayerAn increasingly popular option for extending access layer connectivity is through wireless  Wireless LANs  WLANs  provides increased flexibility  reduced costs  and the ability to grow and adapt to changing network and business requirements To communicate wirelessly  end devices require a wireless NIC to connect to a wireless router or a wireless-access point  AP  Considerations when implementing a wireless network include Types of wireless devices connecting to the WLANWireless coverage requirementsInterference considerationsSecurity considerations
Scalable Networks Tune Routing ProtocolsAdvanced routing protocols  such as Open Shortest Path First  OSPF  are used in large networks OSPF is a link-state routing protocol that uses areas to support a hierarchical networks  OSPF routers establish and maintain neighbor-adjacencies with other connected OSPF routers  OSPF routers synchronize their link-state database  When a network change occurs  link-state updates are sent  informing other OSPF routers of the change and establishing a new best path  if one is available 
Module ObjectivesModule Title  Network VirtualizationModule Objective  Explain the purpose and characteristics of network virtualization Topic TitleTopic ObjectiveCloud ComputingExplain the importance of cloud-computing VirtualizationExplain the importance of virtualization Virtual Network InfrastructureDescribe the virtualization of network devices and services Software-Defined NetworkingDescribe software-defined networking ControllersDescribe controllers used in network-programming 
Cloud Computing Video - Cloud and VirtualizationThis video will cover the following Data centersCloud computing  SaaS  PaaS  and IaaS Virtualization  Type 1 Hypervisor  Type 2 Hypervisor 
Cloud Computing Cloud OverviewCloud computing addresses a variety of data management issues Enables access to organizational data anywhere and at any timeStreamlines the organization s IT operations by subscribing only to needed servicesEliminates or reduces the need for onsite IT equipment  maintenance  and managementReduces cost for equipment  energy  physical plant requirements  and personnel training needsEnables rapid responses to increasing data volume requirements
Cloud Computing Cloud ServicesThe three main cloud-computing services defined by the National Institute of Standards and Technology  NIST  in their Special Publication 800-145 are as follows Software as a Service  SaaS  - The cloud provider is responsible for access to applications and services that are delivered over the internet Platform as a Service  PaaS  - The cloud provider is responsible for providing users access to the development tools and services used to deliver the applications  Infrastructure as a Service  IaaS  - The cloud provider is responsible for giving IT managers access to the network equipment  virtualized network services  and supporting network infrastructure Cloud service providers have extended this model to also provide IT support for each of the cloud-computing services  ITaaS   For businesses  ITaaS can extend the capability of the network without requiring investment in new infrastructure  training new personnel  or licensing new software 
Cloud Computing Cloud ModelsThere are four primary cloud models Public clouds - Cloud-based applications and services made available to the general population  Private clouds - Cloud-based applications and services intended for a specific organization or entity  such as the government  Hybrid clouds - A hybrid cloud is made up of two or more clouds  example  part private  part public   where each part remains a separate object  but both are connected using a single architecture Community clouds - A community cloud is created for exclusive use by a specific community  The differences between public clouds and community-clouds are the functional needs that have been customized for the community  For example  healthcare organizations must remain compliant with policies and laws  e g   HIPAA  that require special authentication and confidentiality 
Cloud Computing Cloud Computing versus Data CenterThese are the correct definitions of data center and cloud-computing Data center  Typically  a data storage and processing facility run by an in-house IT department or leased offsite  Data centers are typically very expensive to build and maintain  Cloud computing  Typically  an off-premise service that offers on-demand access to a shared pool of configurable computing resources  These resources can be rapidly provisioned and released with minimal management effort Data centers are the physical facilities that provide the compute  network  and storage needs of cloud-computing services  Cloud service providers use data centers to host their cloud services and cloud-based resources 
Controllers SDN Controller and OperationsThe SDN controller defines the data-flows between the centralized control-plane and the data-planes on individual routers and switches Each flow traveling through the network must first get permission from the SDN controller  which verifies that the communication is permissible according to the network policy All complex functions are performed by the controller  The controller populates flow tables  Switches manage the flow tables  
Controllers SDN Controller and Operations  Cont  Within each switch  a series of tables implemented in hardware or firmware are used to manage the flows of packets through the switch  To the switch  a flow is a sequence of packets that matches a specific entry in a flow table The three table types shown in the previous figure are as follows Flow Table - This table matches incoming packets to a particular flow and specifies the functions that are to be performed on the packets  There may be multiple flow tables that operate in a pipeline fashion Group Table - A flow table may direct a flow to a Group Table  which may trigger a variety of actions that affect one or more flows Meter Table - This table triggers a variety of performance-related actions on a flow including the ability to rate-limit the traffic 
Controllers Video - Cisco ACIVery few organizations actually have the desire or skill to program the network using SDN tools  However  the majority of organizations want to automate the network  accelerate application deployments  and align their IT infrastructures to better meet business requirements  Cisco developed the Application Centric Infrastructure  ACI  to meet these objectives in more advanced and innovative ways than earlier SDN approaches Cisco ACI is a hardware solution for integrating cloud-computing and data center management  At a high level  the policy element of the network is removed from the data-plane  This simplifies the way data center networks are created 
Controllers Core Components of ACIThere are three core components of the ACI architecture Application Network Profile  ANP  - An ANP is a collection of end-point groups  EPG   their connections  and the policies that define those connections  Application Policy Infrastructure Controller  APIC  - APIC is a centralized software controller that manages and operates a scalable ACI clustered fabric  It is designed for programmability and centralized management  It translates application policies into network-programming Cisco Nexus 9000 Series switches - These switches provide an application-aware switching fabric and work with an APIC to manage the virtual and physical network infrastructure The APIC is positioned between the APN and the ACI-enabled network infrastructure  The APIC translates the application requirements into a network configuration to meet those needs 
Controllers Core Components of ACI  Cont  
Controllers Spine-Leaf TopologyThe Cisco ACI fabric is composed of the APIC and the Cisco Nexus 9000 series switches using two-tier spine-leaf-topology  as shown in the figure  The leaf switches attach to the spines  but they never attach to each other  Similarly  the spine switches only attach to the leaf and core switches  not shown   In this two-tier topology  everything is one hop from everything else When compared to SDN  the APIC controller does not manipulate the data path directly  Instead  the APIC centralizes the policy definition and programs the leaf switches to forward traffic based on the defined policies 
Controllers SDN TypesThe Cisco Application Policy Infrastructure Controller - Enterprise Module  APIC-EM  extends ACI aimed at enterprise and campus deployments  To better understand APIC-EM  it is helpful to take a broader look at the three types of SDN Device-based SDN  Devices are programmable by applications running on the device itself or on a server in the network  as shown in the figure 
Controllers SDN Types  Cont  Controller-based SDN  Uses a centralized-controller that has knowledge of all devices in the network  as shown in the figure  The applications can interface with the controller responsible for managing devices and manipulating traffic flows throughout the network  The Cisco Open SDN Controller is a commercial distribution of OpenDaylight 
Controllers SDN Types  Cont  Policy-based SDN  Similar to controller-based SDN where a centralized-controller has a view of all devices in the network  as shown in the figure  Policy-based SDN includes an additional Policy layer that operates at a higher level of abstraction  It uses built-in applications that automate advanced configuration tasks via a guided workflow and user-friendly GUI  No programming skills are required  Cisco APIC-EM is an example of this type of SDN 
Controllers APIC-EM FeaturesCisco APIC-EM provides a single interface for network management including Discovering and accessing device and host inventories Viewing the topology  as shown in the figure  Tracing a path between end points Setting policies 
Controllers APIC-EM Path TraceThe APIC-EM Path Trace tool allows the administrator to easily visualize traffic flows and discover any conflicting  duplicate  or shadowed ACL entries  This tool examines specific ACLs on the path between two end nodes  displaying any potential issues  You can see where any ACLs along the path either permitted or denied your traffic  as shown in the figure  Notice how Branch-Router2 is permit all traffic  The network administrator can now make adjustments  if necessary  to better filter traffic 
Software-Defined Networking Video - Software-Defined NetworkingThis video will cover the following Network ProgrammingSDN  Open Network Foundation  OpenFlow  and OpenStack Controllers
Software-Defined Networking Control Plane and Data PlaneA network device contains the following planes Control plane - This is typically regarded as the brains of a device  It is used to make forwarding decisions  The control-plane contains Layer 2 and Layer 3 route forwarding mechanisms  such as routing protocol neighbor tables and topology tables  IPv4 and IPv6 routing tables  STP  and the ARP table  Information sent to the control-plane is processed by the CPU Data plane - Also called the forwarding plane  this plane is typically the switch fabric connecting the various network ports on a device  The data-plane of each device is used to forward traffic flows  Routers and switches use information from the control-plane to forward incoming traffic out the appropriate egress interface  Information in the data-plane is typically processed by a special data-plane processor without the CPU getting involved 
Software-Defined Networking Control Plane and Data Plane  Cont  CEF is an advanced  Layer 3 IP switching technology that enables forwarding of packets to occur at the data-plane without consulting the control-plane  SDN is basically the separation of the control-plane and data-plane  The control-plane function is removed from each device and is performed by a centralized-controller  The centralized-controller communicates control-plane functions to each device  Each device can now focus on forwarding data while the centralized-controller manages data-flow  increases security  and provides other services 
Software-Defined Networking Control Plane and Data Plane  Cont  The management-plane is responsible for managing a device through its connection to the network  Network administrators use applications such as Secure Shell  SSH   Trivial File Transfer Protocol  TFTP   Secure FTP  and Secure Hypertext Transfer Protocol  HTTPS  to access the management-plane and configure a device  The management-plane is how you have accessed and configured devices in your networking studies  In addition  protocols like Simple Network Management Protocol  SNMP   use the management-plane 
Software-Defined Networking Network Virtualization TechnologiesTwo major network-architectures have been developed to support network virtualization Software-Defined Networking  SDN  - A network-architecture that virtualizes the network  offering a new approach to network administration and management that seeks to simplify and streamline the administration process Cisco Application Centric Infrastructure  ACI  - A purpose-built hardware solution for integrating cloud-computing and data center management 
Software-Defined Networking Network Virtualization Technologies  Cont  Components of SDN may include the following OpenFlow - This approach was developed at Stanford University to manage traffic between routers  switches  wireless-access points  and a controller  The OpenFlow protocol is a basic element in building SDN solutions  OpenStack - This approach is a virtualization and orchestration platform designed to build scalable cloud environments and provide an IaaS solution  OpenStack is often used with Cisco ACI  Orchestration in networking is the process of automating the provisioning of network components such as servers  storage  switches  routers  and applications  Other components - Other components include Interface to the Routing System  I2RS   Transparent Interconnection of Lots of Links  TRILL   Cisco FabricPath  FP   and IEEE 802 1aq Shortest Path Bridging  SPB  
Software-Defined Networking Traditional and SDN ArchitecturesIn a traditional router or switch architecture  the control-plane and data-plane functions occur in the same device  Routing decisions and packet forwarding are the responsibility of the device operating system  In SDN  management of the control-plane is moved to a centralized SDN controller  The figure compares traditional and SDN architectures 
Software-Defined Networking Traditional and SDN Architectures  Cont  The SDN controller is a logical entity that enables network administrators to manage and dictate how the data-plane of switches and routers should handle network traffic  It orchestrates  mediates  and facilitates communication between applications and network elements The complete SDN framework is shown in the figure  Note the use of Application Programming Interfaces  APIs   An API is a standardized definition of the proper way for an application to request services from another application  The SDN controller uses northbound APIs to communicate with the upstream applications  helping network administrators shape traffic and deploy services  The SDN controller uses southbound APIs to define the behavior of the data-planes on downstream switches and routers  OpenFlow is a widely implemented southbound API 
Virtual Network Infrastructure Type 1 HypervisorsType 1 hypervisors are also called the  bare metal  approach because the hypervisor is installed directly on the hardware  Type 1 hypervisors are usually used on enterprise servers and data center networking devices With Type 1 hypervisors  the hypervisor is installed directly on the server or networking hardware  Then  instances of an OS are installed on the hypervisor  as shown in the figure  Type 1 hypervisors have direct access to the hardware resources  Therefore  they are more efficient than hosted architectures  Type 1 hypervisors improve scalability  performance  and robustness 
Virtual Network Infrastructure Installing a VM on a HypervisorType 1 hypervisors require a  management console  to manage the hypervisor  Management software is used to manage multiple servers using the same hypervisor  The management console can automatically consolidate servers and power on or off servers as required The management console provides recovery from hardware failure  If a server component fails  the management console automatically moves the VM to another server  Cisco Unified Computing System  UCS  Manager controls multiple servers and manages resources for thousands of VMs Some management consoles also allow server over allocation  Over allocation is when multiple OS instances are installed  but their memory allocation exceeds the total amount of memory that a server has  Over allocation is a common practice because all four OS instances rarely require the all their allocated resources at any one moment 
Virtual Network Infrastructure The Complexity of Network VirtualizationServer virtualization hides server resources  This can create problems when using traditional network-architectures VMs are movable  and the network administrator must be able to add  drop  and change network resources and profiles to support their mobility  This process would be manual and time-consuming with traditional network switches Traffic flows differ from the traditional client-server model  Typically  there is a considerable amount of traffic being exchanged between virtual servers  East-West traffic  that changes in location and intensity over time  North-South traffic is typically traffic destined for offsite locations such as another data center  other cloud providers  or the internet 
Virtual Network Infrastructure The Complexity of Network Virtualization  Cont  Dynamic ever-changing traffic requires a flexible approach to network resource management  Existing network infrastructures can respond to changing requirements related to the management of traffic flows by using Quality of Service  QoS  and security level configurations for individual flows  However  in large enterprises using multivendor-equipment  each time a new VM is enabled  the necessary reconfiguration can be very time-consuming The network infrastructure can also benefit from virtualization  Network functions can be virtualized  Each network device can be segmented into multiple virtual devices that operate as independent devices  Examples include subinterfaces  virtual interfaces  VLANs  and routing tables  Virtualized routing is called virtual-routing-and-forwarding  VRF  
Virtualization Cloud Computing and VirtualizationThe terms  cloud-computing  and  virtualization  are often used interchangeably  however  they mean different things  Virtualization is the foundation of cloud-computing  Without it  cloud-computing  as it is most-widely implemented  would not be possible Virtualization separates the operating system  OS  from the hardware  Various providers offer virtual cloud services that can dynamically provision servers as required  These virtualized instances of servers are created on demand  
Virtualization Dedicated ServersHistorically  enterprise servers consisted of a server OS  such as Windows Server or Linux Server  installed on specific hardware  All of a server s RAM  processing power  and hard drive space were dedicated to the service provided  e g   Web  email services  etc   When a component fails  the service that is provided by this server becomes unavailable  This is known as a single point of failure  Dedicated servers were generally underused  They often sat idle for long periods of time  waiting until there was a need to deliver the specific service they provide  These servers wasted energy and took up more space than was warranted by the amount of service provided  This is known as server sprawl 
Virtualization Server VirtualizationServer virtualization takes advantage of idle resources and consolidates the number of required servers  This also allows for multiple operating systems to exist on a single hardware platform The use of virtualization normally includes redundancy to protect from a single point of failure The hypervisor is a program  firmware  or hardware that adds an abstraction layer on top of the physical hardware  The abstraction layer is used to create virtual machines which have access to all the hardware of the physical machine such as CPUs  memory  disk controllers  and NICs 
Virtualization Advantages of VirtualizationOne major advantage of virtualization is overall reduced cost Less equipment is requiredLess energy is consumed Less space is required These are additional benefits of virtualization Easier prototypingFaster server provisioningIncreased server uptime Improved disaster recoveryLegacy support 
Virtualization Abstraction LayersA computer system consists of the following abstraction-layers  Services  OS  Firmware  and Hardware At each of these layers of abstraction  some type of programming code is used as an interface between the layer below and the layer above  A hypervisor is installed between the firmware and the OS  The hypervisor can support multiple instances of OSs 
Virtualization Type 2 HypervisorsA Type 2 hypervisor is software that creates and runs VM instances  The computer  on which a hypervisor is supporting one or more VMs  is a host machine  Type 2 hypervisors are also called hosted hypervisors  A big advantage of Type 2 hypervisors is that management console software is not required 
Modify Single-Area OSPFv2 Cisco OSPF Cost MetricRouting protocols use a metric to determine the best path of a packet across a network  OSPF uses cost as a metric  A lower cost indicates a better path The Cisco cost of an interface is inversely proportional to the bandwidth of the interface  Therefore  a higher bandwidth indicates a lower cost  The formula used to calculate the OSPF cost is Cost   reference bandwidth   interface bandwidthThe default reference bandwidth is 108  100 000 000   therefore  the formula is Cost   100 000 000 bps   interface bandwidth in bpsBecause the OSPF cost value must be an integer  FastEthernet  Gigabit Ethernet  and 10 GigE interfaces share the same cost  To correct this situation  you can Adjust the reference bandwidth with the auto-cost reference-bandwidth command on each OSPF router Manually set the OSPF cost value with the ip ospf cost command on necessary interfaces 
Modify Single-Area OSPFv2 Cisco OSPF Cost Metric  Cont  Refer to the table for a breakdown of the cost calculation
Modify Single-Area OSPFv2 Adjust the Reference BandwidthThe cost value must be an integer  If something less than an integer is calculated  OSPF rounds up to the nearest integer  Therefore  the OSPF cost assigned to a Gigabit Ethernet interface with the default reference bandwidth of 100 000 000 bps would equal 1  because the nearest integer for 0 1 is 0 instead of 1 Cost   100 000 000 bps   1 000 000 000   1For this reason  all interfaces faster than Fast Ethernet will have the same cost value of 1 as a Fast Ethernet interface  To assist OSPF in making the correct path determination  the reference bandwidth must be changed to a higher value to accommodate networks with links faster than 100 Mbps 
Modify Single-Area OSPFv2 Adjust the Reference Bandwidth  Cont  Changing the reference bandwidth does not actually affect the bandwidth capacity on the link  rather  it simply affects the calculation used to determine the metric  To adjust the reference bandwidth  use the auto-cost reference-bandwidth Mbps router configuration command This command must be configured on every router in the OSPF domain  Notice in the command that the value is expressed in Mbps  therefore  to adjust the costs for Gigabit Ethernet  use the command auto-cost reference-bandwidth 1000  For 10 Gigabit Ethernet  use the command auto-cost reference-bandwidth 10000 To return to the default reference bandwidth  use the auto-cost reference-bandwidth 100 command Another option is to change the cost on one specific interface using the ip ospf cost cost command 
Modify Single-Area OSPFv2 Adjust the Reference Bandwidth  Cont  Whichever method is used  it is important to apply the configuration to all routers in the OSPF routing domain  The table shows the OSPF cost if the reference bandwidth is adjusted to accommodate 10 Gigabit Ethernet links  The reference bandwidth should be adjusted anytime there are links faster than FastEthernet  100 Mbps  Use the show ip ospf interface command to verify the current OSPFv2 cost assigned to the interface 
Modify Single-Area OSPFv2 OSPF Accumulates CostThe cost of an OSPF route is the accumulated value from one router to the destination network  Assuming the auto-cost reference-bandwidth 10000 command has been configured on all three routers  the cost of the links between each router is now 10  The loopback interfaces have a default cost of 1 
Modify Single-Area OSPFv2 OSPF Accumulates Cost  Cont  You can calculate the cost for each router to reach each network  For example  the total cost for R1 to reach the 10 10 2 0 24 network is 11  This is because the link to R2 cost   10 and the loopback default cost   1  10   1   11 You can verify this with the show ip route command 
Modify Single-Area OSPFv2 OSPF Accumulates Cost  Cont  Verifying the accumulated cost for the path to the 10 10 2 0 24 network R1  show ip route   include 10 10 2 0 O     10 10 2 0 24  110 11  via 10 1 1 6  01 05 02  GigabitEthernet0 0 0 R1  show ip route 10 10 2 0 Routing entry for 10 10 2 0 24 Known via  ospf 10   distance 110  metric 11  type intra area Last update from 10 1 1 6 on GigabitEthernet0 0 0  01 05 13 ago Routing Descriptor Blocks    10 1 1 6  from 2 2 2 2  01 05 13 ago  via GigabitEthernet0 0 0 Route metric is 11  traffic share count is 1 R1 
Modify Single-Area OSPFv2 Manually Set OSPF Cost ValueReasons to manually set the cost value include The Administrator may want to influence path selection within OSPF  causing different paths to be selected than what normally would given default costs and cost accumulation Connections to equipment from other vendors who use a different formula to calculate OSPF cost To change the cost value reported by the local OSPF router to other OSPF routers  use the interface configuration command ip ospf cost value R1 config   interface g0 0 1 R1 config-if   ip ospf cost 30 R1 config-if   interface lo0 R1 config-if   ip ospf cost 10 R1 config-if   end R1 
Modify Single-Area OSPFv2 Test Failover to Backup RouteWhat happens if the link between R1 and R2 goes down  You can simulate that by shutting down the Gigabit Ethernet 0 0 0 interface and verifying the routing table is updated to use R3 as the next-hop router  Notice that R1 can now reach the 10 1 1 4 30 network through R3 with a cost value of 50 R1  show ip route ospf   begin 10 10 0 0 0 8 is variably subnetted  8 subnets  3 masks O   10 1 1 4 30  110 50  via 10 1 1 13  00 00 14  GigabitEthernet0 0 1 O   10 1 1 8 30  110 40  via 10 1 1 13  00 00 14  GigabitEthernet0 0 1 O   10 10 2 0 24  110 50  via 10 1 1 13  00 00 14  GigabitEthernet0 0 1 O   10 10 3 0 24  110 40  via 10 1 1 13  00 00 14  GigabitEthernet0 0 1 R1 
Modify Single-Area OSPFv2 Hello Packet IntervalsOSPFv2 Hello packets are transmitted to multicast address 224 0 0 5  all OSPF routers  every 10 seconds  This is the default timer value on multiaccess and point-to-point networks Note  Hello packets are not sent on interfaces set to passive by the passive-interface command The Dead interval is the period that the router waits to receive a Hello packet before declaring the neighbor down  If the Dead interval expires before the routers receive a Hello packet  OSPF removes that neighbor from its link-state database  LSDB   The router floods the LSDB with information about the down neighbor out all OSPF-enabled interfaces  Cisco uses a default of 4 times the Hello interval  This is 40 seconds on multiaccess and point-to-point networks 
Modify Single-Area OSPFv2 Verify Hello and Dead IntervalsThe OSPF Hello and Dead intervals are configurable on a per-interface basis  The OSPF intervals must match or a neighbor adjacency does not occur  To verify the currently configured OSPFv2 interface intervals  use the show ip ospf interface command  The Gigabit Ethernet 0 0 0 Hello and Dead intervals are set to the default 10 seconds and 40 seconds respectively R1  show ip ospf interface g0 0 0GigabitEthernet0 0 0 is up  line protocol is up Internet Address 10 1 1 5 30  Area 0  Attached via Interface EnableProcess ID 10  Router ID 1 1 1 1  Network Type POINT TO POINT  Cost  10Topology-MTID  Cost  Disabled  Shutdown  Topology Name 0   10      no      no      Base Enabled by interface config  including secondary ip addresses Transmit Delay is 1 sec  State POINT TO POINT Timer intervals configured  Hello 10  Dead 40  Wait 40  Retransmit 5oob-resync timeout 40 output omitted 
Modify Single-Area OSPFv2 Verify Hello and Dead Intervals  Cont  Use the show ip ospf neighbor command to see the Dead Time counting down from 40 seconds  By default  this value is refreshed every 10 seconds when R1 receives a Hello from the neighbor R1  show ip ospf neighbor Neighbor ID  Pri  State  Dead Time  Address   Interface 3 3 3 3   0  FULL  -  00 00 35  10 1 1 13  GigabitEthernet0 0 12 2 2 2   0  FULL  -  00 00 31  10 1 1 6       GigabitEthernet0 0 0R1 
Modify Single-Area OSPFv2 Modify OSPFv2 IntervalsIt may be desirable to change the OSPF timers so that routers detect network failures in less time  Doing this increases traffic  but sometimes the need for quick convergence is more important than the extra traffic it creates Note  The default Hello and Dead intervals are based on best practices and should only be altered in rare situations OSPFv2 Hello and Dead intervals can be modified manually using the following interface configuration mode commands Router config-if   ip ospf hello-interval secondsRouter config-if   ip ospf dead-interval secondsUse the no ip ospf hello-interval and no ip ospf dead-interval commands to reset the intervals to their default 
Modify Single-Area OSPFv2 Modify OSPFv2 Intervals  Cont  In the example  the Hello interval for the link between R1 and R2 is changed to 5 seconds  The Cisco IOS automatically modifies the Dead interval to four times the Hello interval  However  you can document the new Dead interval in the configuration by manually setting it to 20 seconds  as shown When the Dead Timer on R1 expires  R1 and R2 lose adjacency  R1 and R2 must be configured with the same Hello interval  Use the show ip ospf neighbor command on R1 to verify the neighbor-adjacencies R1 config   interface g0 0 0 R1 config-if   ip ospf hello-interval 5 R1 config-if   ip ospf dead-interval 20 R1 config-if    Jun 7 04 56 07 571   OSPF-5-ADJCHG  Process 10  Nbr 2 2 2 2 on GigabitEthernet0 0 0 from FULL to DOWN  Neighbor Down  Dead timer expiredR1 config-if   end R1  show ip ospf neighbor Neighbor ID  Pri  State  Dead Time  Address   Interface 3 3 3 3   0  FULL  -  00 00 37   10 1 1 13  GigabitEthernet0 0 1 R1 
Modify Single-Area OSPFv2 Packet Tracer - Modify Single-Area OSPFv2In this Packet Tracer activity  you will complete the following Adjust the reference bandwidth to account for gigabit and faster speedsModify the OSPF cost valueModify the OSPF Hello timersVerify the modifications are accurately reflected in the routers 
Multiaccess OSPF Networks OPSF Network TypesAnother type of network that uses OSPF is the multiaccess OSPF network  Multiaccess OSPF networks are unique in that one router controls the distribution of LSAs  The router that is elected for this role should be determined by the network administrator through proper configuration 
Multiaccess OSPF Networks OPSF Designated RouterIn multiaccess networks  OSPF elects a DR and BDR  The DR is responsible for collecting and distributing LSAs sent and received  The DR uses the multicast IPv4 address 224 0 0 5 which is meant for all OSPF routers A BDR is also elected in case the DR fails  The BDR listens passively and maintains a relationship with all the routers  If the DR stops producing Hello packets  the BDR promotes itself and assumes the role of DR All other routers become a DROTHER  a router that is neither the DR nor the BDR   DROTHERs use the multiaccess address 224 0 0 6  all designated routers  to send OSPF packets to the DR and BDR  Only the DR and BDR listen for 224 0 0 6 
Multiaccess OSPF Networks OPSF Multiaccess Reference TopologyIn the multiaccess topology shown in the figure  there are three routers interconnected over a common Ethernet multiaccess network  192 168 1 0 24 Because the routers are connected over a common multiaccess network  OSPF has automatically elected a DR and BDR  R3 has been elected as the DR because its router ID is 3 3 3 3  which is the highest in this network  R2 is the BDR because it has the second highest router ID in the network 
Multiaccess OSPF Networks Verify OSPF Router RolesTo verify the roles of the OSPFv2 router  use the show ip ospf interface command The output generated by R1 confirms that the following R1 is not the DR or BDR  but is a DROTHER with a default priority of 1   Line 7 The DR is R3 with router ID 3 3 3 3 at IPv4 address 192 168 1 3  while the BDR is R2 with router ID 2 2 2 2 at IPv4 address 192 168 1 2   Lines 8 and 9 R1 has two adjacencies  one with the BDR and one with the DR   Lines 20-22 R1  show ip ospf interface GigabitEthernet 0 0 0 GigabitEthernet0 0 0 is up  line protocol is upInternet Address 192 168 1 1 24  Area 0  Attached via Interface Enable Process ID 10  Router ID 1 1 1 1  Network Type BROADCAST  Cost  1      output omitted  Transmit Delay is 1 sec  State DROTHER  Priority 1   Designated Router  ID  3 3 3 3  Interface address 192 168 1 3 Backup Designated router  ID  2 2 2 2  Interface address 192 168 1 2  output omitted Neighbor Count is 2  Adjacent neighbor count is 2 Adjacent with neighbor 2 2 2 2  Backup Designated Router  Adjacent with neighbor 3 3 3 3  Designated Router  Suppress hello for 0 neighbor s  R1 
Multiaccess OSPF Networks Verify OSPF Router Roles  Cont  The output generated by R2 confirms that R2 is the BDR with a default priority of 1   Line 7 The DR is R3 with router ID 3 3 3 3 at IPv4 address 192 168 1 3  while the BDR is R2 with router ID 2 2 2 2 at IPv4 address 192 168 1 2   Lines 8 and 9 R2 has two adjacencies  one with a neighbor with router ID 1 1 1 1  R1  and the other with the DR   Lines 20-22 R2  show ip ospf interface GigabitEthernet 0 0 0 GigabitEthernet0 0 0 is up  line protocol is up Internet Address 192 168 1 2 24  Area 0  Attached via Interface EnableProcess ID 10  Router ID 2 2 2 2  Network Type BROADCAST  Cost  1  output omitted Transmit Delay is 1 sec  State BDR  Priority 1 Designated Router  ID  3 3 3 3  Interface address 192 168 1 3 Backup Designated Router  ID  2 2 2 2  Interface address 192 168 1 2 output omitted Neighbor Count is 2  Adjacent neighbor count is 2 Adjacent with neighbor 1 1 1 1 Adjacent with neighbor 3 3 3 3  Designated Router  Suppress hello for 0 neighbor s  R2 
Multiaccess OSPF Networks Verify OSPF Router Roles  Cont  The output generated by R3 confirms that R3 is the DR with a default priority of 1   Line 7 The DR is R3 with router ID 3 3 3 3 at IPv4 address 192 168 1 3  while the BDR is R2 with router ID 2 2 2 2 at IPv4 address 192 168 1 2   Lines 8 and 9 R3 has two adjacencies  one with a neighbor with router ID 1 1 1 1  R1  and the other with the BDR   Lines 20-22 R3  show ip ospf interface GigabitEthernet 0 0 0 GigabitEthernet0 0 0 is up  line protocol is up Internet Address 192 168 1 3 24  Area 0  Attached via Interface EnableProcess ID 10  Router ID 2 2 2 2  Network Type BROADCAST  Cost  1  output omitted Transmit Delay is 1 sec  State DR  Priority 1 Designated Router  ID  3 3 3 3  Interface address 192 168 1 3 Backup Designated Router  ID  2 2 2 2  Interface address 192 168 1 2 output omitted Neighbor Count is 2  Adjacent neighbor count is 2 Adjacent with neighbor 1 1 1 1 Adjacent with neighbor 2 2 2 2  Backup Designated Router  Suppress hello for 0 neighbor s  R3 
Multiaccess OSPF Networks Verify DR BDR AdjacenciesTo verify the OSPFv2 adjacencies  use the show ip ospf neighbor command  The state of neighbors in multiaccess networks can be as follows FULL DROTHER - This is a DR or BDR router that is fully adjacent with a non-DR or BDR router  These two neighbors can exchange Hello packets  updates  queries  replies  and acknowledgments FULL DR - The router is fully adjacent with the indicated DR neighbor  These two neighbors can exchange Hello packets  updates  queries  replies  and acknowledgments FULL BDR - The router is fully adjacent with the indicated BDR neighbor  These two neighbors can exchange Hello packets  updates  queries  replies  and acknowledgments 2-WAY DROTHER - The non-DR or BDR router has a neighbor relationship with another non-DR or BDR router  These two neighbors exchange Hello packets The normal state for an OSPF router is usually FULL  If a router is stuck in another state  it is an indication that there are problems in forming adjacencies  The only exception to this is the 2-WAY state  which is normal in a multiaccess broadcast network  
Multiaccess OSPF Networks Verify DR BDR Adjacencies  Cont  The output generated by R2 confirms that R2 has adjacencies with the following routers R1 with router ID 1 1 1 1 is in a Full state and R1 is neither the DR nor BDR R3 with router ID 3 3 3 3 is in a Full state and the role of R3 is DR R2  show ip ospf neighbor Neighbor ID  Pri  State   Dead Time  Address   Interface 1 1 1 1   1  FULL DROTHER 00 00 31  192 168 1 1    GigabitEthernet0 0 03 3 3 3   1  FULL DR   00 00 34  192 168 1 3  GigabitEthernet0 0 0 R2 
Multiaccess OSPF Networks Default DR BDR Election ProcessThe OSPF DR and BDR election is based on the following criteria  in sequential order The routers in the network elect the router with the highest interface priority as the DR  The router with the second highest interface priority is becomes the BDR  The priority can be configured to be any number between 0   255  If the interface priority value is set to 0  that interface cannot be elected as DR nor BDR  The default priority of multiaccess broadcast interfaces is 1 If the interface priorities are equal  then the router with the highest router ID is elected the DR  The router with the second highest router ID is the BDR The election process takes place when the first router with an OSPF-enabled interface is active on the network  If all of the routers on the network have not finished booting  it is possible that a router with a lower router ID becomes the DR The addition of a new router does not initiate a new election process 
Multiaccess OSPF Networks DR Failure and RecoveryAfter the DR is elected  it remains the DR until one of the following events occurs The DR fails The OSPF process on the DR fails or is stopped The multiaccess interface on the DR fails or is shutdown If the DR fails  the BDR is automatically promoted to DR  This is the case even if another DROTHER with a higher priority or router ID is added to the network after the initial DR BDR election  However  after a BDR is promoted to DR  a new BDR election occurs and the DROTHER with the highest priority or router ID is elected as the new BDR 
Multiaccess OSPF Networks The ip ospf priority CommandIf the interface priorities are equal on all routers  the router with the highest router ID is elected the DR  Instead of relying on the router ID  it is better to control the election by setting interface priorities  This also allows a router to be the DR in one network and a DROTHER in another  To set the priority of an interface  use the command ip ospf priority value  where value is 0 to 255  A value of 0 does not become a DR or a BDR  A value of 1 to 255 on the interface makes it more likely that the router becomes the DR or the BDR 
Multiaccess OSPF Networks Configure OSPF PriorityThe example shows the commands being used to change the R1 G0 0 0 interface priority from 1 to 255 and then reset the OSPF process R1 config   interface GigabitEthernet 0 0 0 R1 config-if   ip ospf priority 255 R1 config-if   end R1  clear ip ospf process Reset ALL OSPF processes   no   y R1   Jun 5 03 47 41 563   OSPF-5-ADJCHG  Process 10  Nbr 2 2 2 2 on GigabitEthernet0 0 0 from FULL to DOWN  Neighbor Down  Interface down or detached
Multiaccess OSPF Networks Packet Tracer - Determine the DR and BDRIn this activity  you will complete the following Examine DR and BDR roles and watch the roles change when there is a change in the network Modify the priority to control the roles and force a new election Verify routers are filling the desired roles
Module ObjectivesModule Title  Single-Area OSPF ConceptsModule Objective  Explain how single-area OSPF operates in both point-to-point and broadcast multiaccess networks Topic TitleTopic ObjectiveOSPF Features and CharacteristicsDescribe basic OSPF features and characteristics OSPF PacketsDescribe the OSPF packet types used in single-area OSPF OSPF OperationExplain how single-area OSPF operates 
OSPF Features and Characteristics Introduction to OSPFOSPF is a link-state routing protocol that was developed as an alternative for the distance vector Routing Information Protocol  RIP   OSPF has significant advantages over RIP in that it offers faster convergence and scales to much larger network implementations OSPF is a link-state routing protocol that uses the concept of areas  A network administrator can divide the routing domain into distinct areas that help control routing update traffic  A link is an interface on a router  a network segment that connects two routers  or a stub network such as an Ethernet LAN that is connected to a single router  Information about the state of a link is known as a link-state  All link-state information includes the network prefix  prefix length  and cost This module covers basic  single-area OSPF implementations and configurations 
OSPF Features and Characteristics Components of OSPFAll routing protocols share similar components  They all use routing protocol messages to exchange route information  The messages help build data structures  which are then processed using a routing algorithm Routers running OSPF exchange messages to convey routing information using five types of packets Hello packetDatabase description packetLink-state request packetLink-state update packetLink-state acknowledgment packetThese packets are used to discover neighboring routers and also to exchange routing information to maintain accurate information about the network 
OSPF Features and Characteristics Components of OSPF  Cont  OSPF messages are used to create and maintain three OSPF databases  as follows DatabaseTableDescriptionAdjacency DatabaseNeighbor TableList of all neighbor routers to which a router has established bi-directional communication  This table is unique for each router  Can be viewed using the show ip ospf neighbor command Link-state Database  LSDB Topology TableLists information about all other routers in the network  The database represents the network LSDB  All routers within an area have identical LSDB  Can be viewed using the show ip ospf database command Forwarding DatabaseRouting TableList of routes generated when an algorithm is run on the link-state database  Each router s routing table is unique and contains information on how and where to send packets to other routers  Can be viewed using the show ip route command 
OSPF Features and Characteristics Components of OSPF  Cont  The router builds the topology table using results of calculations based on the Dijkstra shortest-path first  SPF  algorithm  The SPF algorithm is based on the cumulative cost to reach a destination The SPF algorithm creates an SPF tree by placing each router at the root of the tree and calculating the shortest path to each node  The SPF tree is then used to calculate the best routes  OSPF places the best routes into the forwarding database  which is used to make the routing table 
OSPF Features and Characteristics Link-State OperationTo maintain routing information  OSPF routers complete a generic link-state routing process to reach a state of convergence  The following are the link-state routing steps that are completed by a router Establish Neighbor AdjacenciesExchange Link-State AdvertisementsBuild the Link State DatabaseExecute the SPF AlgorithmChoose the Best Route
OSPF Features and Characteristics Single-Area and Multiarea OSPFTo make OSPF more efficient and scalable  OSPF supports hierarchical routing using areas  An OSPF area is a group of routers that share the same link-state information in their LSDBs  OSPF can be implemented in one of two ways  as follows Single-Area OSPF - All routers are in one area  Best practice is to use area 0 Multiarea OSPF - OSPF is implemented using multiple areas  in a hierarchical fashion  All areas must connect to the backbone area  area 0   Routers interconnecting the areas are referred to as Area Border Routers  ABRs  The focus of this module is on single-area OSPFv2 
OSPF Features and Characteristics Multiarea OSPFThe hierarchical-topology design options with multiarea OSPF can offer the following advantages Smaller routing tables - Tables are smaller because there are fewer routing table entries  This is because network addresses can be summarized between areas  Route summarization is not enabled by default Reduced link-state update overhead - Designing multiarea OSPF with smaller areas minimizes processing and memory requirements Reduced frequency of SPF calculations -  Multiarea OSPF localize the impact of a topology change within an area  For instance  it minimizes routing update impact because LSA flooding stops at the area boundary 
OSPF Features and Characteristics OSPFv3OSPFv3 is the OSPFv2 equivalent for exchanging IPv6 prefixes  OSPFv3 exchanges routing information to populate the IPv6 routing table with remote prefixes Note  With the OSPFv3 Address Families feature  OSPFv3 includes support for both IPv4 and IPv6  OSPF Address Families is beyond the scope of this curriculum OSPFv3 has the same functionality as OSPFv2  but uses IPv6 as the network-layer transport  communicating with OSPFv3 peers and advertising IPv6 routes  OSPFv3 also uses the SPF algorithm as the computation engine to determine the best paths throughout the routing domain OSPFv3 has separate processes from its IPv4 counterpart  The processes and operations are basically the same as in the IPv4 routing protocol  but run independently  
OSPF Operation Video - OSPF OperationThis video will cover the 7 states of OSPF operation Down stateInit stateTwo-way stateExStart stateExchange stateLoading stateFull state
OSPF Operation OSPF Operational StatesStateDescriptionDown StateNo Hello packets received   Down  Router sends Hello packets  Transition to Init state Init StateHello packets are received from the neighbor  They contain the Router ID of the sending router  Transition to Two-Way state Two-Way StateIn this state  communication between the two routers is bidirectional  On multiaccess links  the routers elect a DR and a BDR  Transition to ExStart state 
OSPF Operation OSPF Operational States  Cont  StateDescriptionExStart StateOn point-to-point networks  the two routers decide which router will initiate the DBD packet exchange and decide upon the initial DBD packet sequence number Exchange StateRouters exchange DBD packets  If additional router information is required then transition to Loading  otherwise  transition to the Full state Loading StateLSRs and LSUs are used to gain additional route information  Routes are processed using the SPF algorithm  Transition to the Full state Full StateThe link-state database of the router is fully synchronized 
OSPF Operation Establish Neighbor AdjacenciesTo determine if there is an OSPF neighbor on the link  the router sends a Hello packet that contains its router ID out all OSPF-enabled interfaces  The Hello packet is sent to the reserved All OSPF Routers IPv4 multicast address 224 0 0 5  Only OSPFv2 routers will process these packets  The OSPF router ID is used by the OSPF process to uniquely identify each router in the OSPF area  A router ID is a 32-bit number formatted like an IPv4 address and assigned to uniquely identify a router among OSPF peers When a neighboring OSPF-enabled router receives a Hello packet with a router ID that is not within its neighbor list  the receiving router attempts to establish an adjacency with the initiating router 
OSPF Operation Establish Neighbor Adjacencies  Cont  The process routers use to establish adjacency on a multiaccess network Down to Init StateWhen OSPFv2 is enabled on the interface  R1 transitions from Down to Init and starts sending OSPFv2 Hellos out of the interface in an attempt to discover neighbors Init StateWhen a R2 receives a hello from the previously unknown router R1  it adds R1 s router ID to the neighbor list and responds with a Hello packet containing its own router ID Two-Way StateR1 receives R2 s hello and notices that the message contains the R1 router ID in the list of R2 s neighbors  R1 adds R2 s router ID to the neighbor list and transitions to the Two-Way State  If R1 and R2 are connected with a point-to-point link  they transition to ExStart If R1 and R2 are connected over a common Ethernet network  the DR BDR election occurs Elect the DR   BDRThe DR and BDR election occurs  where the router with the highest router ID or highest priority is elected as the DR  and second highest is the BDR
OSPF Operation Synchronizing OSPF DatabasesAfter the Two-Way state  routers transition to database synchronization states  This is a three step process  as follows Decide first router  The router with the highest router ID sends its DBD first Exchange DBDs  As many as needed to convey the database  The other router must acknowledge each DBD with an LSAck packet Send an LSR  Each router compares the DBD information with the local LSDB  If the DBD has more current link information  the router transitions to the loading-state After all LSRs have been exchanged and satisfied  the routers are considered synchronized and in a full-state  Updates  LSUs  are sent When a change is perceived  incremental updates Every 30 minutes
OSPF Operation The Need for a DRMultiaccess networks can create two challenges for OSPF regarding the flooding of LSAs  as follows Creation of multiple adjacencies - Ethernet networks could potentially interconnect many OSPF routers over a common link  Creating adjacencies with every router would lead to an excessive number of LSAs exchanged between routers on the same network Extensive flooding of LSAs - Link-state routers flood their LSAs any time OSPF is initialized  or when there is a change in the topology  This flooding can become excessive 
OSPF Operation LSA Flooding with a DRAn increase in the number of routers on a multiaccess network also increases the number of LSAs exchanged between the routers  This flooding of LSAs significantly impacts the operation of OSPF If every router in a multiaccess network had to flood and acknowledge all received LSAs to all other routers on that same multiaccess network  the network traffic would become quite chaotic On multiaccess networks  OSPF elects a DR to be the collection and distribution point for LSAs sent and received  A BDR is also elected in case the DR fails  All other routers become DROTHERs  A DROTHER is a router that is neither the DR nor the BDR Note  The DR is only used for the dissemination of LSAs  The router will still use the best next-hop router indicated in the routing table for the forwarding of all other packets 
OSPF Packets Video - OSPF PacketsThis video will cover the following packet types HelloDatabase Description  DBD Link-State Request  LSR Link-State Update  LSU Link-State Acknowledgment  LSAck 
OSPF Packets Types of OSPF PacketsThe table summarizes the five different types of Link State Packets  LSPs  used by OSPFv2  OSPFv3 has similar packet types TypePacket NameDescriptionHelloDiscovers neighbors and builds adjacencies between themDatabase Description  DBD Checks for database synchronization between routersLink-State Request  LSR Requests specific link-state records from router to routerLink-State Update  LSU Sends specifically requested link-state recordsLink-State Acknowledgment  LSAck Acknowledges the other packet types
OSPF Packets Link-State UpdatesLSUs are also used to forward OSPF routing updates  An LSU packet can contain 11 different types of OSPFv2 LSAs  OSPFv3 renamed several of these LSAs and also contains two additional LSAs LSU and LSA are often used interchangeably  but the correct hierarchy is LSU packets contain LSA messages 
OSPF Packets Hello PacketThe OSPF Type 1 packet is the Hello packet  Hello packets are used to do the following Discover OSPF neighbors and establish neighbor-adjacencies Advertise parameters on which two routers must agree to become neighbors Elect the Designated Router  DR  and Backup Designated Router  BDR  on multiaccess networks like Ethernet  Point-to-point links do not require DR or BDR 
Module ObjectivesModule Title  Single-Area OSPFv2 ConfigurationModule Objective  Implement single-area OSPFv2 in both point-to-point and broadcast multiaccess networks Topic TitleTopic ObjectiveOSPF Router IDConfigure an OSPFv2 router ID Point-to-Point OSPF NetworksConfigure single-area OSPFv2 in a point-to-point network Multiaccess OSPF NetworksConfigure the OSPF interface priority to influence the DR BDR election in a multiaccess network Modify Single-Area OSPFv2Implement modifications to change the operation of single-area OSPFv2 Default Route PropagationConfigure OSPF to propagate a default route Verify Single-Area OSPFv2Verify a single-area OSPFv2 implementation 
OSPF Router ID OSPF Reference TopologyThe figure shows the topology used for configuring OSPFv2 in this module  The routers in the topology have a starting configuration  including interface addresses  There is currently no static routing or dynamic routing configured on any of the routers  All interfaces on R1  R2  and R3  except the loopback 1 on R2  are within the OSPF backbone area  The ISP router is used as the gateway to the internet of the routing domain 
OSPF Router ID Router Configuration Mode for OSPFOSPFv2 is enabled using the router ospf process-id global configuration mode command  The process-id value represents a number between 1 and 65 535 and is selected by the network administrator  The process-id value is locally significant  It is considered best practice to use the same process-id on all OSPF routers R1 config   router ospf 10 R1 config-router     area      OSPF area parameters auto-cost     Calculate OSPF interface cost according to bandwidth default-information   Control distribution of default information distance     Define an administrative distance exit      Exit from routing protocol configuration mode log-adjacency-changes   Log changes in adjacency state neighbor     Specify a neighbor router network     Enable routing on an IP network no      Negate a command or set its defaults passive-interface   Suppress routing updates on an interface redistribute    Redistribute information from another routing protocol router-id     router-id for this OSPF process R1 config-router  
OSPF Router ID Router IDsAn OSPF router ID is a 32-bit value  represented as an IPv4 address  It is used to uniquely identify an OSPF router  and all OSPF packets include the router ID of the originating router  Every router requires a router ID to participate in an OSPF domain  It can be defined by an administrator or automatically assigned by the router  The router ID is used by an OSPF-enabled router to do the following Participate in the synchronization of OSPF databases   During the Exchange State  the router with the highest router ID will send their database descriptor  DBD  packets first Participate in the election of the designated router  DR  - In a multiaccess LAN environment  the router with the highest router ID is elected the DR  The routing device with the second highest router ID is elected the backup designated router  BDR  
OSPF Router ID Router ID Order of PrecedenceCisco routers derive the router ID based on one of three criteria  in the following preferential order The router ID is explicitly configured using the OSPF router-id rid router configuration mode command  This is the recommended method to assign a router ID The router chooses the highest IPv4 address of any of configured loopback interfaces The router chooses the highest active IPv4 address of any of its physical interfaces 
OSPF Router ID Configure a Loopback Interface as the Router IDInstead of relying on physical interface  the router ID can be assigned to a loopback interface  Typically  the IPv4 address for this type of loopback interface should be configured using a 32-bit subnet-mask  255 255 255 255   This effectively creates a host route  A 32-bit host route would not get advertised as a route to other OSPF routers OSPF does not need to be enabled on an interface for that interface to be chosen as the router ID 
OSPF Router ID Explicitly Configure a Router IDIn our reference topology the router ID for each router is assigned as follows R1 uses router ID 1 1 1 1R2 uses router ID 2 2 2 2R3 uses router ID 3 3 3 3Use the router-id rid router configuration mode command to manually assign a router ID  In the example  the router ID 1 1 1 1 is assigned to R1  Use the show ip protocols command to verify the router ID  R1 config   router ospf 10 R1 config-router   router-id 1 1 1 1 R1 config-router   end  May 23 19 33 42 689   SYS-5-CONFIG I  Configured from console by console R1  show ip protocols   include Router ID Router ID 1 1 1 1 R1 
OSPF Router ID Modify a Router IDAfter a router selects a router ID  an active OSPF router does not allow the router ID to be changed until the router is reloaded or the OSPF process is reset Clearing the OSPF process is the preferred method to reset the router ID R1  show ip protocols   include Router ID Router ID 10 10 1 1 R1  conf t Enter configuration commands  one per line  End with CNTL Z  R1 config   router ospf 10 R1 config-router   router-id 1 1 1 1   OSPF  Reload or use  clear ip ospf process  command  for this to take effect R1 config-router   end R1  clear ip ospf process Reset ALL OSPF processes   no   y  Jun 6 01 09 46 975   OSPF-5-ADJCHG  Process 10  Nbr 3 3 3 3 on GigabitEthernet0 0 1 from FULL to DOWN  Neighbor Down  Interface down or detached  Jun 6 01 09 46 981   OSPF-5-ADJCHG  Process 10  Nbr 3 3 3 3 on GigabitEthernet0 0 1 from LOADING to FULL  Loading Done  R1  show ip protocols   include Router ID Router ID 1 1 1 1 R1 
Point-to-Point OSPF Networks The network Command SyntaxYou can specify the interfaces that belong to a point-to-point network by configuring the network command  You can also configure OSPF directly on the interface with the ip ospf command The basic syntax for the network command is as follows Router config-router   network network-address wildcard-mask area area-idThe network-address wildcard-mask syntax is used to enable OSPF on interfaces  Any interfaces on a router that match this part of the command are enabled to send and receive OSPF packets The area area-id syntax refers to the OSPF area  When configuring single-area OSPFv2  the network command must be configured with the same area-id value on all routers  Although any area ID can be used  it is good practice to use an area ID of 0 with single-area OSPFv2  This convention makes it easier if the network is later altered to support multiarea OSPFv2 
Point-to-Point OSPF Networks The Wildcard MaskThe wildcard-mask is typically the inverse of the subnet-mask configured on that interface  The easiest method for calculating a wildcard-mask is to subtract the network subnet-mask from 255 255 255 255  as shown for  24 and  26 subnet-masks in the figure 
Point-to-Point OSPF Networks Configure OSPF Using the network CommandWithin routing configuration mode  there are two ways to identify the interfaces that will participate in the OSPFv2 routing process In the first example  the wildcard-mask identifies the interface based on the network addresses  Any active interface that is configured with an IPv4 address belonging to that network will participate in the OSPFv2 routing process Note  Some IOS versions allow the subnet-mask to be entered instead of the wildcard-mask  The IOS then converts the subnet-mask to the wildcard-mask format R1 config   router ospf 10 R1 config-router   network 10 10 1 0 0 0 0 255 area 0 R1 config-router   network 10 1 1 4 0 0 0 3 area 0R1 config-router   network 10 1 1 12 0 0 0 3 area 0R1 config-router  
Point-to-Point OSPF Networks Configure OSPF Using the network Command  Cont  As an alternative  OSPFv2 can be enabled by specifying the exact interface IPv4 address using a quad zero wildcard-mask  Entering network 10 1 1 5 0 0 0 0 area 0 on R1 tells the router to enable interface Gigabit Ethernet 0 0 0 for the routing process  The advantage of specifying the interface is that the wildcard-mask calculation is not necessary  Notice that in all cases  the area argument specifies area 0 R1 config   router ospf 10 R1 config-router   network 10 10 1 1 0 0 0 0 area 0 R1 config-router   network 10 1 1 5 0 0 0 0 area 0 R1 config-router   network 10 1 1 14 0 0 0 0 area 0 R1 config-router  
Point-to-Point OSPF Networks Configure OSPF Using the ip ospf CommandTo configure OSPF directly on the interface  use the ip ospf interface configuration mode command  The syntax is as follows Router config-if   ip ospf process-id area area-idRemove the network commands using the no form of the command  Then go to each interface and configure the ip ospf commandR1 config   router ospf 10 R1 config-router   no network 10 10 1 1 0 0 0 0 area 0 R1 config-router   no network 10 1 1 5 0 0 0 0 area 0 R1 config-router   no network 10 1 1 14 0 0 0 0 area 0 R1 config-router   interface GigabitEthernet 0 0 0 R1 config-if   ip ospf 10 area 0 R1 config-if   interface GigabitEthernet 0 0 1 R1 config-if   ip ospf 10 area 0 R1 config-if   interface Loopback 0 R1 config-if   ip ospf 10 area 0 R1 config-if  
Point-to-Point OSPF Networks Passive InterfaceBy default  OSPF messages are forwarded out all OSPF-enabled interfaces  However  these messages only need to be sent out interfaces that are connecting to other OSPF-enabled routers Sending out unneeded messages on a LAN affects the network in three ways Inefficient Use of Bandwidth - Available bandwidth is consumed transporting unnecessary messages Inefficient Use of Resources - All devices on the LAN must process and eventually discard the message Increased Security Risk - Without additional OSPF security configurations  OSPF messages can be intercepted with packet-sniffing software  Routing updates can be modified and sent back to the router  corrupting the routing table with false metrics that misdirect traffic 
Point-to-Point OSPF Networks Configure Passive InterfacesUse the passive-interface router configuration mode command to prevent the transmission of routing messages through a router interface  but still allow that network to be advertised to other routers  The show ip protocols command is then used to verify that the interface is listed as passive 
Point-to-Point OSPF Networks OSPF Point-to-Point NetworksBy default  Cisco routers elect a DR and BDR on Ethernet interfaces  even if there is only one other device on the link  You can verify this with the show ip ospf interface command  The DR  BDR election process is unnecessary as there can only be two routers on the point-to-point network between R1 and R2  Notice in the output that the router has designated the network type as BROADCAST  R1  show ip ospf interface GigabitEthernet 0 0 0GigabitEthernet0 0 0 is up  line protocol is up Internet Address 10 1 1 5 30  Area 0  Attached via Interface EnableProcess ID 10  Router ID 1 1 1 1  Network Type BROADCAST  Cost  1 Topology-MTID    Cost    Disabled    Shutdown    Topology Name 0           1        no           no          Base Enabled by interface config  including secondary ip addresses Transmit Delay is 1 sec  State BDR  Priority 1 Designated Router  ID  2 2 2 2  Interface address 10 1 1 6 Backup Designated router  ID  1 1 1 1  Interface address 10 1 1 5 Timer intervals configured  Hello 10  Dead 40  Wait 40  Retransmit 5 oob-resync timeout 40
Point-to-Point OSPF Networks OSPF Point-to-Point Networks  Cont  To change this to a point-to-point network  use the interface configuration command ip ospf network point-to-point on all interfaces where you want to disable the DR BDR election process R1 config   interface GigabitEthernet 0 0 0 R1 config-if   ip ospf network point-to-point  Jun 6 00 44 05 208   OSPF-5-ADJCHG  Process 10  Nbr 2 2 2 2 on GigabitEthernet0 0 0 from FULL to DOWN  Neighbor Down  Interface down or detached  Jun 6 00 44 05 211   OSPF-5-ADJCHG  Process 10  Nbr 2 2 2 2 on GigabitEthernet0 0 0 from LOADING to FULL  Loading Done R1 config-if   end R1  show ip ospf interface GigabitEthernet 0 0 0GigabitEthernet0 0 0 is up  line protocol is up Internet Address 10 1 1 5 30  Area 0  Attached via Interface EnableProcess ID 10  Router ID 1 1 1 1  Network Type POINT TO POINT  Cost  1                      Topology-MTID    Cost    Disabled    Shutdown    Topology Name
Point-to-Point OSPF Networks Loopbacks and Point-to-Point NetworksUse loopbacks to provide additional interfaces for a variety of purposes  By default  loopback interfaces are advertised as  32 host routes To simulate a real LAN  the loopback interface can be configured as a point-to-point network to advertise the full network What R2 sees when R1 advertises the loopback interface as-is R2  show ip route   include 10 10 1 O  10 10 1 1 32  110 2  via 10 1 1 5  00 03 05  GigabitEthernet0 0 0Configuration change at R1 R1 config-if   interface Loopback 0 R1 config-if   ip ospf network point-to-pointResult at R2 R2  show ip route   include 10 10 1 O  10 10 1 0 24  110 2  via 10 1 1 5  00 03 05  GigabitEthernet0 0 0
Point-to-Point OSPF Networks Packet Tracer - Point-to-Point Single-Area OSPFv2 ConfigurationIn this Packet Tracer activity  you will do the following Explicitly configure router IDs Configure the network command on R1 using wildcard-mask based on the subnet-mask Configure the network command on R2 using a quad-zero wildcard-mask Configure the ip ospf interface command on R3 Configure passive interfaces Verify OSPF operation using the show ip protocols and show ip route commands 
Verify Single-Area OSPFv2 Verify OSPF NeighborsAfter configuring single-area OSPFv2  you will need to verify your configurations  The following two commands are particularly useful for verifying routing show ip interface brief - This verifies that the desired interfaces are active with correct IP addressing show ip route- This verifies that the routing table contains all the expected routes Additional commands for determining that OSPF is operating as expected include the following show ip ospf neighborshow ip protocolsshow ip ospfshow ip ospf interface
Verify Single-Area OSPFv2 Verify OSPF Neighbors  Cont  Use the show ip ospf neighbor command to verify that the router has formed an adjacency with its neighboring routers  If the router ID of the neighboring router is not displayed  or if it does not show as being in a state of FULL  the two routers have not formed an OSPFv2 adjacency Note  A non-DR or BDR router that has a neighbor relationship with another non-DR or BDR router will display a two-way adjacency instead of full The following command output displays the neighbor table of R1 R1  show ip ospf neighbor Neighbor ID  Pri  State  Dead Time  Address   Interface 3 3 3 3   0  FULL  -  00 00 35  10 1 1 13  GigabitEthernet0 0 12 2 2 2   0  FULL  -  00 00 31  10 1 1 6  GigabitEthernet0 0 0R1 
Verify Single-Area OSPFv2 Verify OSPF Neighbors  Cont  Two routers may not form an OSPFv2 adjacency if the following occurs The subnet-masks do not match  causing the routers to be on separate networks The OSPFv2 Hello or Dead Timers do not match The OSPFv2 Network Types do not match There is a missing or incorrect OSPFv2 network command 
Verify Single-Area OSPFv2 Verify OSPF Protocol SettingsThe show ip protocols command is a quick way to verify vital OSPF configuration information  as shown in the command output  This includes the OSPFv2 process ID  the router ID  interfaces explicitly configured to advertise OSPF routes  the neighbors the router is receiving updates from  and the default administrative distance  which is 110 for OSPF R1  show ip protocols     IP Routing is NSF aware      output omitted  Routing Protocol is  ospf 10  Outgoing update filter list for all interfaces is not set Incoming update filter list for all interfaces is not set    Router ID 1 1 1 1 Number of areas in this router is 1  1 normal 0 stub 0 nssa Maximum path  4 Routing for Networks  Routing on Interfaces Configured Explicitly  Area 0       Loopback0 GigabitEthernet0 0 1 GigabitEthernet0 0 0 Routing Information Sources  Gateway  Distance   Last Update 3 3 3 3  110    00 09 30 2 2 2 2  110    00 09 58 Distance   default is 110  R1 
Verify Single-Area OSPFv2 Verify OSPF Process InformationThe show ip ospf command can also be used to examine the OSPFv2 process ID and router ID  as shown in the command output  This command displays the OSPFv2 area information and the last time the SPF algorithm was executed R1  show ip ospf Routing Process  ospf 10  with ID 1 1 1 1 Start time  00 01 47 390  Time elapsed  00 12 32 320 output omitted Cisco NSF helper support enabled Reference bandwidth unit is 10000 mbps Area BACKBONE 0  Number of interfaces in this area is 3 Area has no authentication SPF algorithm last executed 00 11 31 231 ago SPF algorithm executed 4 times Area ranges are Number of LSA 3  Checksum Sum 0x00E77E Number of opaque link LSA 0  Checksum Sum 0x000000 Number of DCbitless LSA 0 Number of indication LSA 0 Number of DoNotAge LSA 0 Flood list length 0 R1 
Verify Single-Area OSPFv2 Verify OSPF Interface SettingsThe show ip ospf interface command provides a detailed list for every OSPFv2-enabled interface  Specify an interface to display the settings of just that interface  This command shows the process ID  the local router ID  the type of network  OSPF cost  DR and BDR information on multiaccess links  not shown   and adjacent neighbors R1  show ip ospf interface GigabitEthernet 0 0 0GigabitEthernet0 0 0 is up  line protocol is upInternet Address 10 1 1 5 30  Area 0  Attached via Interface EnableProcess ID 10  Router ID 1 1 1 1  Network Type POINT TO POINT  Cost  10        output omitted Neighbor Count is 1  Adjacent neighbor count is 1 Adjacent with neighbor 2 2 2 2 Suppress hello for 0 neighbor s  R1 
Verify Single-Area OSPFv2 Verify OSPF Interface Settings  Cont  To get a quick summary of OSPFv2-enabled interfaces  use the show ip ospf interface brief command  as shown in the command output  This command is useful for seeing important information including Interfaces are participating in OSPFNetworks that are being advertised  IP Address Mask Cost of each linkNetwork stateNumber of neighbors on each linkR1  show ip ospf interface brief Interface  PID  Area  IP Address Mask  Cost  State  Nbrs F C Lo0    10  0   10 10 1 1 24  10   P2P   0 0 Gi0 0 1   10  0   10 1 1 14 30  30   P2P   1 1 Gi0 0 0   10  0   10 1 1 5 30   10   P2P   1 1 R1 
Verify Single-Area OSPFv2 Packet Tracer - Verify Single-Area OSPFv2In this Packet Tracer activity  you will complete the following Identify and verify the status of OSPF neighbors Determine how the routes are being learned in the network Explain how the neighbor state is determined Examine the settings for the OSPF process ID Add a new LAN into an existing OSPF network and verify connectivity 
Module ObjectivesModule Title  QoS ConceptsModule Objective  Explain how networking devices implement QoS Topic TitleTopic ObjectiveNetwork Transmission QualityExplain how network transmission characteristics impact quality Traffic CharacteristicsDescribe minimum network requirements for voice  video  and data traffic Queuing AlgorithmsDescribe the queuing algorithms used by networking devices QoS ModelsDescribe the different QoS models QoS Implementation TechniquesExplain how QoS uses mechanisms to ensure transmission quality 
Network Transmission Quality Prioritizing TrafficWhen traffic volume is greater than what can be transported across the network  devices queue  hold  the packets in memory until resources become available to transmit them Queuing packets causes delay because new packets cannot be transmitted until previous packets have been processed If the number of packets to be queued continues to increase  the memory within the device fills up and packets are dropped  One QoS technique that can help with this problem is to classify data into multiple queues  as shown in the figure Note  A device implements QoS only when it is experiencing some type of congestion 
Network Transmission Quality Bandwidth  Congestion  Delay  and JitterNetwork bandwidth is measured in the number of bits that can be transmitted in a single second  or bits per second  bps  Network congestion causes delay  An interface experiences congestion when it is presented with more traffic than it can handle  Network congestion points are ideal candidates for QoS mechanisms The typical congestion points are aggregation  speed mismatch  and LAN to WAN 
Network Transmission Quality Bandwidth  Congestion  Delay  and Jitter  Cont  Delay or latency refers to the time it takes for a packet to travel from the source to the destination Fixed delay is the amount of time a specific process takes  such as how long it takes to place a bit on the transmission media  Variable delay takes an unspecified amount of time and is affected by factors such as how much traffic is being processed Jitter is the variation of delay of received packets DelayDescriptionCode delayThe fixed amount of time it takes to compress data at the source before transmitting to the first internetworking device  usually a switch Packetization delayThe fixed time it takes to encapsulate a packet with all the necessary header information Queuing delayThe variable amount of time a frame or packet waits to be transmitted on the link Serialization delayThe fixed amount of time it takes to transmit a frame onto the wire Propagation delayThe variable amount of time it takes for the frame to travel between the source and destination De-jitter delayThe fixed amount of time it takes to buffer a flow of packets and then send them out in evenly spaced intervals 
Network Transmission Quality Packet LossWithout QoS mechanisms  time-sensitive packets  such as real-time video and voice  are dropped with the same frequency as data that is not time-sensitive When a router receives a Real-Time Protocol  RTP  digital audio stream for Voice over IP  VoIP   it compensates for the jitter that is encountered using a playout delay buffer  The playout delay buffer buffers these packets and then plays them out in a steady stream 
Network Transmission Quality Packet Loss  Cont  If the jitter is so large that it causes packets to be received out of the range of the play out buffer  the out-of-range packets are discarded and dropouts are heard in the audio For losses as small as one packet  the digital-signal-processor  DSP  interpolates what it thinks the audio should be and no problem is audible to the user  When jitter exceeds what the DSP can do to make up for the missing packets  audio problems are heard Note  In a properly designed network  packet loss should be near zero 
QoS Implementation Techniques Avoiding Packet LossPacket loss is usually the result of congestion on an interface  Most applications that use TCP experience slowdown because TCP automatically adjusts to network congestion  Dropped TCP segments cause TCP sessions to reduce their window-sizes  Some applications do not use TCP and cannot handle drops  fragile flows  The following approaches can prevent drops in sensitive applications Increase link capacity to ease or prevent congestion Guarantee enough bandwidth and increase buffer space to accommodate bursts of traffic from fragile flows  WFQ  CBWFQ  and LLQ can guarantee bandwidth and provide prioritized forwarding to drop-sensitive applications Drop lower-priority packets before congestion occurs  Cisco IOS QoS provides queuing mechanisms  such as weighted-random-early-detection  WRED   that start dropping lower-priority packets before congestion occurs 
QoS Implementation Techniques QoS ToolsThere are three categories of QoS tool  as described in the table QoS ToolsDescriptionClassification and marking toolsSessions  or flows  are analyzed to determine what traffic class they belong to  When the traffic class is determined  the packets are marked Congestion avoidance toolsTraffic classes are allotted portions of network resources  as defined by the QoS policy  The QoS policy also identifies how some traffic may be selectively dropped  delayed  or re-marked to avoid congestion  The primary congestion avoidance tool is WRED and is used to regulate TCP data traffic in a bandwidth-efficient manner before tail drops caused by queue overflows occur Congestion management toolsWhen traffic exceeds available network resources  traffic is queued to await availability of resources  Common Cisco IOS-based congestion management tools include CBWFQ and LLQ algorithms 
QoS Implementation Techniques QoS Tools  Cont  The figure shows the sequence of QoS tools used when applied to packet flows Ingress packets are classified and their respective IP header is marked  To avoid congestion  packets are then allocated resources based on defined policies  Packets are then queued and forwarded out the egress interface based on their defined QoS shaping and policing policy Note  Classification and marking can be done on ingress or egress  whereas other QoS actions such queuing and shaping are usually done on egress 
QoS Implementation Techniques Classification and MarkingBefore a packet can have a QoS policy applied to it  the packet has to be classified Classification determines the class of traffic to which packets or frames belong  Only after traffic is marked can policies be applied to it How a packet is classified depends on the QoS implementation  Methods of classifying traffic flows at Layer 2 and 3 include using interfaces  ACLs  and class maps  Traffic can also be classified at Layers 4 to 7 using Network Based Application Recognition  NBAR  
QoS Implementation Techniques Classification and Marking  Cont  How traffic is marked usually depends on the technology  The decision of whether to mark traffic at Layers 2 or 3  or both  is not trivial and should be made after consideration of the following points Layer 2 marking of frames can be performed for non-IP traffic Layer 2 marking of frames is the only QoS option available for switches that are not  IP aware  Layer 3 marking will carry the QoS information end-to-end QoS ToolsLayerMarking FieldWidth in BitsEthernet  802 1q  802 1p Class of Service  CoS 802 11  Wi-Fi Wi-Fi Traffic Identifier  TID MPLSExperimental  EXP IPv4 and IPv6IP Precedence  IPP IPv4 and IPv6Differentiated Services Code Point  DSCP 
QoS Implementation Techniques Marking at Layer 2802 1Q is the IEEE standard that supports VLAN tagging at Layer 2 on Ethernet networks  When 802 1Q is implemented  two fields are inserted into the Ethernet frame following the source MAC address field 
QoS Implementation Techniques Marking at Layer 2  Cont  The 802 1Q standard also includes the QoS prioritization scheme known as IEEE 802 1p  The 802 1p standard uses the first three bits in the Tag Control Information  TCI  field  Known as the Priority  PRI  field  this 3-bit field identifies the Class of Service  CoS  markings Three bits means that a Layer 2 Ethernet frame can be marked with one of eight levels of priority  values 0-7  CoS ValueCoS Binary ValueDescription000Best-Effort Data001Medium-Priority Data010High-Priority Data011Call Signaling100Videoconferencing101Voice bearer  voice traffic 110Reserved111Reserved
QoS Implementation Techniques Marking at Layer 3IPv4 and IPv6 specify an 8-bit field in their packet headers to mark packets  Both IPv4 and IPv6 support an 8-bit field for marking  the Type of Service  ToS  field for IPv4 and the Traffic Class field for IPv6 
QoS Implementation Techniques Type of Service and Traffic Class FieldThe Type of Service  IPv4  and Traffic Class  IPv6  carry the packet marking as assigned by the QoS classification tools RFC 791 specified the 3-bit IP Precedence  IPP  field to be used for QoS markings RFC 2474 supersedes RFC 791 and redefines the ToS field by renaming and extending the IPP field to 6 bits Called the Differentiated Services Code Point  DSCP  field  these six bits offer a maximum of 64 possible classes of service The remaining two IP Extended Congestion Notification  ECN  bits can be used by ECN-aware routers to mark packets instead of dropping them  
QoS Implementation Techniques DSCP ValuesThe 64 DSCP values are organized into three categories Best-Effort  BE  - This is the default for all IP packets  The DSCP value is 0  The per-hop behavior is normal routing  When a router experiences congestion  these packets will be dropped  No QoS plan is implemented Expedited Forwarding  EF  - RFC 3246 defines EF as the DSCP decimal value 46  binary 101110   The first 3 bits  101  map directly to the Layer 2 CoS value 5 used for voice traffic  At Layer 3  Cisco recommends that EF only be used to mark voice packets Assured Forwarding  AF  - RFC 2597 defines AF to use the 5 most significant DSCP bits to indicate queues and drop preference  
QoS Implementation Techniques DSCP Values  Cont  Assured Forwarding values are shown in the figure The AFxy formula is specified as follows The first 3 most significant bits are used to designate the class  Class 4 is the best queue and Class 1 is the worst queue The 4th and 5th most significant bits are used to designate the drop preference The 6th most significant bit is set to zero For example  AF32 belongs to class 3  binary 011  and has a medium drop preference  binary 10   The full DSCP value is 28 because you include the 6th 0 bit  binary 011100  
QoS Implementation Techniques Class Selector BitsClass Selector  CS  bits The first 3 most significant bits of the DSCP field and indicate the class Map directly to the 3 bits of the CoS field and the IPP field to maintain compatibility with 802 1p and RFC 791 
QoS Implementation Techniques Trust BoundariesTraffic should be classified and marked as close to its source as technically and administratively feasible  This defines the trust boundary Trusted endpoints have the capabilities and intelligence to mark application traffic to the appropriate Layer 2 CoS and or Layer 3 DSCP values  Secure endpoints can have traffic marked at the Layer 2 switch Traffic can also be marked at Layer 3 switches   routers 
QoS Implementation Techniques Congestion AvoidanceCongestion avoidance tools monitor network traffic loads in an effort to anticipate and avoid congestion at common network and internetwork bottlenecks before congestion becomes a problem They monitor network traffic loads in an effort to anticipate and avoid congestion at common network and internetwork bottlenecks before congestion becomes a problem They monitor the average depth of the queue  When the queue is below the minimum threshold  there are no drops  As the queue fills up to the maximum threshold  a small percentage of packets are dropped  When the maximum threshold is passed  all packets are dropped Some congestion avoidance techniques provide preferential treatment for which packets get dropped Weighted random early detection  WRED  allows for congestion avoidance on network interfaces by providing buffer management and allowing TCP traffic to decrease  or throttle back  before buffers are exhausted WRED helps avoid tail drops and maximizes network use and TCP-based application performance  
QoS Implementation Techniques Shaping and PolicingTraffic shaping and traffic policing are two mechanisms provided by Cisco IOS QoS software to prevent congestion Traffic shaping retains excess packets in a queue and then schedules the excess for later transmission over increments of time  Traffic shaping results in a smoothed packet output rate Shaping is an outbound concept  packets going out an interface get queued and can be shaped  In contrast  policing is applied to inbound traffic on an interface  
QoS Implementation Techniques Shaping and Policing  Cont  Policing is applied to inbound traffic on an interface  Policing is commonly implemented by service providers to enforce a contracted customer-information-rate  CIR   However  the service provider may also allow bursting over the CIR if the service provider s network is not currently experiencing congestion 
QoS Implementation Techniques QoS Policy GuidelinesQoS policies must consider the full path from source to destination A few guidelines that help ensure the best experience for end users includes the following Enable queuing at every device in the path between source and destination Classify and mark traffic as close the source as possible Shape and police traffic flows as close to their sources as possible 
QoS Models Selecting an Appropriate QoS Policy ModelThere are three models for implementing QoS  QoS is implemented in a network using either IntServ or DiffServ  IntServ provides the highest guarantee of QoS  it is very resource-intensive  and therefore  not easily scalable  DiffServ is less resource-intensive and more scalable  IntServ and DiffServ are sometimes co-deployed in network QoS implementations ModelDescriptionBest-effort modelNot an implementation as QoS is not explicitly configured  Use when QoS is not required Integrated services  IntServ Provides very high QoS to IP packets with guaranteed delivery  Defines a signaling process for applications to signal to the network that they require special QoS for a period and that bandwidth should be reserved  IntServ can severely limit the scalability of a network Differentiated services  DiffServ Provides high scalability and flexibility in implementing QoS  Network devices recognize traffic classes and provide different levels of QoS to different traffic classes 
QoS Models Best EffortThe basic design of the internet is best-effort packet delivery and provides no guarantees The best-effort model treats all network packets in the same way  so an emergency voice message is treated the same way that a digital photograph attached to an email is treated Benefits and drawbacks of the best effort model BenefitsDrawbacksThe model is the most scalable There are no guarantees of delivery Scalability is only limited by available bandwidth  in which case all traffic is equally affected Packets will arrive whenever they can and in any order possible  if they arrive at all No special QoS mechanisms are required No packets have preferential treatment It is the easiest and quickest model to deploy Critical data is treated the same as casual email is treated 
QoS Models Integrated ServicesIntServ delivers the end-to-end QoS that real-time applications require  Explicitly manages network resources to provide QoS to individual flows or streams  sometimes called microflows  Uses resource reservation and admission-control mechanisms as building blocks to establish and maintain QoS Uses a connection-oriented approach  Each individual communication must explicitly specify its traffic descriptor and requested resources to the network  The edge router performs admission control to ensure that available resources are sufficient in the network  
QoS Models Integrated Services  Cont  In the IntServ model  the application requests a specific kind of service from the network before sending data  The application informs the network of its traffic profile and requests a particular kind of service that can encompass its bandwidth and delay requirements  IntServ uses the Resource Reservation Protocol  RSVP  to signal the QoS needs of an application s traffic along devices in the end-to-end path through the network  If network devices along the path can reserve the necessary bandwidth  the originating application can begin transmitting  If the requested reservation fails along the path  the originating application does not send any data BenefitsDrawbacksExplicit end-to-end resource admission control Per-request policy admission control Signaling of dynamic port numbersResource intensive due to the stateful architecture requirement for continuous signaling  Flow-based approach not scalable to large implementations such as the internet 
QoS Models Differentiated ServicesThe differentiated services  DiffServ  QoS model specifies a simple and scalable mechanism for classifying and managing network traffic Is not an end-to-end QoS strategy because it cannot enforce end-to-end guarantees Hosts forward traffic to a router which classifies the flows into aggregates  classes  and provides the appropriate QoS policy for the classes  Enforces and applies QoS mechanisms on a hop-by-hop basis  uniformly applying global meaning to each traffic class to provide both flexibility and scalability 
QoS Models Differentiated Services  Cont  DiffServ divides network traffic into classes based on business requirements  Each of the classes can then be assigned a different level of service  As the packets traverse a network  each of the network devices identifies the packet class-and services the packet according to that class  It is possible to choose many levels of service with DiffServ  BenefitsDrawbacksHighly scalable Provides many different levels of qualityNo absolute guarantee of service quality Requires a set of complex mechanisms to work in concert throughout the network
Queuing Algorithms Video   QoS AlgorithmsThis video will cover the following FIFO Queuing  absence of QoS Weighted Fair Queuing  WFQ Class Based Weighted Fair Queuing  CBWFQ Low Latency Queuing  LLQ 
Queuing Algorithms Queuing OverviewThe QoS policy implemented by the network administrator becomes active when congestion occurs on the link  Queuing is a congestion management tool that can buffer  prioritize  and  if required  reorder packets before being transmitted to the destination A number of queuing algorithms are available First-In  First-Out  FIFO Weighted Fair Queuing  WFQ Class-Based Weighted Fair Queuing  CBWFQ Low Latency Queuing  LLQ 
Queuing Algorithms First in First OutFirst In First Out  FIFO  queuing buffers and forwards packets in the order of their arrival FIFO has no concept of priority or classes of traffic and consequently  makes no decision about packet priority There is only one queue  and all packets are treated equally  Packets are sent out an interface in the order in which they arrive 
Queuing Algorithms Weighted Fair Queuing  WFQ Weighted Fair Queuing  WFQ  is an automated scheduling method that provides fair bandwidth allocation to all network traffic  WFQ applies priority  or weights  to identified traffic  classifies it into conversations or flows  and then determines how much bandwidth each flow is allowed relative to other flows WFQ classifies traffic into different flows based on source and destination IP addresses  MAC addresses  port numbers  protocol  and Type of Service  ToS  value WFQ is not supported with tunneling and encryption because these features modify the packet content information required by WFQ for classification 
Queuing Algorithms Class-Based Weighted Fair Queuing  CBWFQ Class-Based Weighted Fair Queuing  CBWFQ  extends the standard WFQ functionality to provide support for user-defined traffic classes  Traffic classes are defined based on match criteria including protocols  access-control-lists  ACLs   and input interfaces  Packets satisfying the match criteria for a class-constitute the traffic for that class A FIFO queue is reserved for each class  and traffic belonging to a class is directed to the queue for that class A class-can be assigned characteristics  such as bandwidth  weight  and maximum packet limit  The bandwidth assigned to a class is the guaranteed bandwidth delivered during congestion Packets belonging to a class-are subject to the bandwidth and queue limits  which is the maximum number of packets allowed to accumulate in the queue  that characterize the class 
Queuing Algorithms Class-Based Weighted Fair Queuing  CBWFQ   Cont  After a queue has reached its configured queue limit  adding more packets to the class-causes tail drop or packet drop to take effect  depending on how class policy is configured  Tail drop discards any packet that arrives at the tail end of a queue that has completely used up its packet-holding resources  This is the default queuing response to congestion  Tail drop treats all traffic equally and does not differentiate between classes of service 
Queuing Algorithms Low Latency Queuing  LLQ The Low Latency Queuing  LLQ  feature brings strict priority queuing  PQ  to CBWFQ  Strict PQ allows delay-sensitive packets such as voice to be sent before packets in other queues  LLQ allows delay-sensitive packets such as voice to be sent first  before packets in other queues   giving delay-sensitive packets preferential treatment over other traffic Cisco recommends that only voice traffic be directed to the priority queue 
Traffic Characteristics Network Traffic TrendsIn the early 2000s  the predominant types of IP traffic were voice and data  Voice traffic has a predictable bandwidth need and known packet arrival times  Data traffic is not real-time and has unpredictable bandwidth need  Data traffic can temporarily burst  as when a large file is being downloaded  This bursting can consume the entire bandwidth of a link More recently  video traffic has become the increasingly important to business communications and operations  According to the Cisco Visual Networking Index  VNI   video traffic represented 70  of all traffic in 2017  By 2022  video will represent 82  of all traffic  Mobile video traffic will reach 60 9 exabytes per month by 2022  The type of demands that voice  video  and data traffic place on the network are very different 
Traffic Characteristics VoiceVoice traffic is predictable and smooth and very sensitive to delays and dropped packets  Voice packets must receive a higher priority than other types of traffic  Cisco products use the RTP port range 16384 to 32767 to prioritize voice traffic  Voice can tolerate a certain amount of latency  jitter  and loss without any noticeable effectsLatency should be no more than 150 milliseconds  ms   Jitter should be no more than 30 ms  and packet loss no more than 1   Voice traffic requires at least 30 Kbps of bandwidth  Voice Traffic CharacteristicsOne-Way RequirementsSmooth Benign Drop sensitive Delay sensitive UPD priorityLatency   150ms Jitter   30ms Loss   1  Bandwidth  30-128 Kbps 
Traffic Characteristics VideoVideo traffic tends to be unpredictable  inconsistent  and bursty  Compared to voice  video is less resilient to loss and has a higher volume of data per packet  The number and size of video packets varies every 33 ms based on the content of the video UDP ports such as 554  are used for the Real-Time Streaming Protocol  RSTP  and should be given priority over other  less delay-sensitive  network traffic Latency should be no more than 400 milliseconds  ms   Jitter should be no more than 50 ms  and video packet loss should be no more than 1   Video traffic requires at least 384 Kbps of bandwidth Video Traffic CharacteristicsOne-Way RequirementsBursty Greedy Drop sensitive Delay sensitive UPD priorityLatency   200-400 ms Jitter   30-50 ms Loss   0 1   1  Bandwidth  384 Kbps - 20 Mbps 
Traffic Characteristics DataData applications that have no tolerance for data loss  such as email and web pages  use TCP to ensure that if packets are lost in transit  they will be resent  Data traffic can be smooth or bursty  Network control traffic is usually smooth and predictable Some TCP applications can consume a large portion of network capacity  FTP will consume as much bandwidth as it can get when you download a large file  such as a movie or game Data Traffic CharacteristicsSmooth bursty Benign greedy Drop insensitive Delay insensitive TCP Retransmits
Traffic Characteristics Data  Cont  Data traffic is relatively insensitive to drops and delays compared to voice and video  Quality of Experience or QoE is important to consider with data traffic Does the data come from an interactive application Is the data mission critical FactorMission CriticalNot Mission  CriticalInteractivePrioritize for the lowest delay of all data traffic and strive for a 1 to 2 second response time Applications could benefit from lower delay Not interactiveDelay can vary greatly as long as the necessary minimum bandwidth is supplied Gets any leftover bandwidth after all voice  video  and other data application needs are met 
Module ObjectivesModule Title  Basic Router ConfigurationModule Objective  Implement initial settings on a router and end devices Topic TitleTopic ObjectiveConfigure Initial Router SettingsConfigure initial settings on an IOS Cisco router Configure InterfacesConfigure two active interfaces on a Cisco IOS router Configure the Default GatewayConfigure devices to use the default gateway 
Configure Initial Router Settings Basic Router Configuration StepsConfigure the device name Secure privileged EXEC mode Secure user EXEC mode Secure remote Telnet   SSH access Encrypt all plaintext passwords Provide legal notification and save the configuration Router config   hostname hostnameRouter config   enable secret passwordRouter config   line console 0Router config-line   password passwordRouter config-line   loginRouter config   line vty 0 4Router config-line   password passwordRouter config-line   loginRouter config-line   transport input  ssh   telnet Router config   service password encryptionRouter config   banner motd   message  Router config   endRouter  copy running-config startup-config
Configure Initial Router Settings Basic Router Configuration ExampleCommands for basic router configuration on R1 Configuration is saved to NVRAM R1 config   hostname R1R1 config   enable secret classR1 config   line console 0R1 config-line   password ciscoR1 config-line   loginR1 config-line   line vty 0 4R1 config-line   password ciscoR1 config-line   loginR1 config-line   transport input ssh telnetR1 config-line   exitR1 config   service password encryptionR1 config   banner motd  Enter TEXT message  End with a new line and the                                                  WARNING  Unauthorized access is prohibited                                               R1 config   exitR1  copy running-config startup-config
Configure Initial Router Settings Packet Tracer   Configure Initial Router SettingsIn this Packet Tracer  you will do the following Verify the default router configuration Configure and verify the initial router configuration Save the running configuration file 
Configure Interfaces Configure Router InterfacesConfiguring a router interface includes issuing the following commands Router config   interface type-and-number Router config-if   description description-text Router config-if   ip address ipv4-address subnet-mask Router config-if   ipv6 address ipv6-address prefix-length Router config-if   no shutdown It is a good practice to use the description command to add information about the network connected to the interface The no shutdown command activates the interface 
Configure Interfaces Configure Router Interfaces ExampleThe commands to configure interface G0 0 0 on R1 are shown here R1 config   interface gigabitEthernet 0 0 0R1 config-if   description Link to LANR1 config-if   ip address 192 168 10 1 255 255 255 0R1 config-if   ipv6 address 2001 db8 acad 10  1 64R1 config-if   no shutdownR1 config-if   exitR1 config   Aug  1 01 43 53 435   LINK-3-UPDOWN  Interface GigabitEthernet0 0 0  changed state to down Aug  1 01 43 56 447   LINK-3-UPDOWN  Interface GigabitEthernet0 0 0  changed state to up Aug  1 01 43 57 447   LINEPROTO-5-UPDOWN  Line protocol on Interface GigabitEthernet0 0 0  changed state to up
Configure Interfaces Configure Router Interfaces Example  Cont  The commands to configure interface G0 0 1 on R1 are shown here R1 config   interface gigabitEthernet 0 0 1R1 config-if   description Link to R2R1 config-if   ip address 209 165 200 225 255 255 255 252R1 config-if   ipv6 address 2001 db8 feed 224  1 64R1 config-if   no shutdownR1 config-if   exitR1 config   Aug  1 01 46 29 170   LINK-3-UPDOWN  Interface GigabitEthernet0 0 1  changed state to down Aug  1 01 46 32 171   LINK-3-UPDOWN  Interface GigabitEthernet0 0 1  changed state to up Aug  1 01 46 33 171   LINEPROTO-5-UPDOWN  Line protocol on Interface GigabitEthernet0 0 1  changed state to up
Configure Interfaces Verify Interface ConfigurationTo verify interface configuration use the show ip interface brief and show ipv6 interface brief commands shown here R1   show ip interface briefInterface              IP-Address      OK  Method Status                Protocol GigabitEthernet0 0 0   192 168 10 1    YES manual up                    up GigabitEthernet0 0 1   209 165 200 225 YES manual up                    up Vlan1                  unassigned      YES unset  administratively down down R1   show ipv6 interface briefGigabitEthernet0 0 0        up up FE80  201 C9FF FE89 45012001 DB8 ACAD 10  1GigabitEthernet0 0 1        up up FE80  201 C9FF FE89 45022001 DB8 FEED 224  1Vlan1                       administratively down down unassigned R1 
Configure Interfaces Configure Verification CommandsThe table summarizes show commands used to verify interface configuration CommandsDescriptionshow ip interface brief show ipv6 interface briefDisplays all interfaces  their IP addresses  and their current status  show ip route show ipv6 routeDisplays the contents of the IP routing tables stored in RAM show interfacesDisplays statistics for all interfaces on the device  Only displays the IPv4 addressing information show ip interfacesDisplays the IPv4 statistics for all interfaces on a router show ipv6 interfacesDisplays the IPv6 statistics for all interfaces on a router 
Configure Interfaces Configure Verification Commands  Cont  View status of all interfaces with the show ip interface brief and show ipv6 interface brief commands  shown here R1  show ip interface briefInterface              IP-Address      OK  Method Status                Protocol GigabitEthernet0 0 0   192 168 10 1    YES manual up                    up GigabitEthernet0 0 1   209 165 200 225 YES manual up                    up Vlan1                  unassigned      YES unset  administratively down down R1 R1  show ipv6 interface briefGigabitEthernet0 0 0        up up FE80  201 C9FF FE89 45012001 DB8 ACAD 10  1GigabitEthernet0 0 1        up up FE80  201 C9FF FE89 45022001 DB8 FEED 224  1Vlan1                       administratively down down unassigned R1 
Configure Interfaces Configure Verification Commands  Cont  Display the contents of the IP routing tables with the show ip route and show ipv6 route commands as shown here R1  show ip route  output omitted Gateway of last resort is not set192 168 10 0 24 is variably subnetted  2 subnets  2 masksC        192 168 10 0 24 is directly connected  GigabitEthernet0 0 0L        192 168 10 1 32 is directly connected  GigabitEthernet0 0 0209 165 200 0 24 is variably subnetted  2 subnets  2 masksC        209 165 200 224 30 is directly connected  GigabitEthernet0 0 1L        209 165 200 225 32 is directly connected  GigabitEthernet0 0 1R1 R1  show ipv6 route output omitted C   2001 DB8 ACAD 10   64  0 0 via GigabitEthernet0 0 0  directly connectedL   2001 DB8 ACAD 10  1 128  0 0 via GigabitEthernet0 0 0  receiveC   2001 DB8 FEED 224   64  0 0 via GigabitEthernet0 0 1  directly connectedL   2001 DB8 FEED 224  1 128  0 0 via GigabitEthernet0 0 1  receiveL   FF00   8  0 0 via Null0  receiveR1 
Configure Interfaces Configure Verification Commands  Cont  Display statistics for all interfaces with the show interfaces command  as shown here R1  show interfaces gig0 0 0GigabitEthernet0 0 0 is up  line protocol is up Hardware is ISR4321-2x1GE  address is a0e0 af0d e140  bia  a0e0 af0d e140 Description  Link to LANInternet address is 192 168 10 1 24MTU 1500 bytes  BW 100000 Kbit sec  DLY 100 usec  reliability 255 255  txload 1 255  rxload 1 255Encapsulation ARPA  loopback not setKeepalive not supported Full Duplex  100Mbps  link type is auto  media type is RJ45output flow-control is off  input flow-control is offARP type  ARPA  ARP Timeout 04 00 00Last input 00 00 01  output 00 00 35  output hang neverLast clearing of  show interface  counters neverInput queue  0 375 0 0  size max drops flushes   Total output     drops  0Queueing strategy  fifoOutput queue  0 40  size max 5 minute input rate 0 bits sec  0 packets sec5 minute output rate 0 bits sec  0 packets sec1180 packets input  109486 bytes  0 no bufferReceived 84 broadcasts  0 IP multicasts 0 runts  0 giants  0 throttles  output omitted R1 
Configure Interfaces Configure Verification Commands  Cont  Display IPv4 statistics for router interfaces with the show ip interface command  as shown here R1  show ip interface g0 0 0GigabitEthernet0 0 0 is up  line protocol is upInternet address is 192 168 10 1 24Broadcast address is 255 255 255 255Address determined by setup commandMTU is 1500 bytesHelper address is not setDirected broadcast forwarding is disabledOutgoing Common access list is not set Outgoing access list is not setInbound Common access list is not set Inbound  access list is not setProxy ARP is enabledLocal Proxy ARP is disabledSecurity level is defaultSplit horizon is enabledICMP redirects are always sentICMP unreachables are always sentICMP mask replies are never sentIP fast switching is enabledIP Flow switching is disabled output omitted R1 
Configure Interfaces Configure Verification Commands  Cont  Display IPv6 statistics for router interfaces with the show ipv6 interface command shown here R1  show ipv6 interface g0 0 0GigabitEthernet0 0 0 is up  line protocol is upIPv6 is enabled  link-local address is FE80  868A 8DFF FE44 49B0No Virtual link-local address es  Description  Link to LANGlobal unicast address es  2001 DB8 ACAD 10  1  subnet is 2001 DB8 ACAD 10   64Joined group address es  FF02  1FF02  1 FF00 1FF02  1 FF44 49B0MTU is 1500 bytesICMP error-messages limited to one every 100 millisecondsICMP redirects are enabledICMP unreachables are sentND DAD is enabled  number of DAD attempts  1ND reachable time is 30000 milliseconds  using 30000 ND NS retransmit interval is 1000 millisecondsR1 
Configure the Default Gateway Default Gateway on a HostThe default gateway is used when a host sends a packet to a device on another network The default gateway address is generally the router interface address attached to the local network of the host To reach PC3  PC1 addresses a packet with the IPv4 address of PC3  but forwards the packet to its default gateway  the G0 0 0 interface of R1 Note  The IP address of the host and the router interface must be in the same network 
Configure the Default Gateway Default Gateway on a SwitchA switch must have a default gateway address configured to remotely manage the switch from another network To configure an IPv4 default gateway on a switch  use the ip default-gateway ip-address global configuration command MEDIA IS WORKING ON A CORRECTED VERSION OF THE GRAPHIC FROM 10 3 2 IT IS WRONG ON AR  AND ON THE GLOBAL BUG LISTSTOP
Configure Initial Router Settings Packet Tracer   Connect a Router to a LANIn this Packet Tracer  you will do the following Display the router information Configure router interfaces  Verify the configuration 
Configure Initial Router Settings Packet Tracer   Troubleshoot Default Gateway IssuesIn this Packet Tracer  you will do the following Verify the network documentation and use tests to isolate problems Determine an appropriate solution for a given problem Implement the solution Test to verify the problem is resolved Document the solution 
Router Hardware Router RequirementsRouters use the network-portion  prefix  of the destination IP address to route packets to the proper destination  They select an alternate path if a link goes down  All hosts on a network specify the IP address of the local router interface as their default gateway  Routers also serve other beneficial functions as follows They provide broadcast containment by limiting broadcasts to the local network They interconnect geographically separated locations The group users logically by application or department within a company  who have command needs or require access to the same resources They provide enhanced security by filtering unwanted traffic through access-control-lists 
Router Hardware Cisco RoutersBranch routers  shown in the figure  optimize branch services on a single platform while delivering an optimal application experience across branch and WAN infrastructures  Shown are the Cisco Integrated Services Router  ISR  4000 Series Routers 
Router Hardware Cisco Routers  Cont  Network edge routers  shown in the figure  enable the network edge to deliver high-performance  highly secure  and reliable services that unite campus  data center  and branch networks  Shown are the Cisco Aggregation Services Routers  ASR  9000 Series Routers 
Router Hardware Cisco Routers  Cont  Service provider routers  shown in the figure  deliver end-to-end scalable solutions and subscriber-aware services  Shown are the Cisco Network Convergence System  NCS  6000 Series Routers 
Router Hardware Cisco Routers  Cont  Industrial routers  such as the ones shown in the figure  are designed to provide enterprise-class features in rugged and harsh environments  Shown are the Cisco 1100 Series Industrial Integrated Services Routers 
Router Hardware Router Form FactorsCisco 900 Series  This is a small branch office router  It combines WAN  switching  security  and advanced connectivity options in a compact  fanless platform for small and medium-sized businesses 
Router Hardware Router Form FactorsCisco ASR 9000 and 1000 Series Aggregation Services Routers  These routers provide density and resiliency with programmability  for a scalable network edge 
Router Hardware Router Form FactorsCisco Network Convergence System 5500 Series Routers  These routers are designed to efficiently scale between large data centers and large enterprise networks  web  and service provider WAN and aggregation networks 
Router Hardware Router Form FactorsCisco 800 Industrial Integrated Services Router  This router is compact and designed for harsh environments 
Basic Router Configuration Review TopologyThe topology in the figure will be used for configuration and verification examples  It will also be used in the next topic to discuss the IP routing table 
Basic Router Configuration Review Configuration CommandsR1 config   ipv6 unicast-routing R1 config   interface gigabitethernet 0 0 0 R1 config-if   description Link to LAN 1 R1 config-if   ip address 10 0 1 1 255 255 255 0 R1 config-if   ipv6 address 2001 db8 acad 1  1 64 R1 config-if   ipv6 address fe80  1 a link-local R1 config-if   no shutdown R1 config-if   exit R1 config   interface gigabitethernet 0 0 1 R1 config-if   description Link to LAN 2 R1 config-if   ip address 10 0 2 1 255 255 255 0 R1 config-if   ipv6 address 2001 db8 acad 2  1 64 R1 config-if   ipv6 address fe80  1 b link-local R1 config-if   no shutdown R1 config-if   exit R1 config   interface serial 0 1 1 R1 config-if   description Link to R2 R1 config-if   ip address 10 0 3 1 255 255 255 0 R1 config-if   ipv6 address 2001 db8 acad 3  1 64 R1 config-if   ipv6 address fe80  1 c link-local R1 config-if   no shutdown R1 config-if   exit R1  copy running-config startup-config Destination filename  startup-config   Building configuration     OK  R1 
Basic Router Configuration Review Verification CommandsCommon verification commands include the following show ip interface briefshow running-config interface interface-type numbershow interfacesshow ip interfaceshow ip routepingIn each case  replace ip with ipv6 for the IPv6 version of the command 
Basic Router Configuration Review Filter Command OutputFiltering commands can be used to display specific sections of output  To enable the filtering command  enter a pipe     character after the show command and then enter a filtering parameter and a filtering expression The filtering parameters that can be configured after the pipe include section - This displays the entire section that starts with the filtering expression include - This includes all output lines that match the filtering expression exclude - This excludes all output lines that match the filtering expression begin - This displays all the output lines from a certain point  starting with the line that matches the filtering expression Note  Output filters can be used in combination with any show command 
Configure Floating Static Routes Floating Static RoutesAnother type of static route is a floating static route  Floating static routes are static routes that are used to provide a backup path to a primary static or dynamic route  The floating static route is only used when the primary route is not available To accomplish this  the floating static route is configured with a higher administrative distance than the primary route  The administrative distance represents the trustworthiness of a route  If multiple paths to the destination exist  the router will choose the path with the lowest administrative distance By default  static routes have an administrative distance of 1  making them preferable to routes learned from dynamic routing protocols  The administrative distance of a static route can be increased to make the route less desirable than that of another static route or a route learned through a dynamic routing protocol  In this way  the static route  floats  and is not used when the route with the better administrative distance is active  
Configure Floating Static Routes Configure IPv4 and IPv6 Floating Static RoutesThe commands to configure default and floating IP default routes are as follows The show ip route and show ipv6 route output verifies that the default routes to R2 are installed in the routing table  Note that the IPv4 floating static route to R3 is not present in the routing table  R1 config   ip route 0 0 0 0 0 0 0 0 172 16 2 2 R1 config   ip route 0 0 0 0 0 0 0 0 10 10 10 2 5 R1 config   ipv6 route    0 2001 db8 acad 2  2 R1 config   ipv6 route    0 2001 db8 feed 10  2 5
Configure Floating Static Routes Test the Floating Static RoutesWhat would happen if R2 failed  To simulate this  R2 shuts down both of its serial interfaces R1 automatically generates syslog messages for the link going down A look at R1 s routing table would show the secondary route being used 
Configure IP Default Static Routes Default Static RouteA default route is a static route that matches all packets  A single default route represents any network that is not in the routing table Routers commonly use default routes that are either configured locally or learned from another router  The default route is used as the Gateway of Last Resort Default static routes are commonly used when connecting an edge router to a service provider network  or a stub router  a router with only one upstream neighbor router  The figure shows a typical default static route scenario 
Configure IP Default Static Routes Default Static Route  Cont  IPv4 Default Static Route  The command syntax for an IPv4 default static route is similar to any other IPv4 static route  except that the network address is 0 0 0 0 and the subnet-mask is 0 0 0 0  The 0 0 0 0 0 0 0 0 in the route will match any network address Note  An IPv4 default static route is commonly referred to as a quad-zero route The basic command syntax for an IPv4 default static route is as follows Router config   ip route 0 0 0 0 0 0 0 0  ip-address   exit-intf IPv6 Default Static Route  The command syntax for an IPv6 default static route is similar to any other IPv6 static route  except that the ipv6-prefix prefix-length is    0  which matches all routes The basic command syntax for an IPv6 default static route is as follows Router config   ipv6 route    0  ipv6-address   exit-intf 
Configure IP Default Static Routes Configure a Default Static RouteThe example shows an IPv4 default static route configured on R1  With the configuration shown in the example  any packets not matching more specific route entries are forwarded to R2 at 172 16 2 2 R1 config   ip route 0 0 0 0 0 0 0 0 172 16 2 2An IPv6 default static route is configured in similar fashion  With this configuration any packets not matching more specific IPv6 route entries are forwarded to R2 at 2001 db8 acad 2  2R1 config   ipv6 route    0 2001 db8 acad 2  2
Configure IP Default Static Routes Verify a Default Static RouteThe show ip route static command output from R1 displays the contents of the static routes in the routing table  Note the asterisk     next to the route with code  S   The asterisk indicates that this static route is a candidate default route  which is why it is selected as the Gateway of Last Resort Notice that the static default route configuration uses the  0 mask for IPv4 default routes  Remember that the IPv4 subnet-mask in a routing table determines how many bits must match between the destination IP address of the packet and the route in the routing table  A  0 mask indicates that none of the bits are required to match  As long as a more specific match does not exist  the default static route matches all packets 
Configure IP Default Static Routes Verify a Default Static Route  Cont  This example shows the show ipv6 route static command output to display the contents of the routing table Notice that the static default route configuration uses the    0 prefix for IPv6 default routes  Remember that the IPv6 prefix-length in a routing table determines how many bits must match between the destination IP address of the packet and the route in the routing table  A    0 prefix indicates that none of the bits are required to match  As long as a more specific match does not exist  the default static route matches all packets 
Configure IP Static Routes IPv4 Next-Hop Static RouteIn a next-hop static route  only the next-hop IP address is specified  The exit interface is derived from the next hop  For example  three next-hop IPv4 static routes are configured on R1 using the IP address of the next hop  R2 R1 config   ip route 172 16 1 0 255 255 255 0 172 16 2 2 R1 config   ip route 192 168 1 0 255 255 255 0 172 16 2 2 R1 config   ip route 192 168 2 0 255 255 255 0 172 16 2 2The resulting routing table entries on R1 
Configure IP Static Routes IPv6 Next-Hop Static RouteThe commands to configure R1 with the IPv6 static routes to the three remote networks are as follows R1 config   ipv6 unicast-routing R1 config   ipv6 route 2001 db8 acad 1   64 2001 db8 acad 2  2 R1 config   ipv6 route 2001 db8 cafe 1   64 2001 db8 acad 2  2 R1 config   ipv6 route 2001 db8 cafe 2   64 2001 db8 acad 2  2The routing table for R1 now has routes to the three remote IPv6 networks 
Configure IP Static Routes IPv4 Directly Connected Static RouteWhen configuring a static route  another option is to use the exit interface to specify the next-hop address   Three directly connected IPv4 static routes are configured on R1 using the exit interface Note  Using a next-hop address is generally recommended  Directly connected static routes should only be used with point-to-point serial interfaces   R1 config   ip route 172 16 1 0 255 255 255 0 s0 1 0 R1 config   ip route 192 168 1 0 255 255 255 0 s0 1 0 R1 config   ip route 192 168 2 0 255 255 255 0 s0 1 0
Configure IP Static Routes IPv6 Directly Connected Static RouteIn the example  three directly connected IPv6 static routes are configured on R1 using the exit interface Note  Using a next-hop address is generally recommended  Directly connected static routes should only be used with point-to-point serial interfaces  R1 config   ipv6 route 2001 db8 acad 1   64 s0 1 0 R1 config   ipv6 route 2001 db8 cafe 1   64 s0 1 0 R1 config   ipv6 route 2001 db8 cafe 2   64 s0 1 0
Configure IP Static Routes IPv4 Fully Specified Static RouteIn a fully specified static route  both the exit interface and the next-hop IP address are specified  This form of static route is used when the exit interface is a multi-access interface and it is necessary to explicitly identify the next hop  The next hop must be directly connected to the specified exit interface  Using an exit interface is optional  however it is necessary to use a next-hop address It is recommended that when the exit interface is an Ethernet network  that the static route includes a next-hop address  You can also use a fully specified static route that includes both the exit interface and the next-hop address 
Configure IP Static Routes IPv6 Fully Specified Static RouteIn a fully specified static route  both the exit interface and the next-hop IPV6 address are specified  There is a situation in IPv6 when a fully specified static route must be used  If the IPv6 static route uses an IPv6 link-local address as the next-hop address  use a fully specified static route  The figure shows an example of a fully specified IPv6 static route using an IPv6 link-local address as the next-hop address 
Configure IP Static Routes IPv6 Fully Specified Static Route  Cont  The reason a fully specified static route must be used is because IPv6 link-local addresses are not contained in the IPv6 routing table  Link-local addresses are only unique on a given link or network  The next-hop link-local address may be a valid address on multiple networks connected to the router  Therefore  it is necessary that the exit interface be included The following example shows the IPv6 routing table entry for this route  Notice that both the next-hop link-local address and the exit interface are included 
Configure IP Static Routes Verify a Static RouteAlong with show ip route  show ipv6 route  ping and traceroute  other useful commands to verify static routes include the following show ip route staticshow ip route networkshow running-config   section ip routeReplace ip with ipv6 for the IPv6 versions of the command 
Configure Static Host Routes Host RoutesA host route is an IPv4 address with a 32-bit mask  or an IPv6 address with a 128-bit mask  The following shows the three ways a host route can be added to the routing table Automatically installed when an IP address is configured on the routerConfigured as a static host routeHost route automatically obtained through other methods  discussed in later courses 
Configure Static Host Routes Automatically Installed Host RoutesCisco IOS automatically installs a host route  also known as a local host route  when an interface address is configured on the router  A host route allows for a more efficient process for packets that are directed to the router itself  rather than for packet forwarding  This is in addition to the connected route  designated with a C in the routing table for the network address of the interface The local routes are marked with L in the output of the routing table 
Configure Static Host Routes Static Host RoutesA host route can be a manually configured static route to direct traffic to a specific destination device  such as the server shown in the figure  The static route uses a destination IP address and a 255 255 255 255   32  mask for IPv4 host routes  and a  128 prefix length for IPv6 host routes 
Configure Static Host Routes Configure Static Host RoutesThe example shows the IPv4 and IPv6 static host route configuration on the Branch router to access the server Branch config   ip route 209 165 200 238 255 255 255 255 198 51 100 2Branch config   ipv6 route 2001 db8 acad 2  238 128 2001 db8 acad 1  2Branch config   exit Branch 
Configure Static Host Routes Verify Static Host RoutesA review of both the IPv4 and IPv6 route tables verifies that the routes are active 
Configure Static Host Routes Configure IPv6 Static Host Route with Link-Local Next-HopFor IPv6 static routes  the next-hop address can be the link-local address of the adjacent router  However  you must specify an interface type and an interface number when using a link-local address as the next hop  as shown in the example  First  the original IPv6 static host route is removed  then a fully specified route configured with the IPv6 address of the server and the IPv6 link-local address of the ISP router 
How a Host Routes Host Forwarding DecisionPackets are always created at the source Each host devices creates their own routing table A host can send packets to the following Itself   127 0 0 1  IPv4     1  IPv6 Local Hosts   destination is on the same LANRemote Hosts   devices are not on the same LAN 
How a Host Routes Host Forwarding Decision  Cont  The Source device determines whether the destination is local or remoteMethod of determination IPv4   Source uses its own IP address and Subnet mask  along with the destination IP addressIPv6   Source uses the network address and prefix advertised by the local routerLocal traffic is dumped out the host interface to be handled by an intermediary device Remote traffic is forwarded directly to the default gateway on the LAN 
How a Host Routes Default GatewayA router or layer-3 switch can be a default-gateway Features of a default gateway  DGW  It must have an IP address in the same range as the rest of the LAN It can accept data from the LAN and is capable of forwarding traffic off of the LAN It can route to other networks If a device has no default gateway or a bad default gateway  its traffic will not be able to leave the LAN 
How a Host Routes A Host Routes to the Default GatewayThe host will know the default gateway  DGW  either statically or through DHCP in IPv4 IPv6 sends the DGW through a router solicitation  RS  or can be configured manually A DGW is static route which will be a last resort route in the routing table All device on the LAN will need the DGW of the router if they intend to send traffic remotely 
How a Host Routes  Host Routing TablesOn Windows  route print or netstat  -r to display the PC routing tableThree sections displayed by these two commands Interface List   all potential interfaces and MAC addressingIPv4 Routing TableIPv6 Routing Table
Introduction to Routing Router Packet Forwarding DecisionWhat happens when the router receives the frame from the host device 
Introduction to Routing IP Router Routing TableThere three types of routes in a router s routing table Directly Connected   These routes are automatically added by the router  provided the interface is active and has addressing Remote   These are the routes the router does not have a direct-connection and may be learned Manually   with a static routeDynamically   by using a routing protocol to have the routers share their information with each otherDefault Route   this forwards all traffic to a specific direction when there is not a match in the routing table 
Introduction to Routing Static RoutingStatic Route Characteristics Must be configured manuallyMust be adjusted manually by the administrator when there is a change in the topologyGood for small non-redundant-networksOften used in conjunction with a dynamic routing protocol for configuring a default route
Introduction to Routing Dynamic RoutingDynamic Routes Automatically Discover remote networksMaintain up-to-date informationChoose the best path to the destinationFind new best paths when there is a topology changeDynamic routing can also share static default routes with the other routers 
Introduction to Routing Video   IPv4 Router Routing TablesThis video will explain the information in the IPv4 router routing table 
Introduction to Routing Introduction to an IPv4 Routing TableThe show ip route command shows the following route sources L - Directly connected local interface IP addressC   Directly connected networkS   Static route was manually configured by an administratorO    OSPFD   EIGRPThis command shows types of routes Directly Connected   C and LRemote Routes   O  D  etc Default Routes   S  
IP Routing Table Route SourcesA routing table contains a list of routes to known networks  prefixes and prefix lengths   The source of this information is derived from the following Directly connected networksStatic routesDynamic routing protocolsThe source for each route in the routing table is identified by a code  Common codes include the following L - Identifies the address assigned to a router interface  C - Identifies a directly connected network S - Identifies a static route created to reach a specific network O - Identifies a dynamically learned network from another router using the OSPF routing protocol   - This route is a candidate for a default route 
IP Routing Table Routing Table PrinciplesThere are three routing table principles as described in the table  These are issues that are addressed by the proper configuration of dynamic routing protocols or static routes on all the routers between the source and destination devices Routing Table PrincipleExampleEvery router makes its decision alone  based on the information it has in its own routing table R1 can only forward packets using its own routing table  R1 does not know what routes are in the routing tables of other routers  e g   R2  The information in a routing table of one router does not necessarily match the routing table of another router Just because R1 has route in its routing table to a network in the internet via R2  that does not mean that R2 knows about that same network Routing information about a path does not provide return routing information R1 receives a packet with the destination IP address of PC1 and the source IP address of PC3  Just because R1 knows to forward the packet out its G0 0 0 interface  doesn t necessarily mean that it knows how to forward packets originating from PC1 back to the remote network of PC3
IP Routing Table Routing Table EntriesIn the figure  the numbers identify the following information Route source - This identifies how the route was learned Destination network  prefix and prefix length  - This identifies the address of the remote network Administrative distance - This identifies the trustworthiness of the route source  Lower values indicate preferred route source Metric - This identifies the value assigned to reach the remote network  Lower values indicate preferred routes Next-hop - This identifies the IP address of the next router to which the packet would be forwarded Route timestamp - This identifies how much time has passed since the route was learned Exit interface - This identifies the egress interface to use for outgoing packets to reach their final destination Note  The prefix length of the destination network specifies the minimum number of far-left bits that must match between the IP address of the packet and the destination network  prefix  for this route to be used 
IP Routing Table Directly Connected NetworksTo learn about any remote networks  the router must have at least one active interface configured with an IP address and subnet-mask  prefix length   This is known as a directly connected network or a directly connected route  Routers add a directly connected route to its routing table when an interface is configured with an IP address and is activated A directly connected network is denoted by a status code of C in the routing table  The route contains a network prefix and prefix length The routing table also contains a local route for each of its directly connected networks  indicated by the status code of L  For IPv4 local routes the prefix length is  32 and for IPv6 local routes the prefix length is  128  This means the destination IP address of the packet must match all the bits in the local route for this route to be a match  The purpose of the local route is to efficiently determine when it receives a packet for the interface instead of a packet that needs to be forwarded 
IP Routing Table Static RoutesAfter directly connected interfaces are configured and added to the routing table  static or dynamic routing can be implemented for accessing remote networks  Static routes are manually configured  They define an explicit path between two networking devices  They are not automatically updated and must be manually reconfigured if the network topology changes  Static routing has three primary uses It provides ease of routing table maintenance in smaller networks that are not expected to grow significantly It uses a single default route to represent a path to any network that does not have a more specific match with another route in the routing table  Default routes are used to send traffic to any destination beyond the next upstream router It routes to and from stub networks  A stub network is a network accessed by a single route  and the router has only one neighbor 
IP Routing Table Static Routes in the IP Routing TableThe topology in the figure is simplified to show only one LAN attached to each router  The figure shows IPv4 and IPv6 static routes configured on R1 to reach the 10 0 4 0 24 and 2001 db8 acad 4   64 networks on R2  
IP Routing Table Dynamic Routing ProtocolsDynamic routing protocols are used by routers to automatically share information about the reachability and status of remote networks  Dynamic routing protocols perform several activities  including network discovery and maintaining routing tables 
IP Routing Table Dynamic Routes in the Routing TableOSPF is now being used in our sample topology to dynamically learn all the networks connected to R1 and R2  The routing table entries use the status code of O to indicate the route was learned by the OSPF routing protocol  Both entries also include the IP address of the next-hop router  via ip-address Note  IPv6 routing protocols use the link-local address of the next-hop router Note  OSPF routing configuration for IPv4 and IPv6 is beyond the scope of this course R1  show ip route Codes  L - local  C - connected  S - static  R - RIP  M - mobile  B - BGP D - EIGRP  EX - EIGRP external  O - OSPF  IA - OSPF inter area  output omitted for brevity  O 10 0 4 0 24  110 50  via 10 0 3 2  00 24 22  Serial0 1 1 O 10 0 5 0 24  110 50  via 10 0 3 2  00 24 15  Serial0 1 1 R1  show ipv6 route IPv6 Routing Table - default - 10 entries  Output omitted  NDr - Redirect  RL - RPL  O - OSPF Intra  OI - OSPF Inter O 2001 DB8 ACAD 4   64  110 50  via FE80  2 C  Serial0 1 1 O 2001 DB8 ACAD 5   64  110 50  via FE80  2 C  Serial0 1 1
IP Routing Table Default RouteThe default route specifies a next-hop router to use when the routing table does not contain a specific route that matches the destination IP address  A default route can be either a static route or learned automatically from a dynamic routing protocol  A default route has an IPv4 route entry of 0 0 0 0 0 or an IPv6 route entry of    0  This means that zero or no bits need to match between the destination IP address and the default route 
IP Routing Table Structure of an IPv4 Routing TableIPv4 was standardized using the now obsolete classful-addressing architecture  The IPv4 routing table is organized using this same classful structure  Although the lookup process no longer uses classes  the structure of the IPv4 routing table still retains in this format An indented entry is known as a child route  A route entry is indented if it is the subnet of a classful address  class A  B or C network   Directly connected networks will always be indented  child routes  because the local address of the interface is always entered in the routing table as a  32  The child route will include the route source and all the forwarding information such as the next-hop address  The classful network address of this subnet will be shown above the route entry  less indented  and without a source code  That route is known as a parent route 
IP Routing Table Structure of an IPv4 Routing TableAn indented entry is known as a child route  A route entry is indented if it is the subnet of a classful address  class A  B or C network   Directly connected networks will always be indented  child routes  because the local address of the interface is always entered in the routing table as a  32  The child route will include the route source and all the forwarding information such as the next-hop address  The classful network address of this subnet will be shown above the route entry  less indented  and without a source code  That route is known as a parent route Router  show ip route  Output omitted  192 168 1 0 24 is variably  C    192 168 1 0 24 is direct  L    192 168 1 1 32 is direct  O    192 168 2 0 24  110 65   O    192 168 3 0 24  110 65   192 168 12 0 24 is variab  C    192 168 12 0 30 is direct  L    192 168 12 1 32 is direct  192 168 13 0 24 is variably  C    192 168 13 0 30 is direct  L    192 168 13 1 32 is direct  192 168 23 0 30 is subnette  O    192 168 23 0 30  110 128   Router 
IP Routing Table Structure of an IPv6 Routing TableThe concept of classful-addressing was never part of IPv6  so the structure of an IPv6 routing table is very straight forward  Every IPv6 route entry is formatted and aligned the same way R1  show ipv6 route  output omitted for brevity  OE2    0  110 1   tag 2 via FE80  2 C  Serial0 0 1 C 2001 DB8 ACAD 1   64  0 0  via GigabitEthernet0 0 0  directly connected L 2001 DB8 ACAD 1  1 128  0 0  via GigabitEthernet0 0 0  receive C 2001 DB8 ACAD 2   64  0 0  via GigabitEthernet0 0 1  directly connected L 2001 DB8 ACAD 2  1 128  0 0  via GigabitEthernet0 0 1  receive C 2001 DB8 ACAD 3   64  0 0  via Serial0 1 1  directly connected L 2001 DB8 ACAD 3  1 128  0 0  via Serial0 1 1  receive O 2001 DB8 ACAD 4   64  110 50  via FE80  2 C  Serial0 1 1 O 2001 DB8 ACAD 5   64  110 50  via FE80  2 C  Serial0 1 1 L FF00   8  0 0  via Null0  receive R1 
IP Routing Table Administrative DistanceA route entry for a specific network address  prefix and prefix length  can only appear once in the routing table  However  it is possible that the routing table learns about the same network address from more than one routing source  Except for very specific circumstances  only one dynamic routing protocol should be implemented on a router  Each routing protocol may decide on a different path to reach the destination based on the metric of that routing protocol This raises a few questions  such as the following How does the router know which source to use Which route should it install in the routing table  Cisco IOS uses what is known as the administrative distance  AD  to determine the route to install into the IP routing table  The AD represents the  trustworthiness  of the route  The lower the AD  the more trustworthy the route source 
IP Routing Table Administrative Distance  Cont  The table lists various routing protocols and their associated ADs Route SourceAdministrative DistanceDirectly connectedStatic routeEIGRP summary routeExternal BGP20Internal EIGRP90OSPF110IS-IS115RIP120External EIGRP170Internal BGP200
Packet Forwarding Packet Forwarding Decision ProcessThe data-link frame with an encapsulated IP packet arrives on the ingress interface The router examines the destination IP address in the packet header and consults its IP routing table The router finds the longest matching prefix in the routing table The router encapsulates the packet in a data-link frame and forwards it out the egress interface  The destination could be a device connected to the network or a next-hop router However  if there is no matching route entry the packet is dropped 
Packet Forwarding Packet Forwarding Decision Process  Cont  After a router has determined the best path  it could do the following Forward the Packet to a Device on a Directly Connected NetworkIf the route entry indicates that the egress interface is a directly connected network  the packet can be forwarded directly to the destination device  Typically this is an Ethernet LAN To encapsulate the packet in the Ethernet frame  the router needs to determine the destination MAC address associated with the destination IP address of the packet  The process varies based on whether the packet is an IPv4 or IPv6 packet 
Packet Forwarding Packet Forwarding Decision Process  Cont  After a router has determined the best path  it could do the following  Forward the Packet to a Next-Hop RouterIf the route entry indicates that the destination IP address is on a remote network  meaning a device on network that is not directly connected  The packet must be forwarded to the next-hop router  The next-hop address is indicated in the route entry If the forwarding router and the next-hop router are on an Ethernet network  a similar process  ARP and ICMPv6 Neighbor Discovery  will occur for determining the destination MAC address of the packet as described previously  The difference is that the router will search for the IP address of the next-hop router in its ARP table or neighbor cache  instead of the destination IP address of the packet Note  This process will vary for other types of Layer 2 networks 
Packet Forwarding Packet Forwarding Decision Process  Cont  After a router has determined the best path  it could do the following Drop the Packet - No Match in Routing TableIf there is no match between the destination IP address and a prefix in the routing table  and if there is no default route  the packet will be dropped 
Packet Forwarding End-to-End Packet ForwardingThe primary responsibility of the packet forwarding function is to encapsulate packets in the appropriate data-link frame type for the outgoing interface  For example  the data-link frame format for a serial-link could be Point-to-Point  PPP  protocol  High-Level Data Link Control  HDLC  protocol  or some other Layer 2 protocol 
Packet Forwarding Packet Forwarding MechanismsThe primary responsibility of the packet forwarding function is to encapsulate packets in the appropriate data-link frame type for the outgoing interface  The more efficiently a router can perform this task  the faster packets can be forwarded by the router  Routers support the following three packet forwarding mechanisms Process switchingFast switchingCisco Express Forwarding  CEF 
Packet Forwarding Packet Forwarding Mechanisms  Cont  Process Switching  An older packet forwarding mechanism still available for Cisco routers  When a packet arrives on an interface  it is forwarded to the control-plane where the CPU matches the destination address with an entry in its routing table  and then determines the exit interface and forwards the packet  It is important to understand that the router does this for every packet  even if the destination is the same for a stream of packets 
Packet Forwarding Packet Forwarding Mechanisms  Cont  Fast Switching  Another  older packet forwarding mechanism which was the successor to process switching  Fast switching uses a fast-switching cache to store next-hop information  When a packet arrives on an interface  it is forwarded to the control-plane where the CPU searches for a match in the fast-switching cache  If it is not there  it is process-switched and forwarded to the exit interface  The flow information for the packet is then stored in the fast-switching cache  If another packet going to the same destination arrives on an interface  the next-hop information in the cache is re-used without CPU intervention 
Packet Forwarding Packet Forwarding Mechanisms  Cont  Cisco Express Forwarding  CEF   The most recent and default Cisco IOS packet-forwarding mechanism  CEF builds a Forwarding Information Base  FIB   and an adjacency table  The table entries are not packet-triggered like fast switching but change-triggered  such as when something changes in the network topology  When a network has converged  the FIB and adjacency tables contain all the information that a router would have to consider when forwarding a packet  
Module ObjectivesModule Title  Troubleshoot Static and Default RoutesModule Objective  Troubleshoot static and default route configurations Topic TitleTopic ObjectivePacket Processing with Static Routes Explain how a router processes packets when a static route is configured Troubleshoot IPv4 Static and Default Route ConfigurationTroubleshoot common static and default route configuration issues 
Packet Processing with Static Routes Static Routes and Packet ForwardingPC1 addresses a packet to PC3 and sends it to the default gateway address When the packet arrives on the R1 G0 0 0 interface  R1 decapsulates the packet and searches the routing table for a matching destination network entry If the destination IP address Matches a static route entry  R1 will use the static route to identify the next-hop IP address or exit interface Does not match a specific route to the destination network  then R1 will use the default static route  if configured  Does not match a route table entry  then R1 will drop the packet and send an ICMP message back to the source  i e   PC1  
Packet Processing with Static Routes Static Routes and Packet Forwarding  Cont  Assuming R1 matched a routing table entry  it encapsulates the packet in a new frame and forwards it out of interface S0 1 0 to R2  R2 receives the packet on its S0 1 0 interface It decapsulates and processes the packet the same way R1 did When R2 finds a match in the routing table  it uses the identified next-hop IP address or exit interface and sends the packet out of its interface S0 1 1 towards R3 
Packet Processing with Static Routes Static Routes and Packet Forwarding  Cont  R3 receives the packet  decapsulates it  and searches the routing table for a match The destination IP address of PC3 matches the directly connected G0 0 0 interface  Therefore  R3 searches the ARP table for the Layer 2 MAC address of PC3  If no ARP entry exists  then R3 sends an ARP request out of the G0 0 0 interface PC3 responds with an ARP reply containing its MAC address R3 encapsulates the packet in a new frame and uses the PC3 MAC address as the destination MAC address and the G0 0 0 MAC address as the source MAC address The frame is forwarded out of interface G0 0 0 and PC3 receives and processes it accordingly 
Module ObjectivesModule Title  Routing ConceptsModule Objective  Explain how routers use information in packets to make forwarding decisions Topic TitleTopic ObjectivePath DeterminationExplain how routers determine the best path Packet ForwardingExplain how routers forward packets to the destination Basic Router Configuration ReviewConfigure basic settings on a router IP Routing TableDescribe the structure of a routing table Static and Dynamic RoutingCompare static and dynamic routing concepts 
Path Determination Two Functions of a RouterWhen a router receives an IP packet on one interface  it determines which interface to use to forward the packet to the destination  This is known as routing  The interface that the router uses to forward the packet may be the final destination  or it may be a network connected to another router that is used to reach the destination network  Each network that a router connects to typically requires a separate interface  but this may not always be the case The primary functions of a router are to determine the best path to forward packets based on the information in its routing table  and to forward packets toward their destination 
Path Determination Router Functions ExampleThe router uses its IP routing table to determine which path  route  to use to forward a packet  R1 and R2 will use their respective IP routing tables to first determine the best path  and then forward the packet 
Path Determination Best Path Equals Longest MatchThe best path in the routing table is also known as the longest match The routing table contains route entries consisting of a prefix  network address  and prefix length  For there to be a match between the destination IP address of a packet and a route in the routing table  a minimum number of far-left bits must match between the IP address of the packet and the route in the routing table  The prefix length of the route in the routing table is used to determine the minimum number of far-left bits that must match  The longest match is the route in the routing table that has the greatest number of far-left matching bits with the destination IP address of the packet  The longest match is always the preferred route Note  The term prefix length will be used to refer to the network-portion of both IPv4 and IPv6 addresses 
Path Determination IPv4 Longest Match ExampleIn the table  an IPv4 packet has the destination IPv4 address 172 16 0 10  The router has three route entries in its IPv4 routing table that match this packet  172 16 0 0 12  172 16 0 0 18  and 172 16 0 0 26  Of the three routes  172 16 0 0 26 has the longest match and would be chosen to forward the packet  For any of these routes to be considered a match there must be at least the number of matching bits indicated by the subnet-mask of the route Destination IPv4 AddressAddress in Binary172 16 0 1010101100 00010000 00000000 00001010Route EntryPrefix Prefix LengthAddress in Binary172 16 0 0 1210101100 00010000 00000000 00001010172 16 0 0 1810101100 00010000 00000000 00001010172 16 0 0 2610101100 00010000 00000000 00001010
Path Determination IPv6 Longest Match ExampleAn IPv6 packet has the destination IPv6 address 2001 db8 c000  99  This example shows three route entries  but only two of them are a valid match  with one of those being the longest match  The first two route entries have prefix lengths that have the required number of matching bits as indicated by the prefix length  The third route entry is not a match because its  64 prefix requires 64 matching bits  Destination2001 db8 c000  99 48Route EntryPrefix Prefix LengthDoes it match 2001 db8 c000   40Match of 40 bits2001 db8 c000   48Match of 48 bits  longest match 2001 db8 c000 5555   64Does not match 64 bits
Path Determination Build the Routing TableDirectly Connected Networks  Added to the routing table when a local interface is configured with an IP address and subnet-mask  prefix length  and is active  up and up  Remote Networks  Networks that are not directly connected to the router  Routers learn about remote networks in two ways Static routes - Added to the routing table when a route is manually configured Dynamic routing protocols - Added to the routing table when routing protocols dynamically learn about the remote network  Default Route  Specifies a next-hop router to use when the routing table does not contain a specific route that matches the destination IP address  The default route can be entered manually as a static route  or learned automatically from a dynamic routing protocol A default route has a  0 prefix length  This means that no bits need to match the destination IP address for this route entry to be used  If there are no routes with a match longer than 0 bits  the default route is used to forward the packet  The default route is sometimes referred to as a gateway of last resort 
Static and Dynamic Routing Static or Dynamic Static and dynamic routing are not mutually exclusive  Rather  most networks use a combination of dynamic routing protocols and static routes Static routes are commonly used in the following scenarios As a default route forwarding packets to a service providerFor routes outside the routing domain and not learned by the dynamic routing protocolWhen the network administrator wants to explicitly define the path for a specific networkFor routing between stub networksStatic routes are useful for smaller networks with only one path to an outside network  They also provide security in a larger network for certain types of traffic  or links to other networks that need more control 
Static and Dynamic Routing Static or Dynamic   Cont  Dynamic routing protocols are implemented in any type of network consisting of more than just a few routers  Dynamic routing protocols are scalable and automatically determine better routes if there is a change in the topology Dynamic routing protocols are commonly used in the following scenarios In networks consisting of more than just a few routersWhen a change in the network topology requires the network to automatically determine another pathFor scalability  As the network grows  the dynamic routing protocol automatically learns about any new networks 
Static and Dynamic Routing Static or Dynamic   Cont  The table shows a comparison of some the differences between dynamic and static routing FeatureDynamic RoutingStatic RoutingConfiguration complexityIndependent of network sizeIncreases with network sizeTopology changesAutomatically adapts to topology changesAdministrator intervention requiredScalabilitySuitable for simple to complex network topologiesSuitable for simple topologiesSecuritySecurity must be configuredSecurity is inherentResource UsageUses CPU  memory  and link bandwidthNo additional resources neededPath PredictabilityRoute depends on topology and routing protocol usedExplicitly defined by the administrator
Static and Dynamic Routing Dynamic Routing EvolutionDynamic routing protocols have been used in networks since the late 1980s  One of the first routing protocols was RIP  RIPv1 was released in 1988  but some of the basic algorithms within the protocol were used on the Advanced Research Projects Agency Network  ARPANET  as early as 1969  As networks evolved and became more complex  new routing protocols emerged  
Static and Dynamic Routing Dynamic Routing Evolution  Cont  The table classifies the current routing protocols  Interior Gateway Protocols  IGPs  are routing protocols used to exchange routing information within a routing domain administered by a single organization  There is only one EGP and it is BGP  BGP is used to exchange routing information between different organizations  known as autonomous systems  AS   BGP is used by ISPs to route packets over the internet  Distance vector  link-state  and path-vector routing protocols refer to the type of routing algorithm used to determine best path Interior Gateway ProtocolsExterior Gateway ProtocolsDistance VectorLink-StatePath VectorIPv4RIPv2EIGRPOSPFv2IS-ISBGP-4IPv6RIPngEIGRP for IPv6OSPFv3IS-IS for IPv6BGP-MP
Static and Dynamic Routing Dynamic Routing Protocol ConceptsA routing protocol is a set of processes  algorithms  and messages that are used to exchange routing information and populate the routing table with the choice of best paths  The purpose of dynamic routing protocols includes the following Discovery of remote networksMaintaining up-to-date routing informationChoosing the best path to destination networksAbility to find a new best path if the current path is no longer available
Static and Dynamic Routing Dynamic Routing Protocol Concepts  Cont  The main components of dynamic routing protocols include the following Data structures - Routing protocols typically use tables or databases for their operations  This information is kept in RAM Routing protocol messages - Routing protocols use various types of messages to discover neighboring routers  exchange routing information  and other tasks to learn and maintain accurate information about the network Algorithm - An algorithm is a finite list of steps used to accomplish a task  Routing protocols use algorithms for facilitating routing information and for the best path determination Routing protocols determine the best path  or route  to each network  That route is then offered to the routing table  The route will be installed in the routing table if there is not another routing source with a lower AD  
Static and Dynamic Routing Best PathThe best path is selected by a routing protocol based on the value or metric it uses to determine the distance to reach a network  A metric is the quantitative value used to measure the distance to a given network  The best path to a network is the path with the lowest metric Dynamic routing protocols typically use their own rules and metrics to build and update routing tables  The following table lists common dynamic protocols and their metrics Routing ProtocolMetricRouting Information Protocol  RIP The metric is  hop count   Each router along a path adds a hop to the hop count  A maximum of 15 hops allowed Open Shortest Path First  OSPF The metric is  cost  which is the based on the cumulative bandwidth from source to destination  Faster links are assigned lower costs compared to slower  higher cost  links Enhanced Interior Gateway Routing Protocol  EIGRP It calculates a metric based on the slowest bandwidth and delay values  It could also include load and reliability into the metric calculation 
Static and Dynamic Routing Load BalancingWhen a router has two or more paths to a destination with equal cost metrics  then the router forwards the packets using both paths equally  This is called equal cost load-balancing  The routing table contains the single destination network  but has multiple exit interfaces  one for each equal cost path  The router forwards packets using the multiple exit interfaces listed in the routing table If configured correctly  load-balancing can increase the effectiveness and performance of the network Equal cost load-balancing is implemented automatically by dynamic routing protocols  It is enabled with static routes when there are multiple static routes to the same destination network using different next-hop routers Note  Only EIGRP supports unequal cost load-balancing 
Module ObjectivesModule Title  IP Static RoutingModule Objective  Configure IPv4 and IPv6 static routes Topic TitleTopic ObjectiveStatic RoutesDescribe the command syntax for static routes Configure IP Static RoutesConfigure IPv4 and IPv6 static routes Configure IP Default Static RoutesConfigure IPv4 and IPv6 default static routes Configure Floating Static RoutesConfigure a floating static route to provide a backup connection Configure Static Host RoutesConfigure IPv4 and IPv6 static host routes that direct traffic to a specific host 
Static Routes Types of Static RoutesStatic routes are commonly implemented on a network  This is true even when there is a dynamic routing protocol configured  Static routes can be configured for IPv4 and IPv6  Both protocols support the following types of static routes Standard static routeDefault static routeFloating static routeSummary static routeStatic routes are configured using the ip route and ipv6 route global configuration commands 
Static Routes Next-Hop OptionsWhen configuring a static route  the next hop can be identified by an IP address  exit interface  or both  How the destination is specified creates one of the three following types of static route Next-hop route - Only the next-hop IP address is specifiedDirectly connected static route - Only the router exit interface is specifiedFully specified static route - The next-hop IP address and exit interface are specified
Static Routes IPv4 Static Route CommandIPv4 static routes are configured using the following global configuration command Router config   ip route network-address subnet-mask   ip-address   exit-intf  ip-address    distance Note  Either the ip-address  exit-intf  or the ip-address and exit-intf parameters must be configured 
Static Routes IPv6 Static Route CommandIPv6 static routes are configured using the following global configuration command Router config   ipv6 route ipv6-prefix prefix-length  ipv6-address   exit-intf  ipv6-address    distance Most of parameters are identical to the IPv4 version of the command 
Static Routes Dual-Stack TopologyThe figure shows a dual-stack network topology  Currently  no static routes are configured for either IPv4 or IPv6 
Static Routes IPv4 Starting Routing TablesEach router has entries only for directly connected networks and associated local addresses R1 can ping R2  but cannot ping the R3 LANR1  show ip route   begin Gateway Gateway of last resort is not set 172 16 0 0 16 is variably subnetted  4 subnets  2 masks C  172 16 2 0 24 is directly connected  Serial0 1 0 L  172 16 2 1 32 is directly connected  Serial0 1 0 C  172 16 3 0 24 is directly connected  GigabitEthernet0 0 0 L  172 16 3 1 32 is directly connected  GigabitEthernet0 0 0 R1 R1  ping 172 16 2 2 Type escape sequence to abort  Sending 5  100-byte ICMP Echos to 172 16 2 2  timeout is 2 seconds       Success rate is 100 percent  5 5 R1  ping 192 168 2 1 Type escape sequence to abort  Sending 5  100-byte ICMP Echos to 192 168 2 1  timeout is 2 seconds        Success rate is 0 percent  0 5 
Static Routes IPv6 Starting Routing TablesEach router has entries only for directly connected networks and associated local addresses R1 can ping R2  but cannot ping the R3 LAN R1  show ipv6 route   begin C C 2001 DB8 ACAD 2   64  0 0  via Serial0 1 0  directly connected L 2001 DB8 ACAD 2  1 128  0 0  via Serial0 1 0  receive C 2001 DB8 ACAD 3   64  0 0  via GigabitEthernet0 0 0  directly connected L 2001 DB8 ACAD 3  1 128  0 0  via GigabitEthernet0 0 0  receive L FF00   8  0 0  via Null0  receive R1 R1  ping 2001 db8 acad 2  2 Type escape sequence to abort  Sending 5  100-byte ICMP Echos to 2001 DB8 ACAD 2  2  timeout is 2 seconds        Success rate is 100 percent  5 5   round-trip min avg max   2 2 3 ms R1  ping 2001 DB8 cafe 2  1 Type escape sequence to abort  Sending 5  100-byte ICMP Echos to 2001 DB8 CAFE 2  1  timeout is 2 seconds    No valid route for destination Success rate is 0 percent  0 1 
Troubleshoot IPv4 Static and Default Route Configuration Network ChangesNetworks fail for a number of reasons An interface can failA service provider drops a connectionLinks can become oversaturatedAn administrator may enter a wrong configuration Network administrators are responsible for pinpointing and solving the problem  To efficiently find and solve these issues  it is advantageous to be intimately familiar with tools to help isolate routing problems quickly 
Troubleshoot IPv4 Static and Default Route Configuration Common Troubleshooting CommandsCommandDescriptionpingVerify Layer 3 connectivity to destination  Extended pings provide additional options tracerouteVerify path to destination network  It uses ICMP echo reply messages to determine the hops to the destination show ip routeDisplays the routing table  Used to verify route entries for destination IP addresses show ip interface briefDisplays the status of device interfaces  Used to verify the operational status and IP address of an interface show cdp neighborsDisplays a list of directly connected Cisco devices  Also used to validate Layer 1 and 2 connectivity 
Troubleshoot IPv4 Static and Default Route Configuration Solve a Connectivity ProblemConnectivity from PC1 to PC3 fails Extended pings from the R1 G0 0 0 interface to PC3 fail Pings from R1  i e   S0 1 0 interface  to R2 are successful Pings from R1  i e   S0 1 0 interface  to R3 are successful R2 routing table reveals the problem and the incorrect static route is removed A new static route solves the problem ip route 172 16 3 0 255 255 255 0 172 16 2 1R2  show ip route   begin GatewayGateway of last resort is not set172 16 0 0 16 is variably subnetted  5 subnets  2 masks C      172 16 1 0 24 is directly connected  GigabitEthernet0 0 0L        172 16 1 1 32 is directly connected  GigabitEthernet0 0 0C        172 16 2 0 24 is directly connected  Serial0 l 0L        172 16 2 2 32 is directly connected  Serial0 l 0S        172 16 3 0 24  1 0  via 192 168 1 1192 168 1 0 24 is variably subnetted  2 subnets  2 masks C        192 168 1 0 24 is directly connected  Serial0 1 1L        192 168 1 2 32 is directly connected  Serial0 1 1S     192 168 2 0 24  1 0  via 192 168 1 1 R2 
Default Route Propagation Propagate a Default Static Route in OSPFv2To propagate a default route  the edge router must be configured with the following A default static route using the ip route 0 0 0 0 0 0 0 0  next-hop-address   exit-intf  command The default-information originate router configuration command  This instructs R2 to be the source of the default route information and propagate the default static route in OSPF updates In the example  R2 is configured with a loopback to simulate a connection to the internet  A default route is configured and propagated to all other OSPF routers in the routing domain Note  When configuring static routes  best practice is to use the next-hop IP address  However  when simulating a connection to the internet  there is no next-hop IP address  Therefore  we use the exit-intf argument R2 config   interface lo1 R2 config-if   ip address 64 100 0 1 255 255 255 252 R2 config-if   exit R2 config   ip route 0 0 0 0 0 0 0 0 loopback 1  Default route without gateway  if not a point-to-point interface  may impact performance R2 config   router ospf 10 R2 config-router   default-information originate R2 config-router   end R2 
Default Route Propagation Verify the Propagated Default RouteYou can verify the default route settings on R2 using the show ip route command  You can also verify that R1 and R3 received a default route Notice that the route source on R1 is O E2  signifying that it was learned using OSPFv2  The asterisk identifies this as a good candidate for the default route  The E2 designation identifies that it is an external route  The meaning of E1 and E2 is beyond the scope of this module R2  show ip route   begin Gateway Gateway of last resort is 0 0 0 0 to network 0 0 0 0 S     0 0 0 0 0 is directly connected  Loopback1 10 0 0 0 8 is variably subnetted  9 subnets  3 masks output omitted R1  show ip route   begin Gateway Gateway of last resort is 10 1 1 6 to network 0 0 0 0 O E2  0 0 0 0 0  110 1  via 10 1 1 6  00 11 08  GigabitEthernet0 0 0      10 0 0 0 8 is variably subnetted  9 subnets  3 masks output omitted 
Default Route Propagation Packet Tracer - Propagate a Default Route in OSPFv2In this Packet Tracer activity  you will complete the following Propagate a Default RoutePart 2  Verify Connectivity
Evolution of STP Different Versions of STPMany professionals generically use spanning-tree and STP to refer to the various implementations of spanning-tree  such as Rapid Spanning Tree Protocol  RSTP  and Multiple Spanning Tree Protocol  MSTP   In order to communicate spanning-tree concepts correctly  it is important to refer to the implementation or standard of spanning-tree in context The latest IEEE documentation on spanning-tree  IEEE-802-1D-2004  says   STP has now been superseded by the Rapid Spanning Tree Protocol  RSTP   The IEEE uses  STP  to refer to the original implementation of spanning-tree and  RSTP  to describe the version of spanning-tree specified in IEEE-802 1D-2004  Because the two protocols share much of the same terminology and methods for the loop-free path  the primary focus will be on the current standard and the Cisco proprietary implementations of STP and RSTP Cisco switches running IOS 15 0 or later  run PVST  by default  This version incorporates many of the specifications of IEEE 802 1D-2004  such as alternate-ports in place of the former non-designated-ports  Switches must be explicitly configured for rapid spanning-tree mode in order to run the rapid spanning-tree-protocol 
Evolution of STP Different Versions of STP  Cont  STP VarietyDescriptionSTPThis is the original IEEE 802 1D version  802 1D-1998 and earlier  that provides a loop-free topology in a network with redundant links  Also called Common Spanning Tree  CST   it assumes one spanning-tree instance for the entire bridged network  regardless of the number of VLANs PVST Per-VLAN Spanning Tree  PVST   is a Cisco enhancement of STP that provides a separate 802 1D spanning-tree instance for each VLAN configured in the network  PVST  supports PortFast  UplinkFast  BackboneFast  BPDU guard  BPDU filter  root-guard  and loop-guard 802 1D-2004This is an updated version of the STP standard  incorporating IEEE 802 1w RSTPRapid Spanning Tree Protocol  RSTP  or IEEE 802 1w is an evolution of STP that provides faster convergence than STP Rapid PVST This is a Cisco enhancement of RSTP that uses PVST  and provides a separate instance of 802 1w per VLAN  Each separate instance supports PortFast  BPDU guard  BPDU filter  root-guard  and loop-guard MSTPMultiple Spanning Tree Protocol  MSTP  is an IEEE standard inspired by the earlier Cisco proprietary Multiple Instance STP  MISTP  implementation  MSTP maps multiple VLANs into the same spanning-tree instance MSTMultiple Spanning Tree  MST  is the Cisco implementation of MSTP  which provides up to 16 instances of RSTP and combines many VLANs with the same physical and logical topology into a common RSTP instance  Each instance supports PortFast  BPDU guard  BPDU filter  root-guard  and loop-guard 
Evolution of STP RSTP ConceptsRSTP  IEEE 802 1w  supersedes the original 802 1D while retaining backward compatibility  The 802 1w STP terminology remains primarily the same as the original IEEE 802 1D STP terminology  Most parameters have been left unchanged  Users that are familiar with the original STP standard can easily configure RSTP  The same spanning-tree algorithm is used for both STP and RSTP to determine port roles and topology RSTP increases the speed of the recalculation of the spanning-tree when the Layer 2 network topology changes  RSTP can achieve much faster convergence in a properly configured network  sometimes in as little as a few hundred milliseconds  If a port is configured to be an alternate-port it can immediately change to a forwarding state without waiting for the network to converge Note  Rapid PVST  is the Cisco implementation of RSTP on a per-VLAN basis  With Rapid PVST  an independent instance of RSTP runs for each VLAN 
Evolution of STP RSTP Port States and Port RolesThere are only three port states in RSTP that correspond to the three possible operational states in STP  The 802 1D disabled  blocking  and listening states are merged into a unique 802 1w discarding state Root ports and designated-ports are the same for both STP and RSTP  However  there are two RSTP port roles that correspond to the blocking state of STP  In STP  a blocked port is defined as not being the designated or root-port  RSTP has two port roles for this purpose 
Evolution of STP RSTP Port States and Port Roles  Cont  The alternate-port has an alternate path to the root-bridge  The backup port is a backup to a shared medium  such as a hub  A backup port is less common because hubs are now considered legacy devices 
Evolution of STP PortFast and BPDU GuardWhen a device is connected to a switch port or when a switch powers up  the switch port goes through both the listening and learning states  each time waiting for the Forward Delay timer to expire  This delay is 15 seconds for each state for a total of 30 seconds  This can present a problem for DHCP clients trying to discover a DHCP server because the DHCP process may timeout  The result is that an IPv4 client will not receive a valid IPv4 address When a switch port is configured with PortFast  that port transitions from blocking to forwarding state immediately  avoiding the 30 second delay  You can use PortFast on access-ports to allow devices connected to these ports to access the network immediately  PortFast should only be used on access-ports  If you enable PortFast on a port connecting to another switch  you risk creating a spanning-tree loop  A PortFast-enabled switch port should never receive BPDUs because that would indicate that switch is connected to the port  potentially causing a spanning-tree loop  Cisco switches support a feature called BPDU guard  When enabled  it immediately puts the switch port in an errdisabled  error-disabled  state upon receipt of any BPDU  This protects against potential loops by effectively shutting down the port  The administrator must manually put the interface back into service 
Evolution of STP Alternatives to STPOver the years  organizations required greater resiliency and availability in the LAN  Ethernet LANs went from a few interconnected switches connected to a single router  to a sophisticated hierarchical network design including access  distribution and core layer switches Depending on the implementation  Layer 2 may include not only the access layer  but also the distribution or even the core layers  These designs may include hundreds of switches  with hundreds or even thousands of VLANs  STP has adapted to the added redundancy and complexity with enhancements  as part of RSTP and MSTP An important aspect to network design is fast and predictable convergence when there is a failure or change in the topology  Spanning tree does not offer the same efficiencies and predictabilities provided by routing protocols at Layer 3 Layer 3 routing allows for redundant paths and loops in the topology  without blocking ports  For this reason  some environments are transitioning to Layer 3 everywhere except where devices connect to the access layer switch  In other words  the connections between access layer switches and distribution switches would be Layer 3 instead of Layer 2 
Module ObjectivesModule Title  STP ConceptsModule Objective  Explain how STP enables redundancy in a Layer 2 network Topic TitleTopic ObjectivePurpose of STPExplain common problems in a redundant  L2 switched network STP OperationsExplain how STP operates in a simple switched network Evolution of STPExplain how Rapid PVST  operates 
Purpose of STP Redundancy in Layer 2 Switched NetworksThis topic covers the causes of loops in a Layer 2 network and briefly explains how spanning-tree-protocol works  Redundancy is an important part of the hierarchical design for eliminating single points of failure and preventing disruption of network services to users  Redundant networks require the addition of physical paths  but logical redundancy must also be part of the design  Having alternate physical paths for data to traverse the network makes it possible for users to access network resources  despite path disruption  However  redundant paths in a switched Ethernet network may cause both physical and logical Layer 2 loops Ethernet LANs require a loop-free topology with a single path between any two devices  A loop in an Ethernet LAN can cause continued propagation of Ethernet frames until a link is disrupted and breaks the loop 
Purpose of STP Spanning Tree ProtocolSpanning Tree Protocol  STP  is a loop-prevention network protocol that allows for redundancy while creating a loop-free Layer 2 topology  STP logically blocks physical loops in a Layer 2 network  preventing frames from circling the network forever 
Purpose of STP STP RecalculationSTP compensates for a failure in the network by recalculating and opening up previously blocked ports 
Purpose of STP Issues with Redundant Switch LinksPath redundancy provides multiple network services by eliminating the possibility of a single point of failure  When multiple paths exist between two devices on an Ethernet network  and there is no spanning-tree implementation on the switches  a Layer 2 loop occurs  A Layer 2 loop can result in MAC address table instability  link saturation  and high CPU utilization on switches and end-devices  resulting in the network becoming unusable Layer 2 Ethernet does not include a mechanism to recognize and eliminate endlessly looping frames  Both IPv4 and IPv6 include a mechanism that limits the number of times a Layer 3 networking device can retransmit a packet  A router will decrement the TTL  Time to Live  in every IPv4 packet  and the Hop Limit field in every IPv6 packet  When these fields are decremented to 0  a router will drop the packet  Ethernet and Ethernet switches have no comparable mechanism for limiting the number of times a switch retransmits a Layer 2 frame  STP was developed specifically as a loop prevention mechanism for Layer 2 Ethernet 
Purpose of STP Layer 2 LoopsWithout STP enabled  Layer 2 loops can form  causing broadcast  multicast and unknown unicast frames to loop endlessly  This can bring down a network quickly  When a loop occurs  the MAC address table on a switch will constantly change with the updates from the broadcast frames  which results in MAC database instability  This can cause high CPU utilization  which makes the switch unable to forward frames An unknown unicast frame is when the switch does not have the destination MAC address in its MAC address table and must forward the frame out all ports  except the ingress port 
Purpose of STP Broadcast StormA broadcast storm is an abnormally high number of broadcasts overwhelming the network during a specific amount of time  Broadcast storms can disable a network within seconds by overwhelming switches and end devices  Broadcast storms can be caused by a hardware problem such as a faulty NIC or from a Layer 2 loop in the network Layer 2 broadcasts in a network  such as ARP Requests are very common  Layer 2 multicasts are typically forwarded the same way as a broadcast by the switch  IPv6 packets are never forwarded as a Layer 2 broadcast  ICMPv6 Neighbor Discovery uses Layer 2 multicasts A host caught in a Layer 2 loop is not accessible to other hosts on the network  Additionally  due to the constant changes in its MAC address table  the switch does not know out of which port to forward unicast frames To prevent these issues from occurring in a redundant network  some type of spanning-tree must be enabled on the switches  Spanning tree is enabled  by default  on Cisco switches to prevent Layer 2 loops from occurring 
Purpose of STP The Spanning Tree AlgorithmSTP is based on an algorithm invented by Radia Perlman while working for Digital Equipment Corporation  and published in the 1985 paper  An Algorithm for Distributed Computation of a Spanning Tree in an Extended LAN   Her spanning-tree algorithm  STA  creates a loop-free topology by selecting a single root-bridge where all other switches determine a single least-cost path STP prevents loops from occurring by configuring a loop-free path through the network using strategically placed  blocking-state  ports  The switches running STP are able to compensate for failures by dynamically unblocking the previously blocked ports and permitting traffic to traverse the alternate paths 
Purpose of STP The Spanning Tree Algorithm  Cont  How does the STA create a loop-free topology Selecting a Root Bridge  This bridge  switch  is the reference point for the entire network to build a spanning-tree around Block Redundant Paths  STP ensures that there is only one logical path between all destinations on the network by intentionally blocking redundant paths that could cause a loop  When a port is blocked  user data is prevented from entering or leaving that port Create a Loop-Free Topology  A blocked port has the effect of making that link a non-forwarding link between the two switches  This creates a topology where each switch has only a single path to the root-bridge  similar to branches on a tree that connect to the root of the tree Recalculate in case of Link Failure  The physical paths still exist to provide redundancy  but these paths are disabled to prevent the loops from occurring  If the path is ever needed to compensate for a network cable or switch failure  STP recalculates the paths and unblocks the necessary-ports to allow the redundant path to become active  STP recalculations can also occur any time a new switch or new inter-switch link is added to the network 
Purpose of STP Video   Observe STP OperationThis video demonstrates the use of STP in a network environment 
Purpose of STP Packet Tracer   Investigate STP Loop PreventionIn this Packet Tracer activity  you will complete the following objectives Create and configure a simple three switch network with STP View STP operation Disable STP and view operation again 
STP Operations Steps to a Loop-Free TopologyUsing the STA  STP builds a loop-free topology in a four-step process Elect the root-bridge Elect the root-ports Elect designated-ports Elect alternate  blocked  ports During STA and STP functions  switches use Bridge Protocol Data Units  BPDUs  to share information about themselves and their connections  BPDUs are used to elect the root-bridge  root-ports  designated-ports  and alternate-ports  Each BPDU contains a bridge ID  BID  that identifies which switch sent the BPDU  The BID is involved in making many of the STA decisions including root-bridge and port roles  The BID contains a priority value  the MAC address of the switch  and an extended system ID  The lowest BID value is determined by the combination of these three fields 
STP Operations Steps to a Loop-Free Topology  Cont  Bridge Priority  The default priority value for all Cisco switches is the decimal value 32768  The range is 0 to 61440 in increments of 4096  A lower bridge priority is preferable  A bridge priority of 0 takes precedence over all other bridge priorities Extended System ID  The extended system ID value is a decimal value added to the bridge priority value in the BID to identify the VLAN for this BPDU MAC address  When two switches are configured with the same priority and have the same extended system ID  the switch having the MAC address with the lowest value  expressed in hexadecimal  will have the lower BID 
STP Operations 1  Elect the Root BridgeThe STA designates a single switch as the root-bridge and uses it as the reference point for all path calculations  Switches exchange BPDUs to build the loop-free topology beginning with selecting the root-bridge All switches in the broadcast domain participate in the election process  After a switch boots  it begins to send out BPDU frames every two seconds  These BPDU frames contain the BID of the sending switch and the BID of the root-bridge  known as the Root ID The switch with the lowest BID will become the root-bridge  At first  all switches declare themselves as the root-bridge with their own BID set as the Root ID  Eventually  the switches learn through the exchange of BPDUs which switch has the lowest BID and will agree on one root-bridge 
STP Operations Impact of Default BIDsBecause the default BID is 32768  it is possible for two or more switches to have the same priority  In this scenario  where the priorities are the same  the switch with the lowest MAC address will become the root-bridge  The administrator should configure the desired root-bridge switch with a lower priority In the figure  all switches are configured with the same priority of 32769  Here the MAC address becomes the deciding factor as to which switch becomes the root-bridge  The switch with the lowest hexadecimal MAC address value is the preferred root-bridge  In this example  S2 has the lowest value for its MAC address and is elected as the root-bridge for that spanning-tree instance Note  The priority of all the switches is 32769  The value is based on the 32768 default bridge priority and the extended system ID  VLAN 1 assignment  associated with each switch  32768 1  
STP Operations Determine the Root Path CostWhen the root-bridge has been elected for a given spanning-tree instance  the STA starts determining the best paths to the root-bridge from all destinations in the broadcast domain  The path information  known as the internal root path cost  is determined by the sum of all the individual port costs along the path from the switch to the root-bridge When a switch receives the BPDU  it adds the ingress port cost of the segment to determine its internal root path cost The default port costs are defined by the speed at which the port operates  The table shows the default port costs suggested by IEEE  Cisco switches by default use the values as defined by the IEEE 802 1D standard  also known as the short path cost  for both STP and RSTP  Although switch ports have a default port cost associated with them  the port cost is configurable  The ability to configure individual port costs gives the administrator the flexibility to manually control the spanning-tree paths to the root-bridge Link SpeedSTP Cost  IEEE 802 1D-1998RSTP Cost  IEEE 802 1w-200410 Gbps2 0001 Gbps20 000100 Mbps19200 00010 Mbps1002 000 000
STP Operations 2  Elect the Root PortsAfter the root-bridge has been determined  the STA algorithm is used to select the root-port  Every non-root switch will select one root-port  The root-port is the port closest to the root-bridge in terms of overall cost to the root-bridge  This overall cost is known as the internal root path cost The internal root path cost is equal to the sum of all the port costs along the path to the root-bridge  as shown in the figure  Paths with the lowest cost become preferred  and all other redundant paths are blocked  In the example  the internal root path cost from S2 to the root-bridge S1 over path 1 is 19 while the internal root path cost over path 2 is 38  Because path 1 has a lower overall path cost to the root-bridge  it is the preferred path and F0 1 becomes the root-port on S2 
STP Operations 3  Elect Designated PortsEvery segment between two switches will have one designated-port  The designated-port is a port on the segment that has the internal root path cost to the root-bridge  In other words  the designated-port has the best path to receive traffic leading to the root-bridge What is not a root-port or a designated-port becomes an alternate or blocked port  All ports on the root-bridge are designated-ports If one end of a segment is a root-port  the other end is a designated-port All ports attached to end devices are designated-ports On segments between two switches where neither of the switches is the root-bridge  the port on the switch with the least-cost path to the root-bridge is a designated-port 
STP Operations 4  Elect Alternate  Blocked  PortsIf a port is not a root-port or a designated-port  then it becomes an alternate  or backup  port  Alternate ports are in discarding or blocking state to prevent loops  In the figure  the STA has configured port F0 2 on S3 in the alternate role  Port F0 2 on S3 is in the blocking state and will not forward Ethernet frames  All other inter-switch ports are in forwarding state  This is the loop-prevention part of STP 
STP Operations Elect a Root Port from Multiple Equal-Cost PathsWhen a switch has multiple equal-cost paths to the root-bridge  the switch will determine a port using the following criteria Lowest sender BIDLowest sender port priorityLowest sender port ID
STP Operations Elect a Root Port from Multiple Equal-Cost Paths  Cont  Lowest Sender BID  This topology has four switches with switch S1 as the root-bridge  Port F0 1 on switch S3 and port F0 3 on switch S4 have been selected as root-ports because they have the root path cost to the root-bridge for their respective switches  S2 has two ports  F0 1 and F0 2 with equal cost paths to the root-bridge  The bridge IDs of S3 and S4  will be used to break the tie  This is known as the sender s BID  S3 has a BID of 32769 5555 5555 5555 and S4 has a BID of 32769 1111 1111 1111  Because S4 has a lower BID  the F0 1 port of S2  which is the port connected to S4  will be the root-port 
STP Operations Elect a Root Port from Multiple Equal-Cost Paths  Cont  Lowest Sender Port Priority  This topology has two switches which are connected with two equal-cost paths between them  S1 is the root-bridge  so both of its ports are designated-ports S4 has two ports with equal-cost paths to the root-bridge  Because both ports are connected to the same switch  the sender s BID  S1  is equal  So the first step is a tie Next  is the sender s  S1  port priority  The default port priority is 128  so both ports on S1 have the same port priority  This is also a tie  However  if either port on S1 was configured with a lower port priority  S4 would put its adjacent port in forwarding state  The other port on S4 would be a blocking state 
STP Operations Elect a Root Port from Multiple Equal-Cost Paths  Cont  Lowest Sender Port ID  The last tie-breaker is the lowest sender s port ID  Switch S4 has received BPDUs from port F0 1 and port F0 2 on S1  The decision is based on the sender s port ID  not the receiver s port ID  Because the port ID of F0 1 on S1 is lower than port F0 2  the port F0 6 on switch S4 will be the root-port  This is the port on S4 that is connected to the F0 1 port on S1 Port F0 5 on S4 will become an alternate-port and placed in the blocking state 
STP Operations STP Timers and Port StatesSTP convergence requires three timers  as follows Hello Timer -The hello time is the interval between BPDUs  The default is 2 seconds but can be modified to between 1 and 10 seconds Forward Delay Timer -The forward delay is the time that is spent in the listening and learning state  The default is 15 seconds but can be modified to between 4 and 30 seconds Max Age Timer -The max age is the maximum length of time that a switch waits before attempting to change the STP topology  The default is 20 seconds but can be modified to between 6 and 40 seconds Note  The default times can be changed on the root-bridge  which dictates the value of these timers for the STP domain 
STP Operations STP Timers and Port States  Cont  STP facilitates the logical loop-free path throughout the broadcast domain  The spanning-tree is determined through the information learned by the exchange of the BPDU frames between the interconnected switches  If a switch port transitions directly from the blocking state to the forwarding state without information about the full topology during the transition  the port can temporarily create a data loop  For this reason  STP has five ports states  four of which are operational port states as shown in the figure  The disabled state is considered non-operational 
STP Operations Operational Details of Each Port StateThe table summarizes the operational details of each port statePort StateBPDUMAC Address TableForwarding Data FramesBlockingReceive onlyNo updateNoListeningReceive and sendNo updateNoLearningReceive and sendUpdating tableNoForwardingReceive and sendUpdating tableYesDisabledNone sent or receivedNo updateNo
STP Operations Per-VLAN Spanning TreeSTP can be configured to operate in an environment with multiple VLANs  In Per-VLAN Spanning Tree  PVST  versions of STP  there is a root-bridge elected for each spanning-tree instance  This makes it possible to have different root-bridges for different sets of VLANs  STP operates a separate instance of STP for each individual VLAN  If all ports on all switches are members of VLAN 1  then there is only one spanning-tree instance 
Evolution of STP Different Versions of STPMany professionals generically use spanning-tree and STP to refer to the various implementations of spanning-tree  such as Rapid Spanning Tree Protocol  RSTP  and Multiple Spanning Tree Protocol  MSTP   In order to communicate spanning-tree concepts correctly  it is important to refer to the implementation or standard of spanning-tree in context The latest IEEE documentation on spanning-tree  IEEE-802-1D-2004  says   STP has now been superseded by the Rapid Spanning Tree Protocol  RSTP   The IEEE uses  STP  to refer to the original implementation of spanning-tree and  RSTP  to describe the version of spanning-tree specified in IEEE-802 1D-2004  Because the two protocols share much of the same terminology and methods for the loop-free path  the primary focus will be on the current standard and the Cisco proprietary implementations of STP and RSTP Cisco switches running IOS 15 0 or later  run PVST  by default  This version incorporates many of the specifications of IEEE 802 1D-2004  such as alternate-ports in place of the former non-designated-ports  Switches must be explicitly configured for rapid spanning-tree mode in order to run the rapid spanning-tree-protocol 
Evolution of STP Different Versions of STP  Cont  STP VarietyDescriptionSTPThis is the original IEEE 802 1D version  802 1D-1998 and earlier  that provides a loop-free topology in a network with redundant links  Also called Common Spanning Tree  CST   it assumes one spanning-tree instance for the entire bridged network  regardless of the number of VLANs PVST Per-VLAN Spanning Tree  PVST   is a Cisco enhancement of STP that provides a separate 802 1D spanning-tree instance for each VLAN configured in the network  PVST  supports PortFast  UplinkFast  BackboneFast  BPDU guard  BPDU filter  root-guard  and loop-guard 802 1D-2004This is an updated version of the STP standard  incorporating IEEE 802 1w RSTPRapid Spanning Tree Protocol  RSTP  or IEEE 802 1w is an evolution of STP that provides faster convergence than STP Rapid PVST This is a Cisco enhancement of RSTP that uses PVST  and provides a separate instance of 802 1w per VLAN  Each separate instance supports PortFast  BPDU guard  BPDU filter  root-guard  and loop-guard MSTPMultiple Spanning Tree Protocol  MSTP  is an IEEE standard inspired by the earlier Cisco proprietary Multiple Instance STP  MISTP  implementation  MSTP maps multiple VLANs into the same spanning-tree instance MSTMultiple Spanning Tree  MST  is the Cisco implementation of MSTP  which provides up to 16 instances of RSTP and combines many VLANs with the same physical and logical topology into a common RSTP instance  Each instance supports PortFast  BPDU guard  BPDU filter  root-guard  and loop-guard 
Evolution of STP RSTP ConceptsRSTP  IEEE 802 1w  supersedes the original 802 1D while retaining backward compatibility  The 802 1w STP terminology remains primarily the same as the original IEEE 802 1D STP terminology  Most parameters have been left unchanged  Users that are familiar with the original STP standard can easily configure RSTP  The same spanning-tree algorithm is used for both STP and RSTP to determine port roles and topology RSTP increases the speed of the recalculation of the spanning-tree when the Layer 2 network topology changes  RSTP can achieve much faster convergence in a properly configured network  sometimes in as little as a few hundred milliseconds  If a port is configured to be an alternate-port it can immediately change to a forwarding state without waiting for the network to converge Note  Rapid PVST  is the Cisco implementation of RSTP on a per-VLAN basis  With Rapid PVST  an independent instance of RSTP runs for each VLAN 
Evolution of STP RSTP Port States and Port RolesThere are only three port states in RSTP that correspond to the three possible operational states in STP  The 802 1D disabled  blocking  and listening states are merged into a unique 802 1w discarding state Root ports and designated-ports are the same for both STP and RSTP  However  there are two RSTP port roles that correspond to the blocking state of STP  In STP  a blocked port is defined as not being the designated or root-port  RSTP has two port roles for this purpose 
Evolution of STP RSTP Port States and Port Roles  Cont  The alternate-port has an alternate path to the root-bridge  The backup port is a backup to a shared medium  such as a hub  A backup port is less common because hubs are now considered legacy devices 
Evolution of STP PortFast and BPDU GuardWhen a device is connected to a switch port or when a switch powers up  the switch port goes through both the listening and learning states  each time waiting for the Forward Delay timer to expire  This delay is 15 seconds for each state for a total of 30 seconds  This can present a problem for DHCP clients trying to discover a DHCP server because the DHCP process may timeout  The result is that an IPv4 client will not receive a valid IPv4 address When a switch port is configured with PortFast  that port transitions from blocking to forwarding state immediately  avoiding the 30 second delay  You can use PortFast on access-ports to allow devices connected to these ports to access the network immediately  PortFast should only be used on access-ports  If you enable PortFast on a port connecting to another switch  you risk creating a spanning-tree loop  A PortFast-enabled switch port should never receive BPDUs because that would indicate that switch is connected to the port  potentially causing a spanning-tree loop  Cisco switches support a feature called BPDU guard  When enabled  it immediately puts the switch port in an errdisabled  error-disabled  state upon receipt of any BPDU  This protects against potential loops by effectively shutting down the port  The administrator must manually put the interface back into service 
Evolution of STP Alternatives to STPOver the years  organizations required greater resiliency and availability in the LAN  Ethernet LANs went from a few interconnected switches connected to a single router  to a sophisticated hierarchical network design including access  distribution and core layer switches Depending on the implementation  Layer 2 may include not only the access layer  but also the distribution or even the core layers  These designs may include hundreds of switches  with hundreds or even thousands of VLANs  STP has adapted to the added redundancy and complexity with enhancements  as part of RSTP and MSTP An important aspect to network design is fast and predictable convergence when there is a failure or change in the topology  Spanning tree does not offer the same efficiencies and predictabilities provided by routing protocols at Layer 3 Layer 3 routing allows for redundant paths and loops in the topology  without blocking ports  For this reason  some environments are transitioning to Layer 3 everywhere except where devices connect to the access layer switch  In other words  the connections between access layer switches and distribution switches would be Layer 3 instead of Layer 2 
Module ObjectivesModule Title  STP ConceptsModule Objective  Explain how STP enables redundancy in a Layer 2 network Topic TitleTopic ObjectivePurpose of STPExplain common problems in a redundant  L2 switched network STP OperationsExplain how STP operates in a simple switched network Evolution of STPExplain how Rapid PVST  operates 
Purpose of STP Redundancy in Layer 2 Switched NetworksThis topic covers the causes of loops in a Layer 2 network and briefly explains how spanning-tree-protocol works  Redundancy is an important part of the hierarchical design for eliminating single points of failure and preventing disruption of network services to users  Redundant networks require the addition of physical paths  but logical redundancy must also be part of the design  Having alternate physical paths for data to traverse the network makes it possible for users to access network resources  despite path disruption  However  redundant paths in a switched Ethernet network may cause both physical and logical Layer 2 loops Ethernet LANs require a loop-free topology with a single path between any two devices  A loop in an Ethernet LAN can cause continued propagation of Ethernet frames until a link is disrupted and breaks the loop 
Purpose of STP Spanning Tree ProtocolSpanning Tree Protocol  STP  is a loop-prevention network protocol that allows for redundancy while creating a loop-free Layer 2 topology  STP logically blocks physical loops in a Layer 2 network  preventing frames from circling the network forever 
Purpose of STP STP RecalculationSTP compensates for a failure in the network by recalculating and opening up previously blocked ports 
Purpose of STP Issues with Redundant Switch LinksPath redundancy provides multiple network services by eliminating the possibility of a single point of failure  When multiple paths exist between two devices on an Ethernet network  and there is no spanning-tree implementation on the switches  a Layer 2 loop occurs  A Layer 2 loop can result in MAC address table instability  link saturation  and high CPU utilization on switches and end-devices  resulting in the network becoming unusable Layer 2 Ethernet does not include a mechanism to recognize and eliminate endlessly looping frames  Both IPv4 and IPv6 include a mechanism that limits the number of times a Layer 3 networking device can retransmit a packet  A router will decrement the TTL  Time to Live  in every IPv4 packet  and the Hop Limit field in every IPv6 packet  When these fields are decremented to 0  a router will drop the packet  Ethernet and Ethernet switches have no comparable mechanism for limiting the number of times a switch retransmits a Layer 2 frame  STP was developed specifically as a loop prevention mechanism for Layer 2 Ethernet 
Purpose of STP Layer 2 LoopsWithout STP enabled  Layer 2 loops can form  causing broadcast  multicast and unknown unicast frames to loop endlessly  This can bring down a network quickly  When a loop occurs  the MAC address table on a switch will constantly change with the updates from the broadcast frames  which results in MAC database instability  This can cause high CPU utilization  which makes the switch unable to forward frames An unknown unicast frame is when the switch does not have the destination MAC address in its MAC address table and must forward the frame out all ports  except the ingress port 
Purpose of STP Broadcast StormA broadcast storm is an abnormally high number of broadcasts overwhelming the network during a specific amount of time  Broadcast storms can disable a network within seconds by overwhelming switches and end devices  Broadcast storms can be caused by a hardware problem such as a faulty NIC or from a Layer 2 loop in the network Layer 2 broadcasts in a network  such as ARP Requests are very common  Layer 2 multicasts are typically forwarded the same way as a broadcast by the switch  IPv6 packets are never forwarded as a Layer 2 broadcast  ICMPv6 Neighbor Discovery uses Layer 2 multicasts A host caught in a Layer 2 loop is not accessible to other hosts on the network  Additionally  due to the constant changes in its MAC address table  the switch does not know out of which port to forward unicast frames To prevent these issues from occurring in a redundant network  some type of spanning-tree must be enabled on the switches  Spanning tree is enabled  by default  on Cisco switches to prevent Layer 2 loops from occurring 
Purpose of STP The Spanning Tree AlgorithmSTP is based on an algorithm invented by Radia Perlman while working for Digital Equipment Corporation  and published in the 1985 paper  An Algorithm for Distributed Computation of a Spanning Tree in an Extended LAN   Her spanning-tree algorithm  STA  creates a loop-free topology by selecting a single root-bridge where all other switches determine a single least-cost path STP prevents loops from occurring by configuring a loop-free path through the network using strategically placed  blocking-state  ports  The switches running STP are able to compensate for failures by dynamically unblocking the previously blocked ports and permitting traffic to traverse the alternate paths 
Purpose of STP The Spanning Tree Algorithm  Cont  How does the STA create a loop-free topology Selecting a Root Bridge  This bridge  switch  is the reference point for the entire network to build a spanning-tree around Block Redundant Paths  STP ensures that there is only one logical path between all destinations on the network by intentionally blocking redundant paths that could cause a loop  When a port is blocked  user data is prevented from entering or leaving that port Create a Loop-Free Topology  A blocked port has the effect of making that link a non-forwarding link between the two switches  This creates a topology where each switch has only a single path to the root-bridge  similar to branches on a tree that connect to the root of the tree Recalculate in case of Link Failure  The physical paths still exist to provide redundancy  but these paths are disabled to prevent the loops from occurring  If the path is ever needed to compensate for a network cable or switch failure  STP recalculates the paths and unblocks the necessary-ports to allow the redundant path to become active  STP recalculations can also occur any time a new switch or new inter-switch link is added to the network 
Purpose of STP Video   Observe STP OperationThis video demonstrates the use of STP in a network environment 
Purpose of STP Packet Tracer   Investigate STP Loop PreventionIn this Packet Tracer activity  you will complete the following objectives Create and configure a simple three switch network with STP View STP operation Disable STP and view operation again 
STP Operations Steps to a Loop-Free TopologyUsing the STA  STP builds a loop-free topology in a four-step process Elect the root-bridge Elect the root-ports Elect designated-ports Elect alternate  blocked  ports During STA and STP functions  switches use Bridge Protocol Data Units  BPDUs  to share information about themselves and their connections  BPDUs are used to elect the root-bridge  root-ports  designated-ports  and alternate-ports  Each BPDU contains a bridge ID  BID  that identifies which switch sent the BPDU  The BID is involved in making many of the STA decisions including root-bridge and port roles  The BID contains a priority value  the MAC address of the switch  and an extended system ID  The lowest BID value is determined by the combination of these three fields 
STP Operations Steps to a Loop-Free Topology  Cont  Bridge Priority  The default priority value for all Cisco switches is the decimal value 32768  The range is 0 to 61440 in increments of 4096  A lower bridge priority is preferable  A bridge priority of 0 takes precedence over all other bridge priorities Extended System ID  The extended system ID value is a decimal value added to the bridge priority value in the BID to identify the VLAN for this BPDU MAC address  When two switches are configured with the same priority and have the same extended system ID  the switch having the MAC address with the lowest value  expressed in hexadecimal  will have the lower BID 
STP Operations 1  Elect the Root BridgeThe STA designates a single switch as the root-bridge and uses it as the reference point for all path calculations  Switches exchange BPDUs to build the loop-free topology beginning with selecting the root-bridge All switches in the broadcast domain participate in the election process  After a switch boots  it begins to send out BPDU frames every two seconds  These BPDU frames contain the BID of the sending switch and the BID of the root-bridge  known as the Root ID The switch with the lowest BID will become the root-bridge  At first  all switches declare themselves as the root-bridge with their own BID set as the Root ID  Eventually  the switches learn through the exchange of BPDUs which switch has the lowest BID and will agree on one root-bridge 
STP Operations Impact of Default BIDsBecause the default BID is 32768  it is possible for two or more switches to have the same priority  In this scenario  where the priorities are the same  the switch with the lowest MAC address will become the root-bridge  The administrator should configure the desired root-bridge switch with a lower priority In the figure  all switches are configured with the same priority of 32769  Here the MAC address becomes the deciding factor as to which switch becomes the root-bridge  The switch with the lowest hexadecimal MAC address value is the preferred root-bridge  In this example  S2 has the lowest value for its MAC address and is elected as the root-bridge for that spanning-tree instance Note  The priority of all the switches is 32769  The value is based on the 32768 default bridge priority and the extended system ID  VLAN 1 assignment  associated with each switch  32768 1  
STP Operations Determine the Root Path CostWhen the root-bridge has been elected for a given spanning-tree instance  the STA starts determining the best paths to the root-bridge from all destinations in the broadcast domain  The path information  known as the internal root path cost  is determined by the sum of all the individual port costs along the path from the switch to the root-bridge When a switch receives the BPDU  it adds the ingress port cost of the segment to determine its internal root path cost The default port costs are defined by the speed at which the port operates  The table shows the default port costs suggested by IEEE  Cisco switches by default use the values as defined by the IEEE 802 1D standard  also known as the short path cost  for both STP and RSTP  Although switch ports have a default port cost associated with them  the port cost is configurable  The ability to configure individual port costs gives the administrator the flexibility to manually control the spanning-tree paths to the root-bridge Link SpeedSTP Cost  IEEE 802 1D-1998RSTP Cost  IEEE 802 1w-200410 Gbps2 0001 Gbps20 000100 Mbps19200 00010 Mbps1002 000 000
STP Operations 2  Elect the Root PortsAfter the root-bridge has been determined  the STA algorithm is used to select the root-port  Every non-root switch will select one root-port  The root-port is the port closest to the root-bridge in terms of overall cost to the root-bridge  This overall cost is known as the internal root path cost The internal root path cost is equal to the sum of all the port costs along the path to the root-bridge  as shown in the figure  Paths with the lowest cost become preferred  and all other redundant paths are blocked  In the example  the internal root path cost from S2 to the root-bridge S1 over path 1 is 19 while the internal root path cost over path 2 is 38  Because path 1 has a lower overall path cost to the root-bridge  it is the preferred path and F0 1 becomes the root-port on S2 
STP Operations 3  Elect Designated PortsEvery segment between two switches will have one designated-port  The designated-port is a port on the segment that has the internal root path cost to the root-bridge  In other words  the designated-port has the best path to receive traffic leading to the root-bridge What is not a root-port or a designated-port becomes an alternate or blocked port  All ports on the root-bridge are designated-ports If one end of a segment is a root-port  the other end is a designated-port All ports attached to end devices are designated-ports On segments between two switches where neither of the switches is the root-bridge  the port on the switch with the least-cost path to the root-bridge is a designated-port 
STP Operations 4  Elect Alternate  Blocked  PortsIf a port is not a root-port or a designated-port  then it becomes an alternate  or backup  port  Alternate ports are in discarding or blocking state to prevent loops  In the figure  the STA has configured port F0 2 on S3 in the alternate role  Port F0 2 on S3 is in the blocking state and will not forward Ethernet frames  All other inter-switch ports are in forwarding state  This is the loop-prevention part of STP 
STP Operations Elect a Root Port from Multiple Equal-Cost PathsWhen a switch has multiple equal-cost paths to the root-bridge  the switch will determine a port using the following criteria Lowest sender BIDLowest sender port priorityLowest sender port ID
STP Operations Elect a Root Port from Multiple Equal-Cost Paths  Cont  Lowest Sender BID  This topology has four switches with switch S1 as the root-bridge  Port F0 1 on switch S3 and port F0 3 on switch S4 have been selected as root-ports because they have the root path cost to the root-bridge for their respective switches  S2 has two ports  F0 1 and F0 2 with equal cost paths to the root-bridge  The bridge IDs of S3 and S4  will be used to break the tie  This is known as the sender s BID  S3 has a BID of 32769 5555 5555 5555 and S4 has a BID of 32769 1111 1111 1111  Because S4 has a lower BID  the F0 1 port of S2  which is the port connected to S4  will be the root-port 
STP Operations Elect a Root Port from Multiple Equal-Cost Paths  Cont  Lowest Sender Port Priority  This topology has two switches which are connected with two equal-cost paths between them  S1 is the root-bridge  so both of its ports are designated-ports S4 has two ports with equal-cost paths to the root-bridge  Because both ports are connected to the same switch  the sender s BID  S1  is equal  So the first step is a tie Next  is the sender s  S1  port priority  The default port priority is 128  so both ports on S1 have the same port priority  This is also a tie  However  if either port on S1 was configured with a lower port priority  S4 would put its adjacent port in forwarding state  The other port on S4 would be a blocking state 
STP Operations Elect a Root Port from Multiple Equal-Cost Paths  Cont  Lowest Sender Port ID  The last tie-breaker is the lowest sender s port ID  Switch S4 has received BPDUs from port F0 1 and port F0 2 on S1  The decision is based on the sender s port ID  not the receiver s port ID  Because the port ID of F0 1 on S1 is lower than port F0 2  the port F0 6 on switch S4 will be the root-port  This is the port on S4 that is connected to the F0 1 port on S1 Port F0 5 on S4 will become an alternate-port and placed in the blocking state 
STP Operations STP Timers and Port StatesSTP convergence requires three timers  as follows Hello Timer -The hello time is the interval between BPDUs  The default is 2 seconds but can be modified to between 1 and 10 seconds Forward Delay Timer -The forward delay is the time that is spent in the listening and learning state  The default is 15 seconds but can be modified to between 4 and 30 seconds Max Age Timer -The max age is the maximum length of time that a switch waits before attempting to change the STP topology  The default is 20 seconds but can be modified to between 6 and 40 seconds Note  The default times can be changed on the root-bridge  which dictates the value of these timers for the STP domain 
STP Operations STP Timers and Port States  Cont  STP facilitates the logical loop-free path throughout the broadcast domain  The spanning-tree is determined through the information learned by the exchange of the BPDU frames between the interconnected switches  If a switch port transitions directly from the blocking state to the forwarding state without information about the full topology during the transition  the port can temporarily create a data loop  For this reason  STP has five ports states  four of which are operational port states as shown in the figure  The disabled state is considered non-operational 
STP Operations Operational Details of Each Port StateThe table summarizes the operational details of each port statePort StateBPDUMAC Address TableForwarding Data FramesBlockingReceive onlyNo updateNoListeningReceive and sendNo updateNoLearningReceive and sendUpdating tableNoForwardingReceive and sendUpdating tableYesDisabledNone sent or receivedNo updateNo
STP Operations Per-VLAN Spanning TreeSTP can be configured to operate in an environment with multiple VLANs  In Per-VLAN Spanning Tree  PVST  versions of STP  there is a root-bridge elected for each spanning-tree instance  This makes it possible to have different root-bridges for different sets of VLANs  STP operates a separate instance of STP for each individual VLAN  If all ports on all switches are members of VLAN 1  then there is only one spanning-tree instance 
Ethernet Frames Ethernet EncapsulationEthernet operates in the data-link-layer and the physical-layer It is a family of networking technologies defined in the IEEE 802 2 and 802 3 standards 
Ethernet Frames Data Link SublayersThe 802 LAN MAN standards  including Ethernet  use two separate sublayers of the data-link-layer to operate LLC Sublayer   IEEE 802 2  Places information in the frame to identify which network-layer protocol is used for the frame MAC Sublayer   IEEE 802 3  802 11  or 802 15  Responsible for data-encapsulation and media access control  and provides data-link-layer addressing 
Ethernet Frames MAC SublayerThe MAC sublayer is responsible for data-encapsulation and accessing the media Data EncapsulationIEEE 802 3 data-encapsulation includes the following Ethernet frame - This is the internal structure of the Ethernet frame Ethernet Addressing - The Ethernet frame includes both a source and destination MAC address to deliver the Ethernet frame from Ethernet NIC to Ethernet NIC on the same LAN Ethernet Error detection - The Ethernet frame includes a frame check sequence  FCS  trailer used for error-detection 
Ethernet Frames MAC SublayerMedia AccessThe IEEE 802 3 MAC sublayer includes the specifications for different Ethernet communications standards over various types of media including copper and fiber Legacy Ethernet using a bus topology or hubs  is a shared  half-duplex medium  Ethernet over a half-duplex medium uses a contention-based access method  carrier sense multiple access collision detection  CSMA CD   Ethernet LANs of today use switches that operate in full-duplex  Full-duplex communications with Ethernet switches do not require access control through CSMA CD 
Ethernet Frames Ethernet Frame FieldsThe minimum Ethernet frame size is 64 bytes and the maximum is 1518 bytes  The preamble field is not included when describing the size of the frame Any frame less than 64 bytes in length is considered a  collision fragment  or  runt frame  and is automatically discarded  Frames with more than 1500 bytes of data are considered  jumbo  or  baby giant frames  If the size of a transmitted frame is less than the minimum  or greater than the maximum  the receiving device drops the frame  Dropped frames are likely to be the result of collisions or other unwanted signals  They are considered invalid  Jumbo frames are usually supported by most Fast Ethernet and Gigabit Ethernet switches and NICs 
Ethernet Frames Lab   Use Wireshark to Examine Ethernet FramesIn this lab  you will complete the following objectives Part 1  Examine the Header Fields in an Ethernet II FramePart 2  Use Wireshark to Capture and Analyze Ethernet Frames
Ethernet MAC Addresses MAC Address and HexadecimalAn Ethernet MAC address consists of a 48-bit binary value  expressed using 12 hexadecimal values Given that 8 bits  one byte  is a common binary grouping  binary 00000000 to 11111111 can be represented in hexadecimal as the range 00 to FF When using hexadecimal  leading zeroes are always displayed to complete the 8-bit representation  For example the binary value 0000 1010 is represented in hexadecimal as 0A Hexadecimal numbers are often represented by the value preceded by 0x  e g   0x73  to distinguish between decimal and hexadecimal values in documentation Hexadecimal may also be represented by a subscript 16  or the hex number followed by an H  e g   73H  
Ethernet MAC Addresses Ethernet MAC AddressIn an Ethernet LAN  every network device is connected to the same  shared media  MAC addressing provides a method for device identification at the data-link-layer of the OSI model An Ethernet MAC address is a 48-bit address expressed using 12 hexadecimal digits  Because a byte equals 8 bits  we can also say that a MAC address is 6 bytes in length All MAC addresses must be unique to the Ethernet device or Ethernet interface  To ensure this  all vendors that sell Ethernet devices must register with the IEEE to obtain a unique 6 hexadecimal  i e   24-bit or 3-byte  code called the organizationally-unique-identifier  OUI  An Ethernet MAC address consists of a 6 hexadecimal vendor OUI code followed by a 6 hexadecimal vendor-assigned value 
Ethernet MAC Addresses Frame ProcessingWhen a device is forwarding a message to an Ethernet network  the Ethernet header include a Source MAC address and a Destination MAC address When a NIC receives an Ethernet frame  it examines the destination MAC address to see if it matches the physical MAC address that is stored in RAM  If there is no match  the device discards the frame  If there is a match  it passes the frame up the OSI layers  where the de-encapsulation process takes place Note  Ethernet NICs will also accept frames if the destination MAC address is a broadcast or a multicast group of which the host is a member Any device that is the source or destination of an Ethernet frame  will have an Ethernet NIC and therefore  a MAC address  This includes workstations  servers  printers  mobile devices  and routers 
Ethernet MAC Addresses Unicast MAC AddressIn Ethernet  different MAC addresses are used for Layer 2 unicast  broadcast  and multicast communications A unicast MAC address is the unique address that is used when a frame is sent from a single transmitting device to a single destination device The process that a source host uses to determine the destination MAC address associated with an IPv4 address is known as Address Resolution Protocol  ARP   The process that a source host uses to determine the destination MAC address associated with an IPv6 address is known as Neighbor Discovery  ND  Note  The source MAC address must always be a unicast 
Ethernet MAC Addresses Broadcast MAC AddressAn Ethernet broadcast frame is received and processed by every device on the Ethernet LAN  The features of an Ethernet broadcast are as follows It has a destination MAC address of FF-FF-FF-FF-FF-FF in hexadecimal  48 ones in binary  It is flooded out all Ethernet switch ports except the incoming port  It is not forwarded by a router If the encapsulated data is an IPv4 broadcast packet  this means the packet contains a destination IPv4 address that has all ones  1s  in the host portion  This numbering in the address means that all hosts on that local network  broadcast domain  will receive and process the packet 
Ethernet MAC Addresses Multicast MAC AddressAn Ethernet multicast frame is received and processed by a group of devices that belong to the same multicast group  There is a destination MAC address of 01-00-5E when the encapsulated data is an IPv4 multicast packet and a destination MAC address of 33-33 when the encapsulated data is an IPv6 multicast packet There are other reserved multicast destination MAC addresses for when the encapsulated data is not IP  such as Spanning Tree Protocol  STP  It is flooded out all Ethernet switch ports except the incoming port  unless the switch is configured for multicast snooping  It is not forwarded by a router  unless the router is configured to route multicast packets Because multicast addresses represent a group of addresses  sometimes called a host group   they can only be used as the destination of a packet  The source will always be a unicast address As with the unicast and broadcast addresses  the multicast IP address requires a corresponding multicast MAC address 
Ethernet MAC Addresses Lab   View Network Device MAC AddressesIn this lab  you will complete the following objectives Part 1  Set Up the Topology and Initialize DevicesPart 2  Configure Devices and Verify ConnectivityPart 3  Display  Describe  and Analyze Ethernet MAC Addresses
MAC and IP Destination on Same NetworkThere are two primary addresses assigned to a device on an Ethernet LAN Layer 2 physical address  the MAC address    Used for NIC to NIC communications on the same Ethernet network Layer 3 logical address  the IP address    Used to send the packet from the source device to the destination device  Layer 2 addresses are used to deliver frames from one NIC to another NIC on the same network  If a destination IP address is on the same network  the destination MAC address will be that of the destination device 
MAC and IP Destination on Remote NetworkWhen the destination IP address is on a remote network  the destination MAC address is that of the default gateway ARP is used by IPv4 to associate the IPv4 address of a device with the MAC address of the device NIC ICMPv6 is used by IPv6 to associate the IPv6 address of a device with the MAC address of the device NIC 
MAC and IP Packet Tracer   Identify MAC and IP AddressesIn this Packet Tracer  you will complete the following objectives Gather PDU Information for Local Network CommunicationGather PDU Information for Remote Network Communication
The MAC Address Table Switch FundamentalsA Layer 2 Ethernet switch uses Layer 2 MAC addresses to make forwarding decisions  It is completely unaware of the data  protocol  being carried in the data portion of the frame  such as an IPv4 packet  an ARP message  or an IPv6 ND packet  The switch makes its forwarding decisions based solely on the Layer 2 Ethernet MAC addresses An Ethernet switch examines its MAC address table to make a forwarding decision for each frame  unlike legacy Ethernet hubs that repeat bits out all ports except the incoming port  When a switch is turned on  the MAC address table is emptyNote  The MAC address table is sometimes referred to as a content addressable memory  CAM  table 
The MAC Address Table Switch Learning and ForwardingExamine the Source MAC Address  Learn Every frame that enters a switch is checked for new information to learn  It does this by examining the source MAC address of the frame and the port number where the frame entered the switch  If the source MAC address does not exist  it is added to the table along with the incoming port number  If the source MAC address does exist  the switch updates the refresh timer for that entry  By default  most Ethernet switches keep an entry in the table for 5 minutes Note  If the source MAC address does exist in the table but on a different port  the switch treats this as a new entry  The entry is replaced using the same MAC address but with the more current port number 
The MAC Address Table Switch Learning and Forwarding  Contd  Find the Destination MAC Address  Forward If the destination MAC address is a unicast address  the switch will look for a match between the destination MAC address of the frame and an entry in its MAC address table  If the destination MAC address is in the table  it will forward the frame out the specified port  If the destination MAC address is not in the table  the switch will forward the frame out all ports except the incoming port  This is called an unknown unicast Note  If the destination MAC address is a broadcast or a multicast  the frame is also flooded out all ports except the incoming port 
The MAC Address Table Filtering FramesAs a switch receives frames from different devices  it is able to populate its MAC address table by examining the source MAC address of every frame  When the MAC address table of the switch contains the destination MAC address  it is able to filter the frame and forward out a single port 
The MAC Address Table Video   MAC Address Tables on Connected SwitchesThis video will cover the following How switches build MAC address tablesHow switches forward frames base on the content of their MAC address tables
The MAC Address Table Video   Sending the Frame to the Default GatewayThis video will cover the following What a switch does when the destination AMC address is not listed in the switch s MAC address table What a switch does when the source AMC address is not listed in the switch s MAC address table
The MAC Address Table Lab   View the Switch MAC Address TableIn this lab  you will complete the following objectives Part 1  Build and Configure the NetworkPart 2  Examine the Switch MAC Address Table
Ethernet Frames Ethernet EncapsulationEthernet operates in the data-link-layer and the physical-layer It is a family of networking technologies defined in the IEEE 802 2 and 802 3 standards 
Ethernet Frames Data Link SublayersThe 802 LAN MAN standards  including Ethernet  use two separate sublayers of the data-link-layer to operate LLC Sublayer   IEEE 802 2  Places information in the frame to identify which network-layer protocol is used for the frame MAC Sublayer   IEEE 802 3  802 11  or 802 15  Responsible for data-encapsulation and media access control  and provides data-link-layer addressing 
Ethernet Frames MAC SublayerThe MAC sublayer is responsible for data-encapsulation and accessing the media Data EncapsulationIEEE 802 3 data-encapsulation includes the following Ethernet frame - This is the internal structure of the Ethernet frame Ethernet Addressing - The Ethernet frame includes both a source and destination MAC address to deliver the Ethernet frame from Ethernet NIC to Ethernet NIC on the same LAN Ethernet Error detection - The Ethernet frame includes a frame check sequence  FCS  trailer used for error-detection 
Ethernet Frames MAC SublayerMedia AccessThe IEEE 802 3 MAC sublayer includes the specifications for different Ethernet communications standards over various types of media including copper and fiber Legacy Ethernet using a bus topology or hubs  is a shared  half-duplex medium  Ethernet over a half-duplex medium uses a contention-based access method  carrier sense multiple access collision detection  CSMA CD   Ethernet LANs of today use switches that operate in full-duplex  Full-duplex communications with Ethernet switches do not require access control through CSMA CD 
Ethernet Frames Ethernet Frame FieldsThe minimum Ethernet frame size is 64 bytes and the maximum is 1518 bytes  The preamble field is not included when describing the size of the frame Any frame less than 64 bytes in length is considered a  collision fragment  or  runt frame  and is automatically discarded  Frames with more than 1500 bytes of data are considered  jumbo  or  baby giant frames  If the size of a transmitted frame is less than the minimum  or greater than the maximum  the receiving device drops the frame  Dropped frames are likely to be the result of collisions or other unwanted signals  They are considered invalid  Jumbo frames are usually supported by most Fast Ethernet and Gigabit Ethernet switches and NICs 
Ethernet Frames Lab   Use Wireshark to Examine Ethernet FramesIn this lab  you will complete the following objectives Part 1  Examine the Header Fields in an Ethernet II FramePart 2  Use Wireshark to Capture and Analyze Ethernet Frames
Ethernet MAC Addresses MAC Address and HexadecimalAn Ethernet MAC address consists of a 48-bit binary value  expressed using 12 hexadecimal values Given that 8 bits  one byte  is a common binary grouping  binary 00000000 to 11111111 can be represented in hexadecimal as the range 00 to FF When using hexadecimal  leading zeroes are always displayed to complete the 8-bit representation  For example the binary value 0000 1010 is represented in hexadecimal as 0A Hexadecimal numbers are often represented by the value preceded by 0x  e g   0x73  to distinguish between decimal and hexadecimal values in documentation Hexadecimal may also be represented by a subscript 16  or the hex number followed by an H  e g   73H  
Ethernet MAC Addresses Ethernet MAC AddressIn an Ethernet LAN  every network device is connected to the same  shared media  MAC addressing provides a method for device identification at the data-link-layer of the OSI model An Ethernet MAC address is a 48-bit address expressed using 12 hexadecimal digits  Because a byte equals 8 bits  we can also say that a MAC address is 6 bytes in length All MAC addresses must be unique to the Ethernet device or Ethernet interface  To ensure this  all vendors that sell Ethernet devices must register with the IEEE to obtain a unique 6 hexadecimal  i e   24-bit or 3-byte  code called the organizationally-unique-identifier  OUI  An Ethernet MAC address consists of a 6 hexadecimal vendor OUI code followed by a 6 hexadecimal vendor-assigned value 
Ethernet MAC Addresses Frame ProcessingWhen a device is forwarding a message to an Ethernet network  the Ethernet header include a Source MAC address and a Destination MAC address When a NIC receives an Ethernet frame  it examines the destination MAC address to see if it matches the physical MAC address that is stored in RAM  If there is no match  the device discards the frame  If there is a match  it passes the frame up the OSI layers  where the de-encapsulation process takes place Note  Ethernet NICs will also accept frames if the destination MAC address is a broadcast or a multicast group of which the host is a member Any device that is the source or destination of an Ethernet frame  will have an Ethernet NIC and therefore  a MAC address  This includes workstations  servers  printers  mobile devices  and routers 
Ethernet MAC Addresses Unicast MAC AddressIn Ethernet  different MAC addresses are used for Layer 2 unicast  broadcast  and multicast communications A unicast MAC address is the unique address that is used when a frame is sent from a single transmitting device to a single destination device The process that a source host uses to determine the destination MAC address associated with an IPv4 address is known as Address Resolution Protocol  ARP   The process that a source host uses to determine the destination MAC address associated with an IPv6 address is known as Neighbor Discovery  ND  Note  The source MAC address must always be a unicast 
Ethernet MAC Addresses Broadcast MAC AddressAn Ethernet broadcast frame is received and processed by every device on the Ethernet LAN  The features of an Ethernet broadcast are as follows It has a destination MAC address of FF-FF-FF-FF-FF-FF in hexadecimal  48 ones in binary  It is flooded out all Ethernet switch ports except the incoming port  It is not forwarded by a router If the encapsulated data is an IPv4 broadcast packet  this means the packet contains a destination IPv4 address that has all ones  1s  in the host portion  This numbering in the address means that all hosts on that local network  broadcast domain  will receive and process the packet 
Ethernet MAC Addresses Multicast MAC AddressAn Ethernet multicast frame is received and processed by a group of devices that belong to the same multicast group  There is a destination MAC address of 01-00-5E when the encapsulated data is an IPv4 multicast packet and a destination MAC address of 33-33 when the encapsulated data is an IPv6 multicast packet There are other reserved multicast destination MAC addresses for when the encapsulated data is not IP  such as Spanning Tree Protocol  STP  It is flooded out all Ethernet switch ports except the incoming port  unless the switch is configured for multicast snooping  It is not forwarded by a router  unless the router is configured to route multicast packets Because multicast addresses represent a group of addresses  sometimes called a host group   they can only be used as the destination of a packet  The source will always be a unicast address As with the unicast and broadcast addresses  the multicast IP address requires a corresponding multicast MAC address 
Ethernet MAC Addresses Lab   View Network Device MAC AddressesIn this lab  you will complete the following objectives Part 1  Set Up the Topology and Initialize DevicesPart 2  Configure Devices and Verify ConnectivityPart 3  Display  Describe  and Analyze Ethernet MAC Addresses
Module ObjectivesModule Title  Switching ConceptsModule Objective  Explain how Layer 2 switches forward data Topic TitleTopic ObjectiveFrame ForwardingExplain how frames are forwarded in a switched network Switching DomainsCompare a collision-domain to a broadcast domain 
Frame Forwarding Switching in NetworkingTwo terms are associated with frames entering or leaving an interface Ingress   entering the interfaceEgress   exiting the interfaceA switch forwards based on the ingress interface and the destination MAC address A switch uses its MAC address table to make forwarding decisions Note  A switch will never allow traffic to be forwarded out the interface it received the traffic 
Frame Forwarding The Switch MAC Address TableA switch will use the destination MAC address to determine the egress interface Before a switch can make this decision it must learn what interface the destination is located A switch builds a MAC address table  also known as a Content Addressable Memory  CAM  table  by recording the source MAC address into the table along with the port it was received 
Frame Forwarding The Switch Learn and Forward MethodThe switch uses a two step process Step 1  Learn   Examines Source AddressAdds the source MAC if not in tableResets the time out setting back to 5 minutes if source is in the tableStep 2  Forward   Examines Destination AddressIf the destination MAC is in the MAC address table it is forwarded out the specified port If a destination MAC is not in the table  it is flooded out all interfaces except the one it was received 
Frame Forwarding Video   MAC Address Tables on Connected SwitchesThis video will cover the following How switches build MAC address tablesHow switches forward frames based on the content of their MAC address tables
Frame Forwarding Switch Forwarding MethodsSwitches use software on application-specific-integrated circuits  ASICs  to make very quick decisions A switch will use one of two methods to make forwarding decisions after it receives a frame Store-and-forward switching - Receives the entire frame and ensures the frame is valid  Store-and-forward switching is Cisco s preferred switching method Cut-through switching   Forwards the frame immediately after determining the destination MAC address of an incoming frame and the egress port  
Frame Forwarding Store-and-Forward SwitchingStore-and-forward has two primary characteristics  Error Checking   The switch will check the Frame Check Sequence  FCS  for CRC errors  Bad frames will be discarded Buffering   The ingress interface will buffer the frame while it checks the FCS  This also allows the switch to adjust to a potential difference in speeds between the ingress and egress ports 
Frame Forwarding Cut-Through SwitchingCut-through forwards the frame immediately after determining the destination MAC Fragment  Frag  Free method will check the destination and ensure that the frame is at least 64 Bytes  This will eliminate runts Concepts of Cut-Through switching Is appropriate for switches needing latency to be under 10 microsecondsDoes not check the FCS  so it can propagate errorsMay lead to bandwidth issues if the switch propagates too many errorsCannot support ports with differing speeds going from ingress to egress
Switch Hardware Switch PlatformsThere is a variety of switch platforms  form factors  and other features that must be considered before choosing a switch  When designing a network  it is important to select the proper hardware to meet current network requirements  as well as to allow for network growth  Within an enterprise network  both switches and routers play a critical role in network communication Campus LAN Switches  such as the Cisco 3850 series shown here  support high concentrations of user connections with speed and security appropriate for the enterprise network  
Switch Hardware Switch Platforms  Cont  Cisco Meraki cloud-managed access switches enable virtual stacking of switches  They monitor and configure thousands of switch ports over the web  without the intervention of onsite IT staff The Cisco Nexus platform promotes infrastructure scalability  operational continuity  and transport flexibility in the data center 
Switch Hardware Switch Platforms  Cont  Service provider Ethernet access switches feature application intelligence  unified services  virtualization  integrated security  and simplified management Cisco Nexus virtual networking switch platforms provide secure multi-tenant services by adding virtualization intelligence technology to the data center network 
Switch Hardware Switch Form FactorsWhen selecting switches  network administrators must determine the switch form factors  This includes fixed configuration  modular configuration  stackable  or non-stackable Features and options on fixed configuration switches are limited to those that originally come with the switch The chassis on modular switches accept field-replaceable line cards 
Switch Hardware Switch Form Factors  Cont  Special cables are used to connect stackable switches that allow them to effectively operate as one large switch The thickness of the switch  which is expressed in the number of rack units  is also important for switches that are mounted in a rack  For example  the fixed configuration switches shown in the figure are all one rack units  1U  or 1 75 inches  44 45 mm  in height 
Switch Hardware Port DensityThe port density of a switch refers to the number of ports available on a single switch  Fixed configuration switches support a variety of port density configurations  The Cisco Catalyst 3850 come in 12  24  48 port configurations Modular switches can support very high port densities through the addition of multiple switchport line cards  The modular Catalyst 9400 switch supports 384 switchport interfaces 
Switch Hardware Forwarding RatesForwarding rates define the processing capabilities of a switch by rating how much data the switch can process per second  Switch product lines are classified by forwarding rates  Entry-level switches have lower forwarding rates than enterprise-level switches  If switch forwarding rate is too low  it cannot accommodate full wire-speed communication across all of its switch ports  Wire speed is the data rate that each Ethernet port on the switch is capable of attaining  Data rates can be 100 Mbps  1 Gbps  10 Gbps  or 100 Gbps Access layer switches typically do not need to operate at full wire speed  because they are physically limited by their uplinks to the distribution-layer  
Switch Hardware Power over EthernetPower over Ethernet  PoE  allows the switch to deliver power to a device  e g   IP phone  AP  camera  over the existing Ethernet cabling  A network administrator should ensure that the PoE features are actually required for a given installation  because switches that support PoE are expensive 
Switch Hardware Multilayer SwitchingMultilayer switches are typically deployed in the core and distribution-layers of an organization s switched network  They support some routing protocols and forward IP packets at a rate close to that of Layer 2 forwarding  Multilayer switches often support specialized hardware  such as application-specific integrated circuits  ASICs   ASICs along with dedicated software data structures can streamline the forwarding of IP packets independent of the CPU 
Switch Hardware Business Considerations for Switch SelectionConsiderationDescriptionCostThe cost of a switch will depend on the number and speed of the interfaces  supported features  and expansion capability Port densityNetwork switches must support the appropriate number of devices on the network PowerIt is now common to power access points  IP phones  and compact switches user Power over Ethernet  PoE    In addition to PoE considerations  some chassis-based switches support redundant power supplies ReliabilityThe switch should provide continuous access to the network Port speedThe speed of the network connection is of primary concern to end users Frame buffersThe ability of the switch to store frames is important in a network where there may be congested ports to servers or other areas of the network ScalabilityThe number of users on a network typically grows over time  therefore  the switch should provide the opportunity for growth 
Switch Speeds and Forwarding Methods Frame Forwarding Methods on Cisco SwitchesSwitches use one of the following forwarding methods for switching data between network ports Store-and-forward switching - This frame forwarding method receives the entire frame and computes the CRC  If the CRC is valid  the switch looks up the destination address  which determines the outgoing interface  Then the frame is forwarded out of the correct port Cut-through switching - This frame forwarding method forwards the frame before it is entirely received  At a minimum  the destination address of the frame must be read before the frame can be forwarded A big advantage of store-and-forward switching is that it determines if a frame has errors before propagating the frame  When an error is detected in a frame  the switch discards the frame  Discarding frames with errors reduces the amount of bandwidth consumed by corrupt data  Store-and-forward switching is required for quality of service  QoS  analysis on converged networks where frame classification for traffic prioritization is necessary  For example  voice over IP  VoIP  data streams need to have priority over web-browsing traffic 
Switch Speeds and Forwarding Methods Cut-Through SwitchingIn cut-through switching  the switch acts upon the data as soon as it is received  even if the transmission is not complete  The switch buffers just enough of the frame to read the destination MAC address so that it can determine to which port it should forward out the data  The switch does not perform any error checking on the frame There are two variants of cut-through switching Fast-forward switching - Offers the lowest level of latency by immediately forwarding a packet after reading the destination address  Because fast-forward switching starts forwarding before the entire packet has been received  there may be times when packets are relayed with errors  The destination NIC discards the faulty packet upon receipt  Fast-forward switching is the typical cut-through method of switching Fragment-free switching - A compromise between the high latency and high integrity of store-and-forward switching and the low latency and reduced integrity of fast-forward switching  the switch stores and performs an error check on the first 64 bytes of the frame before forwarding  Because most network errors and collisions occur during the first 64 bytes  this ensures that a collision has not occurred before forwarding the frame 
Switch Speeds and Forwarding Methods Memory Buffering on SwitchesAn Ethernet switch may use a buffering technique to store frames before forwarding them or when the destination port is busy because of congestion  Shared memory buffering also results in larger frames that can be transmitted with fewer dropped frames  This is important with asymmetric switching which allows for different data rates on different ports  Therefore  more bandwidth can be dedicated to certain ports  e g   server port  MethodDescriptionPort-based memoryFrames are stored in queues that are linked to specific incoming and outgoing ports  A frame is transmitted to the outgoing port only when all the frames ahead in the queue have been successfully transmitted  It is possible for a single frame to delay the transmission of all the frames in memory because of a busy destination port  This delay occurs even if the other frames could be transmitted to open destination ports Shared memoryDeposits all frames into a common memory buffer shared by all switch ports and the amount of buffer memory required by a port is dynamically allocated  The frames in the buffer are dynamically linked to the destination port enabling a packet to be received on one port and then transmitted on another port  without moving it to a different queue 
Switch Speeds and Forwarding Methods Duplex and Speed SettingsTwo of the most basic settings on a switch are the bandwidth   speed   and duplex settings for each individual switch port  It is critical that the duplex and bandwidth settings match between the switch port and the connected devices There are two types of duplex settings used for communications on an Ethernet network Full-duplex - Both ends of the connection can send and receive simultaneously Half-duplex - Only one end of the connection can send at a time Autonegotiation is an optional function found on most Ethernet switches and NICs  It enables two devices to automatically negotiate the best speed and duplex capabilities Note  Gigabit Ethernet ports only operate in full-duplex  
Switch Speeds and Forwarding Methods Duplex and Speed SettingsDuplex mismatch is one of the most common causes of performance issues on 10 100 Mbps Ethernet links  It occurs when one port on the link operates at half-duplex while the other port operates at full-duplex This can occur when one or both ports on a link are reset  and the autonegotiation-process does not result in both link partners having the same configuration  It also can occur when users reconfigure one side of a link and forget to reconfigure the other  Both sides of a link should have autonegotiation on  or both sides should have it off  Best practice is to configure both Ethernet switch ports as full-duplex 
Switch Speeds and Forwarding Methods Auto-MDIXConnections between devices once required the use of either a crossover or straight-through cable  The type of cable required depended on the type of interconnecting devices Note  A direct-connection between a router and a host requires a cross-over connection Most switch devices now support the automatic medium-dependent interface crossover  auto-MDIX  feature  When enabled  the switch automatically detects the type of cable attached to the port and configures the interfaces accordingly  The auto-MDIX feature is enabled by default on switches running Cisco IOS Release 12 2 18 SE or later  However  the feature could be disabled  For this reason  you should always use the correct cable type and not rely on the auto-MDIX feature  Auto-MDIX can be re-enabled using the mdix-auto interface configuration command 
Switching Domains Collision DomainsSwitches eliminate collision-domains and reduce congestion When there is full duplex on the link the collision-domains are eliminated When there is one or more devices in half-duplex there will now be a collision-domain There will now be contention for the bandwidth Collisions are now possible Most devices  including Cisco and Microsoft use auto-negotiation as the default setting for duplex and speed 
Switching Domains Broadcast DomainsA broadcast domain extends across all Layer 1 or Layer 2 devices on a LAN Only a layer-3 device  router  will break the broadcast domain  also called a MAC broadcast domain The broadcast domain consists of all devices on the LAN that receive the broadcast traffic When the layer-2 switch receives the broadcast it will flood it out all interfaces except for the ingress interface  Too many broadcasts may cause congestion and poor network performance Increasing devices at Layer 1 or layer-2 will cause the broadcast domain to expand 
Switching Domains Alleviated Network CongestionSwitches use the MAC address table and full-duplex to  eliminate collisions and avoid congestion Features of the switch that alleviate congestion are as follows ProtocolFunctionFast Port SpeedsDepending on the model  switches may have up to 100Gbps port speeds Fast Internal SwitchingThis uses fast internal bus or shared memory to improve performance Large Frame BuffersThis allows for temporary storage while processing large quantities of frames High Port DensityThis provides many ports for devices to be connected to LAN with less cost  This also provides for more local traffic with less congestion 
Module Practice and Quiz What did I learn in this module Frame ForwardingIngress is the entry port  egress is the exit port The switch builds a MAC address table to forward frames on the LAN The switch can use either the store-and-forward or cut-through method of switch forwarding Switching DomainsEthernet ports in half-duplex will be a part of a collision-domain Full-duplex will eliminate collision-domains A switch will flood out all interfaces except the ingress port if the frame is a broadcast or if the unicast destination MAC is unknown  Broadcast domains may be broken up by a layer-3 device  like a router Switches extend broadcast-domains  but can eliminate collision-domains and relieve congestion 
Module 2  Switching Concepts New Terms and Commandscontent accessible memory  CAM MAC address tablestore-and-forward switchingcut-through switchingautomatic bufferingfragment free switchingcollision-domainsbroadcast-domains
The MAC Address Table Switch FundamentalsA Layer 2 Ethernet switch uses Layer 2 MAC addresses to make forwarding decisions  It is completely unaware of the data  protocol  being carried in the data portion of the frame  such as an IPv4 packet  an ARP message  or an IPv6 ND packet  The switch makes its forwarding decisions based solely on the Layer 2 Ethernet MAC addresses An Ethernet switch examines its MAC address table to make a forwarding decision for each frame  unlike legacy Ethernet hubs that repeat bits out all ports except the incoming port  When a switch is turned on  the MAC address table is emptyNote  The MAC address table is sometimes referred to as a content addressable memory  CAM  table 
The MAC Address Table Switch Learning and ForwardingExamine the Source MAC Address  Learn Every frame that enters a switch is checked for new information to learn  It does this by examining the source MAC address of the frame and the port number where the frame entered the switch  If the source MAC address does not exist  it is added to the table along with the incoming port number  If the source MAC address does exist  the switch updates the refresh timer for that entry  By default  most Ethernet switches keep an entry in the table for 5 minutes Note  If the source MAC address does exist in the table but on a different port  the switch treats this as a new entry  The entry is replaced using the same MAC address but with the more current port number 
The MAC Address Table Switch Learning and Forwarding  Contd  Find the Destination MAC Address  Forward If the destination MAC address is a unicast address  the switch will look for a match between the destination MAC address of the frame and an entry in its MAC address table  If the destination MAC address is in the table  it will forward the frame out the specified port  If the destination MAC address is not in the table  the switch will forward the frame out all ports except the incoming port  This is called an unknown unicast Note  If the destination MAC address is a broadcast or a multicast  the frame is also flooded out all ports except the incoming port 
The MAC Address Table Filtering FramesAs a switch receives frames from different devices  it is able to populate its MAC address table by examining the source MAC address of every frame  When the MAC address table of the switch contains the destination MAC address  it is able to filter the frame and forward out a single port 
The MAC Address Table Video   MAC Address Tables on Connected SwitchesThis video will cover the following How switches build MAC address tablesHow switches forward frames base on the content of their MAC address tables
The MAC Address Table Video   Sending the Frame to the Default GatewayThis video will cover the following What a switch does when the destination AMC address is not listed in the switch s MAC address table What a switch does when the source AMC address is not listed in the switch s MAC address table
The MAC Address Table Lab   View the Switch MAC Address TableIn this lab  you will complete the following objectives Part 1  Build and Configure the NetworkPart 2  Examine the Switch MAC Address Table
Module ObjectivesModule Title  Network TroubleshootingModule Objective  Troubleshoot enterprise networks Topic TitleTopic ObjectiveNetwork DocumentationExplain how network documentation is developed and used to troubleshoot network issues Troubleshooting ProcessCompare troubleshooting methods that use a systematic  layered approach Troubleshooting ToolsDescribe different networking troubleshooting tools Symptoms and Causes of Network ProblemsDetermine the symptoms and causes of network problems using a layered model Troubleshooting IP ConnectivityTroubleshoot a network using the layered model 
Network Documentation Documentation OverviewAccurate and complete network documentation is required to effectively monitor and troubleshoot networks Common network documentation includes the following Physical and logical network topology diagramsNetwork device documentation that records all pertinent device informationNetwork performance baseline documentationAll network documentation should be kept in a single location and backup documentation should be maintained and kept in a separate location 
Network Documentation Network Device DocumentationNetwork device documentation should contain accurate  up-to-date records of the network hardware and software  Documentation should include all pertinent information about the network devices Router Device DocumentationSwitch Device DocumentationEnd-System Documentation
Network Documentation Establish a Network BaselineA network baseline is used to establish normal network performance to determine the  personality  of a network under normal conditions  Establishing a network performance baseline requires collecting performance data from the ports and devices that are essential to network operation The baseline data is as follows Provides insight into whether the current network design can meet business requirements  Can reveal areas of congestion or areas in the network that are underutilized 
Network Documentation Step 1 - Determine What Types of Data to CollectWhen conducting the initial baseline  start by selecting a few variables that represent the defined policies  If too many data points are selected  the amount of data can be overwhelming  making analysis of the collected data difficult  Start out simply and fine-tune along the way  Some good starting variables are interface utilization and CPU utilization 
Network Documentation Step 2 - Identify Devices and Ports of InterestA logical network topology can be useful in identifying key devices and ports to monitor As shown in the sample topology  the devices and ports of interest include PC1  the Admin terminal Two servers  i e   Srv1 and Svr2 Router interfaces Key ports on switches
Network Documentation Step 3 - Determine the Baseline DurationWhen capturing data for analysis  the period specified should be At a minimum  seven days long Last no more than six weeks  unless specific long-term trends need to be measured  Generally  a two-to-four-week baseline is adequate Conduct an annual analysis of the entire network  or baseline different sections of the network on a rotating basis  Analysis must be conducted regularly to understand how the network is affected by growth and other changes 
Network Documentation Data MeasurementThe table lists some of the most common Cisco IOS commands used for data collection CommandDescriptionshow versionDisplays uptime  version information for device software and hardwareshow ip interface  brief   show ipv6 interface  brief Displays all the configuration options that are set on an interface show interfaces Displays detailed output for each interface show ip route  static   eigrp   ospf   bgp  show ipv6 route  static   eigrp   ospf   bgp Displays the routing table content listing directly connected networks and learned remote networks show cdp neighbors detailDisplays detailed information about directly connected Cisco devices show arp show ipv6 neighborsDisplays the contents of the ARP table  IPv4  and the neighbor table  IPv6  show running-configDisplays current configuration show vlanDisplays the status of VLANs on a switch show portDisplays the status of ports on a switch show tech-supportUsed to collect a large amount of information using multiple show commands for technical support reporting purposes 
Symptoms and Causes of Network Problems Physical Layer TroubleshootingThe table lists common symptoms of physical-layer network problems SymptomDescriptionPerformance lower than baselineRequires previous baselines for comparison  The most common reasons include overloaded or underpowered servers  unsuitable switch or router configurations  traffic congestion on a low-capacity link  and chronic frame loss Loss of connectivityLoss of connectivity could be due to a failed or disconnected cable  Can be verified using a simple ping test  Intermittent connectivity loss can indicate a loose or oxidized connection Network bottlenecks or congestionIf a route fails  routing protocols could redirect traffic to sub-optimal routes  This can result in congestion or bottlenecks in parts of the network High CPU utilization ratesHigh CPU utilization rates indicates that a device is operating at or exceeding its design limits  If not addressed quickly  CPU overloading can cause a device to shut down or fail Console error-messagesError messages reported on the device console could indicate a physical-layer problem  Console messages should be logged to a central syslog server 
Symptoms and Causes of Network Problems Physical Layer Troubleshooting  Cont  The table lists issues that commonly cause network problems at the physical-layer Problem CauseDescriptionPower-relatedCheck the operation of the fans and ensure that the chassis intake and exhaust vents are clear Hardware faultsFaulty or corrupt NIC driver files  bad cabling  or grounding problems can cause network transmission errors such as late collisions  short frames  and jabber Cabling faultsLook for damaged cables  improper cable  and poorly crimped connectors  Suspect cables should be tested or exchanged with a known functioning cable AttenuationAttenuation can be caused if a cable length exceeds the design limit for the media  or when there is a poor connection resulting from a loose cable  or dirty or oxidized contacts NoiseLocal electromagnetic interference  EMI  can be generated by many sources  such as crosstalk  nearby electric cables  large electric motors  FM radio stations  police radio  and more Interface configuration errorsCauses can include incorrect clock rate  incorrect clock source  and interface not being turned on  This causes a loss of connectivity with attached network segments Exceeding design limitsA component could operate sub-optimally if it is being utilized beyond specifications CPU overloadSymptoms include processes with high CPU utilization percentages  input queue drops  slow performance  SNMP timeouts  no remote access  no DHCP services  Telnet  and pings are slow or fail to respond 
Symptoms and Causes of Network Problems Data Link Layer TroubleshootingThe table lists common symptoms of data-link-layer network problems SymptomDescriptionNo functionality or connectivity at the network-layer or aboveSome Layer 2 problems can stop the exchange of frames across a link  while others only cause network performance to degrade Network is operating below baseline performance levels Frames can take a suboptimal path to their destination but still arrive causing the network to experience unexpected high-bandwidth usage on links   An extended or continuous ping can help reveal if frames are being dropped Excessive broadcasts Operating systems use broadcasts and multicasts extensively   Generally  excessive broadcasts are the result of a poorly programmed or configured applications  a large Layer 2 broadcast-domains  or an underlying network problems  Console messages Routers send messages when it detects a problem with interpreting incoming frames  encapsulation or framing problems  or when keepalives are expected but do not arrive   The most common console message that indicates a Layer 2 problem is a line protocol down message
Symptoms and Causes of Network Problems Data Link Layer TroubleshootingThe table lists issues that commonly cause network problems at the data-link-layer Problem CauseDescriptionEncapsulation errorsOccurs when bits placed in a field by the sender are not what the receiver expects to see  Address mapping errorsOccurs when Layer 2 and Layer addressing is not available Framing errorsFraming errors can be caused by a noisy serial line  an improperly designed cable  faulty NIC  duplex mismatch  or an incorrectly configured channel service unit  CSU  line clock STP failures or loopsMost STP problems are related to forwarding loops that occur when no ports in a redundant topology are blocked and traffic is forwarded in circles indefinitely  excessive flooding because of a high rate of STP topology changes  
Symptoms and Causes of Network Problems Network Layer TroubleshootingThe table lists common symptoms of network-layer network problems SymptomDescriptionNetwork failureOccurs when the network is nearly or completely non-functional  affecting all users and applications on the network  These failures are usually noticed quickly by users and network administrators and are obviously critical to the productivity of a company Suboptimal performanceThese involve a subset of users  applications  destinations  or a type of traffic  Optimization issues can be difficult to detect and even harder to isolate and diagnose  This is because they usually involve multiple layers  or even a single host computer  Determining that the problem is a network-layer problem can take time 
Symptoms and Causes of Network Problems Network Layer Troubleshooting  Cont  The table lists common symptoms of network-layer network problems Problem CauseDescriptionGeneral network issuesOften a change in the topology may unknowingly have effects on other areas of the network  Determine whether anything in the network has recently changed  and if there is anyone currently working on the network infrastructure Connectivity issuesCheck for any equipment and connectivity problems  including power problems  environmental problems  and Layer 1 problems  such as cabling problems  bad ports  and ISP problems Routing tableCheck the routing table for anything unexpected  such as missing routes or unexpected routes Neighbor issuesCheck to see if there are any problems with the routers forming neighbor-adjacencies Topology databaseCheck the table for anything unexpected  such as missing entries or unexpected entries 
Symptoms and Causes of Network Problems Transport Layer Troubleshooting - ACLsThe table lists areas where ACL misconfigurations commonly occur MisconfigurationsDescriptionSelection of traffic flowAn ACL must be applied to the correct interface in the correct traffic direction Order of access control entriesThe entries in an ACL should be from specific to general Implicit deny anyThe implicit ACE can be the cause of an ACL misconfiguration Addresses and IPv4 wildcard-masksComplex IPv4 wildcard-masks are more efficient  but are more subject to configuration errors Selection of transport layer protocolIt is important that only the correct transport layer protocol be specified in an ACE Source and destination portsEnsuring that the correct inbound and outbound ports are specified in an ACEUse of the established keywordThe established keyword applied incorrectly  can provide unexpected results Uncommon protocolsMisconfigured ACLs often cause problems for protocols other than TCP and UDP 
Symptoms and Causes of Network Problems Transport Layer Troubleshooting - NAT for IPv4The table lists common interoperability areas with NAT SymptomDescriptionBOOTP and DHCPThe DHCP-Request packet has a source IPv4 address of 0 0 0 0  However  NAT requires both a valid destination and source IPv4 address  therefore  BOOTP and DHCP can have difficulty operating over a router running either static or dynamic NAT  Configuring the IPv4 helper feature can help solve this problem DNSA DNS server outside the NAT router does not have an accurate representation of the network inside the router  Configuring the IPv4 helper feature can help solve this problem SNMPAn SNMP management station on one side of a NAT router may not be able to contact SNMP agents on the other side of the NAT router  Configuring the IPv4 helper feature can help solve this problem Tunneling and encryption protocolsEncryption and tunneling protocols often require that traffic be sourced from a specific UDP or TCP port  or use a protocol at the transport layer that cannot be processed by NAT 
Symptoms and Causes of Network Problems Application Layer TroubleshootingThe table provides a short description of these application-layer protocols ApplicationsDescriptionSSH TelnetEnables users to establish terminal session connections with remote hosts HTTPSupports the exchanging of text  graphic-images  sound  video  and other multimedia files on the web FTPPerforms interactive file transfers between hosts TFTPPerforms basic interactive file transfers typically between hosts and networking devices SMTPSupports basic message delivery services POPConnects to mail servers and downloads email SNMPCollects management information from network devices DNSMaps IP addresses to the names assigned to network devices NFSNetwork File System  NFS  enables computers to mount and use drives on remote hosts  
Troubleshooting IP Connectivity Components of Troubleshooting End-to-End ConnectivityBottom-up approach steps when there is no end-to-end connectivity are as follows  Check physical connectivity at the point where network communication stops  Check for duplex mismatches Check data-link and network-layer addressing on the local network  Verify that the default gateway is correct Ensure that devices are determining the correct path from the source to the destination  Verify the transport layer is functioning properly  Verify that there are no ACLs blocking traffic Ensure that DNS settings are correct  
Troubleshooting IP Connectivity End-to-End Connectivity Problem Initiates TroubleshootingUsually what initiates a troubleshooting effort is the discovery that there is a problem with end-to-end connectivity  Two of the most common utilities used to verify a problem with end-to-end connectivity are ping and traceroute 
Troubleshooting IP Connectivity Step 1 - Verify the Physical LayerThe show interfaces command is useful when troubleshooting performance-related issues and hardware is suspected to be at fault Of interest in the output are the Interface statusInput queue dropsOutput queue drops Input errorsOutput errors
Troubleshooting IP Connectivity Step 2 - Check for Duplex MismatchesThe IEEE 802 3ab Gigabit Ethernet standard mandates the use of autonegotiation for speed and duplex and practically all Fast Ethernet NICs also use autonegotiation by default  Problems can occur when there is a duplex mismatch 
Troubleshooting IP Connectivity Step 3 - Verify Addressing on the Local NetworkThe arp Windows command displays and modifies entries in the ARP cache that are used to store IPv4 addresses and their resolved Ethernet physical  MAC  addresses  
Troubleshooting IP Connectivity Troubleshoot VLAN Assignment ExampleAnother issue to consider when troubleshooting end-to-end connectivity is VLAN assignment  For example  the MAC address on Fa0 1 should be in VLAN 10 instead of VLAN 1  The following configuration changes Fa0 1 to VLAN 10 and verifies the change 
Troubleshooting IP Connectivity Step 4 - Verify Default GatewayMisconfigured or missing default gateways can cause connectivity problems In the figure for example  the default gateways for R1 is 192 168 1 2  R2 PC1 is 10 1 10 1  R1 G0 0 0 Useful commands to verify the default gateway on R1  show ip routePC1  route print  or netstat  r 
Troubleshooting IP Connectivity Troubleshoot IPv6 Default Gateway ExampleAn IPv6default gateway can be configured manually  using SLAAC  or by using DHCPv6 For example  a PC is unable to acquire its IPv6 configuration using SLAAC  The command output is missing the all IPv6-router multicast group  FF02  2   R1 is enabled as an IPv6 router and now the output verifies that R1 is a member of ff02  2  the All-IPv6-Routers multicast group 
Troubleshooting IP Connectivity Step 5 - Verify Correct PathWhen troubleshooting  it is often necessary to verify the path to the destination network The figure describes the process for both the IPv4 and IPv6 routing tables The process of forwarding IPv4 and IPv6 packets is based on the longest bit match or longest prefix match  The routing table process will attempt to forward the packet using an entry in the routing table with the greatest number of leftmost matching bits  The number of matching bits is indicated by the prefix length of the route 
Troubleshooting IP Connectivity Step 6 - Verify the Transport LayerTwo of the most common issues that affect transport layer connectivity include ACL configurations and NAT configurations  A common tool for testing transport layer functionality is the Telnet utility For example  the administrator attempts to Telnet to R2 using port 80 
Troubleshooting IP Connectivity Step 7 - Verify ACLsOn routers  there may be ACLs that prohibit protocols from passing through the interface in the inbound or outbound direction In this example  ACL 100 has been incorrectly configured inbound on the G0 0 0 instead of inbound on S0 1 1 The ACL is removed from G0 0 0 and configured inbound on S0 1 1 
Troubleshooting IP Connectivity Step 8 - Verify DNSThe DNS protocol controls the DNS  a distributed database with which you can map hostnames to IP addresses  When you configure DNS on the device  you can substitute the hostname for the IP address with all IP commands  such as ping or telnet  command output Use the ip host global configuration command to enter a name to be used instead of the IPv4 address of the switch or router  as shown in the command output Use the nslookup Windows command to display the name-to-IP-address mapping information 
Troubleshooting IP Connectivity Packet Tracer - Troubleshoot Enterprise NetworksIn this Packet Tracer activity  you complete the following objectives Part 1  Verify Switching TechnologiesPart 2  Verify DHCPPart 3  Verify RoutingPart 4  Verify WAN TechnologiesPart 5  Verify Connectivity
Troubleshooting Methodologies Basic Troubleshooting ApproachesStepDescriptionStep 1  Identify the ProblemThis is the first step in the troubleshooting process  Although tools can be used in this step  a conversation with the user is often very helpful Step 2  Establish a Theory of Probable CausesAfter the problem is identified  try to establish a theory of probable causes  This step often yields more than a few probable causes to the problem Step 3  Test the Theory to Determine CauseBased on the probable causes  test your theories to determine which one is the cause of the problem  A technician may apply a quick fix to test and see if it solves the problem  If a quick fix does not correct the problem  you might need to research the problem further to establish the exact cause Step 4  Establish a Plan of Action and Implement the SolutionAfter you have determined the exact cause of the problem  establish a plan of action to resolve-the-problem and implement the solution Step 5  Verify Solution and Implement Preventive MeasuresAfter you have corrected the problem  verify full functionality  If applicable  implement preventive measures Step 6  Document Findings  Actions  and OutcomesIn the final step of the troubleshooting process  document your findings  actions  and outcomes  This is very important for future reference 
Troubleshooting Methodologies Resolve or Escalate In some situations  it may not be possible to resolve-the-problem immediately  A problem should be escalated when it requires a manager decision  some specific expertise  or network access level unavailable to the troubleshooting technician A company policy should clearly state when and how a technician should escalate a problem 
Troubleshooting Methodologies The debug CommandThe IOS debug command allows the administrator to display OS process  protocol  mechanism and event messages in real-time for analysis  All debug commands are entered in privileged EXEC mode  The Cisco IOS allows for narrowing the output of debug to include only the relevant feature or subfeature  Use debug commands only to troubleshoot specific problems To list a brief description of all the debugging command options  use the debug   command in privileged EXEC mode at the command line To turn off a specific debugging feature  add the no keyword in front of the debug commandAlternatively  you can enter the undebug form of the command in privileged EXEC mode To turn off all active debug commands at once  use the undebug all command Be cautious using some debug commands  as they may generate a substantial amount of output and use a large portion of system resources  The router could get so busy displaying debug messages that it would not have enough processing power to perform its network functions  or even listen to commands to turn off debugging  
Troubleshooting Methodologies The terminal monitor Commanddebug  and certain other IOS message output is not automatically displayed on remote connections  This is because log messages are prevented from being displayed on vty lines To display log messages on a terminal  virtual console   use the terminal monitor privileged EXEC command  To stop logging messages on a terminal  use the terminal no monitor privileged EXEC command 
Troubleshooting Process General Troubleshooting ProceduresTroubleshooting can be time consuming because networks differ  problems differ  and troubleshooting experience varies  Using a structured troubleshooting method will shorten overall troubleshooting time There are several troubleshooting processes that can be used to solve a problem  The figure displays the logic flowchart of a simplified three-stage troubleshooting process 
Troubleshooting Process Seven-Step Troubleshooting ProcessThe figure displays a more detailed seven-step troubleshooting process StepsDescriptionDefine the ProblemVerify that there is a problem and then properly define what the problem is Gather InformationTargets  i e   hosts  devices  are identified  accessed  and information gathered  Analyze InformationIdentify possible causes using network documentation  network baselines  knowledge bases  and peers Eliminate Possible CausesProgressively eliminate possible causes to eventually identify the most probable cause  Propose HypothesisWhen the most probable cause has been identified  a solution must be formulated Test HypothesisAssess the urgency of the problem  create a rollback plan  implement the solution  and verify outcome Solve the ProblemWhen solved  inform all involved and document the cause and solution to help solve future problems 
Troubleshooting Process Question End UsersThe table provides questioning guidelines and sample open ended end-user questions GuidelinesExample Open Ended End-User QuestionsAsk pertinent questions What does not work  What exactly is the problem  What are you trying to accomplish Determine the scope of the problem Who does this issue affect  Is it just you or others  What device is this happening on Determine when the problem occurred   occurs When exactly does the problem occur  When was the problem first noticed  Were there any error message s  displayed Determine if the problem is constant or intermittent Can you reproduce the problem  Can you send me a screenshot or video of the problem Determine if anything has changed What has changed since the last time it did work Use questions to eliminate or discover possible problems What works  What does not work 
Troubleshooting Process Gather InformationCommon Cisco IOS commands used to gather network problem symptoms CommandDescriptionping  host  ip-address Sends an echo request packet to an address  then waits for a reply traceroute destinationIdentifies the path a packet takes through the networks telnet  host   ip-address Connects to an IP address using the Telnet application  Note  Use SSH whenever possible  ssh -l user-id ip-addressConnects to an IP address using SSH show ip interface brief  show ipv6 interface briefDisplays a summary status of all interfaces on a device show ip route show ipv6 routeDisplays the current IPv4 and IPv6 routing tables show protocolsDisplays the global and interface-specific status of any configured Layer 3 protocol debugDisplays a list of options for enabling or disabling debugging events 
Troubleshooting Process Troubleshooting with Layered ModelsThe OSI and TCP IP models can be applied to isolate network problems when troubleshooting  The figure shows some common devices and the OSI layers that must be examined during the troubleshooting process for that device 
Troubleshooting Process Structured Troubleshooting MethodsDifferent troubleshooting approaches that can be used include the following Troubleshooting ApproachDescriptionBottom-UpGood approach to use when the problem is suspected to be a physical one Top-DownUse this approach for simpler problems  or when you think the problem is with a piece of software Divide-and-ConquerStart at a middle layer  i e  Layer 3  and tests in both directions from that layer Follow-the-PathUsed to discover the actual traffic path from source to destination to reduce the scope of troubleshooting  SubstitutionYou physically swap a suspected problematic device with a known  working one  ComparisonAttempts to resolve-the-problem by comparing a nonoperational element with the working one  Educated guessSuccess of this method varies based on your troubleshooting experience and ability 
Troubleshooting Process Guidelines for Selecting a Troubleshooting MethodTo quickly resolve network problems  take the time to select the most effective network troubleshooting method The figure illustrates which method could be used when a certain type of problem is discovered Troubleshooting is a skill that is developed by doing it  Every network problem you identify and solve gets added to your skill set 
Troubleshooting Scenarios Duplex Operation and Mismatch IssuesInterconnecting Ethernet interfaces must operate in the same duplex mode for best communication performance and to avoid inefficiency and latency on the link The Ethernet autonegotiation feature facilitates configuration  minimizes problems and maximizes link performance between two interconnecting Ethernet links  The connected devices first announce their supported capabilities and then choose the highest performance mode supported by both ends If one of the two connected devices is operating in full-duplex and the other is operating in half-duplex  a duplex mismatch occurs  While data communication will occur through a link with a duplex mismatch  link performance will be very poor Duplex mismatches are typically caused by a misconfigured interface or in rare instances by a failed autonegotiation  Duplex mismatches may be difficult to troubleshoot as the communication between devices still occurs 
Troubleshooting Scenarios IP Addressing Issues on IOS DevicesTwo common causes of incorrect IPv4 assignment are manual assignment mistakes or DHCP-related issues Network administrators often have to manually assign IP addresses to devices such as servers and routers  If a mistake is made during the assignment  then communications issues with the device are very likely to occur On an IOS device  use the show ip interface or show ip interface brief commands to verify what IPv4 addresses are assigned to the network interfaces  For example  issuing the show ip interface brief command as shown would validate the interface status on R1 
Troubleshooting Scenarios IP Addressing Issues on End DevicesOn Windows-based machines  when the device cannot contact a DHCP server  Windows will automatically assign an address belonging to the 169 254 0 0 16 range  This feature is called Automatic Private IP Addressing  APIPA   A computer with an APIPA address will not be able to communicate with other devices in the network because those devices will most likely not belong to the 169 254 0 0 16 network  Note  Other operating systems  such Linux and OS X  do not use APIPA If the device is unable to communicate with the DHCP server  then the server cannot assign an IPv4 address for the specific network and the device will not be able to communicate To verify the IP addresses assigned to a Windows-based computer  use the ipconfig command 
Troubleshooting Scenarios Default Gateway IssuesThe default gateway for an end device is the closest networking device  belonging to the same network as the end device  that can forward traffic to other networks  If a device has an incorrect or nonexistent default gateway address  it will not be able to communicate with devices in remote networks  Similar to IPv4 addressing issues  default gateway problems can be related to misconfiguration  in the case of manual assignment  or DHCP problems  if automatic assignment is in use  To verify the default gateway on Windows-based computers  use the ipconfig command On a router  use the show ip route command to list the routing table and verify that the default gateway  known as a default route  has been set  This route is used when the destination address of the packet does not match any other routes in its routing table 
Troubleshooting Scenarios Troubleshooting DNS IssuesIt is common for users to mistakenly relate the operation of an internet link to the availability of the DNS  DNS server addresses can be manually or automatically assigned via DHCP Although it is common for companies and organizations to manage their own DNS servers  any reachable DNS server can be used to resolve names  Cisco offers OpenDNS which provides secure DNS service by filtering phishing and some malware sites  OpenDNS addresses are 208 67 222 222 and 208 67 220 220  Advanced features such as web content filtering and security are available to families and businesses Use the ipconfig  all as shown to verify which DNS server is in use by the Windows computer The nslookup command is another useful DNS troubleshooting tool for PCs  With nslookup a user can manually place DNS queries and analyze the DNS response  
Troubleshooting Scenarios Lab   Troubleshoot Connectivity IssuesIn this lab  you will complete the following objectives Identify the ProblemImplement Network ChangesVerify Full FunctionalityDocument Findings and Configuration Changes
Troubleshooting Scenarios Packet Tracer   Troubleshoot Connectivity IssuesThe objective of this Packet Tracer activity is to troubleshoot and resolve connectivity issues  if possible  Otherwise  the issues should be clearly documented and so they can be escalated 
Dynamic Trunking Protocol Introduction to DTPDynamic Trunking Protocol  DTP  is a proprietary Cisco protocol DTP characteristics are as follows On by default on Catalyst 2960 and 2950 switchesDynamic-auto is default on the 2960 and 2950 switchesMay be turned off with the nonegotiate commandMay be turned back on by setting the interface to dynamic-autoSetting a switch to a static trunk or static access will avoid negotiation issues with the switchport mode trunk or the switchport mode access commands 
Dynamic Trunking Protocol Negotiated Interface ModesThe switchport mode command has additional options Use the switchport nonegotiate interface configuration command to stop DTP negotiation OptionDescriptionaccessPermanent access mode and negotiates to convert the neighboring-link into an access linkdynamic-autoWill becomes a trunk interface if the neighboring interface is set to trunk or desirable modedynamic desirableActively seeks to become a trunk by negotiating with other auto or desirable interfacestrunkPermanent trunking mode and negotiates to convert the neighboring-link into a trunk-link
Dynamic Trunking Protocol Results of a DTP ConfigurationDTP configuration options are as follows Dynamic AutoDynamic DesirableTrunkAccessDynamic AutoAccessTrunkTrunkAccessDynamic DesirableTrunkTrunkTrunkAccessTrunkTrunkTrunkTrunkLimited connectivityAccessAccessAccessLimited connectivityAccess
Dynamic Trunking Protocol Verify DTP ModeThe default DTP configuration is dependent on the Cisco IOS version and platform Use the show dtp interface command to determine the current DTP mode Best practice recommends that the interfaces be set to access or trunk and to turnoff DTP
Dynamic Trunking Protocol Packet Tracer   Configure DTPIn this Packet Tracer activity  you will perform the following Configure static trunking Configure and verify DTP 
Module ObjectivesModule Title  Inter-VLAN RoutingModule Objective  Troubleshoot inter-VLAN routing on Layer 3 devicesTopic TitleTopic ObjectiveInter-VLAN Routing OperationDescribe options for configuring inter-VLAN routing Router-on-a-Stick Inter-VLAN RoutingConfigure router-on-a-stick inter-VLAN routing Inter-VLAN Routing using Layer 3 SwitchesConfigure inter-VLAN routing using Layer 3 switching Troubleshoot Inter-VLAN RoutingTroubleshoot common inter-VLAN configuration issues 
Inter-VLAN Routing Operation What is Inter-VLAN Routing VLANs are used to segment switched Layer 2 networks for a variety of reasons  Regardless of the reason  hosts in one VLAN cannot communicate with hosts in another VLAN unless there is a router or a Layer 3 switch to provide routing services Inter-VLAN routing is the process of forwarding network traffic from one VLAN to another VLAN There are three inter-VLAN routing options Legacy Inter-VLAN routing - This is a legacy solution  It does not scale well Router-on-a-Stick - This is an acceptable solution for a small to medium-sized network Layer 3 switch using switched-virtual-interfaces  SVIs  - This is the most scalable solution for medium to large organizations 
Inter-VLAN Routing Operation Legacy Inter-VLAN RoutingThe first inter-VLAN routing solution relied on using a router with multiple Ethernet interfaces  Each router interface was connected to a switch port in different VLANs  The router interfaces served as the default gateways to the local hosts on the VLAN subnet Legacy inter-VLAN routing using physical interfaces works  but it has a significant limitation  It is not reasonably scalable because routers have a limited number of physical interfaces  Requiring one physical router interface per VLAN quickly exhausts the physical interface capacity of a router Note  This method of inter-VLAN routing is no longer implemented in switched networks and is included for explanation purposes only 
Inter-VLAN Routing Operation Router-on-a-Stick Inter-VLAN RoutingThe  router-on-a-stick  inter-VLAN routing method overcomes the limitation of the legacy inter-VLAN routing method  It only requires one physical Ethernet interface to route traffic between multiple VLANs on a network A Cisco IOS router Ethernet interface is configured as an 802 1Q trunk and connected to a trunk port on a Layer 2 switch  Specifically  the router interface is configured using subinterfaces to identify routable VLANs The configured subinterfaces are software-based virtual interfaces  Each is associated with a single physical Ethernet interface  Subinterfaces are configured in software on a router  Each subinterface is independently configured with an IP address and VLAN assignment  Subinterfaces are configured for different subnets that correspond to their VLAN assignment  This facilitates logical routing When VLAN-tagged traffic enters the router interface  it is forwarded to the VLAN subinterface  After a routing decision is made based on the destination IP network address  the router determines the exit interface for the traffic  If the exit interface is configured as an 802 1q subinterface  the data frames are VLAN-tagged with the new VLAN and sent back out the physical interfaceNote  The router-on-a-stick method of inter-VLAN routing does not scale beyond 50 VLANs 
Inter-VLAN Routing Operation Inter-VLAN Routing on a Layer 3 SwitchThe modern method of performing inter-VLAN routing is to use Layer 3 switches and switched-virtual-interfaces  SVI   An SVI is a virtual interface that is configured on a Layer 3 switch  as shown in the figure Note  A Layer 3 switch is also called a multilayer switch as it operates at Layer 2 and Layer 3  However  in this course we use the term Layer 3 switch 
Inter-VLAN Routing Operation Inter-VLAN Routing on a Layer 3 Switch  Cont  Inter-VLAN SVIs are created the same way that the management VLAN interface is configured  The SVI is created for a VLAN that exists on the switch  Although virtual  the SVI performs the same functions for the VLAN as a router interface would  Specifically  it provides Layer 3 processing for packets that are sent to or from all switch ports associated with that VLAN The following are advantages of using Layer 3 switches for inter-VLAN routing They are much faster than router-on-a-stick because everything is hardware switched and routed There is no need for external links from the switch to the router for routing They are not limited to one link because Layer 2 EtherChannels can be used as trunk-links between the switches to increase bandwidth Latency is much lower because data does not need to leave the switch in order to be routed to a different network They more commonly deployed in a campus LAN than routers The only disadvantage is that Layer 3 switches are more expensive 
Inter-VLAN Routing using Layer 3 Switches Layer 3 Switch Inter-VLAN RoutingInter-VLAN routing using the router-on-a-stick method is simple to implement for a small to medium-sized organization  However  a large enterprise requires a faster  much more scalable method to provide inter-VLAN routing Enterprise campus LANs use Layer 3 switches to provide inter-VLAN routing  Layer 3 switches use hardware-based switching to achieve higher-packet processing rates than routers  Layer 3 switches are also commonly implemented in enterprise distribution-layer wiring closets Capabilities of a Layer 3 switch include the ability to do the following Route from one VLAN to another using multiple switched-virtual-interfaces  SVIs  Convert a Layer 2 switchport to a Layer 3 interface  i e   a routed port   A routed port is similar to a physical interface on a Cisco IOS router To provide inter-VLAN routing  Layer 3 switches use SVIs  SVIs are configured using the same interface vlan vlan-id command used to create the management SVI on a Layer 2 switch  A Layer 3 SVI must be created for each of the routable VLANs 
Inter-VLAN Routing using Layer 3 Switches Layer 3 Switch ScenarioIn the figure  the Layer 3 switch  D1  is connected to two hosts on different VLANs  PC1 is in VLAN 10 and PC2 is in VLAN 20  as shown  The Layer 3 switch will provide inter-VLAN routing services to the two hosts 
Inter-VLAN Routing using Layer 3 Switches Layer 3 Switch ConfigurationComplete the following steps to configure S1 with VLANs and trunking Step 1  Create the VLANs  In the example  VLANs 10 and 20 are used Step 2  Create the SVI VLAN interfaces  The IP address configured will serve as the default gateway for hosts in the respective VLAN Step 3  Configure access-ports  Assign the appropriate port to the required VLAN Step 4  Enable IP routing  Issue the ip routing global configuration command to allow traffic to be exchanged between VLANs 10 and 20  This command must be configured to enable inter-VAN routing on a Layer 3 switch for IPv4 
Inter-VLAN Routing using Layer 3 Switches Layer 3 Switch Inter-VLAN Routing VerificationInter-VLAN routing using a Layer 3 switch is simpler to configure than the router-on-a-stick method  After the configuration is complete  the configuration can be verified by testing connectivity between the hosts From a host  verify connectivity to a host in another VLAN using the ping command  It is a good idea to first verify the current host IP configuration using the ipconfig Windows host command  Next  verify connectivity with PC2 using the ping Windows host command  The successful ping output confirms inter-VLAN routing is operating 
Inter-VLAN Routing using Layer 3 Switches Routing on a Layer 3 SwitchIf VLANs are to be reachable by other Layer 3 devices  then they must be advertised using static or dynamic routing  To enable routing on a Layer 3 switch  a routed port must be configured A routed port is created on a Layer 3 switch by disabling the switchport feature on a Layer 2 port that is connected to another Layer 3 device  Specifically  configuring the no-switchport interface configuration command on a Layer 2 port converts it into a Layer 3 interface  Then the interface can be configured with an IPv4 configuration to connect to a router or another Layer 3 switch 
Inter-VLAN Routing using Layer 3 Switches Routing Scenario on a Layer 3 SwitchIn the figure  the previously configured D1 Layer 3 switch is now connected to R1  R1 and D1 are both in an Open Shortest Path First  OSPF  routing protocol domain  Assume inter-VLAN has been successfully implemented on D1  The G0 0 1 interface of R1 has also been configured and enabled  Additionally  R1 is using OSPF to advertise its two networks  10 10 10 0 24 and 10 20 20 0 24 Note  OSPF routing configuration is covered in another course  In this module  OSPF configuration commands will be given to you in all activities and assessments  It is not required that you understand the configuration in order to enable OSPF routing on the Layer 3 switch 
Inter-VLAN Routing using Layer 3 Switches Routing Configuration on a Layer 3 SwitchComplete the following steps to configure D1 to route with R1 Step 1  Configure the routed port  Use the no-switchport command to convert the port to a routed port  then assign an IP address and subnet-mask  Enable the port Step 2  Enable routing  Use the ip routing global configuration command to enable routing Step 3  Configure routing  Use an appropriate routing method  In this example  Single-Area OSPFv2 is configuredStep 4  Verify routing  Use the show ip route command Step 5  Verify connectivity  Use the ping command to verify reachability 
Inter-VLAN Routing using Layer 3 Switches Packet Tracer   Configure Layer 3 Switching and inter-VLAN RoutingIn this Packet Tracer  you will complete the following objectives Part 1  Configure Layer 3 SwitchingPart 2  Configure Inter-VLAN RoutingPart 3  Configure IPv6 Inter-VLAN Routing
Module ObjectivesModule Title  Protocols and ModelsModule Objective  Explain how network protocols enable devices to access local and remote network resources Topic TitleTopic ObjectiveOverview of VLANsExplain the purpose of VLANs in a switched network VLANs in a Multi-Switched EnvironmentExplain how a switch forwards frames based on VLAN configuration in a multi-switch environment VLAN ConfigurationConfigure a switch port to be assigned to a VLAN based on requirements VLAN TrunksConfigure a trunk port on a LAN switch Dynamic Trunking ProtocolConfigure Dynamic Trunking Protocol  DTP  
Overview of VLANs VLAN DefinitionsVLANs are logical connections with other similar devices Placing devices into various VLANs have the following characteristics Provides segmentation of the various groups of devices on the same switchesProvide organization that is more manageableBroadcasts  multicasts and unicasts are isolated in the individual VLANEach VLAN will have its own unique range of IP addressingSmaller broadcast-domains
Overview of VLANs Benefits of a VLAN DesignBenefits of using VLANs are as follows  BenefitsDescriptionSmaller Broadcast DomainsDividing the LAN reduces the number of broadcast-domainsImproved SecurityOnly users in the same VLAN can communicate togetherImproved IT EfficiencyVLANs can group devices with similar requirements  e g  faculty vs  studentsReduced CostOne switch can support multiple groups or VLANsBetter PerformanceSmall broadcast-domains reduce traffic  improving bandwidthSimpler ManagementSimilar groups will need similar applications and other network resources
Overview of VLANs Types of VLANsDefault VLANVLAN 1 is the following  The default VLANThe default Native VLANThe default Management VLANCannot be deleted or renamedNote  While we cannot delete VLAN1 Cisco will recommend that we assign these default features to other VLANs
Overview of VLANs Types of VLANs  Cont  Data VLAN Dedicated to user-generated traffic  email and web traffic   VLAN 1 is the default data VLAN because all interfaces are assigned to this VLAN Native VLANThis is used for trunk-links only  All frames are tagged on an 802 1Q trunk-link except for those on the native VLAN  Management VLAN This is used for SSH Telnet VTY traffic and should not be carried with end user traffic Typically  the VLAN that is the SVI for the Layer 2 switch   
Overview of VLANs Types of VLANs  Cont  Voice VLAN  A separate VLAN is required because Voice traffic requires Assured bandwidthHigh QoS priorityAbility to avoid congestionDelay less that 150 ms from source to destinationThe entire network must be designed to support voice 
Overview of VLANs Packet Tracer   Who Hears the Broadcast In this Packet Tracer activity  you will do the following Observe Broadcast Traffic in a VLAN ImplementationComplete Review Questions
Router-on-a-Stick Inter-VLAN Routing Router-on-a-Stick ScenarioIn the figure  the R1 GigabitEthernet 0 0 1 interface is connected to the S1 FastEthernet 0 5 port  The S1 FastEthernet 0 1 port is connected to the S2 FastEthernet 0 1 port  These are trunk-links that are required to forward traffic within and between VLANs To route between VLANs  the R1 GigabitEthernet 0 0 1 interface is logically divided into three subinterfaces  as shown in the table  The table also shows the three VLANs that will be configured on the switches Assume that R1  S1  and S2 have initial basic configurations  Currently  PC1 and PC2 cannot ping each other because they are on separate networks  Only S1 and S2 can ping each other  but they but are unreachable by PC1 or PC2 because they are also on different networks To enable devices to ping each other  the switches must be configured with VLANs and trunking  and the router must be configured for inter-VLAN routing SubinterfaceVLANIP AddressG0 0 1 1010192 168 10 1 24G0 0 1 2020192 168 20 1 24G0 0 1 3099192 168 99 1 24
Router-on-a-Stick Inter-VLAN Routing S1 VLAN and Trunking ConfigurationComplete the following steps to configure S1 with VLANs and trunking Step 1  Create and name the VLANs Step 2  Create the management interface Step 3  Configure access-ports Step 4  Configure trunking-ports 
Router-on-a-Stick Inter-VLAN Routing S2 VLAN and Trunking ConfigurationThe configuration for S2 is similar to S1 
Router-on-a-Stick Inter-VLAN Routing R1 Subinterface ConfigurationThe router-on-a-stick method requires you to create a subinterface for each VLAN to be routed  A subinterface is created using the interface interface id subinterface id global configuration mode command  The subinterface syntax is the physical interface followed by a period and a subinterface number  Although not required  it is customary to match the subinterface number with the VLAN number Each subinterface is then configured with the following two commands encapsulation dot1q vlan id  native  - This command configures the subinterface to respond to 802 1Q encapsulated traffic from the specified vlan-id  The native keyword option is only appended to set the native VLAN to something other than VLAN 1 ip address ip-address subnet-mask - This command configures the IPv4 address of the subinterface  This address typically serves as the default gateway for the identified VLAN Repeat the process for each VLAN to be routed  Each router subinterface must be assigned an IP address on a unique subnet for routing to occur  When all subinterfaces have been created  enable the physical interface using the no shutdown interface configuration command  If the physical interface is disabled  all subinterfaces are disabled 
Router-on-a-Stick Inter-VLAN Routing R1 Subinterface Configuration  Cont  In the configuration  the R1 G0 0 1 subinterfaces are configured for VLANs 10  20  and 99 
Router-on-a-Stick Inter-VLAN Routing Verify Connectivity Between PC1 and PC2The router-on-a-stick configuration is complete after the switch trunk and the router subinterfaces have been configured  The configuration can be verified from the hosts  router  and switch From a host  verify connectivity to a host in another VLAN using the ping command  It is a good idea to first verify the current host IP configuration using the ipconfig Windows host command Next  use ping to verify connectivity with PC2 and S1  as shown in the figure  The ping output successfully confirms inter-VLAN routing is operating 
Router-on-a-Stick Inter-VLAN Routing Router-on-a-Stick Inter-VLAN Routing VerificationIn addition to using ping between devices  the following show commands can be used to verify and troubleshoot the router-on-a-stick configuration show ip routeshow ip interface briefshow interfacesshow interfaces trunk
Router-on-a-Stick Inter-VLAN Routing Packet Tracer  Configure Router-on-a-Stick Inter-VLAN RoutingIn this Packet Tracer  you will complete the following objectives Part 1  Add VLANs to a SwitchPart 2  Configure SubinterfacesPart 3  Test connectivity with Inter-VLAN Routing
Router-on-a-Stick Inter-VLAN Routing Lab   Configure Router-on-a-Stick Inter-VLAN RoutingIn this lab  you will complete the following objectives Part 1  Build the Network and Configure Basic Device SettingsPart 2  Configure Switches with VLANs and TrunkingPart 3  Configure Trunk-Based Inter-VLAN Routing
Troubleshoot Inter-VLAN Routing Common Inter-VLAN IssuesThere are a number of reasons why an inter-VAN configuration may not work  All are related to connectivity issues  First  check the physical-layer to resolve any issues where a cable might be connected to the wrong port  If the connections are correct  then use the list in the table for other common reasons why inter-VLAN connectivity may fail Issue TypeHow to FixHow to VerifyMissing VLANsCreate  or re-create  the VLAN if it does not exist  Ensure host port is assigned to the correct VLAN show vlan  brief  show interfaces switchport pingSwitch Trunk Port IssuesEnsure trunks are configured correctly  Ensure port is a trunk port and enabled show interface trunk show running-configSwitch Access Port IssuesAssign correct VLAN to access-port  Ensure port is an access-port and enabled  Host is incorrectly configured in the wrong subnet show interfaces switchport show running-config interface ipconfigRouter Configuration IssuesRouter subinterface IPv4 address is incorrectly configured  Router subinterface is assigned to the VLAN ID show ip interface brief show interfaces
Troubleshoot Inter-VLAN Routing Troubleshoot Inter-VLAN Routing ScenarioExamples of some of these inter-VLAN routing problems will now be covered in more detail  This topology will be used for all of these issues Router R1 SubinterfacesSubinterfaceVLANIP AddressG0 0 0 1010192 168 10 1 24G0 0 0 2020192 168 20 1 24G0 0 0 3099192 168 99 1 24
Troubleshoot Inter-VLAN Routing Missing VLANsAn inter-VLAN connectivity issue could be caused by a missing VLAN  The VLAN could be missing if it was not created  it was accidently deleted  or it is not allowed on the trunk-link When a VLAN is deleted  any ports assigned to that VLAN become inactive  They remain associated with the VLAN  and thus inactive  until you assign them to a new VLAN or recreate the missing VLAN  Recreating the missing VLAN would automatically reassign the hosts to it Use the show interface interface-id switchport command to verify the VLAN membership of the port 
Troubleshoot Inter-VLAN Routing Switch Trunk Port IssuesAnother issue for inter-VLAN routing includes misconfigured switch ports  In a legacy inter-VLAN solution  this could be caused when the connecting router port is not assigned to the correct VLAN However  with a router-on-a-stick solution  the most common cause is a misconfigured trunk port Verify that the port connecting to the router is correctly configured as a trunk-link using the show interface trunk command If that port is missing from the output  examine the configuration of the port with the show running-config interface X command to see how the port is configured 
Troubleshoot Inter-VLAN Routing Switch Access Port IssuesWhen a problem is suspected with a switch access-port configuration  use verification commands to examine the configuration and identify the problem A common indicator of this issue is the PC having the correct address configuration  IP Address  Subnet Mask  Default Gateway   but being unable to ping its default gateway Use the show vlan brief  show interface X switchport or show running-config interface X command to verify the interface VLAN assignment 
Troubleshoot Inter-VLAN Routing Router Configuration IssuesRouter-on-a-stick configuration problems are usually related to subinterface misconfigurations Verify the subinterface status using the show ip interface brief command  Verify which VLANs each of the subinterfaces is on  To do so  the show interfaces command is useful but it generates a great deal of additional unrequired output  The command output can be reduced using IOS command filters  In this example  use the include keyword to identify that only lines containing the letters  Gig  or  802 1Q  
Troubleshoot Inter-VLAN Routing Packet Tracer   Troubleshoot Inter-VLAN RoutingIn this Packet Tracer activity  you will complete the following objectives Part 1  Locate Network ProblemsPart 2  Implement the SolutionPart 3  Verify Network Connectivity
Troubleshoot Inter-VLAN Routing Lab   Troubleshoot Inter-VLAN RoutingIn this lab  you will complete the following objectives Part 1  Build the Network and Load Device ConfigurationsPart 2  Troubleshoot the Inter-VLAN Routing ConfigurationPart 3  Verify VLAN Configuration  Port Assignment and TrunkingPart 4  Test Layer 3 Connectivity
VLAN Configuration VLAN Ranges on Catalyst SwitchesCatalyst switches 2960 and 3650 support over 4000 VLANs Normal Range VLAN 1   1005 Extended Range VLAN 1006 - 4095Used in Small to Medium sized businessesUsed by Service Providers1002   1005 are reserved for legacy VLANsAre in Running-Config1  1002   1005 are auto created and cannot be deletedSupports fewer VLAN featuresStored in the vlan dat file in flashRequires VTP configurationsVTP can synchronize between switches
VLAN Configuration VLAN Creation CommandsVLAN details are stored in the vlan dat file  You create VLANs in the global configuration mode TaskIOS CommandEnter global configuration mode Switch  configure terminalCreate a VLAN with a valid ID number Switch config   vlan vlan-idSpecify a unique name to identify the VLAN Switch config-vlan   name vlan-nameReturn to the privileged EXEC mode Switch config-vlan   endEnter global configuration mode Switch  configure terminal
VLAN Configuration VLAN Creation ExampleIf the Student PC is going to be in VLAN 20  we will create the VLAN first and then name it If you do not name it  the Cisco IOS will give it a default name of vlan and the four digit number of the VLAN  E g  vlan0020 for VLAN 20 PromptCommandS1 Configure terminalS1 config  vlan 20S1 config-vlan  name studentS1 config-vlan  end
VLAN Configuration VLAN Port Assignment CommandsOnce the VLAN is created  we can then assign it to the correct interfaces Task CommandEnter global configuration mode Switch  configure terminalEnter interface configuration mode Switch config   interface interface-idSet the port to access mode Switch config-if   switchport mode accessAssign the port to a VLAN Switch config-if   switchport access vlan vlan-idReturn to the privileged EXEC mode Switch config-if   end
VLAN Configuration VLAN Port Assignment ExampleWe can assign the VLAN to the port interface Once the device is assigned the VLAN  then the end device will need the IP address information for that VLANHere  Student PC receives 172 17 20 22PromptCommandS1 Configure terminalS1 config  Interface fa0 18S1 config-if  Switchport mode accessS1 config-if  Switchport access vlan 20S1 config-if  end
VLAN Configuration Data and Voice VLANsAn access-port may only be assigned to one data VLAN  However it may also be assigned to one Voice VLAN for when a phone and an end device are off of the same switchport 
VLAN Configuration Data and Voice VLAN ExampleWe will want to create and name both Voice and Data VLANs In addition to assigning the data VLAN  we will also assign the Voice VLAN and turn on QoS for the voice traffic to the interface The newer catalyst switch will automatically create the VLAN  if it does not already exist  when it is assigned to an interface Note  QoS is beyond the scope of this course  Here we do show the use of the mls qos trust  cos   device cisco-phone   dscp   ip-precedence  command 
VLAN Configuration Verify VLAN InformationUse the show vlan command  The complete syntax is  show vlan  brief   id vlan-id   name vlan-name   summary TaskCommand OptionDisplay VLAN name  status  and its ports one VLAN per line briefDisplay information about the identified VLAN ID number  id vlan-idDisplay information about the identified VLAN name  The vlan-name is an ASCII string from 1 to 32 characters name vlan-nameDisplay VLAN summary information summary
VLAN Configuration Change VLAN Port MembershipThere are a number of ways to change VLAN membership re-enter switchport access vlan vlan-id commanduse the no-switchport access vlan to place interface back in VLAN 1Use the show vlan brief or the show interface fa0 18 switchport commands to verify the correct VLAN association 
VLAN Configuration Delete VLANsDelete VLANs with the no vlan vlan-id command Caution  Before deleting a VLAN  reassign all member ports to a different VLAN Delete all VLANs with the delete flash vlan dat or delete vlan dat commands Reload the switch when deleting all VLANs Note  To restore to factory default   unplug all data cables  erase the startup-configuration and delete the vlan dat file  then reload the device 
VLAN Configuration Packet Tracer   VLAN ConfigurationIn this Packet Tracer activity  you will perform the following Verify the Default VLAN ConfigurationConfigure VLANsAssign VLANs to Ports
VLAN Trunks Trunk Configuration CommandsConfigure and verify VLAN trunks  Trunks are layer-2 and carry traffic for all VLANs TaskIOS CommandEnter global configuration mode Switch  configure terminalEnter interface configuration mode Switch config   interface interface-idSet the port to permanent trunking mode Switch config-if   switchport mode trunkSets the native VLAN to something other than VLAN 1 Switch config-if   switchport trunk native-vlan vlan-idSpecify the list of VLANs to be allowed on the trunk-link Switch config-if   switchport trunk allowed vlan vlan-listReturn to the privileged EXEC mode Switch config-if   end
VLAN Trunks Trunk Configuration ExampleThe subnets associated with each VLAN are VLAN 10 - Faculty Staff - 172 17 10 0 24VLAN 20 - Students - 172 17 20 0 24VLAN 30 - Guests - 172 17 30 0 24VLAN 99 - Native - 172 17 99 0 24F0 1 port on S1 is configured as a trunk port Note  This assumes a 2960 switch using 802 1q tagging  Layer 3 switches require the encapsulation to be configured before the trunk mode  PromptCommandS1 config  Interface fa0 1S1 config-if  Switchport mode trunkS1 config-if  Switchport trunk native-vlan 99S1 config-if  Switchport trunk allowed vlan 10 20 30 99S1 config-if  end
VLAN Trunks Verify Trunk ConfigurationSet the trunk mode and native-vlan Notice sh int fa0 1 switchport command Is set to trunk administrativelyIs set as trunk operationally  functioning Encapsulation is dot1qNative VLAN set to VLAN 99 All VLANs created on the switch will pass traffic on this trunk
VLAN Trunks Reset the Trunk to the Default StateReset the default trunk settings with the no command All VLANs allowed to pass trafficNative VLAN   VLAN 1Verify the default settings with a     sh int fa0 1 switchport command 
VLAN Trunks Reset the Trunk to the Default State  Cont  Reset the trunk to an access mode with the switchport mode access command Is set to an access interface administrativelyIs set as an access interface operationally  functioning 
VLAN Trunks Packet Tracer   Configure TrunksIn this Packet Tracer activity  you will perform the following Verify VLANsConfigure Trunks
VLAN Trunks Lab   Configure VLANs and TrunksIn this lab  you will perform the following Build the Network and Configure Basic Device SettingsCreate VLANs and Assign Switch PortsMaintain VLAN Port Assignments and the VLAN DatabaseConfigure an 802 1Q Trunk between the SwitchesDelete the VLAN Database
VLANs in a Multi-Switched Environment Defining VLAN TrunksA trunk is a point-to-point link between two network devices Cisco trunk functions Allow more than one VLANExtend the VLAN across the entire networkBy default  supports all VLANsSupports 802 1Q trunking
VLANs in a Multi-Switched Environment Networks without VLANsWithout VLANs  all devices connected to the switches will receive all unicast  multicast  and broadcast traffic 
VLANs in a Multi-Switched Environment Networks with VLANsWith VLANs  unicast  multicast  and broadcast traffic is confined to a VLAN  Without a Layer 3 device to connect the VLANs  devices in different VLANs cannot communicate  
VLANs in a Multi-Switched Environment VLAN Identification with a TagThe IEEE 802 1Q header is 4 BytesWhen the tag is created the FCS must be recalculated When sent to end devices  this tag must be removed and the FCS recalculated back to its original number 802 1Q VLAN Tag FieldFunctionType2-Byte field with hexadecimal 0x8100 This is referred to as Tag Protocol ID  TPID User Priority3-bit value that supports Canonical Format Identifier  CFI 1-bit value that can support token-ring frames on EthernetVLAN ID  VID 12-bit VLAN identifier that can support up to 4096 VLANs
VLANs in a Multi-Switched Environment Native VLANs and 802 1Q Tagging802 1Q trunk basics Tagging is typically done on all VLANs The use of a native VLAN was designed for legacy use  like the hub in the example Unless changed  VLAN1 is the native VLAN Both ends of a trunk-link must be configured with the same native VLAN Each trunk is configured separately  so it is possible to have a different native VLANs on separate trunks 
VLANs in a Multi-Switched Environment Voice VLAN TaggingThe VoIP phone is a three port switch The switch will use CDP  to inform the phone of the Voice VLAN The phone will tag its own traffic  Voice  and can set Cost of Service  CoS   CoS is QoS for layer-2 The phone may or may not tag frames from the PC TrafficTagging FunctionVoice VLANtagged with an appropriate Layer 2 class of service  CoS  priority valueAccess VLANcan also be tagged with a Layer 2 CoS priority valueAccess VLANis not tagged  no Layer 2 CoS priority value 
VLANs in a Multi-Switched Environment Voice VLAN Verification ExampleThe show interfaces fa0 18 switchport command can show us both data and voice VLANs assigned to the interface 
VLANs in a Multi-Switched Environment Packet Tracer   Investigate a VLAN ImplementationIn this Packet Tracer activity  you will Part 1  Observe Broadcast Traffic in a VLAN ImplementationPart 2  Observe Broadcast Traffic without VLANs
IPSec Video   IPsec ConceptsThis video will cover the following The purpose of IPsecIPsec protocols  AH  ESP  SA  IKE 
IPSec IPsec TechnologiesIPsec is an IETF standard that defines how a VPN can be secured across IP networks  IPsec protects and authenticates IP packets between source and destination and provides these essential security functions Confidentiality - Uses encryption algorithms to prevent cybercriminals from reading the packet contents Integrity - Uses hashing algorithms to ensure that packets have not been altered between source and destination Origin authentication - Uses the Internet Key Exchange  IKE  protocol to authenticate source and destination  Diffie-Hellman   Used to secure key exchange 
IPSec IPsec Technologies  Cont  IPsec is not bound to any specific rules for secure communications IPsec can easily integrate new security technologies without updating existing IPsec standards The open slots in the IPsec framework shown in the figure can be filled with any of the choices that are available for that IPsec function to create a unique security association  SA  
IPSec IPsec Protocol EncapsulationChoosing the IPsec protocol encapsulation is the first building block of the framework IPsec encapsulates packets using Authentication Header  AH  or Encapsulation Security Protocol  ESP  The choice of AH or ESP establishes which other building blocks are available AH is appropriate only when confidentiality is not required or permitted ESP provides both confidentiality and authentication 
IPSec ConfidentialityThe degree of confidentiality depends on the encryption algorithm and the length of the key used in the encryption algorithm  The number of possibilities to try to hack the key is a function of the length of the key - the shorter the key  the easier it is to break 
IPSec Confidentiality  Cont  The encryption algorithms highlighted in the figure are all symmetric key cryptosystems DES uses a 56-bit key 3DES uses three independent 56-bit encryption keys per 64-bit block AES offers three different key lengths  128 bits  192 bits  and 256 bits SEAL is a stream cipher  which means it encrypts data continuously rather than encrypting blocks of data  SEAL uses a 160-bit key 
IPSec IntegrityData integrity means that the data has not changed in transit A method of proving data integrity is required  The Hashed Message Authentication Code  HMAC  is a data integrity algorithm that guarantees the integrity of the message using a hash value Message-Digest 5  MD5  uses a 128-bit shared-secret-key The Secure Hash Algorithm  SHA  uses a 160-bit secret key 
IPSec AuthenticationThere are two IPsec peer authentication methods Pre-shared key  PSK  -  PSK  value is entered into each peer manually Easy to configure manuallyDoes not scale wellMust be configured on every peerRivest  Shamir  and Adleman  RSA  - authentication uses digital-certificates to authenticate the peers Each peer must authenticate its opposite peer before the tunnel is considered secure 
IPSec Secure Key Exchange with Diffie - HellmanDH provides allows two peers to establish a shared secret key over an insecure channel Variations of the DH key exchange are specified as DH groups DH groups 1  2  and 5 should no longer be used DH groups 14  15  and 16 use larger key sizes with 2048 bits  3072 bits  and 4096 bits  respectivelyDH groups 19  20  21 and 24 with respective key sizes of 256 bits  384 bits  521 bits  and 2048 bits support Elliptical Curve Cryptography  ECC   which reduces the time needed to generate keys  
IPSec Video   IPsec Transport and Tunnel ModeThis video will explain the process of the IPv4 packet with ESP in transport mode and in tunnel mode 
Types of VPNs Remote-Access VPNsRemote-access VPNs let remote and mobile users securely connect to the enterprise  Remote-access VPNs are typically enabled dynamically by the user when required and  can be created using either IPsec or SSL Clientless VPN connection -The connection is secured using a web browser SSL connection Client-based VPN connection - VPN client software such as Cisco AnyConnect Secure Mobility Client must be installed on the remote user s end device 
Types of VPNs SSL VPNsSSL uses the public-key-infrastructure and digital-certificates to authenticate peers  The type of VPN method implemented is based on the access requirements of the users and the organization s IT processes  The table compares IPsec and SSL remote access deployments  FeatureIPsecSSLApplications supportedExtensive   All IP-based applicationsLimited   Only web-based applications and file sharingAuthentication strengthStrong   Two-way authentication with shared keys or digital-certificatesModerate   one-way or two-way authenticationEncryption strengthStrong   Key lengths 56   256 bitsModerate to strong - Key lengths 40   256 bitsConnection complexityMedium   Requires VPN client installed on a hostLow   Requires web browser on a hostConnection optionLimited   Only specific devices with specific configurations can connectExtensive   Any device with a web browser can connect
Types of VPNs Site-to-Site IPsec VPNsSite-to-site VPNs connect networks across an untrusted network such as the internet End hosts send and receive normal unencrypted TCP IP traffic through a VPN gateway The VPN gateway encapsulates and encrypts outbound traffic from a site and sends the traffic through the VPN tunnel to the VPN gateway at the target site  The receiving VPN gateway strips the headers  decrypts the content  and relays the packet toward the target host inside its private network 
Types of VPNs GRE over IPsecGeneric Routing Encapsulation  GRE  is a non-secure site-to-site VPN tunneling protocol A GRE tunnel can encapsulate various network-layer protocols as well as multicast and broadcast traffic GRE does not by default support encryption  and therefore  it does not provide a secure VPN tunnel A GRE packet can be encapsulated into an IPsec packet to forward it securely to the destination VPN gateway Standard IPsec VPNs  non-GRE  can only create secure tunnels for unicast traffic Encapsulating GRE into IPsec allows multicast routing protocol updates to be secured through a VPN 
Types of VPNs GRE over IPsec  Cont  The terms used to describe the encapsulation of GRE over IPsec tunnel are passenger-protocol  carrier-protocol  and transport-protocol Passenger protocol   This is the original packet that is to be encapsulated by GRE  It could be an IPv4 or IPv6 packet  a routing update  and more Carrier protocol   GRE is the carrier-protocol that encapsulates the original passenger packet Transport protocol   This is the protocol that will actually be used to forward the packet  This could be IPv4 or IPv6 
Types of VPNs GRE over IPsec  Cont  For example  Branch and HQ need to exchange OSPF routing information over an IPsec VPN  GRE over IPsec is used to support the routing protocol traffic over the IPsec VPN  Specifically  the OSPF packets  i e   passenger-protocol  would be encapsulated by GRE  i e   carrier-protocol  and subsequently encapsulated in an IPsec VPN tunnel 
Types of VPNs Dynamic Multipoint VPNsSite-to-site IPsec VPNs and GRE over IPsec are not sufficient when the enterprise adds many more sites  Dynamic Multipoint VPN  DMVPN  is a Cisco software solution for building multiple VPNs in an easy  dynamic  and scalable manner DMVPN simplifies the VPN tunnel configuration and provides a flexible option to connect a central site with branch sites  It uses a hub-and-spoke configuration to establish a full mesh topology  Spoke sites establish secure VPN tunnels with the hub site Each site is configure using Multipoint Generic Routing Encapsulation  mGRE   The mGRE tunnel interface allows a single GRE interface to dynamically support multiple IPsec tunnels Spoke sites can also obtain information about each other  and alternatively build direct tunnels between themselves  spoke-to-spoke tunnels  
Types of VPNs IPsec Virtual Tunnel InterfaceIPsec Virtual Tunnel Interface  VTI  simplifies the configuration process required to support multiple sites and remote access IPsec VTI configurations are applied to a virtual interface instead of static mapping the IPsec sessions to a physical interface IPsec VTI is capable of sending and receiving both IP unicast and multicast encrypted traffic  Therefore  routing protocols are automatically supported without having to configure GRE tunnels IPsec VTI can be configured between sites or in a hub-and-spoke topology 
Types of VPNs Service Provider MPLS VPNsToday  service providers use MPLS in their core network  Traffic is forwarded through the MPLS backbone using labels  Traffic is secure because service provider customers cannot see each other s traffic MPLS can provide clients with managed VPN solutions  therefore  securing traffic between client sites is the responsibility of the service provider  There are two types of MPLS VPN solutions supported by service providers Layer 3 MPLS VPN - The service provider participates in customer routing by establishing a peering between the customer s routers and the provider s routers  Layer 2 MPLS VPN - The service provider is not involved in the customer routing  Instead  the provider deploys a Virtual Private LAN Service  VPLS  to emulate an Ethernet multiaccess LAN segment over the MPLS network  No routing is involved  The customer s routers effectively belong to the same multiaccess network 
Module ObjectivesModule Title  VPN and IPsec ConceptsModule Objective  Explain how VPNs and IPsec are used to secure site-to-site and remote access connectivity Topic TitleTopic ObjectiveVPN TechnologyDescribe the benefits of VPN technology Types of VPNsDescribe different types of VPNs IPsecExplain how the IPsec framework is used to secure network traffic 
VPN Technology Virtual Private NetworksVirtual private networks  VPNs  to create end-to-end private network connections A VPN is virtual in that it carries information within a private network  but that information is actually transported over a public network A VPN is private in that the traffic is encrypted to keep the data confidential while it is transported across the public network 
VPN Technology VPN BenefitsModern VPNs now support encryption features  such as Internet Protocol Security  IPsec  and Secure Sockets Layer  SSL  VPNs to secure network traffic between sites Major benefits of VPNs are shown in the table BenefitDescriptionCost SavingsOrganizations can use VPNs to reduce their connectivity costs while simultaneously increasing remote connection bandwidth SecurityEncryption and authentication protocols protect data from unauthorized access ScalabilityVPNs allow organizations to use the internet  making it easy to add new users without adding significant infrastructure CompatibilityVPNs can be implemented across a wide variety of WAN link options including broadband technologies  Remote workers can use these high-speed connections to gain secure access to corporate networks 
VPN Technology Site-to-Site and Remote Access VPNsA site-to-site VPN is terminated on VPN gateways  VPN traffic is only encrypted between the gateways  Internal hosts have no knowledge that a VPN is being used 
VPN Technology Site-to-Site and Remote Access VPNs  Cont  A remote-access VPN is dynamically created to establish a secure connection between a client and a VPN terminating device 
VPN Technology Enterprise and Service Provider VPNsVPNs can be managed and deployed as Enterprise VPNs - common solution for securing enterprise traffic across the internet  Site-to-site and remote access VPNs are created and managed by the enterprise using IPsec and SSL VPNs Service Provider VPNs - created and managed by the provider network  The provider uses Multiprotocol Label Switching  MPLS  at Layer 2 or Layer 3 to create secure channels between an enterprise s sites  effectively segregating the traffic from other customer traffic  
Internet-Based Connectivity Internet-Based Connectivity OptionsInternet-based broadband connectivity is an alternative to using dedicated WAN options Internet-based connectivity can be divided into wired and wireless options Wired OptionsWired options use permanent cabling  e g   copper or fiber  to provide consistent bandwidth  and reduce error rates and latency  Examples  DSL  cable connections  and optical-fiber networks Wireless OptionsWireless options are less expensive to implement compared to other WAN connectivity options because they use radio waves instead of wired media to transmit data  Examples  cellular 3G 4G 5G or satellite internet services Wireless signals can be negatively affected by factors such as distance from radio towers  interference from other sources and weather 
Internet-Based Connectivity DSL TechnologyDigital Subscriber Line  DSL  is a high-speed  always-on  connection technology that uses existing twisted-pair telephone lines to provide IP services to users DSL are categorized as either Asymmetric DSL  ADSL  or Symmetric DSL  SDSL   ADSL and ADSL2  provide higher downstream bandwidth to the user than upload bandwidth SDSL provides the same capacity in both directions DSL transfer rates are dependent on the actual length of the local loop  and the type and condition of the cabling 
Internet-Based Connectivity DSL ConnectionsService providers deploy DSL connections in the local loop  The connection is set up between the DSL modem and the DSL access multiplexer  DSLAM  The DSL modem converts the Ethernet signals from the teleworker device to a DSL signal  which is transmitted to a DSL access multiplexer  DSLAM  at the provider location A DSLAM is located at the Central Office  CO  of the provider and concentrates connections from multiple DSL subscribers DSL is not a shared medium  Each user has a separate direct-connection to the DSLAM  Adding users does not impede performance 
Internet-Based Connectivity DSL and PPPISPs use PPP as the Layer 2 protocol for broadband DSL connections PPP can be used to authenticate the subscriber PPP can assign a public IPv4 address to the subscriber PPP provides link-quality management features There are two ways PPP over Ethernet  PPPoE  can be deployed Host with PPoE Client - The PPPoE client software communicates with the DSL modem using PPPoE and the modem communicates with the ISP using PPP Router PPPoE Client - The router is the PPPoE client and obtains its configuration from the provider  
Internet-Based Connectivity Cable TechnologyCable technology is a high-speed always-on connection technology that uses a coaxial cable from the cable company to provide IP services to users The Data over Cable Service Interface Specification  DOCSIS  is the international standard for adding high-bandwidth data to an existing cable system The optical node converts RF signals to light pulses over fiber-optic cable  The fiber media enables the signals to travel over long distances to the provider headend where a Cable Modem Termination System  CMTS  is located The headend contains the databases needed to provide internet access while the CMTS is responsible for communicating with the cable modems Note  All the local subscribers share the same cable bandwidth  As more users join the service  available bandwidth may drop below the expected rate 
Internet-Based Connectivity Optical FiberMany municipalities  cities  and providers install fiber-optic cable to the user location  This is commonly referred to as Fiber to the x  FTTx  and includes the following Fiber to the Home  FTTH  - Fiber reaches the boundary of the residence  Fiber to the Building  FTTB  - Fiber reaches the boundary of the building with the final connection to the individual living space being made via alternative means Fiber to the Node Neighborhood  FTTN    Optical cabling reaches an optical node that converts optical signals to a format acceptable for twisted pair or coaxial cable to the premise Note  FTTx can deliver the highest bandwidth of all broadband options 
Internet-Based Connectivity Wireless Internet-Based BroadbandWireless technology uses the unlicensed radio spectrum to send and receive data Municipal Wi-Fi -  Municipal wireless networks are available in many cities providing high-speed internet access for free  or for substantially less than the price of other broadband services Cellular   Increasingly used to connect devices to the internet using radio waves to communicate through a nearby mobile phone tower  3G 4G 5G and Long-Term Evolution  LTE  are cellular technologies Satellite Internet - Typically used by rural users or in remote locations where cable and DSL are not available  A router connects to a satellite dish which is pointed to a service provider satellite in Geosynchronous orbit  Trees and heavy rains can impact the satellite signal WiMAX - Worldwide Interoperability for Microwave Access  WiMAX  is described in the IEEE standard 802 16 Provides high-speed broadband service with wireless-access and provides broad coverage like a cell phone network rather than through small Wi-Fi hotspots 
Internet-Based Connectivity VPN TechnologyVPNs can be used to address security concerns incurred when a remote office worker uses broadband services to access the corporate WAN over the internet A VPN is an encrypted connection between private networks over a public network  VPN tunnels are routed through the internet from the private network of the company to the remote site or employee host There are several benefits to using VPN Cost savings - Eliminates expensive  dedicated WAN links and modem banks Security - Advanced encryption and authentication protocols protect data from unauthorized access Scalability - Corporations can add large amounts of capacity without adding significant infrastructure Compatibility with broadband technology - Supported by broadband service providers such as DSL and cable VPNs are commonly implemented as the following Site-to-site VPN - VPN settings are configured on routers  Clients are unaware that their data is being encrypted Remote Access - The user is aware and initiates remote access connection  For example  using HTTPS in a browser to connect to your bank  Alternatively  the user can run VPN client software on their host to connect to and authenticate with the destination device 
Internet-Based Connectivity ISP Connectivity OptionsThere are different ways an organization can connect to an ISP  The choice depends on the needs and budget of the organization Single-homed  Single connection to the ISP using one link  Provides no redundancy and is the least expensive solution Dual-homed - Connects to the same ISP using two links  Provides both redundancy and load-balancing  However  the organization loses internet connectivity if the ISP experiences an outage Multihomed -The client connects to two different ISPs  This design provides increased redundancy and enables load-balancing  but it can be expensive Dual-multihomed - Dual-multihomed is the most resilient topology of the four shown  The client connects with redundant links to multiple ISPs  This topology provides the most redundancy possible  It is the most expensive option of the four 
Internet-Based Connectivity Broadband Solution ComparisonEach broadband solution has advantages and disadvantages  If there are multiple broadband solutions available  a cost-versus-benefit analysis should be performed to determine the best solution Some factors to consider include the following Cable - Bandwidth is shared by many users  Therefore  upstream data rates are often slow during high-usage hours in areas with over-subscription DSL - Limited bandwidth that is distance sensitive  in relation to the ISP central-office   Upload rate is proportionally lower compared to download rate Fiber-to-the-Home - This option requires fiber installation directly to the home Cellular Mobile - With this option  coverage is often an issue  even within a small office or home office where bandwidth is relatively limited Municipal Wi-Fi - Most municipalities do not have a mesh Wi-Fi network deployed  If is available and in range  then it is a viable option Satellite - This option is expensive and provides limited capacity per subscriber  Typically used when no other option is available 
Internet-Based Connectivity Lab   Configure and Verify Extended IPv4 ACLsIn this lab  you will complete the following objectives Investigate Broadband DistributionResearch Broadband Access Options for Specific Scenarios
Modern WAN Connectivity Modern WANsModern WANS have more connectivity options than traditional WANs  Enterprises now require faster and more flexible WAN connectivity options Traditional WAN connectivity options have rapidly declined in use because they are either no longer available  too expensive  or have limited bandwidth The figure displays the local loop connections most likely encountered today 
Modern WAN Connectivity Modern WAN Connectivity OptionsNew technologies are continually emerging  The figure summarizes the modern WAN connectivity options Dedicated broadbandFiber can be installed independently by an organization to connect remote locations directly together  Dark fiber can be leased or purchased from a supplier  Packet-switchedMetro Ethernet   Replacing many traditional WAN options  MPLS   Enables sites to connect to the provider regardless of its access technologies Internet-based broadbandOrganizations are now commonly using the global internet infrastructure for WAN connectivity 
Modern WAN Connectivity Ethernet WANService providers now offer Ethernet WAN service using fiber-optic cabling  The Ethernet WAN service can go by many names  including the following Metropolitan Ethernet  Metro E Ethernet over MPLS  EoMPLS Virtual Private LAN Service  VPLS There are several benefits to an Ethernet WAN Reduced expenses and administrationEasy integration with existing networksEnhanced business productivityNote  Ethernet WANs have gained in popularity and are now commonly being used to replace the traditional serial point-to-point  Frame Relay and ATM WAN links 
Modern WAN Connectivity MPLSMultiprotocol Label Switching  MPLS  is a high-performance service provider WAN routing technology to interconnect clients without regard to access method or payload  MPLS supports a variety of client access methods  e g   Ethernet  DSL  Cable  Frame Relay  MPLS can encapsulate all types of protocols including IPv4 and IPv6 traffic An MPLS router can be a customer edge  CE  router  a provider edge  PE  router  or an internal provider  P  router MPLS routers are label switched routers  LSRs   They attach labels to packets that are then used by other MPLS routers to forward traffic MPLS also provides services for QoS support  traffic engineering  redundancy  and VPNs 
Module ObjectivesModule Title  WAN ConceptsModule Objective  Explain how WAN access technologies can be used to satisfy business requirements Topic TitleTopic ObjectivePurpose of WANsExplain the purpose of a WAN WAN OperationsExplain how WANs operate Traditional WAN ConnectivityCompare traditional WAN connectivity options Modern WAN ConnectivityCompare modern WAN connectivity options Internet-Based ConnectivityCompare internet-based connectivity options 
Purpose of WANs LANs and WANsA WAN is a telecommunications network that spans over a relatively large geographical area and is required to connect beyond the boundary of the LAN  Local Area Networks  LANs Wide Area Networks  WANs LANs provide networking services within a small geographic area WANs provide networking services over large geographical areas LANs are used to interconnect local computers  peripherals  and other devices WANs are used to interconnect remote users  networks  and sites A LAN is owned and managed by an organization or home user WANs are owned and managed by internet service  telephone  cable  and satellite providers Other than the network infrastructure costs  there is no fee to use a LAN WAN services are provided for a fee LANs provide high bandwidth-speeds using wired Ethernet and Wi-Fi services WANs providers offer low to high bandwidth-speeds  over long distances 
Purpose of WANs Private and Public WANsA private WAN is a connection that is dedicated to a single customer Private WANs provide the following Guaranteed service levelConsistent bandwidthSecurityA public WAN connection is typically provided by an ISP or telecommunications service provider using the internet  In this case  the service levels and bandwidth may vary  and the shared connections do not guarantee security 
Purpose of WANs WAN TopologiesWANs are implemented using the following logical topology designs Point-to-Point TopologyHub-and-Spoke TopologyDual-homed TopologyFully Meshed TopologyPartially Meshed TopologyNote  Large networks usually deploy a combination of these topologies 
Purpose of WANs WAN Topologies  Cont  Point-to-Point Topology Employs a point-to-point circuit between two endpoints Involves a Layer 2 transport service through the service provider network The point-to-point connection is transparent to the customer network Note  It can become expensive if many point-to-point connections are required 
Purpose of WANs WAN Topologies  Cont  Hub-and-Spoke Topology Enables a single interface on the hub router to be shared by all spoke circuits Spoke routers can be interconnected through the hub router using virtual-circuits and routed subinterfaces Spoke routers can only communicate with each other through the hub router Note  The hub router represents a single point of failure  If it fails  inter-spoke communication also fails 
Purpose of WANs WAN Topologies  Cont  Dual-homed TopologyOffers enhanced network redundancy  load-balancing  distributed computing and processing  and the ability to implement backup service provider connections More expensive to implement than single-homed topologies  This is because they require additional networking hardware  such as additional routers and switches More difficult to implement because they require additional  and more complex  configurations 
Purpose of WANs WAN Topologies  Cont  Fully Meshed TopologyUses multiple virtual-circuits to connect all sitesThe most fault-tolerant topologyPartially Meshed TopologyConnects many but not all sites
Purpose of WANs Carrier ConnectionsAnother aspect of WAN design is how an organization connects to the internet  An organization usually signs a service level agreement  SLA  with a service provider  The SLA outlines the expected services relating to the reliability and availability of the connection  The service provider may or may not be the actual carrier  A carrier owns and maintains the physical connection and equipment between the provider and the customer  Typically  an organization will choose either a single-carrier or dual-carrier WAN connection 
Purpose of WANs Carrier Connections  Cont  A single-carrier connection is when an organization connects to only one service provider  An SLA is negotiated between the organization and the service provider  A dual-carrier connection provides redundancy and increases network availability  The organization negotiates separate SLAs with two different service providers  
Purpose of WANs Evolving NetworksNetwork requirements of a company can change dramatically as the company grows over time A network must meet the day-to-day operational needs of business  and it must be able to adapt and grow as a company changes  Network designers and administrators meet these challenges by carefully choosing network technologies  protocols  and service providers  Networks can be optimized by using a variety of network design techniques and architectures To illustrate differences between network size  we will use a fictitious company called SPAN Engineering as it grows from a small  local  business into a global enterprise 
Purpose of WANs Evolving Networks  Cont  Small NetworkSPAN  a small fictitious company  started with a few employees in a small office Uses a single LAN connected to a wireless router for sharing data and peripherals Connection to the internet is through a common broadband service called Digital Subscriber Line  DSL IT support is contracted from the DSL provider 
Purpose of WANs Evolving Networks  Cont  Campus NetworkWithin a few years SPAN grew and required several floors of a building The company now required a Campus Area Network  CAN  A firewall secures internet access to corporate users In-house IT staff to support and maintain the network 
Purpose of WANs Evolving Networks  Cont  Branch NetworkA few years later  the company expanded and added a branch site in the city  and remote and regional sites in other cities The company now required a metropolitan area network  MAN  to interconnect sites within the city  To connect to the central-office  branch offices in nearby cities used private dedicated lines through their local service provider 
Purpose of WANs Evolving Networks  Cont  Distributed NetworkSPAN Engineering has now been in business for 20 years and has grown to thousands of employees distributed in offices worldwide Site-to-site and remote access Virtual Private Networks  VPNs  enable the company to use the internet to connect easily and securely with employees and facilities around the world 
Traditional WAN Connectivity Traditional WAN Connectivity OptionsTo understand the WANs of today  it helps to know where they started  When LANs appeared in the 1980s  organizations began to see the need to interconnect with other locations  To do so  they needed their networks to connect to the local loop of a service provider  This was accomplished by using dedicated lines  or by using switched services from a service provider 
Traditional WAN Connectivity Common WAN TerminologyPoint-to-point lines could be leased from a service provider and were called  leased-lines   The term refers to the fact that the organization pays a monthly lease fee to a service provider to use the line Leased lines are available in different fixed capacities and are generally priced based on the bandwidth required and the distance between the two connected points There are two systems used to define the digital capacity of a copper media serial-link T-carrier - Used in North America  T-carrier provides T1 links supporting bandwidth up to 1 544 Mbps and T3 links supporting bandwidth up to 43 7 Mbps E-carrier   Used in Europe  E-carrier provides E1 links supporting bandwidth up to 2 048 Mbps and E3 links supporting bandwidth up to 34 368 Mbps 
Traditional WAN Connectivity Common WAN Terminology  Cont  The table summarizes the advantages and disadvantages of leased-lines AdvantagesSimplicityPoint-to-point communication links require minimal expertise to install and maintain QualityPoint-to-point communication links usually offer high quality service  if they have adequate bandwidth  AvailabilityConstant availability is essential for some applications  such as e-commerce  Point-to-point communication links provide permanent  dedicated capacity which is required for VoIP or Video over IP DisadvantagesCostPoint-to-point links are generally the most expensive type of WAN access  The cost of leased line solutions can become significant when they are used to connect many sites over increasing distances Limited flexibilityWAN traffic is often variable  and leased-lines have a fixed capacity  so that the bandwidth of the line seldom matches the need exactly 
Traditional WAN Connectivity Circuit-Switch OptionsCircuit-switched connections are provided by Public Service Telephone Network  PSTN  carriers  The local loop connecting the CPE to the CO is copper media  There are two traditional circuit-switched options Public Service Telephone Network  PSTN Dialup WAN access uses the PSTN as its WAN connection  Traditional local loops can transport binary computer data through the voice telephone network using a voiceband modem The physical characteristics of the local loop and its connection to the PSTN limit the rate of the signal to less than 56 kbps Integrated Services Digital Network  ISDN ISDN is a circuit-switching technology that enables the PSTN local loop to carry digital signals  This provided higher capacity switched connections than dialup access  ISDN provides for data rates from 45 Kbps to 2 048 Mbps 
Traditional WAN Connectivity Packet-Switch OptionsPacket switching segments data into packets that are routed over a shared network  It allows many pairs of nodes to communicate over the same channel There are two traditional  legacy  circuit-switched options Frame RelayFrame Relay is a simple Layer 2 non-broadcast-multi-access  NBMA  WAN technology that is used to interconnect enterprise LANs Frame Relay creates PVCs which are uniquely identified by a data-link-connection-identifier  DLCI  Asynchronous Transfer Mode  ATM Asynchronous Transfer Mode  ATM  technology is capable of transferring voice  video  and data through private and public networks  ATM is built on a cell-based architecture rather than on a frame-based architecture  ATM cells are always a fixed length of 53 bytes Note  Frame relay and ATM networks have been largely replaced by faster Metro Ethernet and internet-based solutions 
WAN Operations WAN StandardsModern WAN standards are defined and managed by a number of recognized authorities including the following TIA EIA - Telecommunications Industry Association and Electronic Industries AllianceISO - International Organization for StandardizationIEEE - Institute of Electrical and Electronics Engineers
WAN Operations WANs in the OSI ModelMost WAN standards focus on the physical-layer and the data-link-layer Layer 1 ProtocolsSynchronous Digital Hierarchy  SDH Synchronous Optical Networking  SONET Dense Wavelength Division Multiplexing  DWDM Layer 2 ProtocolsBroadband  i e   DSL and Cable WirelessEthernet WAN  Metro Ethernet Multiprotocol Label Switching  MPLS Point-to-Point Protocol  PPP   less used High-Level Data Link Control  HDLC   less used Frame Relay  legacy Asynchronous Transfer Mode  ATM   legacy 
WAN Operations Common WAN TerminologyThere are specific terms used to describe WAN connections between the subscriber  i e   the company   client  and the WAN service provider WAN TermDescriptionData Terminal Equipment  DTE Connects the subscriber LANs to the WAN communication deviceData Communications Equipment  DCE Device used to communicate with the providerCustomer Premises Equipment  CPE This is the DTE and DCE devices located on the enterprise edgePoint-of-Presence  POP The point where the subscriber connects to the service provider networkDemarcation PointThe physical location in a building or complex that officially separates the CPE from service provider equipment 
WAN Operations Common WAN Terminology  Cont  WAN TermDescriptionLocal Loop  last mile The copper or fiber cable that connects the CPE to the CO of the service providerCentral office  CO The local service provider facility or building that connects the CPE to the provider networkToll networkIncludes backhaul  long-haul  all-digital  fiber-optic communications lines  switches  routers  and other equipment inside the WAN provider networkBackhaul networkConnects multiple access nodes of the service provider networkBackbone networkLarge  high-capacity networks used to interconnect service provider networks and to create a redundant network 
WAN Operations WAN DevicesThere are many types of devices that are specific to WAN environments  WAN DeviceDescriptionVoiceband ModemDial-up modem   uses telephone lines Legacy deviceDSL Modem   Cable ModemCollectively known as broadband modems  these high-speed digital modems connect to the DTE router using Ethernet CSU DSUDigital-leased-lines require a CSU and a DSU  It connects a digital device to a digital line Optical ConverterConnect fiber-optic media to copper media and convert optical signals to electronic pulses Wireless Router   Access PointDevices are used to wirelessly connect to a WAN provider WAN Core devicesWAN backbone consists of multiple high-speed routers and Layer 3 switches 
WAN Operations Serial CommunicationAlmost all network communications occur using a serial communication delivery  Serial communication transmits bits sequentially over a single channel In contrast  parallel communications simultaneously transmit several bits using multiple wires As the cable length increases  the synchronization timing between multiple channels becomes more sensitive to distance  For this reason  parallel communication is limited to very short distances
WAN Operations Circuit-Switched CommunicationA circuit-switched network establishes a dedicated circuit  or channel  between endpoints before the users can communicate Establishes a dedicated virtual connection through the service provider network before communication can start All communication uses the same path The two most common types of circuit-switched WAN technologies are the public switched telephone network  PSTN  and the legacy Integrated Services Digital Network  ISDN   
WAN Operations Packet-Switched CommunicationNetwork communication is most commonly implemented using packet-switched communication Segments traffic data into packets that are routed over a shared network Much less expensive and more flexible than circuit switching Common types of packet-switched WAN technologies are Ethernet WAN  Metro Ethernet   Multiprotocol Label Switching  MPLS Frame RelayAsynchronous Transfer Mode  ATM  
WAN Operations SDH  SONET  and DWDMService provider networks use fiber-optic infrastructures to transport user data between destinations  Fiber-optic cable is far superior to copper cable for long distance transmissions due to its much lower attenuation and interference There are two optical-fiber OSI layer 1 standards available to service providers SDH - Synchronous Digital Hierarchy  SDH  is a global standard for transporting data over fiber-optic cable SONET - Synchronous Optical Networking  SONET  is the North American standard that provides the same services as SDH SDH SONET define how to transfer multiple data  voice  and video communications over optical-fiber using lasers or light-emitting diodes  LEDs  over great distances Dense Wavelength Division Multiplexing  DWDM  is a newer technology that increases the data-carrying capacity of SDH and SONET by simultaneously sending multiple streams of data  multiplexing  using different wavelengths of light 
CAPWAP Operation Video   CAPWAPThis video will cover the following  Control and Provisioning of Wireless Access Points  CAPWAP  functionSplit Media Access Control  MAC  ArchitectureDTLS EncryptionFlex Connect APs
CAPWAP Operation Introduction to CAPWAPCAPWAP is an IEEE standard protocol that enables a WLC to manage multiple APs and WLANs Based on LWAPP but adds additional security with Datagram Transport Layer Security  DLTS  Encapsulates and forwards WLAN client traffic between an AP and a WLC over  tunnels using UDP ports 5246 and 5247 Operates over both IPv4 and IPv6  IPv4 uses IP protocol 17 and IPv6 uses IP protocol 136 
CAPWAP Operation Split MAC ArchitectureThe CAPWAP split MAC concept does all the functions normally performed by individual APs and distributes them between two functional components AP MAC FunctionsWLC MAC FunctionsAP MAC FunctionsWLC MAC FunctionsBeacons and probe responsesAuthenticationPacket acknowledgements and retransmissionsAssociation and re-association of roaming clientsFrame queueing and packet prioritizationFrame translation to other protocolsMAC layer data-encryption and decryptionTermination of 802 11 traffic on a wired interface
CAPWAP Operation DTLS EncryptionDTLS provides security between the AP and the WLC It is enabled by default to secure the CAPWAP control channel and encrypt all management and control traffic between AP and WLC Data encryption is disabled by default and requires a DTLS license to be installed on the WLC before it can be enabled on the AP 
CAPWAP Operation Flex Connect APsFlexConnect enables the configuration and control of Aps over a WAN link There are two modes of option for the FlexConnect AP Connected mode   The WLC is reachable  The FlexConnect AP has CAPWAP connectivity with the WLC through the CAPWAP tunnel  The WLC performs all CAPWAP functions Standalone mode   The WLC is unreachable  The FlexConnect AP has lost CAPWAP connectivity with the WLC  The FlexConnect AP can assume some of the WLC functions such as switching client data traffic locally and performing client authentication locally 
Channel Management Frequency Channel SaturationIf the demand for a specific wireless channel is too high  the channel may become oversaturated  degrading the quality of the communication Channel saturation can be mitigated using techniques that use the channels more efficiently Direct-Sequence Spread Spectrum  DSSS  - A modulation technique designed to spread a signal over a larger frequency band  Used by 802 11b devices to avoid interference from other devices using the same 2 4 GHz frequency Frequency-Hopping Spread Spectrum  FHSS  - Transmits radio signals by rapidly switching a carrier signal among many frequency channels  Sender and receiver must be synchronized to  know  which channel to jump to  Used by the original 802 11 standard Orthogonal Frequency-Division Multiplexing  OFDM  - A subset of frequency division multiplexing in which a single channel uses multiple sub-channels on adjacent frequencies  OFDM is used by a number of communication systems including 802 11a g n ac  
Channel Management Channel SelectionThe 2 4 GHz band is subdivided into multiple channels each allotted 22 MHz bandwidth and separated from the next channel by 5 MHz A best practice for 802 11b g n WLANs requiring multiple APs is to use non-overlapping channels such as 1  6  and 11 
Channel Management Channel Selection  Cont  For the 5GHz standards 802 11a n ac  there are 24 channels  Each channel is separated from the next channel by 20 MHz Non-overlapping channels are 36  48  and 60 
Channel Management Plan a WLAN DeploymentThe number of users supported by a WLAN depends on the following The geographical layout of the facilityThe number of bodies and devices that can fit in a spaceThe data rates users expectThe use of non-overlapping channels by multiple APs and transmit power settingsWhen planning the location of APs  the approximate circular coverage-area is important 
Configure a Basic WLAN on the WLC Video   Configure a Basic WLAN on the WLCThis video will cover the following Review the topologyAccess the GUI for the WLAN controllerInformation about the wireless network on the Network summary screenConfigure a new WLANSecure the new WLAN
Configure a Basic WLAN on the WLC WLC TopologyThe topology and addressing scheme used for this topic are shown in the figure and the table  The access point  AP  is a controller-based AP as opposed to an autonomous AP  so it requires no initial configuration and is often called lightweight APs  LAPs   LAPs use the Lightweight Access Point Protocol  LWAPP  to communicate with a WLAN controller  WLC   Controller-based APs are useful in situations where many APs are required in the network  As more APs are added  each AP is automatically configured and managed by the WLC DeviceInterfaceIP AddressSubnet MaskR1F0 0172 16 1 1255 255 255 0R1F0 1 1192 168 200 1255 255 255 0S1VLAN 1DHCPWLCManagement192 168 200 254255 255 255 0AP1Wired 0192 168 200 3255 255 255 0PC-ANIC172 16 1 254255 255 255 0PC-BNICDHCPWireless LaptopNICDHCP
Configure a Basic WLAN on the WLC Log in to the WLCConfiguring a wireless LAN controller  WLC  is not that much different from configuring a wireless router  The WLC controls APs and provides more services and management capabilities The user logs into the WLC using credentials that were configured during initial setup The Network Summary page is a dashboard that provides a quick overview of configured wireless networks  associated access points  APs   and active clients  You can also see the number of rogue access points and clients 
Configure a Basic WLAN on the WLC View AP InformationClick Access Points from the left menu to view an overall picture of the AP s system information and performance  The AP is using IP address 192 168 200 3  Because Cisco Discovery Protocol  CDP  is active on this network  the WLC knows that the AP is connected to the FastEthernet 0 1 port on the switch This AP in the topology is a Cisco Aironet 1815i which means you can use the command-line and a limited set of familiar IOS commands 
Configure a Basic WLAN on the WLC Advanced SettingsMost WLC will come with some basic settings and menus that users can quickly access to implement a variety of common configurations  However  as a network administrator  you will typically access the advanced settings  For the Cisco 3504 Wireless Controller  click Advanced in the upper right-hand corner to access the advanced Summary page  From here  you can access all the features of the WLC 
Configure a Basic WLAN on the WLC Configure a WLANWireless LAN Controllers have Layer 2 switch ports and virtual interfaces that are created in software and are very similar to VLAN interfaces  Each physical port can support many APs and WLANs  The ports on the WLC are essentially trunk ports that can carry traffic from multiple VLANs to a switch for distribution to multiple APs  Each AP can support multiple WLANs 
Configure a Basic WLAN on the WLC Configure a WLAN  Cont  Basic WLAN configuration on the WLC includes the following steps Create the WLANApply and Enable the WLANSelect the InterfaceSecure the WLANVerify the WLAN is OperationalMonitor the WLANView Wireless Client Information
Configure a Basic WLAN on the WLC Configure a WLAN  Cont  Create the WLAN  In the figure  a new WLAN with an SSID name  Wireless LAN is created Apply and Enable the WLAN  Next the WLAN is enabled the WLAN settings are configured 
Configure a Basic WLAN on the WLC Configure a WLAN  Cont  Select the Interface  The interface that will carry the WLAN traffic must be selected Secure the WLAN  The Security tab is used to access all the available options for securing the LAN  
Configure a Basic WLAN on the WLC Configure a WLAN  Cont  Verify the WLAN is Operational  The WLANs menu on the left is used to view the newly configured WLAN and its settings  Monitor the WLAN  The Monitor tab is used to access the advanced Summary page and confirm that the Wireless LAN now has one client using its services 
Configure a Basic WLAN on the WLC Configure a WLAN  Cont  View Wireless Client Details  Click Clients in the left menu to view more information about the clients connected to the WLAN 
Configure a Basic WLAN on the WLC Packet Tracer   Configure a Basic WLAN on the WLCIn this lab  you will explore some of the features of a wireless LAN controller  You will create a new WLAN on the controller and implement security on that LAN  Then you will configure a wireless host to connect to the new WLAN through an AP that is under the control of the WLC  Finally  you will verify connectivity 
Configure a WPA2 Enterprise WLAN on the WLC Video   Define an SNMP and RADIUS Server on the WLCThis video will cover the following Configure the WLAN controller to send SNMP traps to an external serverConfigure the WLAN controller to use an external RADIUS server to authenticate WLAN usersVerify connectivity with the RADIUS server
Configure a WPA2 Enterprise WLAN on the WLC SNMP and RADIUSPC-A is running Simple Network Management Protocol  SNMP  and Remote Authentication Dial-In User Service  RADIUS  server software  The network administrator wants the WLC to forward all SNMP log messages  i e   traps  to the SNMP server The network administrator wants to use a RADIUS server for authentication  authorization  and accounting  AAA  services  Users will enter their username and password credentials which will be verified by the RADIUS server  The RADIUS server is required for WLANs that are using WPA2 Enterprise authentication Note  SNMP server and RADIUS server configuration is beyond the scope of this module 
Configure a WPA2 Enterprise WLAN on the WLC Configure SNMP Server InformationTo enable SNMP and configure settings Click the MANAGEMENT tab to access a variety of management features  Click SNMP to expand the sub-menus Click Trap Receivers  Click New    to configure a new SNMP trap receiver  Enter the SNMP Community name and the IP address  IPv4 or IPv6  for the SNMP server and then click Apply  The WLC will now forward SNMP log messages to the SNMP server 
Configure a WPA2 Enterprise WLAN on the WLC Configure RADIUS Server InformationTo configure the WLC with the RADIUS server information Click SECURITY Click RADIUSClick AuthenticationClick New    to add PC-A as the RADIUS server  Enter the IPv4 address for PC-A and the shared secret that will be used between the WLC and the RADIUS server and then click Apply 
Configure a WPA2 Enterprise WLAN on the WLC Configure RADIUS Server Information  Cont  After clicking Apply  the list of configured RADIUS Authentication Servers refreshes with the new server listed 
Configure a WPA2 Enterprise WLAN on the WLC Video   Configure a VLAN for a New WLANThis video will cover the following Review the topologyDeploy a new VLAN interfaceAssociate the new VLAN interface with a WLAN
Configure a WPA2 Enterprise WLAN on the WLC Topology with VLAN 5 AddressingEach WLAN configured on the WLC needs its own virtual interface  The WLC has five physical data ports that can be configured to support multiple WLANs and virtual interface  The new WLAN will use interface VLAN 5 and network 192 168 5 0 24 and therefore R1 has been configured for VLAN 5 as shown in the topology and show ip interface brief output 
Configure a WPA2 Enterprise WLAN on the WLC Configure a New InterfaceVLAN interface configuration on the WLC includes the following steps Create a new interface Configure the VLAN name and ID Configure the port and interface address Configure the DHCP server address Apply and Confirm Verify Interfaces 
Configure a WPA2 Enterprise WLAN on the WLC Configure a New Interface  Cont  Create a new interface  Click CONTROLLER   Interfaces   New   Configure the VLAN name and ID  In the example  the new interface is named vlan5  the VLAN ID is 5  and applied 
Configure a WPA2 Enterprise WLAN on the WLC Configure a New Interface  Cont  Configure the port and interface address  On the interface Edit page  configure the physical port number  i e   the WLC G1 interface is Port Number 1 on the WLC   the VLAN 5 interface addressing  i e   192 168 5 254 24   and the default gateway  i e   192 168 5 1 
Configure a WPA2 Enterprise WLAN on the WLC Configure a New Interface  Cont  Configure the DHCP server address  The example configures a primary DHCP server at IPv4 address 192 168 5 1 which is the default gateway router address which is enabled as a DHCP server Apply and Confirm  Scroll to the top and click Apply and then click OK for the warning message 
Configure a WPA2 Enterprise WLAN on the WLC Configure a New Interface  Cont  Verify Interfaces  Click Interfaces to verify that the new vlan5 interface is shown in the list of interfaces with its IPv4 address 
Configure a WPA2 Enterprise WLAN on the WLC Video   Configure a DHCP ScopeThis video will cover the following Review the topologyExplain the role of the WLC DHCP serverCreate a new DHCP scope
Configure a WPA2 Enterprise WLAN on the WLC Configure a DHCP ScopeDHCP scope configuration includes the following steps Create a new DHCP scope Name the DHCP scope Verify the new DHCP scope Configure and enable the new DHCP scope Verify the enable DHCP scope
Configure a WPA2 Enterprise WLAN on the WLC Configure a DHCP Scope  Cont  Create a new DHCP scope  To configure a new DHCP scope  click Internal DHCP Server   DHCP Scope   New    Name the DHCP scope  The scope is named Wireless Management and then applied 
Configure a WPA2 Enterprise WLAN on the WLC Configure a DHCP Scope  Cont  Verify the new DHCP scope  In the DHCP Scopes page click the new Scope Name to configure the DHCP scope Configure and enable the new DHCP scope  On the Edit screen for the Wireless Management scope  configure a pool of addresses  i e   192 168 200 240 24 to  249   the default router IPv4 address  i e   192 168 200 1   then Enabled and Apply 
Configure a WPA2 Enterprise WLAN on the WLC Configure a DHCP Scope  Cont  Verify the enable DHCP scope  The network administrator is returned to the DHCP Scopes page and can verify the scope is ready to be allocated to a new WLAN 
Configure a WPA2 Enterprise WLAN on the WLC Video   Configure a WPA2 Enterprise WLANThis video will cover the following Review the topologyCreate a WLANConfigure the WLC to use the RADIUS serverSecure the new WLAN with WPA2-EnterpriseVerify WPA2-Enterprise Security
Configure a WPA2 Enterprise WLAN on the WLC Configure a WPA2 Enterprise WLANBy default  all newly created WLANs on the WLC will use WPA2 with Advanced Encryption System  AES   802 1X is the default key management protocol used to communicate with the RADIUS server Next  create a new WLAN to use interface vlan5 Configuring a new WLAN on the WLC includes the following steps Create a new WLAN Configure the WLAN name and SSID Enable the WLAN for VLAN 5 Verify AES and 802 1X defaults Configure WLAN security to use the RADIUS server Verify the new WLAN is available 
Configure a WPA2 Enterprise WLAN on the WLC Configure a WPA2 Enterprise WLAN  Cont  Create a new WLAN  Click the WLANs tab and then Go to create a new WLAN Configure the WLAN name and SSID  Enter the profile name and SSID  choose an ID of 5  and then click Apply to create the new WLAN 
Configure a WPA2 Enterprise WLAN on the WLC Configure a WPA2 Enterprise WLAN  Cont  Enable the WLAN for VLAN 5  Once the WLAN  change the status to Enabled  choose vlan5 from the Interface Interface Group G  dropdown list  and then click Apply and click OK to accept the popup message Verify AES and 802 1X defaults  Click the Security tab to view the default security configuration for the new WLAN  
Configure a WPA2 Enterprise WLAN on the WLC Configure a WPA2 Enterprise WLAN  Cont  Configure the RADIUS server  To select the RADIUS server that will be used to authenticate WLAN users  click the AAA Servers tab and in the dropdown box  select the RADIUS server that was configured on the WLC previously  and then Apply your changes Verify that the new WLAN is available  To verify that the new WLAN is listed and enabled click on the WLANs submenu 
Configure a WPA2 Enterprise WLAN on the WLC Packet Tracer   Configure a WPA2 Enterprise WLAN on the WLCIn this Packet Tracer activity  you will configure a new WLAN on a wireless LAN controller  WLC   including the VLAN interface that it will use  You will configure the WLAN to use a RADIUS server and WPA2-Enterprise to authenticate users  You will also configure the WLC to use an SNMP server Configure a new VLAN interface on a WLC Configure a new WLAN on a WLC Configure a new scope on the WLC internal DHCP server Configure the WLC with SNMP settings Configure the WLC to use a RADIUS server to authenticate WLAN users Secure a WLAN with WPA2-Enterprise Connect hosts to the new WLC 
Module ObjectivesModule Title  WLAN ConceptsModule Objective  Explain how WLANs enable network connectivity Topic TitleTopic ObjectiveIntroduction to WirelessDescribe WLAN technology and standards Components of WLANsDescribe the components of a WLAN infrastructure WLAN OperationExplain how wireless technology enables WLAN operation CAPWAP OperationExplain how a WLC uses CAPWAP to manage multiple APs Channel ManagementDescribe channel management in a WLAN WLAN ThreatsDescribe threats to WLANs Secure WLANsDescribe WLAN security mechanisms 
Introduction to Wireless Benefits of WirelessA Wireless LAN  WLAN  is a type of wireless network that is commonly used in homes  offices  and campus environments WLANs make mobility possible within the home and business environments Wireless infrastructures adapt to rapidly changing needs and technologies 
Introduction to Wireless Types of Wireless NetworksWireless Personal-Area Network  WPAN    Low power and short-range  20-30ft or 6-9 meters   Based on IEEE 802 15 standard and 2 4 GHz frequency  Bluetooth and Zigbee are WPAN examples Wireless LAN  WLAN    Medium sized networks up to about 300 feet  Based on IEEE 802 11 standard and 2 4 or 5 0 GHz frequency Wireless MAN  WMAN    Large geographic area such as city or district  Uses specific licensed frequencies Wireless WAN  WWAN    Extensive geographic area for national or global communication  Uses specific licensed frequencies 
Introduction to Wireless Wireless TechnologiesBluetooth   IEEE WPAN standard used for device pairing at up to 300ft  100m  distance Bluetooth Low Energy  BLE    Supports mesh topology to large scale network devices Bluetooth Basic Rate Enhanced Rate  BR EDR    Supports point-to-point topologies and is optimized for audio streaming WiMAX  Worldwide Interoperability for Microwave Access    Alternative broadband wired internet connections  IEEE 802 16 WLAN standard for up 30 miles  50 km  
Introduction to Wireless Wireless Technologies  Cont  Cellular Broadband   Carry both voice and data  Used by phones  automobiles  tablets  and laptops Global System of Mobile  GSM    Internationally recognizedCode Division Multiple Access  CDMA    Primarily used on the US Satellite Broadband   Uses directional satellite dish aligned with satellite in geostationary orbit  Needs clear line of site  Typically used in rural locations where cable and DSL are unavailable 
Introduction to Wireless 802 11 Standards802 11 WLAN standards define how radio frequencies are used for wireless links IEEE StandardRadio FrequencyDescription802 112 4 GHzData rates up to 2 Mb s802 11a5 GHzData rates up to 54 Mb s Not interoperable with 802 11b or 802 11g802 11b2 4 GHzData rates up to 11 Mb s Longer range than 802 11a and better able to penetrate building structures802 11g2 4 GHzData rates up to 54 Mb s Backward compatible with 802 11b802 11n2 4 and 5 GHzData rates 150   600 Mb s Require multiple antennas with MIMO technology802 11ac5 GHzData rates 450 Mb s   1 3 Gb s Supports up to eight antennas802 11ax2 4 and 5 GHzHigh-Efficiency Wireless  HEW  Capable of using 1 GHz and 7 GHz frequencies
Introduction to Wireless Radio FrequenciesAll wireless devices operate in the range of the electromagnetic spectrum  WLAN networks operate in the 2 4 and 5 GHz frequency bands 2 4 GHz  UHF    802 11b g n ax5 GHz  SHF    802 11a n ac ax
Introduction to Wireless Wireless Standards OrganizationsStandards ensure interoperability between devices that are made by different manufacturers  Internationally  the three organizations influencing WLAN standards  International Telecommunication Union  ITU    Regulates the allocation of radio spectrum and satellite orbits Institute of Electrical and Electronics Engineers  IEEE    Specifies how a radio frequency is modulated to carry information  Maintains the standards for local and metropolitan area networks  MAN  with the IEEE 802 LAN MAN family of standards  Wi-Fi Alliance   Promotes  the growth and acceptance of WLANs  It is an association of vendors whose objective is to improve the interoperability of products that are based on the 802 11 standard
Module Practice and Quiz Packet Tracer   WLAN ConfigurationIn this Packet Tracer activity  you will configure both a wireless home router and a WLC-based network  You will implement both WPA2-PSK and WPA2-Enterprise security Configure a home router to provide Wi-Fi connectivity to a variety of devices Configure WPA2-PSK security on a home router Configure interfaces on a WLC Configure WPA2-PSK security on a WLAN and connect hosts to the WLAN Configure WPA2-Enterprise on a WLAN and connect hosts to the WLAN Verify connectivity 
Module Practice and Quiz What Did I Learn In This Module Remote workers  small branch offices  and home networks often use a wireless router  which typically include a switch for wired clients  a port for an internet connection  sometimes labeled  WAN    and wireless components for wireless client access  Most wireless routers are preconfigured to be connected to the network and provide services  The wireless router uses DHCP to automatically provide addressing information to connected devices  Your first priority should be to change the username and password of your wireless router  If you want to extend the range beyond approximately 45 meters indoors and 90 meters outdoors  you can add wireless-access points  The router will use a process called Network Address Translation  NAT  to convert private IPv4 addresses to internet-routable IPv4 addresses  By configuring QoS  you can guarantee that certain traffic types  such as voice and video  are prioritized over traffic that is not as time-sensitive  such as email and web browsing Lightweight APs  LAPs  use the Lightweight Access Point Protocol  LWAPP  to communicate with a WLAN controller  WLC   
Module Practice and Quiz What Did I Learn In This Module   Cont  Configuring a wireless LAN controller  WLC  is similar to configuring a wireless router except that a WLC controls APs and provides more services and management capabilities  Use the WLC interface to view an overall picture of the AP s system information and performance  to access advanced settings and to configure a WLAN SNMP is used monitor the network  The WLC is set to forward all SNMP log messages  called traps  to the SNMP server  For WLAN user authentication  a RADIUS server is used for authentication  accounting  and auditing  AAA  services  Individual user access can be tracked and audited  Use the WLC interface to configure SNMP server and RADIUS server information  VLAN interfaces  DHCP scope  and a WPA2 Enterprise WLAN There are six steps to the troubleshooting process  When troubleshooting a WLAN  a process of elimination is recommended  Common problems are  no connectivity and poorly performing wireless connection when the PC is operational  To optimize and increase the bandwidth of 802 11 dual-band routers and APs  either  upgrade your wireless clients or split the traffic  Most wireless routers and APs offer upgradable firmware  Firmware releases may contain fixes for common problems reported by customers as well as security vulnerabilities  You should periodically check the router or AP for updated firmware 
Module 13  WLAN Configuration New Terms and CommandsNetwork Address Translation  NAT  Wireless Mesh Network  WMN Port ForwardingPort Triggering
Module ObjectivesModule Title  WLAN ConfigurationModule Objective  Implement a WLAN using a wireless router and WLC Topic TitleTopic ObjectiveRemote Site WLAN ConfigurationConfigure a WLAN to support a remote site Configure a Basic WLAN on the WLCConfigure a WLC WLAN to use the management interface and WPA2 PSK authentication Configure a WPA2 Enterprise WLAN on the WLCConfigure a WLC WLAN to use a VLAN interface  a DHCP server  and WPA2 Enterprise authentication Troubleshoot WLAN IssuesTroubleshoot common wireless configuration issues 
Remote Site WLAN Configuration Video   Configure a Wireless NetworkThis video will cover the following Use the Wireless Router Web PageChange the PasswordChange the WAN and LAN settingsConnect the Wireless Network
Remote Site WLAN Configuration The Wireless RouterRemote workers  small branch offices  and home networks often use a small office and home router  These  integrated  routers typically include a switch for wired clients  a port for an internet connection  sometimes labeled  WAN    and wireless components for wireless client access  These wireless routers typically provide WLAN security  DHCP services  integrated Name Address Translation  NAT   quality of service  QoS   as well as a variety of other features  The feature set will vary based on the router model Note  Cable or DSL modem configuration is usually done by the service provider s representative either on-site or remotely  
Remote Site WLAN Configuration Log in to the Wireless RouterMost wireless routers are preconfigured to be connected to the network and provide services  Wireless router default IP addresses  usernames  and passwords can easily be found on the internet  Therefore  your first priority should be to change these defaults for security reasons To gain access to the wireless router s configuration GUIOpen a web browser and enter the default IP address for your wireless router  The default IP address can be found in the documentation that came with the wireless router or you can search the internet  The word admin is commonly used as the default username and password  
Remote Site WLAN Configuration Basic Network SetupBasic network setup includes the following steps Log in to the router from a web browser Change the default administrative password Log in with the new administrative password Change the default DHCP IPv4 addresses Renew the IP address Log in to the router with the new IP address 
Remote Site WLAN Configuration Basic Wireless SetupBasic wireless setup includes the following steps View the WLAN defaults Change the network mode  identifying which 802 11 standard is to be implemented Configure the SSID Configure the channel  ensuring there are no overlapping channels in use Configure the security mode  selecting from Open  WPA  WPA2 Personal  WPA2 Enterprise  etc  Configure the passphrase  as required for the selected security mode 
Remote Site WLAN Configuration Configure a Wireless Mesh NetworkIn a small office or home network  one wireless router may suffice to provide wireless-access to all the clients  If you want to extend the range beyond approximately 45 meters indoors and 90 meters outdoors  you create a wireless mesh  Create the mesh by adding access points with the same settings  except using different channels to prevent interference Extending a WLAN in a small office or home has become increasingly easier  Manufacturers have made creating a wireless mesh network  WMN  simple through smartphone apps  
Remote Site WLAN Configuration NAT for IPv4Typically  the wireless router is assigned a publicly routable address by the ISP and uses a private network address for addressing on the LAN To allow hosts on the LAN to communicate with the outside world  the router will use a process called Network Address Translation  NAT   NAT translates a private  local  source IPv4 address to a public  global  address  the process is reversed for incoming packets   NAT makes sharing one public IPv4 address possible by tracking the source port numbers for every session established by a device  If your ISP has IPv6 enabled  you will see a unique IPv6 address for each device 
Remote Site WLAN Configuration Quality of ServiceMany wireless routers have an option for configuring Quality of Service  QoS   By configuring QoS  you can guarantee that certain traffic types  such as voice and video  are prioritized over traffic that is not as time-sensitive  such as email and web browsing  On some wireless routers  traffic can also be prioritized on specific ports 
Remote Site WLAN Configuration Port ForwardingWireless routers typically block TCP and UDP ports to prevent unauthorized access in and out of a LAN  However  there are situations when specific ports must be opened so that certain programs and applications can communicate with devices on different networks  Port forwarding is a rule-based method of directing traffic between devices on separate networks Port triggering allows the router to temporarily forward data through inbound ports to a specific device  You can use port triggering to forward data to a computer only when a designated-port range is used to make an outbound request  
Remote Site WLAN Configuration Packet Tracer   Configure a Wireless NetworkIn this Packet Tracer activity  you will complete the following objectives Connect to a wireless routerConfigure the wireless routerConnect a wired device to the wireless routerConnect a wireless device to the wireless routerAdd an AP to the network to extend wireless coverageUpdate default router settings
Remote Site WLAN Configuration Lab   Configure a Wireless NetworkIn this lab  you will configure basic settings on a wireless router and connect a PC to router wirelessly 
Secure WLANs Video   Secure WLANsThis video will cover the following  SSID CloakingMAC Address FilteringAuthentication and Encryption Systems  Open Authentication and Shared Key Authentication 
Secure WLANs SSID Cloaking and MAC Address FilteringTo address the threats of keeping wireless intruders out and protecting data  two early security features were used and are still available on most routers and APs SSID CloakingAPs and some wireless routers allow the SSID beacon frame to be disabled  Wireless clients must be manually configured with the SSID to connect to the network MAC Address FilteringAn administrator can manually permit or deny clients wireless-access based on their physical MAC hardware address  In the figure  the router is configured to permit two MAC addresses  Devices with different MAC addresses will not be able to join the 2 4GHz WLAN 
Secure WLANs 802 11 Original Authentication MethodsThe best way to secure a wireless network is to use authentication and encryption systems  Two types of authentication were introduced with the original 802 11 standard Open system authenticationNo password required  Typically used to provide free internet access in public areas like cafes  airports  and hotels Client is responsible for providing security such as through a VPN  Shared key authenticationProvides mechanisms  such as WEP  WPA  WPA2  and WPA3 to authenticate and encrypt data between a wireless client and AP  However  the password must be pre-shared between both parties to connect 
Secure WLANs Shared Key Authentication MethodsThere are currently four shared key authentication techniques available  as shown in the table Authentication MethodDescriptionWired Equivalent Privacy  WEP The original 802 11 specification designed to secure the data using the Rivest Cipher 4  RC4  encryption method with a static key  WEP is no longer recommended and should never be used Wi-Fi Protected Access  WPA A Wi-Fi Alliance standard that uses WEP but secures the data with the much stronger Temporal Key Integrity Protocol  TKIP  encryption algorithm  TKIP changes the key for each packet  making it much more difficult to hack WPA2It uses the Advanced Encryption Standard  AES  for encryption  AES is currently considered the strongest encryption protocol WPA3This is the next generation of Wi-Fi security  All WPA3-enabled devices use the latest security methods  disallow outdated legacy protocols  and require the use of Protected Management Frames  PMF  
Secure WLANs Authenticating a Home UserHome routers typically have two choices for authentication  WPA and WPA2  with WPA 2 having two authentication methods Personal   Intended for home or small office networks  users authenticate using a pre-shared-key  PSK   Wireless clients authenticate with the wireless router using a pre-shared password  No special authentication server is required Enterprise   Intended for enterprise networks  Requires a Remote Authentication Dial-In User Service  RADIUS  authentication server  The device must be authenticated by the RADIUS server and then users must authenticate using 802 1X standard  which uses the Extensible Authentication Protocol  EAP  for authentication 
Secure WLANs Encryption MethodsWPA and WPA2 include two encryption protocols Temporal Key Integrity Protocol  TKIP    Used by WPA and provides support for legacy WLAN equipment  Makes use of WEP but encrypts the Layer 2 payload using TKIP Advanced Encryption Standard  AES    Used by WPA2 and uses the Counter Cipher Mode with Block Chaining Message Authentication Code Protocol  CCMP  that allows destination hosts to recognize if the encrypted and non-encrypted bits have been altered 
Secure WLANs Authentication in the EnterpriseEnterprise security mode choice requires an Authentication  Authorization  and Accounting  AAA  RADIUS server There pieces of information are required RADIUS server IP address   IP address of the server UDP port numbers  UDP ports 1812 for RADIUS Authentication  and 1813 for RADIUS Accounting  but can also operate using UDP ports 1645 and 1646 Shared key   Used to authenticate the AP with the RADIUS server Note  User authentication and authorization is handled by the 802 1X standard  which provides a centralized  server-based authentication of end users 
Secure WLANs WPA 3Because WPA2 is no longer considered secure  WPA3 is recommended when available  WPA3 Includes four features WPA3   Personal   Thwarts brute-force attacks by using Simultaneous Authentication of Equals  SAE  WPA3   Enterprise   Uses 802 1X EAP authentication  However  it requires the use of a 192-bit cryptographic suite and eliminates the mixing of security protocols for previous 802 11 standards Open Networks   Does not use any authentication  However  uses Opportunistic Wireless Encryption  OWE  to encrypt all wireless traffic IoT Onboarding   Uses Device Provisioning Protocol  DPP  to quickly onboard IoT devices 
Troubleshoot WLAN Issues Troubleshooting ApproachesNetwork problems can be simple or complex  and can result from a combination of hardware  software  and connectivity issues  Technicians must be able to analyze the problem and determine the cause of the error before they can resolve the network issue  This process is called troubleshooting Troubleshooting any sort of network problem should follow a systematic approach  A common and efficient troubleshooting methodology is based on the scientific method and can be broken into the six main steps shown in the table on the next slide 
Troubleshoot WLAN Issues Troubleshooting Approaches  Cont  StepTitleDescriptionIdentify the ProblemThe first step in the troubleshooting process is to identify the problem  While tools can be used in this step  a conversation with the user is often very helpful Establish a Theory of Probable CausesAfter you have talked to the user and identified the problem  you can try and establish a theory of probable causes  This step often yields more than a few probable causes to the problem Test the Theory to Determine CauseBased on the probable causes  test your theories to determine which one is the cause of the problem  A technician will often apply a quick procedure to test and see if it solves the problem  If a quick procedure does not correct the problem  you might need to research the problem further to establish the exact cause Establish a Plan of Action to Resolve the Problem and Implement the SolutionAfter you have determined the exact cause of the problem  establish a plan of action to resolve-the-problem and implement the solution Verify Full System Functionality and Implement Preventive MeasuresAfter you have corrected the problem  verify full functionality and  if applicable  implement preventive measures Document Findings  Actions  and OutcomesIn the final step of the troubleshooting process  document your findings  actions  and outcomes  This is very important for future reference 
Troubleshoot WLAN Issues Wireless Client Not ConnectingIf there is no connectivity  check the following Confirm the network configuration on the PC using the ipconfig command Confirm that the device can connect to the wired network  Ping a known IP address If needed  reload drivers as appropriate for the client or try a different wireless NIC If the wireless NIC of the client is working  check the security mode and encryption settings on the client  If the PC is operational but the wireless connection is performing poorly  check the following Is the PC out of the planned coverage-area  BSA  Check the channel settings on the wireless client  Check for interference with the 2 4 GHz band 
Troubleshoot WLAN Issues Wireless Client Not Connecting  Cont  Next  ensure that all the devices are actually in place  Consider a possible physical security issue  Is there power to all devices and are they powered on Finally  inspect links between cabled devices looking for bad connectors or damaged or missing cables  If the physical plant is in place  verify the wired LAN by pinging devices  including the AP  If connectivity still fails at this point  perhaps something is wrong with the AP or its configuration When the user PC is eliminated as the source of the problem  and the physical status of devices is confirmed  begin investigating the performance of the AP  Check the power status of the AP 
Troubleshoot WLAN Issues Troubleshooting When the Network Is SlowTo optimize and increase the bandwidth of 802 11 dual-band routers and APs  either Upgrade your wireless clients - Older 802 11b  802 11g  and even 802 11n devices can slow the entire WLAN  For the best performance  all wireless devices should support the same highest acceptable standard  Split the traffic - The easiest way to improve wireless performance is to split the wireless traffic between the 802 11n 2 4 GHz band and the 5 GHz band  Therefore  802 11n  or better  can use the two bands as two separate wireless networks to help manage the traffic There are several reasons for using a split-the-traffic approach The 2 4 GHz band may be suitable for basic Internet traffic that is not time-sensitive The bandwidth may still be shared with other nearby WLANs The 5 GHz band is much less crowded than the 2 4 GHz band  ideal for streaming multimedia The 5 GHz band has more channels  therefore  the channel chosen is likely interference-free 
Troubleshoot WLAN Issues Troubleshooting When the Network Is Slow  Cont  By default  dual-band routers and APs use the same network name on both the 2 4 GHz band and the 5 GHz band  It may be useful to segment the traffic The simplest way to segment traffic is to rename one of the wireless networks To improve the range of a wireless network  ensure the wireless router or AP location is free of obstructions  such as furniture  fixtures  and tall appliances  These block the signal  which shortens the range of the WLAN  If this still does not solve-the-problem  then a Wi-Fi Range Extender or deploying the Powerline wireless technology may be used 
Troubleshoot WLAN Issues Updating FirmwareMost wireless routers and APs offer upgradable firmware that should be periodically verified On a WLC  there will most likely be the ability to upgrade the firmware on all APs that the WLC controls  In the figure  the firmware image that will be used to upgrade all the APs is downloaded  On a Cisco 3504 Wireless Controller  click  WIRELESS   Access Points   Global Configuration and then scroll to the bottom of the page for the AP Image Pre-download section 
Troubleshoot WLAN Issues Packet Tracer   Troubleshoot WLAN IssuesIn this Packet Tracer  you will complete the following objectives Troubleshoot wireless LAN connectivity issues in a home network Troubleshoot wireless LAN connectivity issues in an enterprise network  
WLAN Components Video   WLAN ComponentsThis video will cover the following  AntennasWireless RouterInternet PortWireless Access PointAutonomous and controller-based access points
WLAN Components Wireless NICsTo communicate wirelessly  laptops  tablets  smart phones  and even the latest automobiles include integrated wireless NICs that incorporate a radio transmitter receiver If a device does not have an integrated wireless NIC  then a USB wireless adapter can be used 
WLAN Components Wireless Home RouterA home user typically interconnects wireless devices using a small  wireless router Wireless routers serve as the following Access point   To provide wires accessSwitch   To interconnect wired devicesRouter  - To provide a default gateway to other networks and the Internet
WLAN Components Wireless Access PointWireless clients use their wireless NIC to discover nearby access points  APs  Clients then attempt to associate and authenticate with an AP After being authenticated  wireless users have access to network resources Cisco Meraki Go access points
WLAN Components AP CategoriesAPs can be categorized as either autonomous APs or controller-based APs  Autonomous APs   Standalone devices configured through a command line interface or GUI  Each autonomous AP acts independently of the others and is configured and managed manually by an administrator Controller-based APs   Also known as lightweight APs  LAPs   Use Lightweight Access Point Protocol  LWAPP  to communicate with a LWAN controller  WLC   Each LAP is automatically configured and managed by the WLC 
WLAN Components Wireless AntennasTypes of external antennas Omnidirectional   Provide 360-degree coverage  Ideal in houses and office areas Directional   Focus the radio signal in a specific direction  Examples are the Yagi and parabolic dish Multiple Input Multiple Output  MIMO    Uses multiple antennas  Up to eight  to increase bandwidth 
WLAN Operation Video   WLAN OperationThis video will cover the following  Infrastructure ModeAd hoc ModeTetheringBasic Service Set  BSS Extended Service Set  ESS 802 11 Frame StructureCarrier Sense Multiple Access Collision Avoidance  CSMA CA Wireless Client AP AssociationPassive and Active Delivery Mode
WLAN Operation 802 11 Wireless Topology ModesAd hoc mode - Used to connect clients in peer-to-peer manner without an AP Infrastructure mode - Used to connect clients to the network using an AP Tethering - Variation of the ad hoc topology is when a smart phone or tablet with cellular data-access is enabled to create a personal hotspot 
WLAN Operation BSS and ESSInfrastructure mode defines two topology blocks Basic Service Set  BSS Uses single AP to interconnect all associated wireless clients Clients in different BSSs cannot communicate Extended Service Set  ESS A union of two or more BSSs interconnected by a wired distribution system Clients in each BSS can communication through the ESS 
WLAN Operation 802 11 Frame StructureThe 802 11 frame format is similar to the Ethernet frame format  except that it contains more fields 
WLAN Operation CSMA CAWLANs are half-duplex and a client cannot  hear  while it is sending  making it impossible to detect a collision  WLANs use carrier sense multiple access with collision avoidance  CSMA CA  to determine how and when to send data  A wireless client does the following Listens to the channel to see if it is idle  i e  no other traffic currently on the channel Sends a ready to send  RTS  message the AP to request dedicated access to the network Receives a clear to send  CTS  message from the AP granting access to send Waits a random amount of time before restarting the process if no CTS message received Transmits the data Acknowledges all transmissions  If a wireless client does not receive an acknowledgment  it assumes a collision occurred and restarts the process
WLAN Operation Wireless Client and AP AssociationFor wireless devices to communicate over a network  they must first associate with an AP or wireless router Wireless devices complete the following three stage process Discover a wireless APAuthenticate with the APAssociate with the AP
WLAN Operation Wireless Client and AP Association  Cont  To achieve successful association  a wireless client and an AP must agree on specific parameters SSID   The client needs to know the name of the network to connect Password   This is required for the client to authenticate to the AP Network mode   The 802 11 standard in use Security mode   The security parameter settings  i e  WEP  WPA  or WPA2 Channel settings   The frequency bands in use 
WLAN Operation Passive and Active Discover ModeWireless clients connect to the AP using a passive or active scanning  probing  process  Passive mode   AP openly advertises its service by periodically sending broadcast beacon frames containing the SSID  supported standards  and security settings Active mode   Wireless clients must know the name of the SSID  The wireless client initiates the process by broadcasting a probe request frame on multiple channels  Passive modeActive mode
WLAN Threats Video   WLAN ThreatsThis video will cover the following  Interception of DataWireless IntrudersDenial of Service  DoS  AttacksRogue APs
WLAN Threats Wireless Security OverviewA WLAN is open to anyone within range of an AP and the appropriate credentials to associate to it Attacks can be generated by outsiders  disgruntled employees  and even unintentionally by employees  Wireless networks are specifically susceptible to several threats  including the following Interception of dataWireless intrudersDenial of Service  DoS  AttacksRogue APs
WLAN Threats DoS AttacksWireless DoS attacks can be the result of the following Improperly configured devicesA malicious user intentionally interfering with the wireless communicationAccidental interferenceTo minimize the risk of a DoS attack due to improperly configured devices and malicious attacks  harden all devices  keep passwords secure  create backups  and ensure that all configuration changes are incorporated off-hours 
WLAN Threats Rogue Access PointsA rogue AP is an AP or wireless router that has been connected to a corporate network without explicit authorization and against corporate policy Once connected  the rogue AP can be used by an attacker to capture MAC addresses  capture data packets  gain access to network resources  or launch a man-in-the-middle attack A personal network hotspot could also be used as a rogue AP  For example  a user with secure network access enables their authorized Windows host to become a Wi-Fi AP To prevent the installation of rogue APs  organizations must configure WLCs with rogue AP policies and use monitoring software to actively monitor the radio spectrum for unauthorized APs 
WLAN Threats Man-in-the-Middle AttackIn a man-in-the-middle  MITM  attack  the hacker is positioned in between two legitimate entities in order to read or modify the data that passes between the two parties  A popular wireless MITM attack is called the  evil twin AP  attack  where an attacker introduces a rogue AP and configures it with the same SSID as a legitimate AP Defeating a MITM attack begins with identifying legitimate devices on the WLAN  To do this  users must be authenticated  After all of the legitimate devices are known  the network can be monitored for abnormal devices or traffic 
