4 3 guidelines for acl creation
guidelines for acl creation limited number of acls per interfacethere is a limit on the number of acls that can be applied on a router-interface  for example  a dual-stacked  i e  ipv4 and ipv6  router-interface can have up to four acls applied  as shown in the figure  specifically  a router-interface can have one outbound ipv4 acl one inbound ipv4 acl one inbound ipv6 acl one outbound ipv6 acl note  acls do not have to be configured in both directions  the number of acls and their direction applied to the interface will depend on the security-policy of the organization 
guidelines for acl creation acl best-practicesusing acls requires attention to detail and great care  mistakes can be costly in terms of downtime  troubleshooting efforts  and poor network service  basic planning is required before configuring an acl guidelinebenefitbase acls on the organizational security policies this will ensure you implement organizational security guidelines write out what you want the acl to do this will help you avoid inadvertently creating potential access problems use a text editor to create  edit  and save all of your acls this will help you create a library of reusable acls document the acls using the remark command this will help you  and others  understand the purpose of an ace test the acls on a development network before implementing them on a production network this will help you avoid costly errors 
module 4  acl conceptsenterprise networking  security  and automation v7 0 ensa 
module objectivesmodule title  acl conceptsmodule objective  explain how acls are used as part of a network security-policy topic titletopic objectivepurpose of aclsexplain how acls filter traffic wildcard-masks in aclsexplain how acls use wildcard-masks guidelines for acl creationexplain how to create acls types of ipv4 aclscompare standard and extended-ipv4-acls 
4 1 purpose of acls
purpose of acls what is an acl an acl is a series of ios commands that are used to filter packets based on information found in the packet-header  by default  a router does not have any acls configured  when an acl is applied to an interface  the router performs the additional task of evaluating all network packets as they pass through the interface to determine if the packet can be forwarded an acl uses a sequential list of permit or deny statements  known as access-control entries  aces  note  aces are also commonly called acl statements when network-traffic passes through an interface configured with an acl  the router compares the information within the packet against each ace  in sequential order  to determine if the packet matches one of the aces  this process is called packet-filtering 
purpose of acls what is an acl   cont  several tasks performed by routers require the use of acls to identify traffic limit network-traffic to increase network performanceprovide traffic flow-controlprovide a basic level of security for network accessfilter traffic based on traffic-typescreen hosts to permit or deny access to network servicesprovide priority to certain classes of network-traffic
purpose of acls packet-filteringpacket-filtering controls access to a network by analyzing the incoming and or outgoing packets and forwarding them or discarding them based on given criteria  packet-filtering can occur at layer-3 or layer 4 cisco routers support two types of acls standard-acls - acls only filter at layer-3 using the source ipv4-address only extended-acls - acls filter at layer-3 using the source and   or destination ipv4-address  they can also filter at layer 4 using tcp  udp ports  and optional protocol type information for finer control 
purpose of acls acl operationacls define the set of rules that give added control for packets that enter inbound interfaces  packets that relay through the router  and packets that exit outbound interfaces of the router acls can be configured to apply to inbound traffic and outbound traffic note  acls do not act on packets that originate from the router itself an inbound-acl filters packets before they are routed to the outbound interface  an inbound-acl is efficient because it saves the overhead of routing lookups if the packet is discarded an outbound-acl filters packets after being routed  regardless of the inbound interface 
purpose of acls acl operation  cont  when an acl is applied to an interface  it follows a specific operating procedure  here are the operational steps used when traffic has entered a router-interface with an inbound standard ipv4 acl configured the router extracts the source ipv4-address from the packet-header the router starts at the top of the acl and compares the source ipv4-address to each ace in a sequential order when a match is made  the router carries out the instruction  either permitting or denying the packet  and the remaining aces in the acl  if any  are not analyzed if the source ipv4-address does not match any aces in the acl  the packet is discarded because there is an implicit deny ace automatically applied to all acls the last ace statement of an acl is always an implicit deny that blocks all traffic  it is hidden and not displayed in the configuration note  an acl must have at least one permit statement otherwise all traffic will be denied due to the implicit deny ace statement 
purpose of acls packet tracer - acl demonstrationin this packet tracer  you will complete the following objectives part 1  verify local connectivity and test access-control-list part 2  remove access-control-list and repeat test
4 4 types of ipv4 acls
types of ipv4 acls standard and extended-aclsthere are two types of ipv4 acls standard-acls - these permit or deny-packets based only on the source ipv4-address extended-acls - these permit or deny-packets based on the source ipv4-address and destination ipv4-address  protocol type  source and destination tcp or udp ports and more 
types of ipv4 acls numbered and named-aclsnumbered-aclsacls numbered 1-99  or 1300-1999 are standard-acls  while acls numbered 100-199  or 2000-2699 are extended-acls r1 config   access-list   1-99  ip standard access list  100-199  ip extended access list  1100-1199  extended 48-bit mac-address access list  1300-1999  ip standard access list  expanded range   200-299  protocol type-code access list  2000-2699  ip extended access list  expanded range   700-799  48-bit mac-address access list rate-limit simple rate-limit specific access list template enable ip template acls router config   access-list  
types of ipv4 acls numbered and named-acls  cont  named-aclsnamed-acls are the preferred method to use when configuring acls  specifically  standard and extended-acls can be named to provide information about the purpose of the acl  for example  naming an extended-acl ftp-filter is far better than having a numbered-acl 100 the ip-access-list global-configuration-command is used to create a named-acl  as shown in the following example r1 config   ip-access-list-extended ftp-filter r1 config-ext-nacl   permit tcp 192 168 10 0 0 0 0 255 any eq ftp r1 config-ext-nacl   permit tcp 192 168 10 0 0 0 0 255 any eq ftp-data r1 config-ext-nacl  
types of ipv4 acls where to place aclsevery acl should be placed where it has the greatest impact on efficiency extended-acls should be located as close as possible to the source of the traffic to be filtered standard-acls should be located as close to the destination as possible  
types of ipv4 acls where to place acls  cont  factors influencing acl placementexplanationthe extent of organizational-controlplacement of the acl can depend on whether or not the organization has control of both the source and destination-networks bandwidth of the networks involvedit may be desirable to filter unwanted traffic at the source to prevent transmission of bandwidth-consuming-traffic ease of configurationit may be easier to implement an acl at the destination  but traffic will use bandwidth unnecessarily  an extended-acl could be used on each router where the traffic originated  this would save bandwidth by filtering the traffic at the source  but it would require creating extended-acls on multiple-routers 
types of ipv4 acls standard-acl placement examplein the figure  the administrator wants to prevent traffic originating in the 192 168 10 0 24 network from reaching the 192 168 30 0 24 network following the basic placement guidelines  the administrator would place a standard-acl on router r3  
types of ipv4 acls standard-acl placement example  cont  there are two possible interfaces on r3 to apply the standard-acl r3 s0 1 1 interface  inbound  - the standard-acl can be applied inbound on the r3 s0 1 1 interface to deny traffic from  10 network  however  it would also filter  10 traffic to the 192 168 31 0 24   31 in this example  network  therefore  the standard-acl should not be applied to this interface r3 g0 0 interface  outbound  - the standard-acl can be applied outbound on the r3 g0 0 0 interface  this will not affect other networks that are reachable by r3  packets from  10 network will still be able to reach the  31 network  this is the best interface to place the standard-acl to meet the traffic requirements 
types of ipv4 acls extended-acl placement exampleextended-acls should be located as close to the source as possible however  the organization can only place acls on devices that they control  therefore  the extended-acl placement must be determined in the context of where organizational-control extends in the figure  for example  company a wants to deny telnet and ftp traffic to company b s 192 168 30 0 24 network from their 192 168 11 0 24 network  while permitting all other traffic 
types of ipv4 acls extended-acl placement example  cont  an extended-acl on r3 would accomplish the task  but the administrator does not control r3  in addition  this solution allows unwanted traffic to cross the entire network  only to be blocked at the destination the solution is to place an extended-acl on r1 that specifies both source and destination addresses there are two possible interfaces on r1 to apply the extended-acl r1 s0 1 0 interface  outbound  - the extended-acl can be applied outbound on the s0 1 0 interface  this solution will process all packets leaving r1 including packets from 192 168 10 0 24 r1 g0 0 1 interface  inbound  - the extended-acl can be applied inbound on the g0 0 1 and only packets from the 192 168 11 0 24 network are subject to acl processing on r1  because the filter is to be limited to only those packets leaving the 192 168 11 0 24 network  applying the extended-acl to g0 1 is the best solution 
4 2 wildcard-masks in acls
wildcard-masks in acls wildcard-mask overviewa wildcard-mask is similar to a subnet-mask in that it uses the anding process to identify which bits in an ipv4-address to match  unlike a subnet-mask  in which binary 1 is equal to a match and binary 0 is not a match  in a wildcard-mask  the reverse is true an ipv4 ace uses a 32-bit wildcard-mask to determine which bits of the address to examine for a match wildcard-masks use the following rules to match binary 1s and 0s wildcard-mask bit 0 - match the corresponding bit value in the addresswildcard-mask bit 1 - ignore the corresponding bit value in the address
wildcard-masks in acls wildcard-mask overview  cont  wildcard-masklast-octet  in binary meaning  0 - match  1 - ignore 0 0 0 000000000match all octets 0 0 0 6300111111match the first three octets match the two left most bits of the last-octet ignore the last 6 bits0 0 0 1500001111match the first three octets match the four left most bits of the last-octet ignore the last 4 bits of the last-octet0 0 0 24811111100match the first three octets ignore the six left most bits of the last-octet match the last two bits0 0 0 25511111111match the first three octet ignore the last-octet
wildcard-masks in acls wildcard-mask typeswildcard to match a host  assume acl 10 needs an ace that only permits the host with ipv4-address 192 168 1 1  recall that  0  equals a match and  1  equals ignore  to match a specific host ipv4-address  a wildcard-mask consisting of all zeroes  i e   0 0 0 0  is required when the ace is processed  the wildcard-mask will permit only the 192 168 1 1 address  the resulting ace in acl 10 would be access-list 10 permit 192 168 1 1 0 0 0 0 decimalbinaryipv4-address192 168 1 111000000 10101000 00000001 00000001wildcard-mask0 0 0 000000000 00000000 00000000 00000000permitted ipv4-address192 168 1 111000000 10101000 00000001 00000001
wildcard-masks in acls wildcard-mask types  cont  wildcard-mask to match an ipv4 subnetacl 10 needs an ace that permits all hosts in the 192 168 1 0 24 network  the wildcard-mask 0 0 0 255 stipulates that the very first three octets must match exactly but the fourth octet does not when processed  the wildcard-mask 0 0 0 255 permits all hosts in the 192 168 1 0 24 network  the resulting ace in acl 10 would be access-list 10 permit 192 168 1 0 0 0 0 255 decimalbinaryipv4-address192 168 1 111000000 10101000 00000001 00000001wildcard-mask0 0 0 25500000000 00000000 00000000 11111111permitted ipv4-address192 168 1 0 2411000000 10101000 00000001 00000000
wildcard-masks in acls wildcard-mask types  cont  wildcard-mask to match an ipv4-address rangeacl 10 needs an ace that permits all hosts in the 192 168 16 0 24  192 168 17 0 24     192 168 31 0 24 networks  when processed  the wildcard-mask 0 0 15 255 permits all hosts in the 192 168 16 0 24 to 192 168 31 0 24 networks  the resulting ace in acl 10 would be access-list 10 permit 192 168 16 0 0 0 15 255 decimalbinaryipv4-address192 168 16 011000000 10101000 00010000 00000000wildcard-mask0 0 15 25500000000 00000000 00001111 11111111permitted ipv4-address192 168 16 0 24 to 192 168 31 0 2411000000 10101000 00010000 00000000   11000000 10101000 00011111 00000000
wildcard-masks in acls wildcard-mask calculationcalculating wildcard-masks can be challenging  one shortcut method is to subtract the subnet-mask from 255 255 255 255  some examples assume you wanted an ace in acl 10 to permit access to all users in the 192 168 3 0 24 network  to calculate the wildcard-mask  subtract the subnet-mask  255 255 255 0  from 255 255 255 255  this produces the wildcard-mask 0 0 0 255  the ace would be access-list 10 permit 192 168 3 0 0 0 0 255 assume you wanted an ace in acl 10 to permit network access for the 14 users in the subnet 192 168 3 32 28  subtract the subnet  i e   255 255 255 240  from 255 255 255 255  this produces the wildcard-mask 0 0 0 15  the ace would be access-list 10 permit 192 168 3 32 0 0 0 15 assume you needed an ace in acl 10 to permit only networks 192 168 10 0 and 192 168 11 0  these two networks could be summarized as 192 168 10 0 23 which is a subnet-mask of 255 255 254 0  subtract 255 255 254 0 subnet-mask from 255 255 255 255  this produces the wildcard-mask 0 0 1 255  the ace would be access-list 10 permit 192 168 10 0 0 0 1 255 
wildcard-masks in acls wildcard-mask keywordsthe cisco ios provides two keywords to identify the most common uses of wildcard-masking  the two keywords are host - this keyword substitutes for the 0 0 0 0 mask  this mask states that all ipv4-address-bits must match to filter just one host address any - this keyword substitutes for the 255 255 255 255 mask  this mask says to ignore the entire ipv4-address or to accept any addresses 
9 2 arp
arp arp overviewa device uses arp to determine the destination-mac-address of a local device when it knows its ipv4-address arp provides two basic functions resolving ipv4-addresses to mac-addressesmaintaining an arp-table of ipv4 to mac-address mappings
arp arp functionsto send a frame  a device will search its arp-table for a destination ipv4-address and a corresponding mac-address if the packet s destination ipv4-address is on the same network  the device will search the arp-table for the destination ipv4-address if the destination ipv4-address is on a different network  the device will search the arp-table for the ipv4-address of the default-gateway if the device locates the ipv4-address  its corresponding mac-address is used as the destination-mac-address in the frame  if there is no arp-table entry is found  then the device sends an arp-request 
arp video - arp-requestthis video will cover an arp-request for a mac-address 
arp video   arp operation - arp-replythis video will cover an arp-reply in response to an arp-request 
arp video - arp role in remote communicationsthis video will cover how an arp-request will provide a host the mac-address of the default-gateway 
arp removing entries from an arp-tableentries in the arp-table are not permanent and are removed when an arp cache timer expires after a specified period of time the duration of the arp cache timer differs depending on the operating system arp-table entries can also be removed manually by the administrator  
arp arp-tables on networking-devicesthe show-ip-arp command displays the arp-table on a cisco router the arp  a command displays the arp-table on a windows 10 pc r1  show-ip-arp          protocol  address          age  min   hardware addr   type   interfaceinternet  192 168 10 1            -   a0e0 af0d e140  arpa   gigabitethernet0 0 0c  users pc  arp -ainterface  192 168 1 124 --- 0x10internet address      physical address      type192 168 1 1           c8-d7-19-cc-a0-86     dynamic192 168 1 101         08-3e-0c-f5-f7-77     dynamic
arp arp issues   arp-broadcasting and arp-spoofingarp-requests are received and processed by every device on the local-network excessive arp broadcasts can cause some reduction in performance arp replies can be spoofed by a threat-actor to perform an arp-poisoning-attack enterprise level switches include mitigation techniques to protect against arp-attacks 
arp packet tracer   examine the arp-tablein this packet tracer  you will complete the following objectives examine an arp-requestexamine a switch mac-address tableexamine the arp process in remote communications
9 3 copper-cabling
ipv6 neighbor-discovery video   ipv6 neighbor-discoverythis video will explain the process of how ipv6 performs address-resolution using icmpv6 neighbor-solicitation and neighbor-advertisement messages 
ipv6 neighbor-discovery ipv6 neighbor-discovery messagesipv6 neighbor-discovery  nd  protocol provides address-resolutionrouter-discoveryredirection servicesicmpv6 neighbor-solicitation  ns  and neighbor-advertisement  na  messages are used for device-to-device messaging such as address-resolution icmtpv6 router-solicitation  rs  and router-advertisement  ra  messages are used for messaging between devices and routers for router-discovery icmpv6 redirect messages are used by routers for better next-hop selection 
ipv6 neighbor-discovery ipv6 neighbor-discovery   address-resolutionipv6 devices use nd to resolve the mac-address of a known ipv6-address icmpv6 neighbor-solicitation messages are sent using special ethernet and ipv6 multicast-addresses  
in this packet tracer  you will complete the following objectives part 1  ipv6 neighbor-discovery local-networkpart 2  ipv6 neighbor-discovery remote-networkipv6 neighbor-discovery packet tracer   ipv6 neighbor-discovery
15 5 file-sharing-services
file-sharing-services file-transfer-protocolftp was developed to allow for data-transfers between a client and a server  an ftp client is an application which runs on a computer that is being used to push and pull data from an ftp server step 1 - the client establishes the first connection to the server for control traffic using tcp port 21  the traffic consists of client commands and server replies step 2 - the client establishes the second connection to the server for the actual data transfer using tcp port 20  this connection is created every time there is data to be transferred step 3 - the data transfer can happen in either direction  the client can download  pull  data from the server  or the client can upload  push  data to the server 
file-sharing-services server-message-blockthe server-message-block  smb  is a client server  request-response file sharing protocol  servers can make their own resources available to clients on the network three functions of smb-messages start  authenticate  and terminate-sessionscontrol file and printer accessallow an application to send or receive messages to or from another deviceunlike the file sharing supported by ftp  clients establish a long-term-connection to servers  after the connection is established  the user of the client can access the resources on the server as though the resource is local to the client host 
15 4 ip-addressing services
ip-addressing services domain-name-servicedomain-names were created to convert the numeric ip-addresses into a simple  recognizable name fully-qualified domain-names  fqdns   such as http www cisco com  are much easier for people to remember than 198 133 219 25 the dns protocol defines an automated service that matches resource names with the required numeric-network-address  it includes the format for queries  responses  and data 
ip-addressing services dns-message formatthe dns server stores different types of resource-records that are used to resolve names  these records contain the name  address  and type of record some of these record types are as follows a - an end-device ipv4-addressns - an authoritative name serveraaaa - an end-device ipv6-address  pronounced quad-a mx - a mail exchange recordwhen a client makes a query  the server dns process first looks at its own records to resolve the name  if it is unable to resolve the name by using its stored records  it contacts other servers to resolve the name  after a match is found and returned to the original requesting server  the server temporarily stores the numbered address in the event that the same name is requested again 
ip-addressing services dns-message format  cont  dns uses the same message format between servers  consisting of a question  answer  authority  and additional information for all types of client-queries and server-responses  error-messages  and transfer of resource-record information dns-message sectiondescriptionquestionthe question for the name serveranswerresource-records answering the questionauthorityresource-records pointing toward an authorityadditionalresource-records holding additional information
ip-addressing services dns-hierarchydns uses a hierarchical-system to create a database to provide name resolution each dns server maintains a specific database file and is only responsible for managing name-to-ip-mappings for that small portion of the entire dns structure when a dns server receives a request for a name translation that is not within its dns-zone  the dns server forwards the request to another dns server within the proper zone for translation examples of top-level domains  com - a business or industry org - a non-profit organization au - australia
ip-addressing services the nslookup commandnslookup is a computer operating system utility that allows a user to manually query the dns servers configured on the device to resolve a given host name  this utility can also be used to troubleshoot name resolution issues and to verify the current status of the name servers when the nslookup command is issued  the default dns server configured for your host is displayed   the name of a host or domain can be entered at the nslookup prompt 
ip-addressing services dynamic-host-configuration-protocolthe dynamic-host-configuration-protocol  dhcp  for ipv4 service automates the assignment of ipv4-addresses  subnet-masks  gateways  and other ipv4 networking parameters  dhcp is considered dynamic-addressing compared to static-addressing  static-addressing is manually entering ip-address information when a host connects to the network  the dhcp-server is contacted  and an address is requested  the dhcp-server chooses an address from a configured range of addresses called a pool and assigns  leases  it to the host many networks use both dhcp and static-addressing  dhcp is used for general purpose hosts  such as end user devices  static-addressing is used for network-devices  such as gateway routers  switches  servers  and printers note  dhcp for ipv6  dhcpv6  provides similar services for ipv6 clients  however  dhcpv6 does not provide a default-gateway address  this can only be obtained dynamically from the router-advertisement message of the router 
ip-addressing services dhcp-operationthe dhcp process  when an ipv4  dhcp-configured device boots up or connects to the network  the client broadcasts a dhcp-discover  dhcpdiscover  message to identify any available dhcp-servers on the network a dhcp-server replies with a dhcp-offer  dhcpoffer  message  which offers a lease to the client   if a client receives more than one offer due to multiple dhcp-servers on the network  it must choose one  the client sends a dhcp-request  dhcprequest  message that identifies the explicit server and lease offer that the client is accepting  the server then returns a dhcp-acknowledgment  dhcpack  message that acknowledges to the client that the lease has been finalized if the offer is no longer valid  then the selected server responds with a dhcp negative acknowledgment  dhcpnak  message and the process must begin with a new dhcpdiscover-message  note  dhcpv6 has a set of messages that is similar to those for dhcpv4  the dhcpv6 messages are solicit  advertise  information request  and reply 
ip-addressing services lab   observe dns resolutionin this lab  you complete the following objectives  observe the dns conversion of a url to an ip-addressobserve dns lookup using the nslookup command on a web site observe dns lookup using the nslookup command on mail servers
15 2 peer-to-peer
peer-to-peer client-server modelclient and server processes are considered to be in the application-layer in the client server model  the device requesting the information is called a client and the device responding to the request is called a server application-layer protocols describe the format of the requests and responses between clients and servers 
peer-to-peer peer-to-peer-networksin a peer-to-peer  p2p  network  two or more computers are connected via a network and can share resources  such as printers and files  without having a dedicated server every connected end-device  known as a peer  can function as both a server and a client one computer might assume the role of server for one transaction while simultaneously serving as a client for another  the roles of client and server are set on a per request basis 
peer-to-peer peer-to-peer applicationsa p2p-application allows a device to act as both a client and a server within the same communication some p2p-applications use a hybrid system where each peer-accesses an index server to get the location of a resource stored on another peer 
peer-to-peer common p2p-applicationswith p2p-applications  each computer in the network that is running the application can act as a client or a server for the other computers in the network that are also running the application common p2p networks include the following bittorrentdirect-connectedonkeyfreenet
15 3 web and email-protocols
web and email-protocols hypertext-transfer-protocol and hypertext-markup-languagewhen a web address or uniform-resource-locator  url  is typed into a web browser  the web browser establishes a connection to the web service  the web service is running on the server that is using the http protocol  to better understand how the web browser and web-server interact  examine how a web page is opened in a browser step 1 the browser interprets the three parts of the url http  the protocol or scheme www cisco com  the server name index html  the specific filename requested 
web and email-protocols hypertext-transfer-protocol and hypertext-markup-language  cont   step 2the browser then checks with a name server to convert www cisco com into a numeric ip-address  which it uses to connect to the server  the client initiates an http request to a server by sending a get request to the server and asks for the index html file step 3in response to the request  the server sends the html-code for this web page to the browser 
web and email-protocols hypertext-transfer-protocol and hypertext-markup-language  cont   step 4the browser deciphers the html-code and formats the page for the browser window 
web and email-protocols http and httpshttp is a request response protocol that specifies the message-types used for that communication  the three common message-types are get  post  and put get - this is a client request for data  a client  web browser  sends the get-message to the web-server to request-html-pages post - this uploads data files to the web-server  such as form data put - this uploads resources or content to the web-server  such as an image note  http is not a secure protocol  for secure communications sent across the internet  https should be used 
web and email-protocols email-protocolsemail is a store-and-forward method of sending  storing  and retrieving electronic-messages across a network  email messages are stored in databases on mail servers  email clients communicate with mail servers to send and receive email the email-protocols used for operation are  simple-mail-transfer-protocol  smtp    used to send mail post-office-protocol  pop    imap   used for clients to receive mail 
web and email-protocols smtp  pop and imapwhen a client sends email  the client smtp process connects with a server smtp process on well-known port 25  after the connection is made  the client attempts to send the email to the server across the connection  when the server receives the message  it either places the message in a local account  if the recipient is local  or forwards the message to another mail server for delivery the destination email server may not be online or may be busy  if so  smtp-spools-messages to be sent at a later time  note  smtp message-formats require a message header  recipient email address   sender email address  and a message body 
web and email-protocols smtp  pop and imap  cont  pop is used by an application to retrieve mail from a mail server  when mail is downloaded from the server to the client using pop the messages are then deleted on the server  the server starts the pop service by passively listening on tcp port 110 for client connection requests  when a client wants to make use of the service  it sends a request to establish a tcp-connection with the server when the connection is established  the pop-server sends a greeting  the client and pop-server then exchange commands and responses until the connection is closed or aborted note  since pop does not store messages  it is not recommended for small businesses that need a centralized backup solution 
web and email-protocols smtp  pop and imap  cont  imap is another protocol that describes a method to retrieve email messages unlike pop  when a user connects to an imap-server  copies of the messages are downloaded to the client application  the original messages are kept on the server until manually deleted  when a user decides to delete a message  the server synchronizes that action and deletes the message from the server 
9 2 arp
arp arp overviewa device uses arp to determine the destination-mac-address of a local device when it knows its ipv4-address arp provides two basic functions resolving ipv4-addresses to mac-addressesmaintaining an arp-table of ipv4 to mac-address mappings
arp arp functionsto send a frame  a device will search its arp-table for a destination ipv4-address and a corresponding mac-address if the packet s destination ipv4-address is on the same network  the device will search the arp-table for the destination ipv4-address if the destination ipv4-address is on a different network  the device will search the arp-table for the ipv4-address of the default-gateway if the device locates the ipv4-address  its corresponding mac-address is used as the destination-mac-address in the frame  if there is no arp-table entry is found  then the device sends an arp-request 
arp video - arp-requestthis video will cover an arp-request for a mac-address 
arp video   arp operation - arp-replythis video will cover an arp-reply in response to an arp-request 
arp video - arp role in remote communicationsthis video will cover how an arp-request will provide a host the mac-address of the default-gateway 
arp removing entries from an arp-tableentries in the arp-table are not permanent and are removed when an arp cache timer expires after a specified period of time the duration of the arp cache timer differs depending on the operating system arp-table entries can also be removed manually by the administrator  
arp arp-tables on networking-devicesthe show-ip-arp command displays the arp-table on a cisco router the arp  a command displays the arp-table on a windows 10 pc r1  show-ip-arp          protocol  address          age  min   hardware addr   type   interfaceinternet  192 168 10 1            -   a0e0 af0d e140  arpa   gigabitethernet0 0 0c  users pc  arp -ainterface  192 168 1 124 --- 0x10internet address      physical address      type192 168 1 1           c8-d7-19-cc-a0-86     dynamic192 168 1 101         08-3e-0c-f5-f7-77     dynamic
arp arp issues   arp-broadcasting and arp-spoofingarp-requests are received and processed by every device on the local-network excessive arp broadcasts can cause some reduction in performance arp replies can be spoofed by a threat-actor to perform an arp-poisoning-attack enterprise level switches include mitigation techniques to protect against arp-attacks 
arp packet tracer   examine the arp-tablein this packet tracer  you will complete the following objectives examine an arp-requestexamine a switch mac-address tableexamine the arp process in remote communications
17 1 devices in a small network
devices in a small network small network topologiesthe majority of businesses are small most of the business networks are also small a small network design is usually simple small networks typically have a single wan connection provided by dsl  cable  or an ethernet connection large networks require an it department to maintain  secure  and troubleshoot network-devices and to protect organizational data  small networks are managed by a local it technician or by a contracted professional 
devices in a small network-device selection for a small networklike large networks  small networks require planning and design to meet user requirements  planning ensures that all requirements  cost factors  and deployment options are given due consideration  one of the first design considerations is the type of intermediary devices to use to support the network factors that must be considered when selecting network-devices include costspeed and types of ports interfacesexpandabilityoperating system features and services
devices in a small network ip-addressing for a small networkwhen implementing a network  create an ip-addressing-scheme and use it  all hosts and devices within an internetwork must have a unique address  devices that will factor into the ip-addressing-scheme include the following end user devices - the number and type of connections  i e   wired  wireless  remote-access servers and peripherals devices  e g   printers and security cameras intermediary devices including switches and access-pointsit is recommended that you plan  document  and maintain an ip-addressing-scheme based on device type  the use of a planned ip-addressing-scheme makes it easier to identify a type of device and to troubleshoot problems 
devices in a small network redundancy in a small networkin order to maintain a high degree of reliability  redundancy is required in the network design  redundancy helps to eliminate single-points of failure redundancy can be accomplished by installing duplicate equipment  it can also be accomplished by supplying duplicate network links for critical areas 
devices in a small network-traffic managementthe goal for a good network design is to enhance the productivity of the employees and minimize network downtime the routers and switches in a small network should be configured to support real-time traffic  such as voice and video  in an appropriate manner relative to other data traffic  a good network design will implement quality-of-service  qos  priority queuing has four queues  the high-priority queue is always emptied first 
17 3 scale to larger-networks
scale to larger-networks small network growthgrowth is a natural process for many small businesses  and their networks must grow accordingly  ideally  the network administrator has enough lead-time to make intelligent decisions about growing the network in alignment with the growth of the company to scale a network  several elements are required network documentation - physical and logical-topologydevice inventory - list of devices that use or comprise the networkbudget - itemized it budget  including fiscal year equipment purchasing budgettraffic analysis - protocols  applications  and services and their respective traffic requirements should be documentedthese elements are used to inform the decision-making that accompanies the scaling of a small network 
scale to larger-networks protocol analysisit is important to understand the type of traffic that is crossing the network as well as the current traffic flow  there are several network management tools that can be used for this purpose to determine traffic flow patterns  it is important to do the following capture traffic during peak utilization times to get a good representation of the different traffic-types perform the capture on different network-segments and devices as some traffic will be local to a particular segment information gathered by the protocol analyzer is evaluated based on the source and destination of the traffic  as well as the type of traffic being sent  this analysis can be used to make decisions on how to manage the traffic more efficiently 
scale to larger-networks employee network utilizationmany operating systems provide built-in tools to display such network utilization information  these tools can be used to capture a  snapshot  of information such as the following os and os versioncpu utilizationram utilizationdrive utilizationnon-network applicationsnetwork applicationsdocumenting snapshots for employees in a small network over a period of time is very useful to identify evolving protocol requirements and associated traffic flows  
17 2 small network applications and protocols
small network applications and protocols common applicationsafter you have set it up  your network still needs certain types of applications and protocols in order to work  the network is only as useful as the applications that are on it  there are two forms of software programs or processes that provide access to the network  network applications  applications that implement application-layer protocols and are able to communicate directly with the lower-layers of the protocol stack application-layer services  for applications that are not network-aware  the programs that interface with the network and prepare the data for transfer  
small network applications and protocols common protocolsnetwork-protocols support the applications and services used by employees in a small network network administrators commonly require access to network-devices and servers  the two most common remote-access solutions are telnet and secure-shell  ssh   hypertext-transfer-protocol  http  and hypertext-transfer-protocol secure  http  are used between web clients and web-servers simple-mail-transfer-protocol  smtp  is used to send email  post-office-protocol  pop3  or internet mail access protocol  imap  are used by clients to retrieve email file-transfer-protocol  ftp  and security file-transfer-protocol  sftp  are used to download and upload files between a client and an ftp server dynamic-host-configuration-protocol  dhcp  is used by clients to acquire an ip configuration from a dhcp-server the domain-name-service  dns  resolves domain-names to ip-addresses note  a server could provide multiple network services  for instance  a server could be an email  ftp and ssh server 
small network applications and protocols common protocols  cont  these network-protocols comprise the fundamental toolset of a network professional  defining processes on either end of a communication-session types of messages syntax of the messages meaning of informational fields how messages are sent and the expected response interaction with the next lower layer many companies have established a policy of using secure versions  e g   ssh  sftp  and https  of these protocols whenever possible 
small network applications and protocols voice and video applicationsbusinesses today are increasingly using ip telephony and streaming media to communicate with customers and business partners  as well as enabling their employees to work remotely the network administrator must ensure the proper equipment is installed in the network and that the network-devices are configured to ensure priority delivery the factors that a small network administrator must consider when supporting real-time applications infrastructure - does it have the capacity and capability to support real-time applications voip - voip is typically less expensive than ip telephony  but at the cost of quality and features ip telephony - this employs dedicated servers form call control and signaling real-time applications - the network must support quality-of-service  qos  mechanisms to minimize latency issues  real-time transport-protocol  rtp  and real-time transport control protocol  rtcp  and two protocols that support real-time applications 
17 5 host and ios commands
host and ios commands ip configuration on a windows hostin windows 10  you can access the ip-address details from the network and sharing center to quickly view the four important settings  address  mask  router  and dns  or you can issue the ipconfig command at the command-line of a windows computer use the ipconfig  all command to view the mac-address  as well as a number of details regarding the layer-3 addressing of the device if a host is configured as a dhcp-client  the ip-address configuration can be renewed using the ipconfig  release and ipconfig  renew commands the dns client service on windows pcs also optimizes the performance of dns name resolution by storing previously resolved names in memory  the ipconfig  displaydns command displays all of the cached dns entries on a windows computer system 
host and ios commands ip configuration on a linux hostverifying ip settings using the gui on a linux machine will differ depending on the linux distribution and desktop interface on the command-line  use the ifconfig command to display the status of the currently active interfaces and their ip configuration the linux ip-address command is used to display addresses and their properties  it can also be used to add or delete ip-addresses note  the output displayed may vary depending on the linux distribution 
host and ios commands ip configuration on a macos hostin the gui of a mac host  open network preferences   advanced to get the ip-addressing information the ifconfig command can also be used to verify the interface ip configuration at the command-line other useful macos commands to verify the host ip settings include networksetup -listallnetworkservices and the networksetup -getinfo  network service  
host and ios commands the arp commandthe arp command is executed from the windows  linux  or mac command prompt  the command lists all devices currently in the arp cache of the host the arp -a command displays the known ip-address and mac-address binding  the arp cache only displays information from devices that have been recently accessed to ensure that the arp cache is populated  ping a device so that it will have an entry in the arp-table the cache can be cleared by using the netsh interface ip delete arpcache command in the event the network administrator wants to repopulate the cache with updated information note  you may need administrator access on the host to be able to use the netsh interface ip delete arpcache command 
host and ios commands common show commands revisitedcommanddescriptionshow-running-configverifies the current configuration and settingsshow-interfacesverifies the interface status and displays any error-messagesshow-ip-interfaceverifies the layer-3 information of an interfaceshow arpverifies the list of known hosts on the local ethernet-lansshow-ip-routeverifies the layer-3 routing-informationshow protocolsverifies which protocols are operationalshow-versionverifies the memory  interfaces  and licenses of the device
host and ios commands the show-cdp neighbors commandcdp provides the following information about each cdp neighbor device device identifiers - the configured host name of a switch  router  or other deviceaddress list - up to one network-layer address for each protocol supportedport identifier - the name of the local and remote port in the form of an ascii character string  such as fastethernet 0 0capabilities list - whether a specific device is a layer-2 switch or a layer-3 switchplatform - the hardware platform of the device the show-cdp-neighbors-detail command reveals the ip-address of a neighboring device 
host and ios commands the show-ip-interface-brief commandone of the most frequently used commands is the show-ip-interface-brief command  this command provides a more abbreviated output than the show-ip-interface command  it provides a summary of the key information for all the network interfaces on a router 
host and ios commands video   the show-version commandthis video will demonstrate using the show-version command to view information about the router 
host and ios commands packet tracer   interpret show command outputthis activity is designed to reinforce the use of router show commands  you are not required to configure  but rather analyze the output of several show commands 
10 7 ios image management
ios image management video - managing cisco ios imagesthis video will demonstrate the process of upgrading the ios on a cisco router 
ios image management tftp servers as a backup locationas a network grows  cisco ios software images and configuration-files can be stored on a central tftp server  this helps to control the number of ios images and the revisions to those ios images  as well as the configuration-files that must be maintained production internetworks usually span wide areas and contain multiple-routers  for any network  it is good practice to keep a backup copy of the cisco ios software image in case the system image on the router becomes corrupted or accidentally erased widely distributed routers need a source or backup location for cisco ios software images  using a network tftp server allows image and configuration uploads and downloads over the network  the network tftp server can be another-router  a workstation  or a host system 
ios image management backup ios image to tftp server exampleto maintain network operations with minimum down time  it is necessary to have procedures in place for backing up cisco ios images  this allows the network administrator to quickly copy an image back to a router in case of a corrupted or erased image  use the following steps step 1  ping the tftp server  ping the tftp server to test connectivity step 2  verify image size in flash  verify that the tftp server has sufficient disk space to accommodate the cisco ios software image  use the show-flash0  command on the router to determine the size of the cisco ios image file  step 3  copy the image to the tftp server  copy the image to the tftp server by using the copy source-url destination-url command  after issuing the command by using the specified source and destination urls  the user is prompted for the source file name  ip-address of the remote-host  and destination file name  the transfer will then begin 
ios image management copy an ios image to a device examplestep 1  ping the tftp server  ping the tftp server to test connectivity step 2  verify the amount of free flash  ensure that there is sufficient flash space on the device being upgraded by using the show-flash  command  compare the free flash space with the new image file size step 3  copy the ios image file from the tftp server to the router by using the copy tftp  flash  command  after issuing this command  the user will be prompted for the ip-address of the remote-host  source file name  and destination file name  r1  copy tftp  flash  address or name of remote-host     2001 db8 cafe 100  99 source filename     isr4200-universalk9 ias 16 09 04 spa bin destination filename  isr4200-universalk9 ias 16 09 04 spa bin   accessing tftp 2001 db8 cafe 100  99  isr4200- universalk9 ias 16 09 04 spa bin    loading isr4200-universalk9 ias 16 09 04 spa bin from 2001 db8 cafe 100  99  via gigabitethernet0 0 0                         ok - 517153193 bytes  517153193 bytes copied in 868 128 secs  265652 bytes sec 
ios image management the boot-system commandduring startup  the bootstrap code parses the startup-configuration-file in nvram for the boot-system commands that specify the name and location of the cisco ios software image to load  several boot-system commands can be entered in sequence to provide a fault-tolerant boot plan if there are no boot-system commands in the configuration  the router defaults to loading the first valid cisco ios image in flash memory and runs it to upgrade to the copied ios image after that image is saved on the flash memory of the router  configure the router to load the new image by using the boot-system command  save the configuration  reload the router to boot the router with new image r1  configure-terminal r1 config   boot-system flash0 isr4200-universalk9 ias 16 09 04 spa bin r1 config   exit r1  copy-running-config-startup-config r1  reload
ios image management packet tracer - use a tftp server to upgrade a cisco ios imagein this packet tracer  you will complete the following objectives part 1  upgrade an ios image on a cisco device part 2  backup an ios image on a tftp server
10 6 router and switch file maintenance
router and switch file maintenance router file-systemsthe cisco ios file-system  ifs  allows the administrator to navigate to different directories and list the files in a directory  the administrator can also create subdirectories in flash memory or on a disk  the directories available depend on the device the example displays the output of the show file-systems command  which lists all of the available file-systems on a cisco 4221 router the asterisk indicates the current default file-system  the pound sign     indicates a bootable disk  both of these are assigned to the flash file-system by default
router and switch file maintenance router file-systems  cont  because flash is the default file-system  the dir command lists the contents of flash  of specific interest is the last listing  this is the name of the current cisco ios file image that is running in ram 
router and switch file maintenance router file-systems  cont  to view the contents of nvram  you must change the current default file-system by using the cd  change directory  command  as shown in the example the present working directory command is pwd  this command verifies that we are viewing the nvram directory  finally  the dir command lists the contents of nvram  although there are several configuration-files listed  of specific interest is the startup-configuration-file  
router and switch file maintenance switch file-systemswith the cisco 2960 switch flash file-system  you can copy configuration-files  and archive  upload and download  software images the command to view the file-systems on a catalyst switch is the same as on a cisco router  show file-systems 
router and switch file maintenance use a text file to back up a configurationconfiguration-files can be saved to a text file by using tera term step 1  on the file menu  click log  step 2  choose the location to save the file  tera term will begin capturing text  step 3  after capture has been started  execute the show-running-config or show-startup-config command at the privileged-exec-prompt  text displayed in the terminal window will be directed to the chosen file  step 4  when the capture is complete  select close in the tera term  log window  step 5  view the file to verify that it was not corrupted 
router and switch file maintenance use a text file to restore a configurationa configuration can be copied from a file and then directly pasted to a device  the file will require editing to ensure that encrypted passwords are in plaintext  and that non-command text such as --more-- and ios messages are removed  in addition  you may want to add enable and configure-terminal to the beginning of the file or enter global configuration-mode before pasting the configuration  instead of copying and pasting  a configuration can be restored from a text file by using tera term  when using tera term  the steps are as follows step 1  on the file menu  click send file   step 2  locate the file to be copied into the device and click open   step 3  tera term will paste the file into the device the text in the file will be applied as commands in the cli and become the running-configuration on the device 
router and switch file maintenance using tftp to back up and restore a configurationfollow these steps to back up the running-configuration to a tftp server step 1  enter the copy running-config tftp command  step 2  enter the ip-address of the host where the configuration-file will be stored  step 3  enter the name to assign to the configuration-file  step 4  press enter to confirm each choice use the following steps to restore the running-configuration from a tftp server step 1  enter the copy tftp running-config command  step 2  enter the ip-address of the host where the configuration-file is stored  step 3  enter the name to assign to the configuration-file  step 4  press enter to confirm each choice r1  copy running-config tftp remote-host    192 168 10 254 name of the configuration-file to write r1-config   r1-jan-2019write file r1-jan-2019 to 192 168 10 254   confirm  writing r1-jan-2019         ok 
router and switch file maintenance usb ports on a cisco routerthe universal-serial-bus  usb  storage feature enables certain models of cisco routers to support usb flash drives  the usb flash feature provides an optional secondary storage capability and an additional boot device  the usb ports of a cisco 4321 router are shown in the figure use the dir command to view the contents of the usb flash drive 
router and switch file maintenance using usb to back up and restore a configurationissue the show file-systems command to verify that the usb drive is there and confirm its name  for this example  the usb file-system is named usbflash0  use the copy-run-usbflash0   command to copy the configuration-file to the usb flash drive  be sure to use the name of the flash drive  as indicated in the file-system  the slash is optional but indicates the root directory of the usb flash drive the ios will prompt for the filename  if the file already exists on the usb flash drive  the router will prompt to overwrite r1  copy running-config usbflash0  destination filename  running-config   r1-config  warning there is a file already existing with this name do you want to over write   confirm  5024 bytes copied in 1 796 secs  2797 bytes sec  r1 
router and switch file maintenance using usb to back up and restore a configuration  cont  use the dir command to see the file on the usb drive and use the more command to see the contents to restore configurations with a usb flash drive  it will be necessary to edit the usb r1-config file with a text editor  assuming the file name is r1-config  use the command copy usbflash0  r1-config running-config to restore a running-configuration 
router and switch file maintenance password recovery procedurespasswords on devices are used to prevent unauthorized-access  for encrypted passwords  such as the enable-secret passwords  the passwords must be replaced after recovery  depending on the device  the detailed procedure for password recovery varies  however  all the password recovery procedures follow the same principle step 1  enter the rommon mode  step 2  change the configuration register  step 3  copy the startup-config to the running-config  step 4  change the password  step 5  save the running-config as the new startup-config  step 6  reload the device 
router and switch file maintenance password recovery examplestep 1  enter the rommon mode  with console access  a user can access the rommon mode by using a break sequence during the boot up process or removing the external flash memory when the device is powered off  when successful  the rommon 1   prompt displays  as shown in the example readonly rommon initialized monitor  command  boot  aborted due to user interrupt rommon 1   
router and switch file maintenance password recovery example  cont  step 2  change the configuration register  the confreg 0x2142 command allows the user to set the configuration register to 0x2142  which causes the device to ignore the startup config file during startup  after setting the configuration register to 0x2142  type reset at the prompt to restart the device  enter the break sequence while the device is rebooting and decompressing the ios  the example displays the terminal output of a 1941 router in the rommon mode after using a break sequence during the boot up process rommon 1   confreg 0x2142 rommon 2   reset system bootstrap  version 15 0 1r m9  release software  fc1 technical support  http www cisco com techsupport copyright  c  2010 by cisco systems  inc   output omitted 
router and switch file maintenance password recovery example  cont  step 3  copy the startup-config to the running-config  after the device has finished reloading  issue the copy startup-config running-config command caution  do not enter copy-running-config-startup-config  this command erases your original startup-configuration router  copy startup-config running-configdestination filename  running-config   1450 bytes copied in 0 156 secs  9295 bytes sec  r1 
router and switch file maintenance password recovery example  cont  step 4  change the password  because you are in privileged-exec-mode  you can now configure all the necessary passwords note  the password cisco is not a strong password and is used here only as an exampler1  configure-terminal enter configuration commands  one per line  end with cntl z  r1 config   enable-secret cisco
router and switch file maintenance password recovery example  cont  step 5  save the running-config as the new startup-config  after the new passwords are configured  change the configuration register back to 0x2102 by using the config-register 0x2102 command in the global configuration-mode  save the running-config to startup-config r1 config   config-register 0x2102r1 config   end r1  copy-running-config-startup-config destination filename  startup-config   building configuration     ok  r1 
router and switch file maintenance packet tracer - backup configuration-filesin this activity  you will complete the following objectives  part 1  establish connectivity to tftp server part 2  transfer the configuration-file from tftp server part 3  backup configuration and ios to tftp server
router and switch file maintenance lab - use tera term to manage router configuration-filesin this lab  you will complete the following objectives part 1  configure basic-device-settingspart 2  use terminal emulation software to create a backup configuration-filepart 3  use a backup configuration-file to restore a router
router and switch file maintenance packet tracer - use tftp  flash  and usb to manage configuration-files   physical mode lab - use tftp  flash  and usb to manage configuration-filesin this packet tracer physical mode activity and in the lab  you will complete the following objectives part 1  cable the network and configure basic-device-settingspart 2  use tftp to back up and restore the switch running-configurationpart 3  use tftp to back up and restore the router running-configurationpart 4  back up and restore running-configurations using router flash memorypart 5   optional  use a usb drive to back up and restore the running-configuration  lab only 
router and switch file maintenance packet tracer   research password recovery procedures   physical mode lab - research password recovery proceduresin this packet tracer physical mode activity and in the lab  you will complete the following objectives part 1  research the configuration registerpart 2  document the password recovery procedure for a specific cisco router
17 4 verify connectivity
verify connectivity verify connectivity with pingwhether your network is small and new  or you are scaling an existing network  you will always want to be able to verify that your components are properly connected to each other and to the internet  the ping command  available on most operating systems  is the most effective way to quickly test layer-3 connectivity between a source and destination-ip-address the ping command uses the internet-control-message-protocol  icmp  echo  icmp type 8  and echo-reply  icmp type 0  messages  
verify connectivity verify connectivity with ping  cont  on a windows 10 host  the ping command sends four consecutive icmp-echo-messages and expects four consecutive icmp echo replies from the destination  the ios ping sends five icmp-echo-messages and displays an indicator for each icmp-echo-reply received ios ping indicators are as follows elementdescriptionexclamation mark indicates successful receipt of an echo-reply-message  it validates a layer-3 connection between source and destination a period means that time expired waiting for an echo-reply-message  this indicates a connectivity problem occurred somewhere along the path uppercase u indicates a router along the path responded with an icmp type 3  destination unreachable  error message  possible reasons include the router does not know the direction to the destination-network or it could not find the host on the destination-network note  other possible ping replies include q  m     or    however  the meaning of these are out of scope for this module 
verify connectivity extended-pingthe cisco ios offers an  extended  mode of the ping command extended-ping is entered in privileged-exec-mode by typing ping without a destination-ip-address  you will then be given several prompts to customize the extended-ping note  pressing enter accepts the indicated default values  the ping ipv6 command is used for ipv6 extended-pings 
verify connectivity verify connectivity with traceroutethe ping command is useful to quickly determine if there is a layer-3 connectivity problem  however  it does not identify where the problem is located along the path traceroute can help locate layer-3 problem areas in a network  a trace returns a list of hops as a packet is routed through a network the syntax of the trace command varies between operating systems 
verify connectivity verify connectivity with traceroute  cont  the following is a sample output of tracert command on a windows 10 host note  use ctrl-c to interrupt a tracert in windows the only successful response was from the gateway on r1  trace requests to the next-hop timed out as indicated by the asterisk      meaning that the next-hop router did not respond or there is a failure in the network path  in this example there appears to be a problem between r1 and r2 
verify connectivity verify connectivity with traceroute  cont  the following are sample outputs of traceroute command from r1 on the left  the trace validated that it could successfully reach pc b on the right  the 10 1 1 10 host was not available  and the output shows asterisks where replies timed out  timeouts indicate a potential network problem  use ctrl-shift-6 to interrupt a traceroute in cisco ios note  windows implementation of traceroute  tracert  sends icmp-echo-requests  cisco ios and linux use udp with an invalid port-number  the final destination will return an icmp port-unreachable message 
verify connectivity extended traceroutelike the extended-ping command  there is also an extended traceroute command  it allows the administrator to adjust parameters related to the command operation  the windows tracert command allows the input of several parameters through options in the command-line  however  it is not guided like the extended traceroute ios command  the following output displays the available options for the windows tracert command 
verify connectivity extended traceroute  cont  the cisco ios extended traceroute option enables the user to create a special type of trace by adjusting parameters related to the command operation  extended traceroute is entered in privileged-exec-mode by typing traceroute without a destination-ip-address  ios will guide you through the command options by presenting a number of prompts related to the setting of all the different parameters note  pressing enter accepts the indicated default values 
verify connectivity network-baselineone of the most effective tools for monitoring and troubleshooting network performance is to establish a network-baseline  one method for starting a baseline is to copy and paste the results from an executed ping  trace  or other relevant commands into a text file  these text files can be time stamped with the date and saved into an archive for later retrieval and comparison among items to consider are error-messages and the response times from host to host corporate networks should have extensive baselines  more extensive than we can describe in this course  professional-grade software tools are available for storing and maintaining baseline information  
verify connectivity lab   test network latency with ping and traceroutein this lab  you will complete the following objectives part 1  use ping to document network latencypart 2  use traceroute to document network latency
6 3 data-link frame
data-link frame the framedata is encapsulated by the data-link layer with a header and a trailer to form a frame a data-link frame has three parts headerdatatrailerthe fields of the header and trailer vary according to data-link layer protocol the amount of control information carried with in the frame varies according to access-control information and logical-topology 
data-link frame frame fieldsfielddescriptionframe start and stopidentifies beginning and end of frameaddressingindicates source and destination nodestypeidentifies encapsulated layer-3 protocolcontrolidentifies flow-control services datacontains the frame payloaderror-detectionused for determine transmission errors
data-link frame layer-2 addressesalso referred to as a physical address contained in the frame header used only for local delivery of a frame on the link updated by each device that forwards the frame 
data-link frame lan and wan framesthe logical-topology and physical-media determine the data-link protocol used ethernet802 11 wirelesspoint-to-point  ppp high-level data-link control  hdlc frame-relayeach protocol performs media access-control for specified logical topologies 
7 1 ethernet-frames
ethernet-frames ethernet encapsulationethernet operates in the data-link layer and the physical-layer it is a family of networking technologies defined in the ieee 802 2 and 802 3 standards 
ethernet-frames data-link sublayersthe 802 lan man standards  including ethernet  use two separate sublayers of the data-link layer to operate llc-sublayer   ieee 802 2  places information in the frame to identify which network-layer protocol is used for the frame mac-sublayer   ieee 802 3  802 11  or 802 15  responsible for data-encapsulation and media access-control  and provides data-link layer addressing 
ethernet-frames mac-sublayerthe mac-sublayer is responsible for data-encapsulation and accessing the media data-encapsulationieee 802 3 data-encapsulation includes the following ethernet-frame - this is the internal structure of the ethernet-frame ethernet-addressing - the ethernet-frame includes both a source and destination-mac-address to deliver the ethernet-frame from ethernet-nic to ethernet-nic on the same lan ethernet error-detection - the ethernet-frame includes a frame-check-sequence  fcs  trailer used for error-detection 
ethernet-frames mac-sublayermedia accessthe ieee 802 3 mac-sublayer includes the specifications for different ethernet communications standards over various types of media including copper and fiber legacy ethernet using a bus topology or hubs  is a shared  half-duplex medium  ethernet over a half-duplex medium uses a contention-based-access-method  carrier sense multiple access collision-detection  csma cd   ethernet-lans of today use switches that operate in full-duplex  full-duplex-communications with ethernet switches do not require access-control through csma cd 
ethernet-frames ethernet-frame fieldsthe minimum ethernet-frame size is 64 bytes and the maximum is 1518 bytes  the preamble-field is not included when describing the size of the frame any frame less than 64 bytes in length is considered a  collision-fragment  or  runt-frame  and is automatically discarded  frames with more than 1500 bytes of data are considered  jumbo  or  baby-giant-frames  if the size of a transmitted frame is less than the minimum  or greater than the maximum  the receiving device drops the frame  dropped frames are likely to be the result of collisions or other unwanted signals  they are considered invalid  jumbo frames are usually supported by most fast-ethernet and gigabit-ethernet switches and nics 
ethernet-frames lab   use wireshark to examine ethernet-framesin this lab  you will complete the following objectives part 1  examine the header fields in an ethernet ii framepart 2  use wireshark to capture and analyze ethernet-frames
7 2 ethernet mac-address
ethernet mac-addresses mac-address and hexadecimalan ethernet mac-address consists of a 48-bit binary value  expressed using 12 hexadecimal values given that 8 bits  one byte  is a common binary grouping  binary 00000000 to 11111111 can be represented in hexadecimal as the range 00 to ff when using hexadecimal  leading zeroes are always displayed to complete the 8-bit representation  for example the binary value 0000 1010 is represented in hexadecimal as 0a hexadecimal-numbers are often represented by the value preceded by 0x  e g   0x73  to distinguish between decimal and hexadecimal values in documentation hexadecimal may also be represented by a subscript 16  or the hex number followed by an h  e g   73h  
ethernet mac-addresses ethernet mac-addressin an ethernet-lan  every network-device is connected to the same  shared media  mac-addressing provides a method for device identification at the data-link layer of the osi model an ethernet mac-address is a 48-bit address expressed using 12 hexadecimal digits  because a byte equals 8 bits  we can also say that a mac-address is 6 bytes in length all mac-addresses must be unique to the ethernet device or ethernet-interface  to ensure this  all vendors that sell ethernet devices must register with the ieee to obtain a unique 6 hexadecimal  i e   24-bit or 3-byte  code called the organizationally-unique-identifier  oui  an ethernet mac-address consists of a 6 hexadecimal vendor oui code followed by a 6 hexadecimal vendor-assigned value 
ethernet mac-addresses frame processingwhen a device is forwarding a message to an ethernet-network  the ethernet-header include a source-mac-address and a destination-mac-address when a nic receives an ethernet-frame  it examines the destination-mac-address to see if it matches the physical mac-address that is stored in ram  if there is no match  the device discards the frame  if there is a match  it passes the frame up the osi layers  where the de-encapsulation process takes place note  ethernet-nics will also accept frames if the destination-mac-address is a broadcast or a multicast-group of which the host is a member any device that is the source or destination of an ethernet-frame  will have an ethernet-nic and therefore  a mac-address  this includes workstations  servers  printers  mobile devices  and routers 
ethernet mac-addresses unicast mac-addressin ethernet  different mac-addresses are used for layer-2 unicast  broadcast  and multicast communications a unicast mac-address is the unique address that is used when a frame is sent from a single transmitting device to a single destination-device the process that a source host uses to determine the destination-mac-address associated with an ipv4-address is known as address-resolution-protocol  arp   the process that a source host uses to determine the destination-mac-address associated with an ipv6-address is known as neighbor-discovery  nd  note  the source-mac-address must always be a unicast 
ethernet mac-addresses broadcast mac-addressan ethernet broadcast-frame is received and processed by every device on the ethernet-lan  the features of an ethernet broadcast are as follows it has a destination-mac-address of ff-ff-ff-ff-ff-ff in hexadecimal  48 ones in binary  it is flooded out all ethernet switch ports except the incoming port  it is not forwarded by a router if the encapsulated data is an ipv4 broadcast-packet  this means the packet contains a destination ipv4-address that has all ones  1s  in the host-portion  this numbering in the address means that all hosts on that local-network  broadcast-domain  will receive and process the packet 
ethernet mac-addresses multicast mac-addressan ethernet multicast-frame is received and processed by a group of devices that belong to the same multicast-group  there is a destination-mac-address of 01-00-5e when the encapsulated data is an ipv4 multicast-packet and a destination-mac-address of 33-33 when the encapsulated data is an ipv6 multicast-packet there are other reserved multicast destination-mac-addresses for when the encapsulated data is not ip  such as spanning-tree-protocol  stp  it is flooded out all ethernet switch ports except the incoming port  unless the switch is configured for multicast-snooping  it is not forwarded by a router  unless the router is configured to route multicast-packets because multicast-addresses represent a group of addresses  sometimes called a host-group   they can only be used as the destination of a packet  the source will always be a unicast address as with the unicast and broadcast addresses  the multicast ip-address requires a corresponding multicast mac-address 
ethernet mac-addresses lab   view network-device mac-addressesin this lab  you will complete the following objectives part 1  set up the topology and initialize devicespart 2  configure devices and verify connectivitypart 3  display  describe  and analyze ethernet mac-addresses
7 3 the mac-address table
the mac-address table switch fundamentalsa layer-2 ethernet switch uses layer-2 mac-addresses to make forwarding decisions  it is completely unaware of the data  protocol  being carried in the data portion of the frame  such as an ipv4-packet  an arp message  or an ipv6 nd packet  the switch makes its forwarding decisions based solely on the layer-2 ethernet mac-addresses an ethernet switch examines its mac-address table to make a forwarding decision for each frame  unlike legacy ethernet hubs that repeat bits out all ports except the incoming port  when a switch is turned on  the mac-address table is emptynote  the mac-address table is sometimes referred to as a content-addressable-memory  cam  table 
the mac-address table switch learning and forwardingexamine the source-mac-address  learn every frame that enters a switch is checked for new information to learn  it does this by examining the source-mac-address of the frame and the port-number where the frame entered the switch  if the source-mac-address does not exist  it is added to the table along with the incoming port-number  if the source-mac-address does exist  the switch updates the refresh timer for that entry  by default  most ethernet switches keep an entry in the table for 5 minutes note  if the source-mac-address does exist in the table but on a different port  the switch treats this as a new entry  the entry is replaced using the same mac-address but with the more current port-number 
the mac-address table switch learning and forwarding  contd  find the destination-mac-address  forward if the destination-mac-address is a unicast address  the switch will look for a match between the destination-mac-address of the frame and an entry in its mac-address table  if the destination-mac-address is in the table  it will forward the frame out the specified port  if the destination-mac-address is not in the table  the switch will forward the frame out all ports except the incoming port  this is called an unknown unicast note  if the destination-mac-address is a broadcast or a multicast  the frame is also flooded out all ports except the incoming port 
the mac-address table filtering framesas a switch receives frames from different devices  it is able to populate its mac-address table by examining the source-mac-address of every frame  when the mac-address table of the switch contains the destination-mac-address  it is able to filter the frame and forward out a single port 
the mac-address table video   mac-address tables on connected switchesthis video will cover the following how switches build mac-address tableshow switches forward frames base on the content of their mac-address tables
the mac-address table video   sending the frame to the default-gatewaythis video will cover the following what a switch does when the destination amc address is not listed in the switch s mac-address table what a switch does when the source amc address is not listed in the switch s mac-address table
the mac-address table lab   view the switch mac-address tablein this lab  you will complete the following objectives part 1  build and configure the networkpart 2  examine the switch mac-address table
6 2 topologies
topologies physical and logical topologiesthe topology of a network is the arrangement and relationship of the network-devices and the interconnections between them there are two types of topologies used when describing networks physical-topology   shows physical-connections and how devices are interconnected logical-topology   identifies the virtual-connections between devices using device interfaces and ip-addressing-schemes 
topologies wan-topologiesthere are three common physical wan-topologies  point-to-point   the simplest and most common wan topology  consists of a permanent link between two endpoints hub-and-spoke   similar to a star-topology where a central site interconnects branch sites through point-to-point-links mesh   provides high availability but requires every end system to be connected to every other end system 
topologies point-to-point wan topologyphysical point-to-point topologies directly connect two nodes the nodes may not share the media with other hosts because all frames on the media can only travel to or from the two nodes  point-to-point wan protocols can be very simple 
topologies lan topologiesend-devices on lans are typically interconnected using a star or extended star-topology  star and extended star topologies are easy to install  very scalable and easy to troubleshoot early ethernet and legacy-token-ring-technologies provide two additional topologies bus   all end systems chained together and terminated on each end ring   each end system is connected to its respective neighbors to form a ring 
topologies half and full-duplex-communicationhalf-duplex-communicationonly allows one device to send or receive at a time on a shared-medium used on wlans and legacy bus topologies with ethernet hubs full-duplex-communicationallows both devices to simultaneously transmit and receive on a shared-medium ethernet switches operate in full-duplex-mode 
topologies access-control methodscontention-based-accessall nodes operating in half-duplex  competing for use of the medium  examples are carrier-sense-multiple-access-with-collision-detection  csma cd  as used on legacy-bus-topology-ethernet carrier-sense-multiple-access-with-collision-avoidance  csma ca  as used on wireless-lans controlled-accessdeterministic access where each node has its own time on the medium used on legacy-networks such as token-ring and arcnet 
topologies contention-based-access   csma cdcsma cdused by legacy ethernet-lans operates in half-duplex-mode where only one device sends or receives at a time uses a collision-detection process to govern when a device can send and what happens if multiple devices send at the same time csma cd collision-detection process devices transmitting simultaneously will result in a signal collision on the shared media devices detect the collision devices wait a random period of time and retransmit data 
topologies contention-based-access   csma cacsma caused by ieee 802 11 wlans operates in half-duplex-mode where only one device sends or receives at a time uses a collision-avoidance process to govern when a device can send and what happens if multiple devices send at the same time csma ca collision-avoidance process when transmitting  devices also include the time duration needed for the transmission other devices on the shared-medium receive the time duration information and know how long the medium will be unavailable 
2 7 configure ip-addressing
configure ip-addressing manual ip-address configuration for end-devicesend-devices on the network need an ip-address in order to communicate with other devices on the network  ipv4-address information can be entered into end-devices manually  or automatically using dynamic-host-configuration-protocol  dhcp  to manually configure an ipv4-address on a windows pc  open the control-panel   network-sharing-center   change-adapter-settings and choose the adapter  next right-click and select properties to display the local-area-connection-properties next  click properties to open the internet-protocol-version-4  tcp ipv4  properties window  then configure the ipv4-address and subnet-mask information  and default-gateway note  ipv6-addressing and configuration options are similar to ipv4 
configure ip-addressing  automatic ip-address configuration for end-devicesdhcp enables automatic ipv4-address configuration for every end-device that is dhcp-enabled end-devices are typically by default using dhcp for automatic ipv4-address configuration to configure dhcp on a windows pc  open the control-panel   network-sharing-center   change-adapter-settings and choose the adapter  next right-click and select properties to display the local-area-connection-properties next  click properties to open the internet-protocol-version-4  tcp ipv4  properties window  then select obtain an ip-address automatically and obtain dns-server-address automatically note  ipv6 uses dhcpv6 and slaac  stateless-address autoconfiguration  for dynamic address allocation 
configure ip-addressing switch virtual-interface configurationto access the switch remotely  an ip-address and a subnet-mask must be configured on the svi  to configure an svi on a switch enter the interface-vlan 1 command in global configuration-mode next assign an ipv4-address using the ip-address ip-address subnet-mask command finally  enable the virtual-interface using the no-shutdown command  
2 4 basic device configuration
basic device configuration device namesthe first configuration command on any device should be to give it a unique hostname  by default  all devices are assigned a factory default name  for example  a cisco ios switch is  switch  guideline for naming-devices start with a lettercontain no spacesend with a letter or digituse only letters  digits  and dashesbe less than 64 characters in lengthnote  to return the switch to the default prompt  use the no-hostname global config command 
basic device configuration password guidelinesthe use of weak or easily guessed passwords are a security concern all networking-devices should limit administrative-access by securing privileged exec  user exec  and remote telnet access with passwords  in addition  all passwords should be encrypted and legal notifications provided password guidelines  use passwords that are more than eight characters in length use a combination of upper and lowercase letters  numbers  special characters  and or numeric sequences avoid using the same password for all devices do not use common-words because they are easily guessed note  most of the labs in this course use simple passwords such as cisco or class  these passwords are considered weak and easily guessable and should be avoided in production environments 
basic device configuration configure passwordssecuring user-exec-mode access first enter line-console configuration-mode using the line-console 0 command in global configuration-mode next  specify the user-exec-mode password using the password password command  finally  enable user exec access using the login command securing privileged-exec-mode access first enter global configuration-mode next  use the enable-secret password command  
basic device configuration configure passwords  cont  securing vty-line access first enter line-vty configuration-mode using the line-vty 0 15 command in global configuration-mode next  specify the vty password using the password password command  finally  enable vty access using the login command note  vty-lines enable remote-access using telnet or ssh to the device  many cisco-switches support up to 16 vty-lines that are numbered 0 to 15  
basic device configuration encrypt passwordsthe startup-config and running-config files display most passwords in plaintext to encrypt all plaintext passwords  use the service-password-encryption global config command use the show-running-config command to verify that the passwords on the device are now encrypted  
basic device configuration banner-messagesa banner-message is important to warn unauthorized-personnel from attempting to access the device  to create a banner-message of the day on a network-device  use the banner-motd   the message of the day   global config command  note  the     in the command syntax is called the delimiting-character  it is entered before and after the message  the banner will be displayed on attempts to access the device  
1 4 basic router configuration
basic router configuration configure basic router settingscisco routers and cisco-switches have many similarities  they support a similar modal operating system  similar command structures  and many of the same commands  in addition  both devices have similar initial configuration steps  for example  the following configuration tasks should always be performed  name the device to distinguish it from other-routers and configure passwords  as shown in the example 
basic router configuration configure basic router settings  cont  configure a banner to provide legal notification of unauthorized-access  as shown in the example save the changes on a router  as shown in the example 
basic router configuration dual-stack topologyone distinguishing feature between switches and routers is the type of interfaces supported by each  for example  layer-2 switches support lans  therefore  they have multiple fastethernet or gigabit-ethernet ports  the dual-stack topology in the figure is used to demonstrate the configuration of router ipv4 and ipv6 interfaces 
basic router configuration configure router-interfacesrouters support lans and wans and can interconnect different types of networks  therefore  they support many types of interfaces  for example  g2 isrs have one or two integrated gigabit-ethernet-interfaces and high-speed-wan-interface-card  hwic  slots to accommodate other types of network interfaces  including serial  dsl  and cable interfaces to be available  an interface must be configured with at least one ip-address - use the ip-address ip-address subnet-mask and the ipv6-address ipv6-address prefix interface configuration commands activated - by default  lan and wan interfaces are not activated  shutdown   to enable an interface  it must be activated using the no-shutdown command   this is similar to powering on the interface   the interface must also be connected to another device  a hub  a switch  or another-router  for the physical-layer to be active description - optionally  the interface could also be configured with a short description of up to 240 characters  it is good practice to configure a description on each interface  on production networks  the benefits of interface descriptions are quickly realized as they are helpful in troubleshooting and in identifying a third-party connection and contact information 
basic router configuration configure router-interfaces  cont  the example shows the configure for the interfaces on r1 
basic router configuration ipv4-loopback-interfacesanother common configuration of cisco-ios-routers is enabling a loopback-interface the loopback-interface is a logical interface that is internal to the router  it is not assigned to a physical port and can never be connected to any other device  it is considered a software interface that is automatically placed in an  up  state  as long as the router is functioning the loopback-interface is useful in testing and managing a cisco ios device because it ensures that at least one interface will always be available  for example  it can be used for testing purposes  such as testing internal routing-processes  by emulating networks behind the router loopback-interfaces are also commonly used in lab environments to create additional interfaces  for example  you can create multiple loopback-interfaces on a router to simulate more networks for configuration practice and testing purposes  the ipv4-address for each loopback-interface must be unique and unused by any other interface  in this curriculum  we often use a loopback-interface to simulate a link to the internet enabling and assigning a loopback-address is simple router config   interface loopback number router config-if   ip-address ip-address subnet-mask 
basic router configuration packet tracer   configure router-interfacesin this packet tracer activity  you will do the following configure ipv4-addressing and verify connectivityconfigure ipv6-addressing and verify connectivity
introduction to networks v7 0  itn module 10  basic router configuration
module objectivesmodule title  basic router configurationmodule objective  implement initial-settings on a router and end-devices topic titletopic objectiveconfigure initial router settingsconfigure initial-settings on an ios cisco router configure interfacesconfigure two active interfaces on a cisco-ios-router configure the default-gatewayconfigure devices to use the default-gateway 
10 1 configure initial router settings
configure initial router settings basic router configuration stepsconfigure the device name secure privileged-exec-mode secure user-exec-mode secure remote telnet   ssh-access encrypt all plaintext passwords provide legal notification and save the configuration router config   hostname hostnamerouter config   enable-secret passwordrouter config   line-console 0router config-line   password passwordrouter config-line   loginrouter config   line-vty 0 4router config-line   password passwordrouter config-line   loginrouter config-line   transport input  ssh   telnet router config   service-password-encryptionrouter config   banner-motd   message  router config   endrouter  copy-running-config-startup-config
configure initial router settings basic router configuration examplecommands for basic router configuration on r1 configuration is saved to nvram r1 config   hostname r1r1 config   enable-secret classr1 config   line-console 0r1 config-line   password ciscor1 config-line   loginr1 config-line   line-vty 0 4r1 config-line   password ciscor1 config-line   loginr1 config-line   transport input ssh telnetr1 config-line   exitr1 config   service-password-encryptionr1 config   banner-motd  enter text message  end with a new line and the                                                  warning  unauthorized-access is prohibited                                               r1 config   exitr1  copy-running-config-startup-config
configure initial router settings packet tracer   configure initial router settingsin this packet tracer  you will do the following verify the default-router configuration configure and verify the initial router configuration save the running-configuration-file 
10 2 configure interfaces
configure interfaces configure router-interfacesconfiguring a router-interface includes issuing the following commands router config   interface type-and-number router config-if   description description-text router config-if   ip-address ipv4-address subnet-mask router config-if   ipv6-address ipv6-address prefix-length router config-if   no-shutdown it is a good practice to use the description command to add information about the network connected to the interface the no-shutdown command activates the interface 
configure interfaces configure router-interfaces examplethe commands to configure interface g0 0 0 on r1 are shown here r1 config   interface gigabitethernet 0 0 0r1 config-if   description link to lanr1 config-if   ip-address 192 168 10 1 255 255 255 0r1 config-if   ipv6-address 2001 db8 acad 10  1 64r1 config-if   no-shutdownr1 config-if   exitr1 config   aug  1 01 43 53 435   link-3-updown  interface gigabitethernet0 0 0  changed state to down aug  1 01 43 56 447   link-3-updown  interface gigabitethernet0 0 0  changed state to up aug  1 01 43 57 447   lineproto-5-updown  line protocol on interface gigabitethernet0 0 0  changed state to up
configure interfaces configure router-interfaces example  cont  the commands to configure interface g0 0 1 on r1 are shown here r1 config   interface gigabitethernet 0 0 1r1 config-if   description link to r2r1 config-if   ip-address 209 165 200 225 255 255 255 252r1 config-if   ipv6-address 2001 db8 feed 224  1 64r1 config-if   no-shutdownr1 config-if   exitr1 config   aug  1 01 46 29 170   link-3-updown  interface gigabitethernet0 0 1  changed state to down aug  1 01 46 32 171   link-3-updown  interface gigabitethernet0 0 1  changed state to up aug  1 01 46 33 171   lineproto-5-updown  line protocol on interface gigabitethernet0 0 1  changed state to up
configure interfaces verify interface configurationto verify interface configuration use the show-ip-interface-brief and show-ipv6-interface brief commands shown here r1   show-ip-interface-briefinterface              ip-address      ok  method status                protocol gigabitethernet0 0 0   192 168 10 1    yes manual up                    up gigabitethernet0 0 1   209 165 200 225 yes manual up                    up vlan1                  unassigned      yes unset  administratively down down r1   show-ipv6-interface briefgigabitethernet0 0 0        up up fe80  201 c9ff fe89 45012001 db8 acad 10  1gigabitethernet0 0 1        up up fe80  201 c9ff fe89 45022001 db8 feed 224  1vlan1                       administratively down down unassigned r1 
configure interfaces configure verification commandsthe table summarizes show commands used to verify interface configuration commandsdescriptionshow-ip-interface-brief show-ipv6-interface briefdisplays all interfaces  their ip-addresses  and their current status  show-ip-route show-ipv6-routedisplays the contents of the ip-routing-tables stored in ram show-interfacesdisplays statistics for all interfaces on the device  only displays the ipv4-addressing information show-ip-interfacesdisplays the ipv4 statistics for all interfaces on a router show-ipv6-interfacesdisplays the ipv6 statistics for all interfaces on a router 
configure interfaces configure verification commands  cont  view status of all interfaces with the show-ip-interface-brief and show-ipv6-interface brief commands  shown here r1  show-ip-interface-briefinterface              ip-address      ok  method status                protocol gigabitethernet0 0 0   192 168 10 1    yes manual up                    up gigabitethernet0 0 1   209 165 200 225 yes manual up                    up vlan1                  unassigned      yes unset  administratively down down r1 r1  show-ipv6-interface briefgigabitethernet0 0 0        up up fe80  201 c9ff fe89 45012001 db8 acad 10  1gigabitethernet0 0 1        up up fe80  201 c9ff fe89 45022001 db8 feed 224  1vlan1                       administratively down down unassigned r1 
configure interfaces configure verification commands  cont  display the contents of the ip-routing-tables with the show-ip-route and show-ipv6-route commands as shown here r1  show-ip-route  output omitted gateway of last-resort is not set192 168 10 0 24 is variably subnetted  2 subnets  2 masksc        192 168 10 0 24 is directly-connected  gigabitethernet0 0 0l        192 168 10 1 32 is directly-connected  gigabitethernet0 0 0209 165 200 0 24 is variably subnetted  2 subnets  2 masksc        209 165 200 224 30 is directly-connected  gigabitethernet0 0 1l        209 165 200 225 32 is directly-connected  gigabitethernet0 0 1r1 r1  show-ipv6-route output omitted c   2001 db8 acad 10   64  0 0 via gigabitethernet0 0 0  directly-connectedl   2001 db8 acad 10  1 128  0 0 via gigabitethernet0 0 0  receivec   2001 db8 feed 224   64  0 0 via gigabitethernet0 0 1  directly-connectedl   2001 db8 feed 224  1 128  0 0 via gigabitethernet0 0 1  receivel   ff00   8  0 0 via null0  receiver1 
configure interfaces configure verification commands  cont  display statistics for all interfaces with the show-interfaces command  as shown here r1  show-interfaces gig0 0 0gigabitethernet0 0 0 is up  line protocol is up hardware is isr4321-2x1ge  address is a0e0 af0d e140  bia  a0e0 af0d e140 description  link to laninternet address is 192 168 10 1 24mtu 1500 bytes  bw 100000 kbit sec  dly 100 usec  reliability 255 255  txload 1 255  rxload 1 255encapsulation arpa  loopback not setkeepalive not supported full-duplex  100mbps  link type is auto  media type is rj45output flow-control is off  input flow-control is offarp type  arpa  arp timeout 04 00 00last input 00 00 01  output 00 00 35  output hang neverlast clearing of  show interface  counters neverinput queue  0 375 0 0  size max drops flushes   total output     drops  0queueing strategy  fifooutput queue  0 40  size max 5 minute input rate 0 bits sec  0 packets sec5 minute output rate 0 bits sec  0 packets sec1180 packets input  109486 bytes  0 no bufferreceived 84 broadcasts  0 ip multicasts 0 runts  0 giants  0 throttles  output omitted r1 
configure interfaces configure verification commands  cont  display ipv4 statistics for router-interfaces with the show-ip-interface command  as shown here r1  show-ip-interface g0 0 0gigabitethernet0 0 0 is up  line protocol is upinternet address is 192 168 10 1 24broadcast address is 255 255 255 255address determined by setup commandmtu is 1500 byteshelper address is not setdirected broadcast forwarding is disabledoutgoing common access list is not set outgoing access list is not setinbound common access list is not set inbound  access list is not setproxy arp is enabledlocal proxy arp is disabledsecurity level is defaultsplit horizon is enabledicmp-redirects are always senticmp-unreachables are always senticmp mask replies are never sentip fast-switching is enabledip flow switching is disabled output omitted r1 
configure interfaces configure verification commands  cont  display ipv6 statistics for router-interfaces with the show-ipv6-interface command shown here r1  show-ipv6-interface g0 0 0gigabitethernet0 0 0 is up  line protocol is upipv6 is enabled  link-local-address is fe80  868a 8dff fe44 49b0no virtual link-local-address es  description  link to langlobal-unicast-address es  2001 db8 acad 10  1  subnet is 2001 db8 acad 10   64joined group address es  ff02  1ff02  1 ff00 1ff02  1 ff44 49b0mtu is 1500 bytesicmp error-messages limited to one every 100 millisecondsicmp-redirects are enabledicmp-unreachables are sentnd dad is enabled  number of dad attempts  1nd reachable time is 30000 milliseconds  using 30000 nd ns retransmit interval is 1000 millisecondsr1 
10 3 configure the default-gateway
configure the default-gateway default-gateway on a hostthe default-gateway is used when a host sends a packet to a device on another network the default-gateway address is generally the router-interface-address attached to the local-network of the host to reach pc3  pc1 addresses a packet with the ipv4-address of pc3  but forwards the packet to its default-gateway  the g0 0 0 interface of r1 note  the ip-address of the host and the router-interface must be in the same network 
configure the default-gateway default-gateway on a switcha switch must have a default-gateway address configured to remotely manage the switch from another network to configure an ipv4 default-gateway on a switch  use the ip-default-gateway ip-address global-configuration-command media is working on a corrected version of the graphic from 10 3 2 it is wrong on ar  and on the global bug liststop
configure initial router settings packet tracer   connect a router to a lanin this packet tracer  you will do the following display the router information configure router-interfaces  verify the configuration 
configure initial router settings packet tracer   troubleshoot default-gateway issuesin this packet tracer  you will do the following verify the network documentation and use tests to isolate problems determine an appropriate solution for a given problem implement the solution test to verify the problem is resolved document the solution 
""
2 3 the command structure
the command structure basic ios command structurekeyword   this is a specific parameter defined in the operating system  in the figure  ip-protocols  argument - this is not predefined  it is a value or variable defined by the user  in the figure  192 168 10 5  
the command structure ios command syntax checka command might require one or more arguments  to determine the keywords and arguments required for a command  refer to the command syntax  boldface-text indicates commands and keywords that are entered as shown  italic-text indicates an argument for which the user provides the value conventiondescriptionboldfaceboldface-text indicates commands and keywords that you enter literally as shown italicsitalic-text indicates arguments for which you supply values  x square-brackets indicate an optional element  keyword or argument   x braces indicate a required element  keyword or argument   x  y   z   braces and vertical lines within square-brackets indicate a required choice within an optional element  spaces are used to clearly delineate parts of the command 
the command structure ios command syntax check  cont  the command syntax provides the pattern  or format  that must be used when entering a command the command is ping and the user-defined argument is the ip-address of the destination-device  for example  ping 10 10 10 5 the command is traceroute and the user-defined argument is the ip-address of the destination-device  for example  traceroute 192 168 254 254 if a command is complex with multiple arguments  you may see it represented like this 
the command structure ios help featuresthe ios has two forms of help available  context-sensitive help and command syntax check context-sensitive help enables you to quickly find answers to these questions which commands are available in each command mode which commands start with specific characters or group of characters which arguments and keywords are available to particular-commands command syntax check verifies that a valid command was entered by the user  if the interpreter cannot understand the command being entered  it will provide feedback describing what is wrong with the command 
the command structure hot keys and shortcutsthe ios cli provides hot keys and shortcuts that make configuring  monitoring  and troubleshooting easier commands and keywords can be shortened to the minimum number of characters that identify a unique selection  for example  the configure command can be shortened to conf because configure is the only command that begins with conf 
the command structure hot keys and shortcuts  cont  the table below is a brief list of keystrokes to enhance command-line editing keystrokedescriptiontabcompletes a partial command name entry backspaceerases the character to the left of the cursor left-arrow or ctrl bmoves the cursor one character to the left right-arrow or ctrl fmoves the cursor one character to the right up-arrow or ctrl precalls the commands in the history buffer  beginning with the most recent commands 
the command structure hot keys and shortcuts  cont  when a command output produces more text than can be displayed in a terminal window  the ios will display a  --more--  prompt  the table below describes the keystrokes that can be used when this prompt is displayed the table below lists commands that can be used to exit out of an operation note  to see more hot keys and shortcuts refer to 2 3 5 keystrokedescriptionctrl-cwhen in any configuration-mode  ends the configuration-mode and returns to privileged-exec-mode  ctrl-zwhen in any configuration-mode  ends the configuration-mode and returns to privileged-exec-mode ctrl-shift-6all-purpose break sequence used to abort dns lookups  traceroutes  pings  etc keystrokedescriptionenter keydisplays the next line space bardisplays the next screen any other keyends the display string  returning to privileged-exec-mode 
""
module objectivesmodule title  basic device configurationmodule objective  configure devices using security best-practices topic titletopic objectiveconfigure a switch with initial-settingsconfigure initial-settings on a cisco switch configure-switch-portsconfigure-switch-ports to meet network requirements secure remote-accessconfigure secure management access on a switch basic router configurationconfigure basic settings on a router to route between two directly-connected-networks  using cli verify directly-connected-networksverify connectivity between two networks that are directly-connected to a router 
1 1 configure a switch with initial-settings
configure a switch with initial-settings switch-boot sequenceafter a cisco switch is powered on  it goes through the following five-step boot sequence step 1  first  the switch loads a power-on-self-test  post  program stored in rom  post checks the cpu subsystem  it tests the cpu  dram  and the portion of the flash device that makes up the flash file-system step 2  next  the switch loads the boot loader software  the boot loader is a small program stored in rom that is run immediately after post successfully completes step 3  the boot loader performs low-level-cpu-initialization  it initializes the cpu registers  which control where physical memory is mapped  the quantity of memory  and its speed step 4  the boot loader initializes the flash file-system on the system board step 5  finally  the boot loader locates and loads a default ios operating system software image into memory and gives control of the switch over to the ios 
configure a switch with initial-settings the boot-system commandthe switch attempts to automatically boot by using information in the boot environment variable  if this variable is not set  the switch attempts to load and execute the first executable file it can find the ios operating system then initializes the interfaces using the cisco ios commands found in the startup-config file  the startup-config file is called config text and is located in flash in the example  the boot environment variable is set using the boot-system global configuration-mode command  notice that the ios is located in a distinct folder and the folder path is specified  use the command show boot to see what the current ios boot file is set to commanddefinitionboot-systemthe main commandflash  the storage devicec2960-lanbasek9-mz 150-2 se the path to the file-systemc2960-lanbasek9-mz 150-2 se binthe ios file name
configure a switch with initial-settings switch led indicatorssystem-led  syst   shows whether the system is receiving power and functioning properly  redundant-power-supply-led  rps   shows the rps status port-status-led  stat   when green  indicates port status mode is selected  which is the default  port status can then be understood by the light associated with each port port-duplex-led  duplx   when green  indicates port duplex-mode is selected  port duplex can then be understood by the light associated with each port port-speed led  speed   when green  indicates port-speed mode is selected  port-speed can then be understood by the light associated with each port power-over-ethernet led  poe   present if the switch supports poe  indicates the poe status of ports on the switch the mode button is used to move between the different modes   stat  duplx  speed  and poe
configure a switch with initial-settings switch led indicators  cont  offgreenblinking greenamberblinking amberalternating green amberrpsoff no rpsrps readyrps up but not availablerps standby or faultinternal ps failed  rps providing powern apoenot selected  no issuesselectedn an anot selected  port issues presentn awhen the named mode is selected  the light associated with each physical port indicates statno link or shutdownlink upactivityport blocked preventing loopport blocked preventing looplink faultduplexhalf-duplexfull-duplexn an an an aspeed10mbps100mbps1000mbpsn an an apoepoe offpoe onn apoe disabledpoe off due to faultpoe denied  over budget 
configure a switch with initial-settings recovering from a system crashthe boot loader provides access into the switch if the operating system cannot be used because of missing or damaged system files  the boot loader has a command-line that provides access to the files stored in flash memory  the boot loader can be accessed through a console connection following these steps step 1  connect a pc by console-cable to the switch console-port  configure-terminal emulation software to connect to the switch step 2  unplug the switch power cord step 3  reconnect the power cord to the switch and  within 15 seconds  press and hold down the mode button while the system-led is still flashing green step 4  continue pressing the mode button until the system-led turns briefly amber and then solid green  then release the mode button step 5  the boot loader switch  prompt appears in the terminal emulation software on the pc the boot loader command-line supports commands to format the flash file-system  reinstall the operating system software  and recover a lost or forgotten password  for example  the dir command can be used to view a list of files within a specified directory 
configure a switch with initial-settings switch-management-accessto prepare a switch for remote management access  the switch must be configured with an ip-address and a subnet-mask  to manage the switch from a remote-network  the switch must be configured with a default-gateway  this is very similar to configuring the ip-address information on host devices  in the figure  the switch virtual-interface  svi  on s1 should be assigned an ip-address  the svi is a virtual-interface  not a physical port on the switch  a console-cable is used to connect to a pc so that the switch can be initially configured 
configure a switch with initial-settings switch svi configuration exampleby default  the switch is configured to have its management controlled through vlan 1  all ports are assigned to vlan 1 by default  for security purposes  it is considered a best-practice to use a vlan other than vlan 1 for the management vlan step 1  configure the management interface  from vlan interface configuration-mode  an ipv4-address and subnet-mask is applied to the management svi of the switch note  the svi for vlan-99 will not appear as  up up  until vlan-99 is created and there is a device connected to a switch port associated with vlan-99 note  the switch may need to be configured for ipv6  for example  before you can configure ipv6-addressing on a cisco catalyst-2960 running ios-version 15 0  you will need to enter the global-configuration-command sdm-prefer-dual-ipv4-and-ipv6-default and then reload the switch 
configure a switch with initial-settings switch svi configuration example  cont  taskios commandsenter global configuration-mode s1  configure-terminalenter interface configuration-mode for the svi s1 config   interface-vlan-99configure the management interface ipv4-address s1 config-if   ip-address 172 17 99 11 255 255 255 0configure the management interface ipv6-addresss1 config-if   ipv6-address 2001 db8 acad 99  1 64enable the management interface s1 config-if   no-shutdownreturn to the privileged-exec-mode s1 config-if   endsave the running-config to the startup config s1  copy-running-config-startup-config
configure a switch with initial-settings switch svi configuration example  cont  step 2  configure the default-gatewaythe switch should be configured with a default-gateway if it will be managed remotely from networks that are not directly-connected note  because  it will receive its default-gateway information from a router-advertisement  ra  message  the switch does not require an ipv6 default-gateway taskios commandsenter global configuration-mode s1  configure-terminalconfigure the default-gateway for the switch s1 config   ip-default-gateway 172 17 99 1return to the privileged-exec-mode s1 config-if   endsave the running-config to the startup config s1  copy-running-config-startup-config
configure a switch with initial-settings switch svi configuration example  cont  step 3  verify configurationthe show-ip-interface-brief and show-ipv6-interface brief commands are useful for determining the status of both physical and virtual-interfaces  the output shown confirms that interface-vlan-99 has been configured with an ipv4 and ipv6-address note  an ip-address applied to the svi is only for remote management access to the switch  this does not allow the switch to route layer-3 packets 
configure a switch with initial-settings lab   basic switch configurationin this lab  you will complete the following objectives part 1  cable the network and verify the default switch configurationpart 2  configure basic network-device settingspart 3  verify and test network connectivitypart 4  manage the mac-address table
introduction to networks v7 0  itn module 10  basic router configuration
module objectivesmodule title  basic router configurationmodule objective  implement initial-settings on a router and end-devices topic titletopic objectiveconfigure initial router settingsconfigure initial-settings on an ios cisco router configure interfacesconfigure two active interfaces on a cisco-ios-router configure the default-gatewayconfigure devices to use the default-gateway 
10 1 configure initial router settings
configure initial router settings basic router configuration stepsconfigure the device name secure privileged-exec-mode secure user-exec-mode secure remote telnet   ssh-access encrypt all plaintext passwords provide legal notification and save the configuration router config   hostname hostnamerouter config   enable-secret passwordrouter config   line-console 0router config-line   password passwordrouter config-line   loginrouter config   line-vty 0 4router config-line   password passwordrouter config-line   loginrouter config-line   transport input  ssh   telnet router config   service-password-encryptionrouter config   banner-motd   message  router config   endrouter  copy-running-config-startup-config
configure initial router settings basic router configuration examplecommands for basic router configuration on r1 configuration is saved to nvram r1 config   hostname r1r1 config   enable-secret classr1 config   line-console 0r1 config-line   password ciscor1 config-line   loginr1 config-line   line-vty 0 4r1 config-line   password ciscor1 config-line   loginr1 config-line   transport input ssh telnetr1 config-line   exitr1 config   service-password-encryptionr1 config   banner-motd  enter text message  end with a new line and the                                                  warning  unauthorized-access is prohibited                                               r1 config   exitr1  copy-running-config-startup-config
configure initial router settings packet tracer   configure initial router settingsin this packet tracer  you will do the following verify the default-router configuration configure and verify the initial router configuration save the running-configuration-file 
10 2 configure interfaces
configure interfaces configure router-interfacesconfiguring a router-interface includes issuing the following commands router config   interface type-and-number router config-if   description description-text router config-if   ip-address ipv4-address subnet-mask router config-if   ipv6-address ipv6-address prefix-length router config-if   no-shutdown it is a good practice to use the description command to add information about the network connected to the interface the no-shutdown command activates the interface 
configure interfaces configure router-interfaces examplethe commands to configure interface g0 0 0 on r1 are shown here r1 config   interface gigabitethernet 0 0 0r1 config-if   description link to lanr1 config-if   ip-address 192 168 10 1 255 255 255 0r1 config-if   ipv6-address 2001 db8 acad 10  1 64r1 config-if   no-shutdownr1 config-if   exitr1 config   aug  1 01 43 53 435   link-3-updown  interface gigabitethernet0 0 0  changed state to down aug  1 01 43 56 447   link-3-updown  interface gigabitethernet0 0 0  changed state to up aug  1 01 43 57 447   lineproto-5-updown  line protocol on interface gigabitethernet0 0 0  changed state to up
configure interfaces configure router-interfaces example  cont  the commands to configure interface g0 0 1 on r1 are shown here r1 config   interface gigabitethernet 0 0 1r1 config-if   description link to r2r1 config-if   ip-address 209 165 200 225 255 255 255 252r1 config-if   ipv6-address 2001 db8 feed 224  1 64r1 config-if   no-shutdownr1 config-if   exitr1 config   aug  1 01 46 29 170   link-3-updown  interface gigabitethernet0 0 1  changed state to down aug  1 01 46 32 171   link-3-updown  interface gigabitethernet0 0 1  changed state to up aug  1 01 46 33 171   lineproto-5-updown  line protocol on interface gigabitethernet0 0 1  changed state to up
configure interfaces verify interface configurationto verify interface configuration use the show-ip-interface-brief and show-ipv6-interface brief commands shown here r1   show-ip-interface-briefinterface              ip-address      ok  method status                protocol gigabitethernet0 0 0   192 168 10 1    yes manual up                    up gigabitethernet0 0 1   209 165 200 225 yes manual up                    up vlan1                  unassigned      yes unset  administratively down down r1   show-ipv6-interface briefgigabitethernet0 0 0        up up fe80  201 c9ff fe89 45012001 db8 acad 10  1gigabitethernet0 0 1        up up fe80  201 c9ff fe89 45022001 db8 feed 224  1vlan1                       administratively down down unassigned r1 
configure interfaces configure verification commandsthe table summarizes show commands used to verify interface configuration commandsdescriptionshow-ip-interface-brief show-ipv6-interface briefdisplays all interfaces  their ip-addresses  and their current status  show-ip-route show-ipv6-routedisplays the contents of the ip-routing-tables stored in ram show-interfacesdisplays statistics for all interfaces on the device  only displays the ipv4-addressing information show-ip-interfacesdisplays the ipv4 statistics for all interfaces on a router show-ipv6-interfacesdisplays the ipv6 statistics for all interfaces on a router 
configure interfaces configure verification commands  cont  view status of all interfaces with the show-ip-interface-brief and show-ipv6-interface brief commands  shown here r1  show-ip-interface-briefinterface              ip-address      ok  method status                protocol gigabitethernet0 0 0   192 168 10 1    yes manual up                    up gigabitethernet0 0 1   209 165 200 225 yes manual up                    up vlan1                  unassigned      yes unset  administratively down down r1 r1  show-ipv6-interface briefgigabitethernet0 0 0        up up fe80  201 c9ff fe89 45012001 db8 acad 10  1gigabitethernet0 0 1        up up fe80  201 c9ff fe89 45022001 db8 feed 224  1vlan1                       administratively down down unassigned r1 
configure interfaces configure verification commands  cont  display the contents of the ip-routing-tables with the show-ip-route and show-ipv6-route commands as shown here r1  show-ip-route  output omitted gateway of last-resort is not set192 168 10 0 24 is variably subnetted  2 subnets  2 masksc        192 168 10 0 24 is directly-connected  gigabitethernet0 0 0l        192 168 10 1 32 is directly-connected  gigabitethernet0 0 0209 165 200 0 24 is variably subnetted  2 subnets  2 masksc        209 165 200 224 30 is directly-connected  gigabitethernet0 0 1l        209 165 200 225 32 is directly-connected  gigabitethernet0 0 1r1 r1  show-ipv6-route output omitted c   2001 db8 acad 10   64  0 0 via gigabitethernet0 0 0  directly-connectedl   2001 db8 acad 10  1 128  0 0 via gigabitethernet0 0 0  receivec   2001 db8 feed 224   64  0 0 via gigabitethernet0 0 1  directly-connectedl   2001 db8 feed 224  1 128  0 0 via gigabitethernet0 0 1  receivel   ff00   8  0 0 via null0  receiver1 
configure interfaces configure verification commands  cont  display statistics for all interfaces with the show-interfaces command  as shown here r1  show-interfaces gig0 0 0gigabitethernet0 0 0 is up  line protocol is up hardware is isr4321-2x1ge  address is a0e0 af0d e140  bia  a0e0 af0d e140 description  link to laninternet address is 192 168 10 1 24mtu 1500 bytes  bw 100000 kbit sec  dly 100 usec  reliability 255 255  txload 1 255  rxload 1 255encapsulation arpa  loopback not setkeepalive not supported full-duplex  100mbps  link type is auto  media type is rj45output flow-control is off  input flow-control is offarp type  arpa  arp timeout 04 00 00last input 00 00 01  output 00 00 35  output hang neverlast clearing of  show interface  counters neverinput queue  0 375 0 0  size max drops flushes   total output     drops  0queueing strategy  fifooutput queue  0 40  size max 5 minute input rate 0 bits sec  0 packets sec5 minute output rate 0 bits sec  0 packets sec1180 packets input  109486 bytes  0 no bufferreceived 84 broadcasts  0 ip multicasts 0 runts  0 giants  0 throttles  output omitted r1 
configure interfaces configure verification commands  cont  display ipv4 statistics for router-interfaces with the show-ip-interface command  as shown here r1  show-ip-interface g0 0 0gigabitethernet0 0 0 is up  line protocol is upinternet address is 192 168 10 1 24broadcast address is 255 255 255 255address determined by setup commandmtu is 1500 byteshelper address is not setdirected broadcast forwarding is disabledoutgoing common access list is not set outgoing access list is not setinbound common access list is not set inbound  access list is not setproxy arp is enabledlocal proxy arp is disabledsecurity level is defaultsplit horizon is enabledicmp-redirects are always senticmp-unreachables are always senticmp mask replies are never sentip fast-switching is enabledip flow switching is disabled output omitted r1 
configure interfaces configure verification commands  cont  display ipv6 statistics for router-interfaces with the show-ipv6-interface command shown here r1  show-ipv6-interface g0 0 0gigabitethernet0 0 0 is up  line protocol is upipv6 is enabled  link-local-address is fe80  868a 8dff fe44 49b0no virtual link-local-address es  description  link to langlobal-unicast-address es  2001 db8 acad 10  1  subnet is 2001 db8 acad 10   64joined group address es  ff02  1ff02  1 ff00 1ff02  1 ff44 49b0mtu is 1500 bytesicmp error-messages limited to one every 100 millisecondsicmp-redirects are enabledicmp-unreachables are sentnd dad is enabled  number of dad attempts  1nd reachable time is 30000 milliseconds  using 30000 nd ns retransmit interval is 1000 millisecondsr1 
2 7 configure ip-addressing
configure ip-addressing manual ip-address configuration for end-devicesend-devices on the network need an ip-address in order to communicate with other devices on the network  ipv4-address information can be entered into end-devices manually  or automatically using dynamic-host-configuration-protocol  dhcp  to manually configure an ipv4-address on a windows pc  open the control-panel   network-sharing-center   change-adapter-settings and choose the adapter  next right-click and select properties to display the local-area-connection-properties next  click properties to open the internet-protocol-version-4  tcp ipv4  properties window  then configure the ipv4-address and subnet-mask information  and default-gateway note  ipv6-addressing and configuration options are similar to ipv4 
configure ip-addressing  automatic ip-address configuration for end-devicesdhcp enables automatic ipv4-address configuration for every end-device that is dhcp-enabled end-devices are typically by default using dhcp for automatic ipv4-address configuration to configure dhcp on a windows pc  open the control-panel   network-sharing-center   change-adapter-settings and choose the adapter  next right-click and select properties to display the local-area-connection-properties next  click properties to open the internet-protocol-version-4  tcp ipv4  properties window  then select obtain an ip-address automatically and obtain dns-server-address automatically note  ipv6 uses dhcpv6 and slaac  stateless-address autoconfiguration  for dynamic address allocation 
configure ip-addressing switch virtual-interface configurationto access the switch remotely  an ip-address and a subnet-mask must be configured on the svi  to configure an svi on a switch enter the interface-vlan 1 command in global configuration-mode next assign an ipv4-address using the ip-address ip-address subnet-mask command finally  enable the virtual-interface using the no-shutdown command  
1 2 configure-switch-ports
configure-switch-ports duplex-communicationfull-duplex-communication increases bandwidth efficiency by allowing both ends of a connection to transmit and receive data simultaneously  this is also known as bidirectional communication and it requires microsegmentation  a microsegmented lan is created when a switch port has only one device connected and is operating in full-duplex-mode  there is no collision-domain associated with a switch port operating in full-duplex-mode unlike full-duplex-communication  half-duplex-communication is unidirectional  half-duplex-communication creates performance issues because data can flow in only one direction at a time  often resulting in collisions gigabit-ethernet and 10 gb nics require full-duplex connections to operate  in full-duplex-mode  the collision-detection circuit on the nic is disabled  full-duplex offers 100 percent efficiency in both directions  transmitting and receiving   this results in a doubling of the potential use of the stated bandwidth 
configure-switch-ports configure-switch-ports at the physical-layerswitch ports can be manually-configured with specific duplex and speed settings  the respective interface configuration commands are duplex and speed the default setting for both duplex and speed for switch ports on cisco catalyst-2960 and 3560 switches is auto  the 10 100 1000 ports operate in either half- or full-duplex-mode when they are set to 10 or 100 mbps and operate only in full-duplex-mode when it is set to 1000 mbps  1 gbps   autonegotiation is useful when the speed and duplex settings of the device connecting to the port are unknown or may change  when connecting to known devices such as servers  dedicated workstations  or network-devices  a best-practice is to manually set the speed and duplex settings when troubleshooting switch port issues  it is important that the duplex and speed settings are checked note  mismatched settings for the duplex-mode and speed of switch ports can cause connectivity-issues  autonegotiation failure creates mismatched settings all fiber-optic ports  such as 1000base-sx ports  operate only at one preset speed and are always full-duplex
configure-switch-ports configure-switch-ports at the physical-layer  cont  taskios commandsenter global configuration-mode s1  configure-terminalenter interface configuration-mode s1 config   interface fastethernet 0 1configure the interface duplex s1 config-if   duplex-fullconfigure the interface speed s1 config-if   speed-100return to the privileged-exec-mode s1 config-if   endsave the running-config to the startup config s1  copy-running-config-startup-config
configure-switch-ports auto-mdixwhen automatic-medium-dependent-interface-crossover  auto-mdix  is enabled  the switch interface automatically detects the required cable connection type  straight-through or crossover  and configures the connection appropriately  when connecting to switches without the auto-mdix feature  straight-through cables must be used to connect to devices such as servers  workstations  or routers  crossover cables must be used to connect to other switches or repeaters with auto-mdix enabled  either type of cable can be used to connect to other devices  and the interface automatically adjusts to communicate successfully  on newer cisco-switches  the mdix-auto interface configuration-mode command enables the feature  when using auto-mdix on an interface  the interface speed and duplex must be set to auto so that the feature operates correctly note  the auto-mdix feature is enabled by default on catalyst-2960 and catalyst 3560 switches but is not available on the older catalyst 2950 and catalyst 3550 switches to examine the auto-mdix setting for a specific interface  use the show-controllers-ethernet-controller command with the phy keyword  to limit the output to lines referencing auto-mdix  use the include auto-mdix filter  
configure-switch-ports switch-verification-commandstaskios commandsdisplay interface status and configuration s1  show-interfaces  interface-id display current startup-configuration s1  show-startup-configdisplay current running-configuration s1  show-running-configdisplay information about flash file-system s1  show-flashdisplay system hardware and software status s1  show-versiondisplay history of command entered s1  show-historydisplay ip information about an interface s1  show-ip-interface  interface-id  or s1  show-ipv6-interface  interface-id display the mac-address table s1  show-mac-address-table or s1  show-mac-address-table
configure-switch-ports verify switch-port-configurationthe show-running-config command can be used to verify that the switch has been correctly configured  from the sample abbreviated output on s1  some important information is shown in the figure fast-ethernet 0 18 interface configured with the management vlan-99vlan-99 configured with an ipv4-address of 172 17 99 11 255 255 255 0default-gateway set to 172 17 99 1
configure-switch-ports verify switch-port-configuration  cont  the show-interfaces command is another commonly used command  which displays status and statistics information on the network interfaces of the switch  the show-interfaces command is frequently used when configuring and monitoring network-devices the first line of the output for the show-interfaces fastethernet 0 18 command indicates that the fastethernet 0 18 interface is up up  meaning that it is operational  further down  the output shows that the duplex is full and the speed is 100 mbps 
configure-switch-ports network access-layer issuesthe output from the show-interfaces command is useful for detecting common media issues  one of the most important parts of this output is the display of the line and data-link protocol status  as shown in the example the first parameter  fastethernet0 18 is up  refers to the hardware layer and indicates whether the interface is receiving a carrier detect signal  the second parameter  line protocol is up  refers to the data-link layer and indicates whether the data-link layer protocol keepalives are being received  based on the output of the show-interfaces command  possible problems can be fixed as follows if the interface is up and the line protocol is down  a problem exists  there could be an encapsulation type mismatch  the interface on the other end could be error-disabled  or there could be a hardware problem if the line protocol and the interface are both down  a cable is not attached  or some other interface problem exists  for example  in a back-to-back connection  the other end of the connection may be administratively down if the interface is administratively down  it has been manually disabled  the shutdown command has been issued  in the active configuration 
configure-switch-ports network access-layer issues  cont  the show-interfaces command output displays counters and statistics for the fastethernet0 18 interface  as shown here 
configure-switch-ports network access-layer issues  cont  some media errors are not severe enough to cause the circuit to fail but do cause network performance issues  the table explains some of these common errors which can be detected using the show-interfaces command error typedescriptioninput-errorstotal number of errors  it includes runts  giants  no buffer  crc  frame  overrun  and ignored counts runtspackets that are discarded because they are smaller than the minimum packet size for the medium  for instance  any ethernet-packet that is less than 64 bytes is considered a runt giantspackets that are discarded because they exceed the maximum packet size for the medium  for example  any ethernet-packet that is greater than 1 518 bytes is considered a giant crccrc-errors are generated when the calculated checksum is not the same as the checksum received output-errorssum of all errors that prevented the final transmission of datagrams out of the interface that is being examined collisionsnumber of messages retransmitted because of an ethernet-collision late-collisionsa collision that occurs after 512 bits of the frame have been transmitted
configure-switch-ports interface input and output-errors input-errors  is the sum of all errors in datagrams that were received on the interface being examined  this includes runts  giants  crc  no buffer  frame  overrun  and ignored counts  the reported input-errors from the show-interfaces command include the following runt-frames - ethernet-frames that are shorter than the 64-byte minimum allowed length are called runts  malfunctioning nics are the usual cause of excessive runt-frames  but they can also be caused by collisions giants - ethernet-frames that are larger than the maximum allowed size are called giants crc-errors - on ethernet and serial interfaces  crc-errors usually indicate a media or cable error  common causes include electrical interference  loose or damaged connections  or incorrect cabling  if you see many crc-errors  there is too much noise on the link and you should inspect the cable  you should also search for and eliminate noise sources 
configure-switch-ports interface input and output-errors  cont   output-errors  is the sum of all errors that prevented the final transmission of datagrams out the interface that is being examined  the reported output-errors from the show-interfaces command include the following collisions - collisions in half-duplex operations are normal  however  you should never see collisions on an interface configured for full-duplex-communication late-collisions - a late collision refers to a collision that occurs after 512 bits of the frame have been transmitted  excessive cable-lengths are the most common cause of late-collisions  another common cause is duplex misconfiguration  
configure-switch-ports troubleshooting network access-layer issuesto troubleshoot scenarios involving no connection  or a bad connection  between a switch and another device  follow the general process shown in the figure 
10 3 configure the default-gateway
configure the default-gateway default-gateway on a hostthe default-gateway is used when a host sends a packet to a device on another network the default-gateway address is generally the router-interface-address attached to the local-network of the host to reach pc3  pc1 addresses a packet with the ipv4-address of pc3  but forwards the packet to its default-gateway  the g0 0 0 interface of r1 note  the ip-address of the host and the router-interface must be in the same network 
configure the default-gateway default-gateway on a switcha switch must have a default-gateway address configured to remotely manage the switch from another network to configure an ipv4 default-gateway on a switch  use the ip-default-gateway ip-address global-configuration-command media is working on a corrected version of the graphic from 10 3 2 it is wrong on ar  and on the global bug liststop
configure initial router settings packet tracer   connect a router to a lanin this packet tracer  you will do the following display the router information configure router-interfaces  verify the configuration 
configure initial router settings packet tracer   troubleshoot default-gateway issuesin this packet tracer  you will do the following verify the network documentation and use tests to isolate problems determine an appropriate solution for a given problem implement the solution test to verify the problem is resolved document the solution 
""
module objectivesbasic switch end-device configurationimplement initial setting password  ip-addressing  default-gateway parameters switch end-devices ios-accessaccess ios-device configurationios-navigationnavigate ios configure network-devicecommandcommand structure ios softwaredevice configurationconfigure ios cli configurationsios command running-configuration ports addressescommunicate network-mediaconfigure ip-addressingconfigure host device ip-address
ios access
ios access operating systemshell user-interface allow user request specific task computer request make cli gui interfaceskernel communicate hardware software computer manage hardware resource meet software requirementhardware physical part computer
cisco ios access guigui interact system use environment graphical-icon menu windowgui user-friendly less-knowledgewindows  macos linux kde apple ios androidgui fail crash simple not operate specified network-devices typically access cli 
cisco ios access purpose of an ospc operating system enables a user to do the following use a mouse to make selections and run programsenter text and text-based commandsview output on a monitorcli-based network operating system enables a network technician to do the following use a keyboard to run cli-based network programsuse a keyboard to enter text and text-based commandsview output on a monitor
cisco ios access access-methodsconsole   a physical management port used to access a device in order to provide maintenance  such as performing the initial configurations secure-shell  ssh    establishes a secure remote cli-connection to a device  through a virtual-interface  over a network   note  this is the recommended method for remotely connecting to a device  telnet   establishes an insecure remote cli-connection to a device over the network   note  user-authentication  passwords and commands are sent over the network in plaintext   
cisco ios access terminal-emulation-programsterminal-emulation-programs are used to connect to a network-device by either a console-port or by an ssh telnet connection  there are several terminal-emulation-programs to chose from such as putty  tera term and securecrt  
2 2 ios navigation
ios navigation primary command modesuser-exec-mode  allows access to only a limited number of basic-monitoring-commandsidentified by the cli prompt that ends with the   symbolprivileged-exec-mode  allows access to all commands and featuresidentified by the cli prompt that ends with the   symbol
ios navigation configuration-mode and subconfiguration-modesglobal configuration-mode used to access configuration options on the device line configuration-mode  used to configure console  ssh  telnet or aux accessinterface configuration-mode  used to configure a switch port or router-interface
ios navigation navigation between ios modesprivileged-exec-mode to move from user-exec-mode to privilege-exec-mode  use the enabled command global configuration-mode  to move in and out of global configuration-mode  use the configure-terminal command  to return to privilege-exec-mode  use the exit command  line configuration-mode  to move in and out of line configuration-mode  use the line command followed by the management line type  to return to global configuration-mode  use the exit command  
ios navigation navigation between ios modes  cont  subconfiguration-modes  to move out of any subconfiguration-mode to get back to global configuration-mode  use the exit command  to return to privilege-exec-mode  use the end command or key combination ctrl  z  to move directly from one subconfiguration-mode to another  type in the desired subconfiguration-mode command  in the example  the command prompt changes from  config-line   to  config-if     
2 6 ports and addresses
ports and addresses ip-addressesthe use of ip-addresses is the primary means of enabling devices to locate one another and establish end-to-end communication on the internet  the structure of an ipv4-address is called dotted decimal-notation and is represented by four decimal-numbers between 0 and 255 an ipv4 subnet-mask is a 32-bit value that differentiates the network-portion of the address from the host-portion  coupled with the ipv4-address  the subnet-mask determines to which subnet the device is a member the default-gateway address is the ip-address of the router that the host will use to access remote-networks  including the internet 
ports and addresses ip-addresses  cont  ipv6-addresses are 128 bits in length and written as a string of hexadecimal values  every four bits is represented by a single-hexadecimal-digit  for a total of 32 hexadecimal values  groups of four hexadecimal digits are separated by a colon      ipv6-addresses are not case-sensitive and can be written in either lowercase or uppercase note  ip in this course refers to both the ipv4 and ipv6 protocols  ipv6 is the most recent version of ip and is replacing the more common ipv4 
ports and addresses interfaces and portsnetwork-communications depend on end user device interfaces  networking device interfaces  and the cables that connect them types of network-media include twisted-pair-copper-cables  fiber-optic-cables  coaxial-cables  or wireless different types of network-media have different features and benefits  some of the differences between various types of media include distance the media can successfully carry a signalenvironment in which the media is to be installedamount of data and the speed at which it must be transmittedcost of the media and installation
2 5 save configurations
save configurations configuration-filesthere are two system files that store the device configuration startup-config - this is the saved configuration-file that is stored in nvram  it contains all the commands that will be used by the device upon startup or reboot  flash does not lose its contents when the device is powered off  running-config - this is stored in random-access-memory  ram   it reflects the current configuration  modifying a running-configuration affects the operation of a cisco device immediately  ram is volatile memory  it loses all of its content when the device is powered off or restarted to save changes made to the running-configuration to the startup-configuration-file  use the copy-running-config-startup-config privileged-exec-mode command 
save configurations alter the running-configurationsif changes made to the running-config do not have the desired effect and the running-config has not yet been saved  you can restore the device to its previous configuration  to do this you can remove the changed commands individually reload the device using the reload command in privilege-exec-mode  note  this will cause the device to briefly go offline  leading to network downtime  if the undesired changes were saved to the startup-config  it may be necessary to clear all the configurations using the erase startup-config command in privilege-exec-mode  after erasing the startup-config  reload the device to clear the running-config file from ram  
save configurations capture configuration to a text fileconfiguration-files can also be saved and archived to a text document  step 1  open terminal emulation software  such as putty or tera term  that is already connected to a switch step 2  enable logging in to the terminal software and assign a name and file location to save the log file  the figure displays that all-session-output will be captured to the file specified  i e   myswitchlogs  
save configurations capture configuration to a text file  cont  step 3  execute the show-running-config or show-startup-config command at the privileged-exec-prompt  text displayed in the terminal window will be placed into the chosen file  step 4  disable logging in the terminal software  the figure shows how to disable logging by choosing the none session logging optionnote  the text file created can be used as a record of how the device is currently implemented  the file could require editing before being used to restore a saved configuration to a device 
1 3 secure remote-access
secure remote-access telnet-operationtelnet uses tcp port 23  it is an older protocol that uses unsecure plaintext-transmission of both the login-authentication  username and password  and the data transmitted between the communicating devices a threat-actor can monitor packets using wireshark  for example  in the figure the threat-actor captured the username admin and password ccna from a telnet session  
secure remote-access ssh-operationsecure-shell  ssh  is a secure protocol that uses tcp port 22  it provides a secure  encrypted  management connection to a remote device  ssh should replace telnet for management connections  ssh provides security for remote connections by providing strong encryption when a device is authenticated  username and password  and also for the transmitted data between the communicating devices the figure shows a wireshark capture of an ssh session  the threat-actor can track the session using the ip-address of the administrator device  however  unlike telnet  with ssh the username and password are encrypted 
secure remote-access verify the switch supports sshto enable ssh on a catalyst-2960 switch  the switch must be using a version of the ios software including cryptographic  encrypted  features and capabilities  use the show-version command on the switch to see which ios the switch is currently running  an ios filename that includes the combination  k9  supports cryptographic  encrypted  features and capabilities  the example shows the output of the show-version command 
secure remote-access configure sshbefore configuring ssh  the switch must be minimally configured with a unique hostname and the correct network connectivity settings step 1  verify ssh support - use the show ip ssh command to verify that the switch supports ssh  if the switch is not running an ios that supports cryptographic features  this command is unrecognized step 2  configure the ip domain - configure the ip domain-name of the network using the ip domain-name domain-name global configuration-mode command  step 3  generate rsa-key-pairs - generating an rsa-key-pair automatically enables ssh  use the crypto key generate rsa global configuration-mode command to enable the ssh server on the switch and generate an rsa-key-pair  note  to delete the rsa-key-pair  use the crypto key zeroize rsa global configuration-mode command  after the rsa-key-pair is deleted  the ssh server is automatically disabled step 4  configure user-authentication - the ssh server can authenticate users locally or using an authentication-server  to use the local authentication method  create a username and password pair using the username username secret password global configuration-mode command  step 5  configure the vty-lines - enable the ssh protocol on the vty-lines by using the transport input ssh line configuration-mode command  use the line-vty global configuration-mode command and then the login-local line configuration-mode command to require local authentication for ssh connections from the local username database step 6  enable ssh-version-2 - by default  ssh supports both versions 1 and 2  when supporting both versions  this is shown in the show ip ssh output as supporting version 2  enable ssh version using the ip ssh-version-2 global-configuration-command 
secure remote-access verify ssh is operationalon a pc  an ssh client such as putty  is used to connect to an ssh server  for example  assume the following is configured ssh is enabled on switch s1interface-vlan-99  svi  with ipv4-address 172 17 99 11 on switch s1pc1 with ipv4-address 172 17 99 21using a terminal emulator  initiate an ssh connection to the svi vlan ipv4-address of s1 from pc1 when connected  the user is prompted for a username and password as shown in the example  using the configuration from the previous example  the username admin and password ccna are entered  after entering the correct combination  the user is connected via ssh to the command-line interface  cli  on the catalyst-2960 switch 
secure remote-access verify ssh is operational  cont  to display the version and configuration data for ssh on the device that you configured as an ssh server  use the show ip ssh command  in the example  ssh-version-2 is enabled 
secure remote-access packet tracer   configure sshin this packet tracer  you will do the following secure passwordsencrypt communicationsverify ssh implementation
7 2 configure a cisco ios dhcpv4-server
configure a cisco ios dhcpv4-server cisco ios dhcpv4-servernow you have a basic understanding of how dhcpv4 works and how it can make your job a bit easier  a cisco router running cisco ios software can be configured to act as a dhcpv4-server  the cisco ios dhcpv4-server assigns and manages ipv4-addresses from specified address pools within the router to dhcpv4-clients 
configure a cisco ios dhcpv4-server steps to configure a cisco ios dhcpv4-serveruse the following steps to configure a cisco ios dhcpv4-server step 1  exclude ipv4-addresses  a single-address or a range of addresses can be excluded by specifying the low-address and high-address of the range  excluded addresses should be those addresses that are assigned to routers  servers  printers  and other devices that have been  or will be  manually-configured  you can also enter the command multiple times  the command is ip dhcp excluded-address low-address  high-address step 2  define a dhcpv4-pool name  the ip dhcp pool pool-name command creates a pool with the specified name and puts the router in dhcpv4 configuration-mode  which is identified by the prompt router dhcp-config   
configure a cisco ios dhcpv4-server steps to configure a cisco ios dhcpv4-server  cont  step 3  configure the dhcpv4-pool  the address pool and default-gateway router must be configured  use the network statement to define the range of available addresses  use the default-router command to define the default-gateway router  these commands and other optional commands are shown in the table taskios commanddefine the address pool network network-number  mask     prefix-length define the default-router or gateway default-router-address   address2  address8 define a dns server dns-server address   address2 address8 define the domain-name domain-name domaindefine the duration of the dhcp lease lease  days  hours   minutes     infinite define the netbios wins server netbios-name-server address   address2 address8 
configure a cisco ios dhcpv4-server configuration example
configure a cisco ios dhcpv4-server dhcpv4 verificationuse the commands in the table to verify that the cisco ios dhcpv4-server is operational commanddescriptionshow-running-config   section dhcpdisplays the dhcpv4 commands configured on the router show-ip-dhcp-bindingdisplays a list of all ipv4-address to mac-address bindings provided by the dhcpv4 service show ip dhcp-server statisticsdisplays count information regarding the number of dhcpv4-messages that have been sent and received
configure a cisco ios dhcpv4-server verify dhcpv4 is operationalverify the dhcpv4 configuration  as shown in the example  the show-running-config   section dhcp command output displays the dhcpv4 commands configured on r1  the   section parameter displays only the commands associated with dhcpv4 configuration 
configure a cisco ios dhcpv4-server verify dhcpv4 is operational  cont  verify dhcpv4 bindings  as shown in the example  the operation of dhcpv4 can be verified using the show-ip-dhcp-binding command  this command displays a list of all ipv4-address to mac-address bindings that have been provided by the dhcpv4 service 
configure a cisco ios dhcpv4-server verify dhcpv4 is operational  cont  verify dhcpv4 statistics  the output of the show ip dhcp-server statistics is used to verify that messages are being received or sent by the router  this command displays count information regarding the number of dhcpv4-messages that have been sent and received 
configure a cisco ios dhcpv4-server verify dhcpv4 is operational  cont  verify dhcpv4-client received ipv4-addressing  the ipconfig  all command  when issued on pc1  displays the tcp ip parameters  as shown in the example  because pc1 was connected to the network-segment 192 168 10 0 24  it automatically received a dns-suffix  ipv4-address  subnet-mask  default-gateway  and dns-server-address from that pool  no dhcp-specific router-interface configuration is required  if a pc is connected to a network-segment that has a dhcpv4-pool available  the pc can obtain an ipv4-address from the appropriate pool automatically 
configure a cisco ios dhcpv4-server disable the cisco ios dhcpv4-serverthe dhcpv4 service is enabled by default  to disable the service  use the no-service-dhcp global configuration-mode command  use the service-dhcp global configuration-mode command to re-enable the dhcpv4-server process  as shown in the example  enabling the service has no effect if the parameters are not configured note  clearing the dhcp bindings or stopping and restarting the dhcp service may result in duplicate ip-addresses being temporarily assigned on the network 
configure a cisco ios dhcpv4-server dhcpv4 relayin a complex-hierarchical-network  enterprise-servers are usually located centrally  these servers may provide dhcp  dns  tftp  and ftp-services for the network  network clients are not typically on the same subnet as those servers  in order to locate the servers and receive services  clients often use broadcast-messages in the figure  pc1 is attempting to acquire an ipv4-address from a dhcpv4-server using a broadcast message  in this scenario  r1 is not configured as a dhcpv4-server and does not forward the broadcast  because the dhcpv4-server is located on a different network  pc1 cannot receive an ip-address using dhcp  r1 must be configured to relay dhcpv4-messages to the dhcpv4-server 
configure a cisco ios dhcpv4-server dhcpv4 relay  cont  configure r1 with the ip-helper-address address interface configuration command  this will cause r1 to relay dhcpv4-broadcasts to the dhcpv4-server  as shown in the example  the interface on r1 receiving the broadcast from pc1 is configured to relay dhcpv4 address to the dhcpv4-server at 192 168 11 6 when r1 has been configured as a dhcpv4-relay-agent  it accepts broadcast-requests for the dhcpv4 service and then forwards those requests as a unicast to the ipv4-address 192 168 11 6  the network administrator can use the show-ip-interface command to verify the configuration 
configure a cisco ios dhcpv4-server other service broadcasts relayeddhcpv4 is not the only service that the router can be configured to relay  by default  the ip-helper-address command forwards the following eight udp services port 37  timeport 49  tacacsport 53  dnsport 67  dhcp bootp serverport 68  dhcp bootp clientport 69  tftpport 137  netbios-name-serviceport 138  netbios-datagram-service
configure a cisco ios dhcpv4-server packet tracer   configure dhcpv4in this packet tracer activity  you will complete the following objectives part 1  configure a router as a dhcp-serverpart 2  configure dhcp-relaypart 3  configure a router as a dhcp-clientpart 4  verify dhcp and connectivity
7 3 configure a dhcpv4-client
configure a dhcpv4-client cisco router as a dhcpv4-clientthere are scenarios where you might have access to a dhcp-server through your isp  in these instances  you can configure a cisco-ios-router as a dhcpv4-client  sometimes  cisco routers in a small office or home office  soho  and branch sites have to be configured as dhcpv4-clients in a similar manner to client computers  the method used depends on the isp  however  in its simplest configuration  the ethernet-interface is used to connect to a cable or dsl-modem to configure an ethernet-interface as a dhcp-client  use the ip-address dhcp interface configuration-mode command in the figure  assume that an isp has been configured to provide select customers with ip-addresses from the 209 165 201 0 27 network range after the g0 0 1 interface is configured with the ip-address dhcp command 
configure a dhcpv4-client configuration exampleto configure an ethernet-interface as a dhcp-client  use the ip-address dhcp interface configuration-mode command  as shown in the example  this configuration assumes that the isp has been configured to provide select customers with ipv4-addressing information the show-ip-interface g0 1 command confirms that the interface is up and that the address was allocated by a dhcpv4-server 
configure a dhcpv4-client home router as a dhcpv4-clienthome routers are typically already set to receive ipv4-addressing information automatically from the isp  this is so that customers can easily set up the router and connect to the internet for example  the figure shows the default wan setup page for a packet tracer wireless-router  notice that the internet connection type is set to automatic configuration - dhcp  this selection is used when the router is connected to a dsl or cable-modem and acts as a dhcpv4-client  requesting an ipv4-address from the isp various manufacturers of home routers will have a similar setup 
switching  routing and wireless essentials v7 0  srwe module 7  dhcpv4
module objectivesmodule title  dhcpv4module objective   implement dhcpv4 to operate across multiple lanstopic titletopic objectivedhcp4 conceptsexplain how dhcpv4 operates in a small- to medium-sized business network configure a cisco ios dhcp4 serverconfigure a router as a dhcpv4-server configure a dhcp4 clientconfigure a router as a dhcpv4-client 
7 1 dhcpv4 concepts
dhcpv4 concepts dhcpv4-server and clientdynamic-host-configuration-protocol-v4  dhcpv4  assigns ipv4-addresses and other network configuration information dynamically  because desktop clients typically make up the bulk of network nodes  dhcpv4 is an extremely useful and timesaving tool for network administrators a dedicated dhcpv4-server is scalable and relatively easy to manage  however  in a small branch or soho-location  a cisco router can be configured to provide dhcpv4 services without the need for a dedicated server  cisco ios software supports an optional  full-featured dhcpv4-server the dhcpv4-server dynamically assigns  or leases  an ipv4-address from a pool of addresses for a limited period of time chosen by the server  or until the client no longer needs the address clients lease the information from the server for an administratively defined period  administrators configure dhcpv4-servers to set the leases to time out at different intervals  the lease is typically anywhere from 24 hours to a week or more  when the lease expires  the client must ask for another address  although the client is typically reassigned the same address 
dhcpv4 concepts dhcpv4 operationdhcpv4 works in a client server mode  when a client communicates with a dhcpv4-server  the server assigns or leases an ipv4-address to that client  the client connects to the network with that leased ipv4-address until the lease expires  the client must contact the dhcp-server periodically to extend the lease  this lease mechanism ensures that clients that move or power off do not keep addresses that they no longer need  when a lease expires  the dhcp-server returns the address to the pool where it can be reallocated as necessary 
dhcpv4 concepts steps to obtain a leasewhen the client boots  or otherwise wants to join a network   it begins a four-step process to obtain a lease dhcp-discover  dhcpdiscover dhcp-offer  dhcpoffer dhcp-request  dhcprequest dhcp-acknowledgment  dhcpack 
dhcpv4 concepts steps to renew a leaseprior to lease expiration  the client begins a two-step process to renew the lease with the dhcpv4-server  as shown in the figure 1  dhcp-request  dhcprequest before the lease expires  the client sends a dhcprequest message directly to the dhcpv4-server that originally offered the ipv4-address  if a dhcpack is not received within a specified amount of time  the client broadcasts another dhcprequest so that one of the other dhcpv4-servers can extend the lease 2  dhcp-acknowledgment  dhcpack on receiving the dhcprequest message  the server verifies the lease information by returning a dhcpack note  these messages  primarily the dhcpoffer and dhcpack  can be sent as unicast or broadcast according to ietf rfc 2131 
15 4 ip-addressing services
ip-addressing services domain-name-servicedomain-names were created to convert the numeric ip-addresses into a simple  recognizable name fully-qualified domain-names  fqdns   such as http www cisco com  are much easier for people to remember than 198 133 219 25 the dns protocol defines an automated service that matches resource names with the required numeric-network-address  it includes the format for queries  responses  and data 
ip-addressing services dns-message formatthe dns server stores different types of resource-records that are used to resolve names  these records contain the name  address  and type of record some of these record types are as follows a - an end-device ipv4-addressns - an authoritative name serveraaaa - an end-device ipv6-address  pronounced quad-a mx - a mail exchange recordwhen a client makes a query  the server dns process first looks at its own records to resolve the name  if it is unable to resolve the name by using its stored records  it contacts other servers to resolve the name  after a match is found and returned to the original requesting server  the server temporarily stores the numbered address in the event that the same name is requested again 
ip-addressing services dns-message format  cont  dns uses the same message format between servers  consisting of a question  answer  authority  and additional information for all types of client-queries and server-responses  error-messages  and transfer of resource-record information dns-message sectiondescriptionquestionthe question for the name serveranswerresource-records answering the questionauthorityresource-records pointing toward an authorityadditionalresource-records holding additional information
ip-addressing services dns-hierarchydns uses a hierarchical-system to create a database to provide name resolution each dns server maintains a specific database file and is only responsible for managing name-to-ip-mappings for that small portion of the entire dns structure when a dns server receives a request for a name translation that is not within its dns-zone  the dns server forwards the request to another dns server within the proper zone for translation examples of top-level domains  com - a business or industry org - a non-profit organization au - australia
ip-addressing services the nslookup commandnslookup is a computer operating system utility that allows a user to manually query the dns servers configured on the device to resolve a given host name  this utility can also be used to troubleshoot name resolution issues and to verify the current status of the name servers when the nslookup command is issued  the default dns server configured for your host is displayed   the name of a host or domain can be entered at the nslookup prompt 
ip-addressing services dynamic-host-configuration-protocolthe dynamic-host-configuration-protocol  dhcp  for ipv4 service automates the assignment of ipv4-addresses  subnet-masks  gateways  and other ipv4 networking parameters  dhcp is considered dynamic-addressing compared to static-addressing  static-addressing is manually entering ip-address information when a host connects to the network  the dhcp-server is contacted  and an address is requested  the dhcp-server chooses an address from a configured range of addresses called a pool and assigns  leases  it to the host many networks use both dhcp and static-addressing  dhcp is used for general purpose hosts  such as end user devices  static-addressing is used for network-devices  such as gateway routers  switches  servers  and printers note  dhcp for ipv6  dhcpv6  provides similar services for ipv6 clients  however  dhcpv6 does not provide a default-gateway address  this can only be obtained dynamically from the router-advertisement message of the router 
ip-addressing services dhcp-operationthe dhcp process  when an ipv4  dhcp-configured device boots up or connects to the network  the client broadcasts a dhcp-discover  dhcpdiscover  message to identify any available dhcp-servers on the network a dhcp-server replies with a dhcp-offer  dhcpoffer  message  which offers a lease to the client   if a client receives more than one offer due to multiple dhcp-servers on the network  it must choose one  the client sends a dhcp-request  dhcprequest  message that identifies the explicit server and lease offer that the client is accepting  the server then returns a dhcp-acknowledgment  dhcpack  message that acknowledges to the client that the lease has been finalized if the offer is no longer valid  then the selected server responds with a dhcp negative acknowledgment  dhcpnak  message and the process must begin with a new dhcpdiscover-message  note  dhcpv6 has a set of messages that is similar to those for dhcpv4  the dhcpv6 messages are solicit  advertise  information request  and reply 
ip-addressing services lab   observe dns resolutionin this lab  you complete the following objectives  observe the dns conversion of a url to an ip-addressobserve dns lookup using the nslookup command on a web site observe dns lookup using the nslookup command on mail servers
6 2 configure etherchannel
configure etherchannel configuration guidelinesthe following guidelines and restrictions are useful for configuring etherchannel etherchannel support - all ethernet-interfaces must support etherchannel with no requirement that interfaces be physically contiguous speed and duplex - configure all interfaces in an etherchannel to operate at the same speed and in the same duplex-mode vlan match - all interfaces in the etherchannel bundle must be assigned to the same vlan or be configured as a trunk  shown in the figure  range of vlans - an etherchannel supports the same allowed range of vlans on all the interfaces in a trunking-etherchannel  if the allowed range of vlans is not the same  the interfaces do not form an etherchannel  even when they are set to auto or desirable-mode 
configure etherchannel configuration guidelines  cont  the figure shows a configuration that would allow an etherchannel to form between s1 and s2 if these settings must be changed  configure them in port-channel-interface configuration-mode  any configuration that is applied to the port-channel-interface also affects individual-interfaces  however  configurations that are applied to the individual-interfaces do not affect the port-channel-interface  therefore  making configuration changes to an interface that is part of an etherchannel-link may cause interface compatibility issues the port-channel can be configured in access-mode  trunk-mode  most common   or on-a-routed-port 
configure etherchannel lacp configuration exampleconfiguring etherchannel with lacp requires the following three steps step 1  specify the interfaces that compose the etherchannel group using the interface-range interface global configuration-mode command  the range keyword allows you to select several-interfaces and configure them all together step 2  create the port-channel-interface with the channel-group identifier mode active command in interface-range configuration-mode  the identifier specifies a channel group number  the mode active keywords identify this as an lacp etherchannel configuration step3  to change layer-2 settings on the port-channel-interface  enter port-channel-interface configuration-mode using the interface port-channel command  followed by the interface-identifier  in the example  s1 is configured with an lacp etherchannel  the port-channel is configured as a trunk interface with the allowed vlans specified 
configure etherchannel packet tracer   configure etherchannelin this packet tracer  you will complete the following objectives configure basic switch settingsconfigure an etherchannel with cisco pagpconfigure and 802 3ad etherchannelconfigure a redundant etherchannel-link
module 6  etherchannelswitching  routing and wireless essentials v7 0  srwe 
module objectivesmodule title  etherchannelmodule objective  troubleshoot etherchannel on switched links topic titletopic objectiveetherchannel operationdescribe etherchannel technology configure etherchannelconfigure etherchannel verify and troubleshoot etherchanneltroubleshoot etherchannel 
6 1 etherchannel operation
etherchannel operation link-aggregationthere are scenarios in which more bandwidth or redundancy between devices is needed than what can be provided by a single-link  multiple-links could be connected between devices to increase bandwidth  however  spanning-tree-protocol  stp   which is enabled on layer-2 devices like cisco-switches by default  will block redundant links to prevent switching-loops a link-aggregation-technology is needed that allows redundant links between devices that will not be blocked by stp  that technology is known as etherchannel etherchannel is a link-aggregation-technology that groups multiple-physical-ethernet-links together into one single-logical-link  it is used to provide fault-tolerance  load sharing  increased bandwidth  and redundancy between switches  routers  and servers etherchannel technology makes it possible to combine the number of physical links between the switches to increase the overall speed of switch-to-switch communication 
etherchannel operation etherchanneletherchannel technology was originally developed by cisco as a lan switch-to-switch technique of grouping several fast-ethernet or gigabit-ethernet ports into one logical channel  when an etherchannel is configured  the resulting virtual-interface is called a port-channel  the physical-interfaces are bundled together into a port-channel-interface  as shown in the figure 
etherchannel operation advantages of etherchanneletherchannel technology has many advantages  including the following most configuration tasks can be done on the etherchannel interface instead of on each individual-port  ensuring configuration consistency throughout the links etherchannel relies on existing switch ports  there is no need to upgrade the link to a faster and more expensive connection to have more bandwidth load-balancing takes place between links that are part of the same etherchannel  etherchannel creates an aggregation that is seen as one logical link  when several etherchannel bundles exist between two switches  stp may block one of the bundles to prevent switching-loops  when stp blocks one of the redundant links  it blocks the entire etherchannel  this blocks all the ports belonging to that etherchannel-link  where there is only one etherchannel-link  all physical links in the etherchannel are active because stp sees only one  logical  link etherchannel provides redundancy because the overall link is seen as one logical connection  additionally  the loss of one physical link within the channel does not create a change in the topology  
etherchannel operation implementation restrictionsetherchannel has certain implementation restrictions  including the following interface types cannot be mixed  for example  fast-ethernet and gigabit-ethernet cannot be mixed within a single etherchannel currently each etherchannel can consist of up to eight compatibly-configured ethernet ports  etherchannel provides full-duplex bandwidth up to 800 mbps  fast etherchannel  or 8 gbps  gigabit etherchannel  between one switch and another switch or host the cisco catalyst-2960 layer-2 switch currently supports up to six etherchannels  the individual etherchannel group member port configuration must be consistent on both devices  if the physical ports of one side are configured as trunks  the physical ports of the other side must also be configured as trunks within the same native-vlan  additionally  all ports in each etherchannel-link must be configured as layer-2 ports each etherchannel has a logical port-channel-interface  a configuration applied to the port-channel-interface affects all physical-interfaces that are assigned to that interface 
etherchannel operation autonegotiation protocolsetherchannels can be formed through negotiation using one of two protocols  port-aggregation-protocol  pagp  or link-aggregation control protocol  lacp   these protocols allow ports with similar characteristics to form a channel through dynamic negotiation with adjoining switches note  it is also possible to configure a static or unconditional etherchannel without pagp or lacp 
etherchannel operation pagp operationpagp  pronounced  pag - p   is a cisco-proprietary protocol that aids in the automatic creation of etherchannel-links  when an etherchannel-link is configured using pagp  pagp packets are sent between etherchannel-capable ports to negotiate the forming of a channel  when pagp identifies matched ethernet links  it groups the links into an etherchannel  the etherchannel is then added to the spanning-tree as a single port when enabled  pagp also manages the etherchannel  pagp packets are sent every 30 seconds  pagp checks for configuration consistency and manages link additions and failures between two switches  it ensures that when an etherchannel is created  all ports have the same type of configuration note  in etherchannel  it is mandatory that all ports have the same speed  duplex setting  and vlan information  any port modification after the creation of the channel also changes all other channel ports 
etherchannel operation pagp operation  cont  pagp helps create the etherchannel-link by detecting the configuration of each side and ensuring that links are compatible so that the etherchannel-link can be enabled when needed  the modes for pagp as follows on - this mode forces the interface to channel without pagp  interfaces configured in the on mode do not exchange pagp packets pagp desirable - this pagp mode places an interface in an active negotiating state in which the interface initiates negotiations with other interfaces by sending pagp packets pagp auto - this pagp mode places an interface in a passive negotiating state in which the interface responds to the pagp packets that it receives but does not initiate pagp negotiation the modes must be compatible on each side  if one side is configured to be in auto mode  it is placed in a passive state  waiting for the other side to initiate the etherchannel negotiation  if the other side is also set to auto  the negotiation never starts and the etherchannel does not form  if all modes are disabled by using the no command  or if no mode is configured  then the etherchannel is disabled  the on mode manually places the interface in an etherchannel  without any negotiation  it works only if the other side is also set to on  if the other side is set to negotiate parameters through pagp  no etherchannel forms  because the side that is set to on mode does not negotiate  no negotiation between the two switches means there is no checking to make sure that all the links in the etherchannel are terminating on the other side  or that there is pagp compatibility on the other switch 
etherchannel operation pagp mode settings examplethe table shows the various combination of pagp modes on s1 and s2 and the resulting channel establishment outcome s1s2channel establishmentononyesondesirable autonodesirabledesirableyesdesirableautoyesautodesirableyesautoautono
etherchannel operation lacp operationlacp is part of an ieee specification  802 3ad  that allows several physical ports to be bundled to form a single logical channel  lacp allows a switch to negotiate an automatic bundle by sending lacp packets to the other switch  it performs a function similar to pagp with cisco etherchannel  because lacp is an ieee standard  it can be used to facilitate etherchannels in multivendor environments  on cisco devices  both protocols are supported lacp provides the same negotiation benefits as pagp  lacp helps create the etherchannel-link by detecting the configuration of each side and making sure that they are compatible so that the etherchannel-link can be enabled when needed  the modes for lacp are as follows on - this mode forces the interface to channel without lacp  interfaces configured in the on mode do not exchange lacp packets lacp active - this lacp mode places a port in an active negotiating state  in this state  the port initiates negotiations with other ports by sending lacp packets lacp passive - this lacp mode places a port in a passive negotiating state  in this state  the port responds to the lacp packets that it receives but does not initiate lacp packet negotiation 
etherchannel operation lacp mode settings examplethe table shows the various combination of lacp modes on s1 and s2 and the resulting channel establishment outcome s1s2channel establishmentononyesonactive passivenoactiveactiveyesactivepassiveyespassiveactiveyespassivepassiveno
6 3 verify and troubleshoot etherchannel
verify and troubleshoot etherchannel verify etherchannelas always  when you configure devices in your network  you must verify your configuration  if there are problems  you will also need to be able to troubleshoot and fix them  there are a number of commands to verify an etherchannel configuration the show-interfaces port-channel command displays the general status of the port-channel-interface  the show-etherchannel-summary command displays one line of information per port-channel the show-etherchannel-port-channel command displays information about a specific port-channel-interface the show-interfaces etherchannel command can provide information about the role of a physical member interface of the etherchannel 
verify and troubleshoot etherchannel common issues with etherchannel configurationsall interfaces within an etherchannel must have the same configuration of speed and duplex-mode  native and allowed vlans on trunks  and access vlan on access-ports  ensuring these configurations will significantly reduce network problems related to etherchannel  common etherchannel issues include the following assigned-ports in the etherchannel are not part of the same vlan  or not configured as trunks  ports with different native-vlans cannot form an etherchannel trunking was configured on some of the ports that make up the etherchannel  but not all of them  it is not recommended that you configure trunking-mode on individual-ports that make up the etherchannel  when configuring a trunk on an etherchannel  verify the trunking-mode on the etherchannel if the allowed range of vlans is not the same  the ports do not form an etherchannel even when pagp is set to the auto or desirable-mode the dynamic negotiation options for pagp and lacp are not compatibly configured on both ends of the etherchannel 
verify and troubleshoot etherchannel troubleshoot etherchannel examplein the figure  interfaces f0 1 and f0 2 on switches s1 and s2 are connected with an etherchannel  however  the etherchannel is not operational 
verify and troubleshoot etherchannel troubleshoot etherchannel example  cont  step 1  view the etherchannel summary information  the output of the show-etherchannel-summary command indicates that the etherchannel is down  
verify and troubleshoot etherchannel troubleshoot etherchannel example  cont  step 2  view port-channel configuration  in the show run   begin interface port-channel output  more detailed output indicates that there are incompatible pagp modes configured on s1 and s2 
verify and troubleshoot etherchannel troubleshoot etherchannel example  cont  step 3  correct the misconfiguration  to correct the issue  the pagp mode on the etherchannel is changed to desirable note  etherchannel and stp must interoperate  for this reason  the order in which etherchannel-related commands are entered is important  which is why you see interface port-channel 1 removed and then re-added with the channel-group command  as opposed to directly changed  if one tries to change the configuration directly  stp errors cause the associated ports to go into blocking or errdisabled state 
verify and troubleshoot etherchannel troubleshoot etherchannel example  cont  step 4  verify etherchannel is operational  the etherchannel is now active as verified by the output of the show-etherchannel-summary command 
verify and troubleshoot etherchannel packet tracer   troubleshoot etherchannelin this packet tracer  you will complete the following examine the physical-layer and correct switch port mode issuesidentify and correct port-channel assignment issuesidentify and correct port-channel assignment issues
switching  routing and wireless essentials v7 0  srwe module 9  fhrp concepts
module objectivesmodule title  fhrp conceptsmodule objective   explain how fhrps provide default-gateway services in a redundant-network topic titletopic objectivefirst-hop-redundancy-protocolsexplain the purpose and operation of first-hop-redundancy-protocols hsrpexplain how hsrp operates 
9 1 first-hop-redundancy-protocols
first-hop-redundancy-protocols default-gateway limitationsend-devices are typically configured with a single default-gateway ipv4-address  if the default-gateway router-interface fails  lan hosts lose outside lan connectivity this occurs even if a redundant router or layer-3 switch that could serve as a default-gateway exists first-hop-redundancy-protocols  fhrps  are mechanisms that provide alternate default-gateways in switched networks where two or more routers are connected to the same vlans  
first-hop-redundancy-protocols router-redundancyone way to prevent a single-point of failure at the default-gateway is to implement a virtual-router  to implement this type of router-redundancy  multiple-routers are configured to work together to present the illusion of a single-router to the hosts on the lan  by sharing an ip-address and a mac-address  two or more routers can act as a single virtual-router the ipv4-address of the virtual-router is configured as the default-gateway for the workstations on a specific ipv4 segment  when frames are sent from host devices to the default-gateway  the hosts use arp to resolve the mac-address that is associated with the ipv4-address of the default-gateway  the arp resolution returns the mac-address of the virtual-router  frames that are sent to the mac-address of the virtual-router can then be physically processed by the currently active-router within the virtual-router group  a protocol is used to identify two or more routers as the devices that are responsible for processing frames that are sent to the mac or ip-address of a single virtual-router  host devices send traffic to the address of the virtual-router  the physical router that forwards this traffic is transparent to the host devices 
first-hop-redundancy-protocols router-redundancy  cont  a redundancy protocol provides the mechanism for determining which router should take the active role in forwarding traffic  it also determines when the forwarding role must be taken over by a standby router  the transition from one forwarding-router to another is transparent to the end-devices the ability of a network to dynamically recover from the failure of a device acting as a default-gateway is known as first-hop redundancy 
first-hop-redundancy-protocols steps for router failoverwhen the active-router fails  the redundancy protocol transitions the standby router to the new active-router role  as shown in the figure  these are the steps that take place when the active-router fails the standby router stops seeing hello-messages from the forwarding-router the standby router assumes the role of the forwarding-router because the new forwarding-router assumes both the ipv4 and mac-addresses of the virtual-router  the host devices see no disruption in service 
first-hop-redundancy-protocols fhrp optionsfhrp optionsdescriptionhot-standby-router-protocol  hsrp hrsp is a cisco-proprietary fhrp that is designed to allow for transparent failover of a-first-hop-ipv4-device  hsrp is used in a group of routers for selecting an active device and a standby device  the active device is the device that is used for routing-packets  the standby device is the device that takes over when the active device fails  or when pre-set conditions are met  hsrp for ipv6this is a cisco-proprietary fhrp that provides the same functionality of hsrp  but in an ipv6 environment  an hsrp ipv6 group has a virtual mac-address derived from the hsrp group number and a virtual ipv6-link-local-address derived from the hsrp virtual mac-address  periodic router-advertisements  ras  are sent for the hsrp virtual ipv6-link-local-address when the hsrp group is active  when the group becomes inactive  these ras stop after a final ra is sent virtual-router-redundancy protocol version 2  vrrpv2 this is a non-proprietary election protocol that dynamically assigns responsibility for one or more virtual-routers to the vrrp routers on an ipv4 lan  this allows several routers on a multiaccess-link to use the same virtual ipv4-address  in a vrrp configuration  one router is elected as the virtual-router master  with the other-routers acting as backups  in case the virtual-router master fails vrrpv3this provides the capability to support ipv4 and ipv6-addresses  vrrpv3 works in multi-vendor environments and is more scalable than vrrpv2 gateway load-balancing protocol  glbp this is a cisco-proprietary fhrp that protects data traffic from a failed router or circuit  like hsrp and vrrp  while also allowing load-balancing  also called load sharing  between a group of redundant routers glbp for ipv6this is a cisco-proprietary fhrp that provides the same functionality of glbp  but in an ipv6 environment  glbp for ipv6 provides automatic router backup for ipv6 hosts configured with a single default-gateway on a lan  multiple-first-hop-routers on the lan combine to offer a single-virtual-first-hop-ipv6-router while sharing the ipv6-packet-forwarding load icmp-router-discovery protocol  irdp specified in rfc 1256  irdp is a legacy fhrp solution  irdp allows ipv4 hosts to locate routers that provide ipv4 connectivity to other  nonlocal  ip-networks 
9 2 hsrp
hsrp hsrp overviewcisco provides hsrp and hsrp for ipv6 as a way to avoid losing outside-network access if your default-router fails  hsrp is a cisco-proprietary fhrp that is designed to allow for transparent failover of a first-hop ip device hsrp ensures high network availability by providing first-hop routing redundancy for ip hosts on networks configured with an ip-default-gateway address  hsrp is used in a group of routers for selecting an active device and a standby device  in a group of device interfaces  the active device is the device that is used for routing-packets  the standby device is the device that takes over when the active device fails  or when pre-set conditions are met  the function of the hsrp standby router is to monitor the operational-status of the hsrp group and to quickly assume packet-forwarding responsibility if the active-router fails 
hsrp hsrp priority and preemptionthe role of the active and standby routers is determined during the hsrp election process  by default  the router with the numerically highest ipv4-address is elected as the active-router  however  it is always better to control how your network will operate under normal conditions rather than leaving it to chance hsrp priority can be used to determine the active-router  the router with the-highest-hsrp-priority will become the active-router  by default  the hsrp priority is 100 if the priorities are equal  the router with the numerically highest ipv4-address is elected as the active-router to configure a router to be the active-router  use the standby-priority interface command  the range of the hsrp priority is 0 to 255 
hsrp hsrp priority and preemption  cont  by default  after a router becomes the active-router  it will remain the active-router even if another-router comes online with a higher hsrp priority to force a new hsrp election process to take place when a higher priority router comes online  preemption must be enabled using the standby-preempt interface command  preemption is the ability of an hsrp router to trigger the re-election-process  with preemption enabled  a router that comes online with a higher hsrp priority will assume the role of the active-router preemption only allows a router to become the active-router if it has a higher priority  a router enabled for preemption  with equal priority but a higher-ipv4-address will not preempt an active-router  refer to the topology in the figure note  with preemption disabled  the router that boots up first will become the active-router if there are no other-routers online during the election process 
hsrp hsrp states and timeshsrp statedescriptioninitialthis state is entered through a configuration change or when an interface first becomes available learnthe router has not determined the virtual ip-address and has not yet seen a hello message from the active-router  in this state  the router waits to hear from the active-router listenthe router knows the virtual ip-address  but the router is neither the active-router nor the standby router  it listens for hello-messages from those routers speakthe router sends periodic hello-messages and actively participates in the election of the active and or standby router standbythe router is a candidate to become the next active-router and sends periodic hello-messages the active and standby hsrp routers send hello-packets to the hsrp group multicast-address every 3 seconds by default  the standby router will become active if it does not receive a hello message from the active-router after 10 seconds  you can lower these timer settings to speed up the failover or preemption  however  to avoid increased cpu usage and unnecessary standby state changes  do not set the hello-timer below 1 second or the hold timer below 4 seconds 
15 5 file-sharing-services
file-sharing-services file-transfer-protocolftp was developed to allow for data-transfers between a client and a server  an ftp client is an application which runs on a computer that is being used to push and pull data from an ftp server step 1 - the client establishes the first connection to the server for control traffic using tcp port 21  the traffic consists of client commands and server replies step 2 - the client establishes the second connection to the server for the actual data transfer using tcp port 20  this connection is created every time there is data to be transferred step 3 - the data transfer can happen in either direction  the client can download  pull  data from the server  or the client can upload  push  data to the server 
file-sharing-services server-message-blockthe server-message-block  smb  is a client server  request-response file sharing protocol  servers can make their own resources available to clients on the network three functions of smb-messages start  authenticate  and terminate-sessionscontrol file and printer accessallow an application to send or receive messages to or from another deviceunlike the file sharing supported by ftp  clients establish a long-term-connection to servers  after the connection is established  the user of the client can access the resources on the server as though the resource is local to the client host 
module 13  icmp introduction of networks v7 0  itn 
module objectivesmodule title  icmpmodule objective  use various tools to test network connectivity topic titletopic objectiveicmp-messagesexplain how icmp is used to test network connectivity ping and traceroute-testinguse ping and traceroute utilities to test network connectivity 
13 1 icmp-messages
icmp-messages icmpv4 and icmpv6-messagesinternet-control-message-protocol  icmp  provides feedback about issues related to the processing of ip-packets under certain conditions icmpv4 is the messaging-protocol for ipv4  icmpv6 is the messaging-protocol for ipv6 and includes additional functionality the icmp-messages common to both icmpv4 and icmpv6 include host-reachabilitydestination or service-unreachabletime-exceedednote  icmpv4-messages are not required and are often not allowed within a network for security reasons  
icmp-messages host-reachabilityicmp-echo-message can be used to test the reachability of a host on an ip-network  in the example the local-host sends an icmp-echo-request to a host  if the host is available  the destination-host responds with an echo-reply 
icmp-messages destination or service-unreachablean icmp destination unreachable message can be used to notify the source that a destination or service is unreachable  the icmp-message will include a code indicating why the packet could not be delivered a few destination unreachable codes for icmpv4 are as follows 0 - net-unreachable1 - host-unreachable2 - protocol-unreachable3 - port-unreachablea few destination unreachable codes for icmpv6 are as follows 0 - no route to destination1 - communication with the destination is administratively prohibited  e g   firewall 2   beyond scope of the source address3 - address unreachable4 - port-unreachablenote  icmpv6 has similar but slightly different codes for destination unreachable messages 
icmp-messages  time-exceededwhen the time-to-live  ttl  field in a packet is decremented to 0  an icmpv4 time-exceeded message will be sent to the source host  icmpv6 also sends a time-exceeded message  instead of the ipv4 ttl field  icmpv6 uses the ipv6 hop-limit field to determine if the packet has expired note  time-exceeded messages are used by the traceroute tool 
icmp-messages icmpv6-messagesicmpv6 has new features and improved functionality not found in icmpv4  including four new protocols as part of the neighbor-discovery protocol  nd or ndp  messaging between an ipv6 router and an ipv6 device  including dynamic address allocation are as follows router-solicitation  rs  messagerouter-advertisement  ra  messagemessaging between ipv6 devices  including duplicate-address-detection and address-resolution are as follows neighbor-solicitation  ns  messageneighbor-advertisement  na  messagenote  icmpv6 nd also includes the redirect message  which has a similar function to the redirect message used in icmpv4 
icmp-messages icmpv6-messages  cont  ra-messages are sent by ipv6-enabled routers every 200 seconds to provide addressing information to ipv6-enabled hosts ra-message can include addressing information for the host such as the prefix  prefix-length  dns-address  and domain-name  a host using stateless-address autoconfiguration  slaac  will set its default-gateway to the link-local-address of the router that sent the ra 
icmp-messages icmpv6-messages  cont  an ipv6-enabled router will also send out an ra-message in response to an rs message  in the figure  pc1 sends a rs message to determine how to receive its ipv6-address information dynamically  r1 replies to the rs with an ra-message pc1 sends an rs message   hi  i just booted up  is there an ipv6 router on the network  i need to know how to get my ipv6-address information dynamically  r1 replies with an ra-message   hi all ipv6-enabled devices  i m r1 and you can use slaac to create an ipv6-global-unicast-address  the prefix is 2001 db8 acad 1   64  by the way  use my link-local-address fe80  1 as your default-gateway  
icmp-messages icmpv6-messages  cont  a device assigned a global ipv6 unicast or link-local-unicast-address  may perform duplicate-address-detection  dad  to ensure that the ipv6-address is unique  to check the uniqueness of an address  the device will send an ns-message with its own ipv6-address as the targeted ipv6-address if another device on the network has this address  it will respond with an na message notifying to the sending device that the address is in use  note  dad is not required  but rfc 4861 recommends that dad is performed on unicast addresses 
icmp-messages icmpv6-messages  cont  to determine the mac-address for the destination  the device will send an ns-message to the solicited-node-address  the message will include the known  targeted  ipv6-address  the device that has the targeted ipv6-address will respond with an na message containing its ethernet mac-address in the figure  r1 sends a ns-message to 2001 db8 acad 1  10 asking for its mac-address  
13 2 ping and traceroute tests
ping and traceroute tests ping   test connectivitythe ping command is an ipv4 and ipv6 testing utility that uses icmp-echo-request-and-echo-reply-messages to test connectivity between hosts and provides a summary that includes the success rate and average round-trip-time to the destination if a reply is not received within the timeout  ping provides a message indicating that a response was not received it is common for the first ping to timeout if address-resolution  arp or nd  needs to be performed before sending the icmp-echo-request 
ping and traceroute tests ping the loopbackping can be used to test the internal configuration of ipv4 or ipv6 on the local-host  to do this  ping the local-loopback-address of 127 0 0 1 for ipv4    1 for ipv6  a response from 127 0 0 1 for ipv4  or   1 for ipv6  indicates that ip is properly installed on the host an error message indicates that tcp ip is not operational on the host 
ping and traceroute tests ping the default-gatewaythe ping command can be used to test the ability of a host to communicate on the local-network  the default-gateway address is most often used because the router is normally always operational a successful ping to the default-gateway indicates that the host and the router-interface serving as the default-gateway are both operational on the local-network if the default-gateway address does not respond  a ping can be sent to the ip-address of another host on the local-network that is known to be operational 
ping and traceroute tests ping a remote-hostping can also be used to test the ability of a local-host to communicate across an internetwork a local-host can ping a host on a remote-network  a successful ping across the internetwork confirms communication on the local-network note  many network administrators limit or prohibit the entry of icmp-messages therefore  the lack of a ping response could be due to security restrictions 
ping and traceroute tests traceroute   test-the-pathtraceroute  tracert  is a utility that is used to test-the-path between two hosts and provide a list of hops that were successfully reached along that path traceroute provides round-trip-time for each hop along the path and indicates if a hop fails to respond  an asterisk     is used to indicate a lost or unreplied packet this information can be used to locate a problematic router in the path or may indicate that the router is configured not to reply  note  traceroute makes use of a function of the ttl field in ipv4 and the hop-limit field in ipv6 in the layer-3 headers  along with the icmp time-exceeded message 
ping and traceroute tests traceroute   test-the-path  cont  the first message sent from traceroute will have a ttl field value of 1  this causes the ttl to time out at the first router  this router then responds with a icmpv4 time-exceeded message  traceroute then progressively increments the ttl field  2  3  4     for each sequence of messages  this provides the trace with the address of each hop as the packets time out further down the path  the ttl field continues to be increased until the destination is reached  or it is incremented to a predefined maximum 
ping and traceroute tests packet tracer   verify ipv4 and ipv6-addressingin this packet tracer  you will do the following complete the addressing table documentation test connectivity using pingdiscover the path by tracing the route
ping and traceroute tests packet tracer   use ping and traceroute to test network connectivityin this packet tracer  you will do the following test and restore ipv4 connectivitytest and restore ipv6 connectivity
9 2 arp
arp arp overviewa device uses arp to determine the destination-mac-address of a local device when it knows its ipv4-address arp provides two basic functions resolving ipv4-addresses to mac-addressesmaintaining an arp-table of ipv4 to mac-address mappings
arp arp functionsto send a frame  a device will search its arp-table for a destination ipv4-address and a corresponding mac-address if the packet s destination ipv4-address is on the same network  the device will search the arp-table for the destination ipv4-address if the destination ipv4-address is on a different network  the device will search the arp-table for the ipv4-address of the default-gateway if the device locates the ipv4-address  its corresponding mac-address is used as the destination-mac-address in the frame  if there is no arp-table entry is found  then the device sends an arp-request 
arp video - arp-requestthis video will cover an arp-request for a mac-address 
arp video   arp operation - arp-replythis video will cover an arp-reply in response to an arp-request 
arp video - arp role in remote communicationsthis video will cover how an arp-request will provide a host the mac-address of the default-gateway 
arp removing entries from an arp-tableentries in the arp-table are not permanent and are removed when an arp cache timer expires after a specified period of time the duration of the arp cache timer differs depending on the operating system arp-table entries can also be removed manually by the administrator  
arp arp-tables on networking-devicesthe show-ip-arp command displays the arp-table on a cisco router the arp  a command displays the arp-table on a windows 10 pc r1  show-ip-arp          protocol  address          age  min   hardware addr   type   interfaceinternet  192 168 10 1            -   a0e0 af0d e140  arpa   gigabitethernet0 0 0c  users pc  arp -ainterface  192 168 1 124 --- 0x10internet address      physical address      type192 168 1 1           c8-d7-19-cc-a0-86     dynamic192 168 1 101         08-3e-0c-f5-f7-77     dynamic
arp arp issues   arp-broadcasting and arp-spoofingarp-requests are received and processed by every device on the local-network excessive arp broadcasts can cause some reduction in performance arp replies can be spoofed by a threat-actor to perform an arp-poisoning-attack enterprise level switches include mitigation techniques to protect against arp-attacks 
arp packet tracer   examine the arp-tablein this packet tracer  you will complete the following objectives examine an arp-requestexamine a switch mac-address tableexamine the arp process in remote communications
9 3 copper-cabling
ipv6 neighbor-discovery video   ipv6 neighbor-discoverythis video will explain the process of how ipv6 performs address-resolution using icmpv6 neighbor-solicitation and neighbor-advertisement messages 
ipv6 neighbor-discovery ipv6 neighbor-discovery messagesipv6 neighbor-discovery  nd  protocol provides address-resolutionrouter-discoveryredirection servicesicmpv6 neighbor-solicitation  ns  and neighbor-advertisement  na  messages are used for device-to-device messaging such as address-resolution icmtpv6 router-solicitation  rs  and router-advertisement  ra  messages are used for messaging between devices and routers for router-discovery icmpv6 redirect messages are used by routers for better next-hop selection 
ipv6 neighbor-discovery ipv6 neighbor-discovery   address-resolutionipv6 devices use nd to resolve the mac-address of a known ipv6-address icmpv6 neighbor-solicitation messages are sent using special ethernet and ipv6 multicast-addresses  
in this packet tracer  you will complete the following objectives part 1  ipv6 neighbor-discovery local-networkpart 2  ipv6 neighbor-discovery remote-networkipv6 neighbor-discovery packet tracer   ipv6 neighbor-discovery
module 9  address-resolutionintroduction to networks v7 0  itn 
module objectivesmodule title  address-resolutionmodule objective  explain how arp and nd enable communication on a network topic titletopic objectivemac and ipcompare the roles of the mac-address and the ip-address arpdescribe the purpose of arp neighbor-discoverydescribe the operation of ipv6 neighbor-discovery 
9 1 mac and ip
mac and ip destination on same networkthere are two primary addresses assigned to a device on an ethernet-lan layer-2 physical address  the mac-address    used for nic to nic communications on the same ethernet-network-layer-3 logical-address  the ip-address    used to send the packet from the source device to the destination-device  layer-2 addresses are used to deliver frames from one nic to another nic on the same network  if a destination-ip-address is on the same network  the destination-mac-address will be that of the destination-device 
mac and ip destination on remote-networkwhen the destination-ip-address is on a remote-network  the destination-mac-address is that of the default-gateway arp is used by ipv4 to associate the ipv4-address of a device with the mac-address of the device nic icmpv6 is used by ipv6 to associate the ipv6-address of a device with the mac-address of the device nic 
mac and ip-packet tracer   identify mac and ip-addressesin this packet tracer  you will complete the following objectives gather pdu information for local-network-communicationgather pdu information for remote-network-communication
8 2 ipv4-packet
ipv4-packet ipv4-packet-headeripv4 is the primary communication protocol for the network-layer the network header has many purposes it ensures the packet is sent in the correct direction  to the destination  it contains information for network-layer processing in various fields the information in the header is used by all layer-3 devices that handle the packet
ipv4-packet ipv4-packet-header fieldsthe ipv4 network header characteristics it is in binary contains several fields of informationdiagram is read from left to right  4 bytes per linethe two most important fields are the source and destination protocols may have may have one or more functions 
ipv4-packet ipv4-packet-header fieldssignificant fields in the ipv4 header functiondescriptionversionthis will be for v4  as opposed to v6  a 4 bit field  0100  differentiated-servicesused for qos  diffserv   ds field or the older intserv   tos or type-of-service header-checksumdetect corruption in the ipv4 headertime-to-live  ttl layer-3 hop-count  when it becomes zero the router will discard the packet protocoli d s next level protocol  icmp  tcp  udp  etc source ipv4-address32 bit source addressdestination ipv4-address32 bit destination address
ipv4-packet video   sample ipv4 headers in wiresharkthis video will cover the following ipv4 ethernet-packets in wiresharkthe control informationthe difference between packets
8 3 ipv6-packets
ipv6-packets limitations of ipv4ipv4 has three major limitations ipv4-address depletion   we have basically run out of ipv4-addressing lack of end-to-end connectivity   to make ipv4 survive this long  private-addressing and nat were created  this ended direct communications with public-addressing increased network complexity   nat was meant as temporary solution and creates issues on the network as a side effect of manipulating the network headers addressing  nat causes latency and troubleshooting issues 
ipv6-packets ipv6 overviewipv6 was developed by internet-engineering-task-force  ietf  ipv6 overcomes the limitations of ipv4 improvements that ipv6 provides increased-address-space   based on 128 bit address  not 32 bitsimproved-packet-handling   simplified header with fewer fieldseliminates-the-need-for-nat   since there is a huge amount of addressing  there is no need to use private-addressing internally and be mapped to a shared public-address
ipv6-packets ipv4-packet-header fields in the ipv6-packet-headerthe ipv6 header is simplified  but not smaller the header is fixed at 40 bytes or octets long several ipv4 fields were removed to improve performance some ipv4 fields were removed to improve performance flagfragment-offsetheader-checksum
ipv6-packets ipv6-packet-headersignificant fields in the ipv4 header functiondescriptionversionthis will be for v6  as opposed to v4  a 4 bit field  0110  traffic-classused for qos  equivalent to diffserv   ds field flow-labelinforms device to handle identical flow-labels the same way  20 bit fieldpayload-lengththis 16-bit field indicates the length of the data portion or payload of the ipv6-packetnext headeri d s next level protocol  icmp  tcp  udp  etc hop-limitreplaces ttl field layer-3 hop-countsource ipv4-address128 bit source addressdestination ipv4-address128 bit destination address
ipv6-packets ipv6-packet-header  cont  ipv6-packet may also contain extension-headers  eh   eh headers characteristics  provide optional network-layer informationare optionalare placed between ipv6 header and the payloadmay be used for fragmentation  security  mobility support  etc note  unlike ipv4  routers do not fragment ipv6-packets 
ipv6-packets video   sample ipv6 headers in wiresharkthis video will cover the following ipv6 ethernet-packets in wiresharkthe control informationthe difference between packets
12 5 dynamic-addressing for ipv6-guas
dynamic-addressing for ipv6-guas rs and ra-messagesdevices obtain gua-addresses dynamically through internet-control-message-protocol-version-6  icmpv6  messages router-solicitation  rs  messages are sent by host devices to discover ipv6 routersrouter-advertisement  ra  messages are sent by routers to inform hosts on how to obtain an ipv6-gua and provide useful network information such as network-prefix and prefix-lengthdefault-gateway addressdns-addresses and domain-namethe ra can provide three methods for configuring an ipv6-gua  slaacslaac with stateless-dhcpv6-serverstateful-dhcpv6  no slaac 
dynamic-addressing for ipv6-guas method 1  slaacslaac allows a device to configure a gua without the services of dhcpv6  devices obtain the necessary information to configure a gua from the icmpv6-ra-messages of the local-router the prefix is provided by the ra and the device uses either the eui-64 or random generation method to create an interface-id 
dynamic-addressing for ipv6-guas method 2  slaac and stateless dhcpan ra can instruct a device to use both slaac and stateless-dhcpv6  the ra-message suggests devices use the following slaac to create its own ipv6-guathe router lla  which is the ra source ipv6-address  as the default-gateway addressa stateless-dhcpv6-server to obtain other information such as a dns-server-address and a domain-name
dynamic-addressing for ipv6-guas method 3  stateful-dhcpv6an ra can instruct a device to use stateful-dhcpv6 only stateful-dhcpv6 is similar to dhcp for ipv4  a device can automatically receive a gua  prefix-length  and the addresses of dns servers from a stateful-dhcpv6-server the ra-message suggests devices use the following the router lla  which is the ra source ipv6-address  for the default-gateway address a stateful-dhcpv6-server to obtain a gua  dns-server-address  domain-name and other necessary information 
dynamic-addressing for ipv6-guas eui-64 process vs  randomly generatedwhen the ra-message is either slaac or slaac with stateless-dhcpv6  the client must generate its own interface-id the interface-id can be created using the eui-64 process or a randomly generated 64-bit number 
dynamic-addressing for ipv6-guas eui-64 processthe ieee defined the extended unique identifier  eui  or modified eui-64 process which performs the following a 16 bit value of fffe  in hexadecimal  is inserted into the middle of the 48-bit ethernet mac-address of the client the 7th bit of the client mac-address is reversed from binary 0 to 1 example 48-bit macfc 99 47 75 ce e0eui-64 interface-idfe 99 47 ff fe 75 ce e0
dynamic-addressing for ipv6-guas randomly generated interface-idsdepending upon the operating system  a device may use a randomly generated interface-id instead of using the mac-address and the eui-64 process beginning with windows vista  windows uses a randomly generated interface-id instead of one created with eui-64 c    ipconfig windows ip configuration ethernet adapter local area connection  connection-specific dns-suffix     ipv6-address                        2001 db8 acad 1 50a5 8a35 a5bb 66e1 link-local-ipv6-address             fe80  50a5 8a35 a5bb 66e1 default-gateway                     fe80  1 c    note  to ensure the uniqueness of any ipv6-unicast-address  the client may use a process known as duplicate-address-detection  dad   this is similar to an arp-request for its own address  if there is no reply  then the address is unique 
12 6 dynamic-addressing for ipv6-llas
dynamic-addressing for ipv6-llas dynamic-llasall ipv6 interfaces must have an ipv6-lla like ipv6-guas  llas can be configured dynamically the figure shows the lla is dynamically created using the fe80   10 prefix and the interface-id using the eui-64 process  or a randomly generated 64-bit number 
dynamic-addressing for ipv6-llas dynamic-llas on windowsoperating systems  such as windows  will typically use the same method for both a slaac-created gua and a dynamically assigned lla eui-64 generated interface-id c    ipconfigwindows ip configurationethernet adapter local area connection connection-specific dns-suffix    ipv6-address                        2001 db8 acad 1 fc99 47ff fe75 cee0link-local-ipv6-address             fe80  fc99 47ff fe75 cee0default-gateway                     fe80  1c   random 64-bit generated interface-id c    ipconfigwindows ip configurationethernet adapter local area connection connection-specific dns-suffix     ipv6-address                        2001 db8 acad 1 50a5 8a35 a5bb 66e1link-local-ipv6-address             fe80  50a5 8a35 a5bb 66e1default-gateway                     fe80  1c   
dynamic-addressing for ipv6-llas dynamic-llas on cisco routerscisco routers automatically create an ipv6-lla whenever a gua is assigned to the interface  by default  cisco-ios-routers use eui-64 to generate the interface-id for all llas on ipv6 interfaces here is an example of a lla dynamically configured on the g0 0 0 interface of r1 r1  show interface gigabitethernet 0 0 0 gigabitethernet0 0 0 is up  line protocol is up hardware is isr4221-2x1ge  address is 7079 b392 3640  bia 7079 b392 3640   output omitted  r1  show-ipv6-interface brief gigabitethernet0 0 0  up up  fe80  7279 b3ff fe92 3640 2001 db8 acad 1  1 
dynamic-addressing for ipv6-llas verify ipv6-address configurationcisco routers automatically create an ipv6-lla whenever a gua is assigned to the interface  by default  cisco-ios-routers use eui-64 to generate the interface-id for all llas on ipv6 interfaces here is an example of a lla dynamically configured on the g0 0 0 interface of r1 r1  show interface gigabitethernet 0 0 0 gigabitethernet0 0 0 is up  line protocol is up hardware is isr4221-2x1ge  address is 7079 b392 3640  bia 7079 b392 3640   output omitted  r1  show-ipv6-interface brief gigabitethernet0 0 0  up up  fe80  7279 b3ff fe92 3640 2001 db8 acad 1  1 
module practice and quiz packet tracer   configure ipv6-addressingin this packet tracer  you will do the following configure ipv6-addressing on the routerconfigure ipv6-addressing on the serversconfigure ipv6-addressing on the clientstest and verify network connectivity
12 4 gua and lla static configuration
gua and lla static configuration static-gua configuration on a routermost ipv6 configuration and verification commands in the cisco ios are similar to their ipv4-counterparts  in many cases  the only difference is the use of ipv6 in place of ip within the commands the command to configure an ipv6-gua on an interface is  ipv6-address ipv6-address prefix-length the example shows commands to configure a gua on the g0 0 0 interface on r1 r1 config   interface gigabitethernet 0 0 0 r1 config-if   ipv6-address 2001 db8 acad 1  1 64 r1 config-if   no-shutdown r1 config-if   exit 
gua and lla static configuration static-gua configuration on a windows hostmanually configuring the ipv6-address on a host is similar to configuring an ipv4-address the gua or lla of the router-interface can be used as the default-gateway  best-practice is to use the lla note  when dhcpv6 or slaac is used  the lla of the router will automatically be specified as the default-gateway address 
gua and lla static configuration static-gua configuration of a link-local-unicast-addressconfiguring the lla manually lets you create an address that is recognizable and easier to remember  llas can be configured manually using the ipv6-address ipv6-link-local-address link-local command the example shows commands to configure a lla on the g0 0 0 interface on r1r1 config   interface gigabitethernet 0 0 0 r1 config-if   ipv6-address fe80  1 1 link-localr1 config-if   no-shutdown r1 config-if   exit note  the same lla can be configured on each link as long as it is unique on that link  common practice is to create a different lla on each interface of the router to make it easy to identify the router and the specific interface 
module 11  ipv4-addressingintroduction to networks v7 0  itn 
module objectivesmodule title  ipv4-addressingmodule objective  calculate an ipv4-subnetting scheme to efficiently segment your network topic titletopic objectiveipv4-address structuredescribe the structure of an ipv4-address including the network-portion  the host-portion  and the subnet-mask ipv4 unicast  broadcast  and multicastcompare the characteristics and uses of the unicast  broadcast and multicast ipv4-addresses types of ipv4-addressesexplain public  private  and reserved ipv4-addresses network-segmentationexplain how subnetting segments a network to enable better communication subnet an ipv4 networkcalculate ipv4 subnets for a  24 prefix 
11 1 ipv4-address structure 
ipv4-address structure network and host-portionsan ipv4-address is a 32-bit hierarchical address that is made up of a network-portion and a host-portion  when determining the network-portion versus the host-portion  you must look at the 32-bit-stream a subnet-mask is used to determine the network and host-portions  
ipv4-address structure the subnet-maskto identify the network and host-portions of an ipv4-address  the subnet-mask is compared to the ipv4-address-bit for bit  from left to right the actual process used to identify the network and host-portions is called anding 
ipv4-address structure the prefix-lengtha prefix-length is a less cumbersome method used to identify a subnet-mask address the prefix-length is the number of bits set to 1 in the subnet-mask  it is written in  slash notation  therefore  count the number of bits in the subnet-mask and prepend it with a slash subnet-mask32-bit addressprefix  length255 0 0 011111111 00000000 00000000 00000000 8255 255 0 011111111 11111111 00000000 00000000 16255 255 255 011111111 11111111 11111111 00000000 24255 255 255 12811111111 11111111 11111111 10000000 25255 255 255 19211111111 11111111 11111111 11000000 26255 255 255 22411111111 11111111 11111111 11100000 27255 255 255 24011111111 11111111 11111111 11110000 28255 255 255 24811111111 11111111 11111111 11111000 29255 255 255 25211111111 11111111 11111111 11111100 30
ipv4-address structure determining the network  logical anda logical and boolean operation is used in determining the network address logical and is the comparison of two bits where only a 1 and 1 produces a 1 and any other combination results in a 0 1 and 1   1  0 and 1   0  1 and 0   0  0 and 0   01   true and 0    falseto identify the network address  the host ipv4-address is logically anded  bit by bit  with the subnet-mask to identify the network address 
ipv4-address structure video   network  host and broadcast addressesthis video will cover the following network addressbroadcast addressfirst usable hostlast usable host
ipv4-address structure network  host  and broadcast addresseswithin each network are three types of ip-addresses network addresshost addressesbroadcast addressnetwork-portionhost-portionhost bitssubnet-mask  255 255 255 0 or  24255      255      255 11111111 11111111 111111110 00000000network address  192 168 10 0 or  24192      168      10 11000000 10100000 000010100 00000000all 0sfirst address  192 168 10 1 or  24192      168      10 11000000 10100000 000010101 00000001all 0s and a 1last address  192 168 10 254 or  24192      168      10 11000000 10100000 00001010254 11111110all 1s and a 0broadcast address 192 168 10 255 or  24192      168      10 11000000 10100000 00001010255 11111111all 1s
module 12  ipv6-addressingintroduction to networks v7 0  itn 
module objectivesmodule title  ipv6-addressingmodule objective  implement an ipv6-addressing-scheme topic titletopic objectiveipv4 issuesexplain the need for ipv6-addressing  ipv6-address representationexplain how ipv6-addresses are represented  ipv6-address typescompare types of ipv6 network addresses  gua and lla static configurationexplain how to configure static-global-unicast and link-local-ipv6-network-addresses dynamic-addressing for ipv6-guasexplain how to configure global-unicast-addresses dynamically 
module objectives  cont  module title  ipv6-addressingmodule objective  implement an ipv6-addressing-scheme topic titletopic objectivedynamic-addressing for ipv6-llasconfigure link-local-addresses dynamically ipv6 multicast-addressesidentify ipv6-addresses subnet an ipv6 networkimplement a subnetted ipv6-addressing-scheme 
12 1 ipv4 issues
ipv4 issues need for ipv6ipv4 is running out of addresses  ipv6 is the successor to ipv4  ipv6 has a much larger 128-bit address space the development of ipv6 also included fixes for ipv4 limitations and other enhancements with an increasing internet population  a limited ipv4-address space  issues with nat and the iot  the time has come to begin the transition to ipv6 
ipv4 issues ipv4 and ipv6 coexistenceboth ipv4 and ipv6 will coexist in the near future and the transition will take several years the ietf has created various protocols and tools to help network administrators migrate their networks to ipv6  these migration techniques can be divided into three categories dual-stack -the devices run both ipv4 and ipv6 protocol stacks simultaneously tunneling   a method of transporting an ipv6-packet over an ipv4 network  the ipv6-packet is encapsulated inside an ipv4-packet translation - network-address-translation 64  nat64  allows ipv6-enabled devices to communicate with ipv4-enabled devices using a translation technique similar to nat for ipv4  note  tunneling and translation are for transitioning to native ipv6 and should only be used where needed  the goal should be native ipv6 communications from source to destination 
11 2 ipv4 unicast  broadcast  and multicast
ipv4 unicast  broadcast  and multicast unicastunicast-transmission is sending a packet to one destination-ip-address for example  the pc at 172 16 4 1 sends a unicast packet to the printer at 172 16 4 253 
ipv4 unicast  broadcast  and multicast broadcastbroadcast-transmission is sending a packet to all other destination-ip-addresses for example  the pc at 172 16 4 1 sends a broadcast-packet to all ipv4 hosts 
ipv4 unicast  broadcast  and multicast multicastmulticast-transmission is sending a packet to a multicast-address group for example  the pc at 172 16 4 1 sends a multicast-packet to the multicast-group address 224 10 10 5 
12 2 ipv6-address representation
ipv6-address representation ipv6-addressing formatsipv6-addresses are 128 bits in length and written in hexadecimal ipv6-addresses are not case-sensitive and can be written in either lowercase or uppercase the preferred format for writing an ipv6-address is x x x x x x x x  with each  x  consisting of four hexadecimal values in ipv6  a hextet is the unofficial term used to refer to a segment of 16 bits  or four hexadecimal values examples of ipv6-addresses in the preferred format 2001 0db8 0000 1111 0000 0000 0000 0200 2001 0db8 0000 00a3 abcd 0000 0000 1234 
ipv6-address representation rule 1   omit leading zerothe first rule to help reduce the notation of ipv6-addresses is to omit any leading 0s  zeros  examples 01ab can be represented as 1ab09f0 can be represented as 9f00a00 can be represented as a0000ab can be represented as abnote  this rule only applies to leading 0s  not to trailing 0s  otherwise the address would be ambiguous  typeformatpreferred2001   0db8   0000   1111   0000   0000   0000   0200no leading zeros2001   db8   0   1111   0   0   0   200
ipv6-address representation rule 2   double-colona double-colon      can replace any single  contiguous string of one or more 16-bit hextets consisting of all zeros  example 2001 db8 cafe 1 0 0 0 1  leading 0s omitted  could be represented as 2001 db8 cafe 1  1note  the double-colon      can only be used once within an address  otherwise there would be more than one possible resulting address typeformatpreferred2001   0db8   0000   1111   0000   0000   0000   0200compressed2001 db8 0 1111  200
12 3 ipv6-address types
ipv6-address types unicast  multicast  anycastthere are three broad categories of ipv6-addresses unicast   unicast uniquely identifies an interface on an ipv6-enabled device multicast   multicast is used to send a single ipv6-packet to multiple destinations anycast   this is any ipv6-unicast-address that can be assigned to multiple devices  a packet sent to an anycast-address is routed to the nearest device having that address note  unlike ipv4  ipv6 does not have a broadcast address  however  there is an ipv6 all-nodes multicast-address that essentially gives the same result 
ipv6-address types ipv6 prefix-lengthprefix-length is represented in slash notation and is used to indicate the network-portion of an ipv6-address the ipv6 prefix-length can range from 0 to 128  the recommended ipv6 prefix-length for lans and most other types of networks is  64 note  it is strongly recommended to use a 64-bit interface-id for most networks  this is because stateless-address autoconfiguration  slaac  uses 64 bits for the interface-id  it also makes subnetting easier to create and manage 
ipv6-address types types of ipv6-unicast-addressesunlike ipv4 devices that have only a single-address  ipv6-addresses typically have two unicast addresses global-unicast-address  gua    this is similar to a public ipv4-address  these are globally unique  internet-routable-addresses link-local-address  lla  - required for every ipv6-enabled device and used to communicate with other devices on the same local-link  llas are not routable and are confined to a single-link  
ipv6-address types a note about the unique local-addressthe ipv6 unique-local-addresses  range fc00   7 to fdff   7  have some similarity to rfc-1918 private-addresses for ipv4  but there are significant differences unique-local-addresses are used for local-addressing within a site or between a limited number of sites unique-local-addresses can be used for devices that will never need to access another network unique-local-addresses are not globally routed or translated to a global ipv6-address note  many sites use the private nature of rfc-1918 addresses to attempt to secure or hide their network from potential security risks  this was never the intended use of ulas  
ipv6-address types ipv6-guaipv6-global-unicast-addresses  guas  are globally unique and routable on the ipv6-internet currently  only guas with the first three bits of 001 or 2000   3 are being assigned currently available guas begins with a decimal 2 or a 3  this is only 1 8th of the total available ipv6-address space  
ipv6-address types ipv6-gua structureglobal-routing-prefix the global-routing-prefix is the prefix  or network  portion of the address that is assigned by the provider  such as an isp  to a customer or site  the global-routing-prefix will vary depending on isp-policies subnet-id the subnet-id field is the area between the global-routing-prefix and the interface-id  the subnet-id is used by an organization to identify subnets within its site interface-id the ipv6 interface-id is equivalent to the host-portion of an ipv4-address  it is strongly recommended that in most cases  64 subnets should be used  which creates a 64-bit interface-id  note  ipv6 allows the all-0s and all-1s host addresses can be assigned to a device  the all-0s address is reserved as a subnet-router anycast-address  and should be assigned only to routers 
ipv6-address types ipv6-llaan ipv6-link-local-address  lla  enables a device to communicate with other ipv6-enabled devices on the same link and only on that link  subnet  packets with a source or destination lla cannot be routed every ipv6-enabled network interface must have an lla if an lla is not configured manually on an interface  the device will automatically create one ipv6-llas are in the fe80   10 range 
12 7 ipv6 multicast-addresses
ipv6 multicast-addresses assigned ipv6 multicast-addressesipv6 multicast-addresses have the prefix ff00   8  there are two types of ipv6 multicast-addresses well-known multicast-addressessolicited node multicast-addressesnote  multicast-addresses can only be destination addresses and not source addresses 
ipv6 multicast-addresses well-known ipv6 multicast-addresseswell-known ipv6 multicast-addresses are assigned and are reserved for predefined groups of devices there are two common ipv6 assigned multicast-groups ff02  1 all-nodes multicast-group - this is a multicast-group that all ipv6-enabled devices join  a packet sent to this group is received and processed by all ipv6 interfaces on the link or network  ff02  2 all-routers multicast-group - this is a multicast-group that all ipv6 routers join  a router becomes a member of this group when it is enabled as an ipv6 router with the ipv6-unicast-routing global-configuration-command  
ipv6 multicast-addresses solicited-node ipv6 multicasta solicited-node multicast-address is similar to the all-nodes multicast-address a solicited-node multicast-address is mapped to a special ethernet multicast-address the ethernet-nic can filter the frame by examining the destination-mac-address without sending it to the ipv6 process to see if the device is the intended target of the ipv6-packet 
module practice and quiz lab   identify ipv6-addressesin this lab  you complete the following objectives  identify the different types of ipv6-addressesexamine a host ipv6 network interface and addresspractice ipv6-address abbreviation
11 4 network-segmentation 
network-segmentation broadcast-domains and segmentationmany protocols use broadcasts or multicasts  e g   arp use broadcasts to locate other devices  hosts send dhcp-discover broadcasts to locate a dhcp-server  switches propagate broadcasts out all interfaces except the interface on which it was received  the only device that stops broadcasts is a router routers do not propagate broadcasts  each router-interface connects to a broadcast-domain and broadcasts are only propagated within that specific broadcast-domain 
network-segmentation problems with large broadcast-domainsa problem with a large broadcast-domain is that these hosts can generate excessive broadcasts and negatively affect the network the solution is to reduce the size of the network to create smaller broadcast-domains in a process called subnetting  dividing the network address 172 16 0 0  16 into two subnets of 200 users each  172 16 0 0  24 and 172 16 1 0  24  broadcasts are only propagated within the smaller broadcast-domains  
network-segmentation reasons for segmenting networkssubnetting reduces overall network-traffic and improves network performance  it can be used to implement security policies between subnets subnetting reduces the number of devices affected by abnormal broadcast-traffic subnets are used for a variety of reasons including by locationgroup or functiondevice type
11 9 structured design 
structured design ipv4 network address planningip-network-planning is crucial to develop a scalable solution to an enterprise network  to develop an ipv4 network wide addressing-scheme  you need to know how many subnets are needed  how many hosts a particular subnet requires  what devices are part of the subnet  which parts of your network use private-addresses  and which use public  and many other determining factors  examine the needs of an organization s network usage and how the subnets will be structured  perform a network requirement study by looking at the entire network to determining how each area will be segmented  determine how many subnets are needed and how many hosts per subnet  determine dhcp-address-pools and layer-2 vlan pools 
structured design device address assignmentwithin a network  there are different types of devices that require addresses end user clients   most use dhcp to reduce errors and burden on network support staff  ipv6 clients can obtain address information using dhcpv6 or slaac servers and peripherals   these should have a predictable static ip-address  servers that are accessible from the internet   servers must have a public ipv4-address  most often accessed using nat  intermediary devices   devices are assigned addresses for network management  monitoring  and security  gateway   routers and firewall devices are gateway for the hosts in that network when developing an ip-addressing-scheme  it is generally recommended that you have a set pattern of how addresses are allocated to each type of device  
structured design packet tracer   vlsm-design and implementation practicein this packet tracer  you will do the following examine the network requirementsdesign the vlsm addressing-schemeassign ip-addresses to devices and verify connectivity
12 8 subnet an ipv6 network
subnet an ipv6 network subnet using the subnet-idipv6 was designed with subnetting in mind  a separate subnet-id field in the ipv6-gua is used to create subnets  the subnet-id field is the area between the global-routing-prefix and the interface-id 
subnet an ipv6 network ipv6 subnetting examplegiven the 2001 db8 acad   48 global-routing-prefix with a 16 bit subnet-id allows 65 536  64 subnetsthe global-routing-prefix is the same for all subnets only the subnet-id hextet is incremented in hexadecimal for each subnet 
subnet an ipv6 network ipv6 subnet allocationthe example topology requires five subnets  one for each lan as well as for the serial-link between r1 and r2 the five ipv6 subnets were allocated  with the subnet-id field 0001 through 0005  each  64 subnet will provide more addresses than will ever be needed 
subnet an ipv6 network router configured with ipv6 subnetsthe example shows that each of the router-interfaces on r1 has been configured to be on a different ipv6 subnet r1 config   interface gigabitethernet 0 0 0r1 config-if   ipv6-address 2001 db8 acad 1  1 64r1 config-if   no-shutdownr1 config-if   exitr1 config   interface gigabitethernet 0 0 1r1 config-if   ipv6-address 2001 db8 acad 2  1 64r1 config-if   no-shutdownr1 config-if   exitr1 config   interface serial 0 1 0r1 config-if   ipv6-address 2001 db8 acad 3  1 64r1 config-if   no-shutdown
11 6 subnet a slash 16 and a slash 8 prefix
subnet a slash 16 and a slash 8 prefix create subnets with a slash 16 prefixthe table highlights all the possible scenarios for subnetting a  16 prefix prefix-lengthsubnet-masknetwork address  n   network  h   host   of subnets  of hosts 17255 255 128 0nnnnnnnn nnnnnnnn nhhhhhhh hhhhhhhh  11111111 11111111 10000000 0000000032766 18255 255 192 0nnnnnnnn nnnnnnnn nnhhhhhh hhhhhhhh  11111111 11111111 11000000 0000000016382 19255 255 224 0nnnnnnnn nnnnnnnn nnnhhhhh hhhhhhhh  11111111 11111111 11100000 000000008190 20255 255 240 0nnnnnnnn nnnnnnnn nnnnhhhh hhhhhhhh  11111111 11111111 11110000 00000000164094 21255 255 248 0nnnnnnnn nnnnnnnn nnnnnhhh hhhhhhhh  11111111 11111111 11111000 00000000322046 22255 255 252 0nnnnnnnn nnnnnnnn nnnnnnhh hhhhhhhh  11111111 11111111 11111100 00000000641022 23255 255 254 0nnnnnnnn nnnnnnnn nnnnnnnh hhhhhhhh  11111111 11111111 11111110 00000000128510 24255 255 255 0nnnnnnnn nnnnnnnn nnnnnnnn hhhhhhhh  11111111 11111111 11111111 00000000256254 25255 255 255 128nnnnnnnn nnnnnnnn nnnnnnnn nhhhhhhh  11111111 11111111 11111111 10000000512126 26255 255 255 192nnnnnnnn nnnnnnnn nnnnnnnn nnhhhhhh  11111111 11111111 11111111 11000000102462 27255 255 255 224nnnnnnnn nnnnnnnn nnnnnnnn nnnhhhhh  11111111 11111111 11111111 11100000204830 28255 255 255 240nnnnnnnn nnnnnnnn nnnnnnnn nnnnhhhh  11111111 11111111 11111111 11110000409614 29255 255 255 248nnnnnnnn nnnnnnnn nnnnnnnn nnnnnhhh  11111111 11111111 11111111 111110008192 30255 255 255 252nnnnnnnn nnnnnnnn nnnnnnnn nnnnnnhh  11111111 11111111 11111111 1111110016384
subnet a slash 16 and a slash 8 prefix create 100 subnets with a slash 16 prefixconsider a large enterprise that requires at least 100 subnets and has chosen the private-address 172 16 0 0 16 as its internal-network address the figure displays the number of subnets that can be created when borrowing bits from the third octet and the fourth octet  notice there are now up to 14 host bits that can be borrowed  i e   last two bits cannot be borrowed  to satisfy the requirement of 100 subnets for the enterprise  7 bits  i e   27   128 subnets  would need to be borrowed  for a total of 128 subnets  
subnet a slash 16 and a slash 8 prefix create 1000 subnets with a slash 8 prefixconsider a small isp that requires 1000 subnets for its clients using network address 10 0 0 0 8 which means there are 8 bits in the network-portion and 24 host bits available to borrow toward subnetting  the figure displays the number of subnets that can be created when borrowing bits from the second and third  notice there are now up to 22 host bits that can be borrowed  i e   last two bits cannot be borrowed  to satisfy the requirement of 1000 subnets for the enterprise  10 bits  i e   210 1024 subnets  would need to be borrowed  for a total of 128 subnets 
subnet a slash 16 and a slash 8 prefix video   subnet across multiple octetsthis video will demonstrate creating subnets across multiple octets 
subnet a slash 16 and a slash 8 prefix lab   calculate ipv4 subnetsin this lab  you will complete the following objectives part 1  determine ipv4-address subnettingpart 2  calculate ipv4-address subnetting
11 7 subnet to meet requirements
subnet to meet requirements subnet private versus public ipv4-address spaceenterprise-networks will have an intranet - a company s internal-network typically using private ipv4-addresses dmz   a companies internet facing servers  devices in the dmz use public ipv4-addresses a company could use the 10 0 0 0 8 and subnet on the  16 or  24 network boundary  the dmz devices would have to be configured with public ip-addresses 
subnet to meet requirements minimize unused host ipv4-addresses and maximize subnetsthere are two considerations when planning subnets  the number of host addresses required for each network the number of individual subnets neededprefix-lengthsubnet-masksubnet-mask in binary  n   network  h   host   of subnets  of hosts 25255 255 255 128nnnnnnnn nnnnnnnn nnnnnnnn nhhhhhhh 11111111 11111111 11111111 10000000126 26255 255 255 192nnnnnnnn nnnnnnnn nnnnnnnn nnhhhhhh 11111111 11111111 11111111 1100000062 27255 255 255 224nnnnnnnn nnnnnnnn nnnnnnnn nnnhhhhh 11111111 11111111 11111111 1110000030 28255 255 255 240nnnnnnnn nnnnnnnn nnnnnnnn nnnnhhhh 11111111 11111111 11111111 111100001614 29255 255 255 248nnnnnnnn nnnnnnnn nnnnnnnn nnnnnhhh 11111111 11111111 11111111 1111100032 30255 255 255 252nnnnnnnn nnnnnnnn nnnnnnnn nnnnnnhh 11111111 11111111 11111111 1111110064
subnet to meet requirements example  efficient ipv4-subnettingin this example  corporate headquarters has been allocated a public network address of 172 16 0 0 22  10 host bits  by its isp providing 1 022 host addresses there are five sites and therefore five internet connections which means the organization requires 10 subnets with the largest subnet requires 40 addresses it allocated 10 subnets with a  26  i e   255 255 255 192  subnet-mask 
subnet to meet requirements packet tracer   subnetting scenarioin this packet tracer  you will do the following design an ip-addressing-schemeassign ip-addresses to network-devices and verify connectivity
11 3 types of ipv4-addresses
types of ipv4-addresses public and private ipv4-addressesas defined in in rfc-1918  public ipv4-addresses are globally routed between internet service-provider  isp  routers  however  private-addresses are not globally routable private-addresses are common blocks of addresses used by most organizations to assign ipv4-addresses to internal hosts private ipv4-addresses are not unique and can be used internally within any network network address and prefixrfc-1918 private-address range10 0 0 0 810 0 0 0 - 10 255 255 255172 16 0 0 12172 16 0 0 - 172 31 255 255192 168 0 0 16192 168 0 0 - 192 168 255 255
types of ipv4-addresses routing to the internetnetwork-address-translation  nat  translates private ipv4-addresses to public ipv4-addresses nat is typically enabled on the edge router connecting to the internet it translates the internal private-address to a public global ip-address 
types of ipv4-addresses special use ipv4-addressesloopback-addresses127 0 0 0  8  127 0 0 1 to 127 255 255 254 commonly identified as only 127 0 0 1used on a host to test if tcp ip is operational link-local-addresses169 254 0 0  16  169 254 0 1 to 169 254 255 254 commonly known as the automatic private ip-addressing  apipa  addresses or self-assigned addresses  used by windows dhcp-clients to self-configure when no dhcp-servers are available 
types of ipv4-addresses legacy classful-addressingrfc 790  1981  allocated ipv4-addresses in classesclass-a  0 0 0 0 8 to 127 0 0 0 8 class-b  128 0 0 0  16   191 255 0 0  16 class-c  192 0 0 0  24   223 255 255 0  24 class-d  224 0 0 0 to 239 0 0 0 class-e  240 0 0 0   255 0 0 0 classful-addressing wasted many ipv4-addresses classful-address allocation was replaced with classless addressing which ignores the rules of classes  a  b  c   
types of ipv4-addresses assignment of ip-addressesthe internet-assigned-numbers-authority  iana  manages and allocates blocks of ipv4 and ipv6-addresses to five regional internet registries  rirs   rirs are responsible for allocating ip-addresses to isps who provide ipv4-address blocks to smaller isps and organizations  
11 8 vlsm 
vlsm video   vlsm basicsthis video will explain vlsm basics 
vlsm video   vlsm examplethis video will demonstrate creating subnets specific to the needs of the network 
vlsm ipv4-address conservationgiven the topology  7 subnets are required  i e  four lans and three wan links  and the largest number of host is in building d with 28 hosts a  27 mask would provide 8 subnets of 30 host ip-addresses and therefore support this topology 
vlsm ipv4-address conservation  cont  however  the point-to-point wan links only require two addresses and therefore waste 28 addresses each for a total of 84 unused addresses applying a traditional subnetting scheme to this scenario is not very efficient and is wasteful vlsm was developed to avoid wasting addresses by enabling us to subnet a subnet 
vlsm vlsmthe left side displays the traditional subnetting scheme  i e   the same subnet-mask  while the right side illustrates how vlsm can be used to subnet a subnet and divided the last subnet into eight  30 subnets when using vlsm  always begin by satisfying the host requirements of the largest subnet and continue subnetting until the host requirements of the smallest subnet are satisfied the resulting topology with vlsm applied 
vlsm vlsm topology address assignmentusing vlsm subnets  the lan and inter-router networks can be addressed without unnecessary waste as shown in the logical-topology diagram 
9 2 arp
arp arp overviewa device uses arp to determine the destination-mac-address of a local device when it knows its ipv4-address arp provides two basic functions resolving ipv4-addresses to mac-addressesmaintaining an arp-table of ipv4 to mac-address mappings
arp arp functionsto send a frame  a device will search its arp-table for a destination ipv4-address and a corresponding mac-address if the packet s destination ipv4-address is on the same network  the device will search the arp-table for the destination ipv4-address if the destination ipv4-address is on a different network  the device will search the arp-table for the ipv4-address of the default-gateway if the device locates the ipv4-address  its corresponding mac-address is used as the destination-mac-address in the frame  if there is no arp-table entry is found  then the device sends an arp-request 
arp video - arp-requestthis video will cover an arp-request for a mac-address 
arp video   arp operation - arp-replythis video will cover an arp-reply in response to an arp-request 
arp video - arp role in remote communicationsthis video will cover how an arp-request will provide a host the mac-address of the default-gateway 
arp removing entries from an arp-tableentries in the arp-table are not permanent and are removed when an arp cache timer expires after a specified period of time the duration of the arp cache timer differs depending on the operating system arp-table entries can also be removed manually by the administrator  
arp arp-tables on networking-devicesthe show-ip-arp command displays the arp-table on a cisco router the arp  a command displays the arp-table on a windows 10 pc r1  show-ip-arp          protocol  address          age  min   hardware addr   type   interfaceinternet  192 168 10 1            -   a0e0 af0d e140  arpa   gigabitethernet0 0 0c  users pc  arp -ainterface  192 168 1 124 --- 0x10internet address      physical address      type192 168 1 1           c8-d7-19-cc-a0-86     dynamic192 168 1 101         08-3e-0c-f5-f7-77     dynamic
arp arp issues   arp-broadcasting and arp-spoofingarp-requests are received and processed by every device on the local-network excessive arp broadcasts can cause some reduction in performance arp replies can be spoofed by a threat-actor to perform an arp-poisoning-attack enterprise level switches include mitigation techniques to protect against arp-attacks 
arp packet tracer   examine the arp-tablein this packet tracer  you will complete the following objectives examine an arp-requestexamine a switch mac-address tableexamine the arp process in remote communications
7 1 ethernet-frames
ethernet-frames ethernet encapsulationethernet operates in the data-link layer and the physical-layer it is a family of networking technologies defined in the ieee 802 2 and 802 3 standards 
ethernet-frames data-link sublayersthe 802 lan man standards  including ethernet  use two separate sublayers of the data-link layer to operate llc-sublayer   ieee 802 2  places information in the frame to identify which network-layer protocol is used for the frame mac-sublayer   ieee 802 3  802 11  or 802 15  responsible for data-encapsulation and media access-control  and provides data-link layer addressing 
ethernet-frames mac-sublayerthe mac-sublayer is responsible for data-encapsulation and accessing the media data-encapsulationieee 802 3 data-encapsulation includes the following ethernet-frame - this is the internal structure of the ethernet-frame ethernet-addressing - the ethernet-frame includes both a source and destination-mac-address to deliver the ethernet-frame from ethernet-nic to ethernet-nic on the same lan ethernet error-detection - the ethernet-frame includes a frame-check-sequence  fcs  trailer used for error-detection 
ethernet-frames mac-sublayermedia accessthe ieee 802 3 mac-sublayer includes the specifications for different ethernet communications standards over various types of media including copper and fiber legacy ethernet using a bus topology or hubs  is a shared  half-duplex medium  ethernet over a half-duplex medium uses a contention-based-access-method  carrier sense multiple access collision-detection  csma cd   ethernet-lans of today use switches that operate in full-duplex  full-duplex-communications with ethernet switches do not require access-control through csma cd 
ethernet-frames ethernet-frame fieldsthe minimum ethernet-frame size is 64 bytes and the maximum is 1518 bytes  the preamble-field is not included when describing the size of the frame any frame less than 64 bytes in length is considered a  collision-fragment  or  runt-frame  and is automatically discarded  frames with more than 1500 bytes of data are considered  jumbo  or  baby-giant-frames  if the size of a transmitted frame is less than the minimum  or greater than the maximum  the receiving device drops the frame  dropped frames are likely to be the result of collisions or other unwanted signals  they are considered invalid  jumbo frames are usually supported by most fast-ethernet and gigabit-ethernet switches and nics 
ethernet-frames lab   use wireshark to examine ethernet-framesin this lab  you will complete the following objectives part 1  examine the header fields in an ethernet ii framepart 2  use wireshark to capture and analyze ethernet-frames
7 2 ethernet mac-address
ethernet mac-addresses mac-address and hexadecimalan ethernet mac-address consists of a 48-bit binary value  expressed using 12 hexadecimal values given that 8 bits  one byte  is a common binary grouping  binary 00000000 to 11111111 can be represented in hexadecimal as the range 00 to ff when using hexadecimal  leading zeroes are always displayed to complete the 8-bit representation  for example the binary value 0000 1010 is represented in hexadecimal as 0a hexadecimal-numbers are often represented by the value preceded by 0x  e g   0x73  to distinguish between decimal and hexadecimal values in documentation hexadecimal may also be represented by a subscript 16  or the hex number followed by an h  e g   73h  
ethernet mac-addresses ethernet mac-addressin an ethernet-lan  every network-device is connected to the same  shared media  mac-addressing provides a method for device identification at the data-link layer of the osi model an ethernet mac-address is a 48-bit address expressed using 12 hexadecimal digits  because a byte equals 8 bits  we can also say that a mac-address is 6 bytes in length all mac-addresses must be unique to the ethernet device or ethernet-interface  to ensure this  all vendors that sell ethernet devices must register with the ieee to obtain a unique 6 hexadecimal  i e   24-bit or 3-byte  code called the organizationally-unique-identifier  oui  an ethernet mac-address consists of a 6 hexadecimal vendor oui code followed by a 6 hexadecimal vendor-assigned value 
ethernet mac-addresses frame processingwhen a device is forwarding a message to an ethernet-network  the ethernet-header include a source-mac-address and a destination-mac-address when a nic receives an ethernet-frame  it examines the destination-mac-address to see if it matches the physical mac-address that is stored in ram  if there is no match  the device discards the frame  if there is a match  it passes the frame up the osi layers  where the de-encapsulation process takes place note  ethernet-nics will also accept frames if the destination-mac-address is a broadcast or a multicast-group of which the host is a member any device that is the source or destination of an ethernet-frame  will have an ethernet-nic and therefore  a mac-address  this includes workstations  servers  printers  mobile devices  and routers 
ethernet mac-addresses unicast mac-addressin ethernet  different mac-addresses are used for layer-2 unicast  broadcast  and multicast communications a unicast mac-address is the unique address that is used when a frame is sent from a single transmitting device to a single destination-device the process that a source host uses to determine the destination-mac-address associated with an ipv4-address is known as address-resolution-protocol  arp   the process that a source host uses to determine the destination-mac-address associated with an ipv6-address is known as neighbor-discovery  nd  note  the source-mac-address must always be a unicast 
ethernet mac-addresses broadcast mac-addressan ethernet broadcast-frame is received and processed by every device on the ethernet-lan  the features of an ethernet broadcast are as follows it has a destination-mac-address of ff-ff-ff-ff-ff-ff in hexadecimal  48 ones in binary  it is flooded out all ethernet switch ports except the incoming port  it is not forwarded by a router if the encapsulated data is an ipv4 broadcast-packet  this means the packet contains a destination ipv4-address that has all ones  1s  in the host-portion  this numbering in the address means that all hosts on that local-network  broadcast-domain  will receive and process the packet 
ethernet mac-addresses multicast mac-addressan ethernet multicast-frame is received and processed by a group of devices that belong to the same multicast-group  there is a destination-mac-address of 01-00-5e when the encapsulated data is an ipv4 multicast-packet and a destination-mac-address of 33-33 when the encapsulated data is an ipv6 multicast-packet there are other reserved multicast destination-mac-addresses for when the encapsulated data is not ip  such as spanning-tree-protocol  stp  it is flooded out all ethernet switch ports except the incoming port  unless the switch is configured for multicast-snooping  it is not forwarded by a router  unless the router is configured to route multicast-packets because multicast-addresses represent a group of addresses  sometimes called a host-group   they can only be used as the destination of a packet  the source will always be a unicast address as with the unicast and broadcast addresses  the multicast ip-address requires a corresponding multicast mac-address 
ethernet mac-addresses lab   view network-device mac-addressesin this lab  you will complete the following objectives part 1  set up the topology and initialize devicespart 2  configure devices and verify connectivitypart 3  display  describe  and analyze ethernet mac-addresses
9 1 mac and ip
mac and ip destination on same networkthere are two primary addresses assigned to a device on an ethernet-lan layer-2 physical address  the mac-address    used for nic to nic communications on the same ethernet-network-layer-3 logical-address  the ip-address    used to send the packet from the source device to the destination-device  layer-2 addresses are used to deliver frames from one nic to another nic on the same network  if a destination-ip-address is on the same network  the destination-mac-address will be that of the destination-device 
mac and ip destination on remote-networkwhen the destination-ip-address is on a remote-network  the destination-mac-address is that of the default-gateway arp is used by ipv4 to associate the ipv4-address of a device with the mac-address of the device nic icmpv6 is used by ipv6 to associate the ipv6-address of a device with the mac-address of the device nic 
mac and ip-packet tracer   identify mac and ip-addressesin this packet tracer  you will complete the following objectives gather pdu information for local-network-communicationgather pdu information for remote-network-communication
7 3 the mac-address table
the mac-address table switch fundamentalsa layer-2 ethernet switch uses layer-2 mac-addresses to make forwarding decisions  it is completely unaware of the data  protocol  being carried in the data portion of the frame  such as an ipv4-packet  an arp message  or an ipv6 nd packet  the switch makes its forwarding decisions based solely on the layer-2 ethernet mac-addresses an ethernet switch examines its mac-address table to make a forwarding decision for each frame  unlike legacy ethernet hubs that repeat bits out all ports except the incoming port  when a switch is turned on  the mac-address table is emptynote  the mac-address table is sometimes referred to as a content-addressable-memory  cam  table 
the mac-address table switch learning and forwardingexamine the source-mac-address  learn every frame that enters a switch is checked for new information to learn  it does this by examining the source-mac-address of the frame and the port-number where the frame entered the switch  if the source-mac-address does not exist  it is added to the table along with the incoming port-number  if the source-mac-address does exist  the switch updates the refresh timer for that entry  by default  most ethernet switches keep an entry in the table for 5 minutes note  if the source-mac-address does exist in the table but on a different port  the switch treats this as a new entry  the entry is replaced using the same mac-address but with the more current port-number 
the mac-address table switch learning and forwarding  contd  find the destination-mac-address  forward if the destination-mac-address is a unicast address  the switch will look for a match between the destination-mac-address of the frame and an entry in its mac-address table  if the destination-mac-address is in the table  it will forward the frame out the specified port  if the destination-mac-address is not in the table  the switch will forward the frame out all ports except the incoming port  this is called an unknown unicast note  if the destination-mac-address is a broadcast or a multicast  the frame is also flooded out all ports except the incoming port 
the mac-address table filtering framesas a switch receives frames from different devices  it is able to populate its mac-address table by examining the source-mac-address of every frame  when the mac-address table of the switch contains the destination-mac-address  it is able to filter the frame and forward out a single port 
the mac-address table video   mac-address tables on connected switchesthis video will cover the following how switches build mac-address tableshow switches forward frames base on the content of their mac-address tables
the mac-address table video   sending the frame to the default-gatewaythis video will cover the following what a switch does when the destination amc address is not listed in the switch s mac-address table what a switch does when the source amc address is not listed in the switch s mac-address table
the mac-address table lab   view the switch mac-address tablein this lab  you will complete the following objectives part 1  build and configure the networkpart 2  examine the switch mac-address table
enterprise networking  security  and automation v7 0 ensa module 10  network management
module objectivesmodule title  network managementmodule objective   implement protocols to manage the network topic titletopic objectivedevice discovery with cdpuse cdp to map a network-topology device discovery with lldpuse lldp to map a network-topology ntpimplement ntp between an ntp client and ntp-server snmpexplain how snmp operates syslogexplain syslog operation router and switch file maintenanceuse commands to back up and restore an ios configuration-file ios image managementimplement protocols to manage the network 
10 1 device discovery with cdp
device discovery with cdp cdp overviewcdp                   cisco                        cisco    2            cdp                                             cisco                                cdp                                                                
device discovery with cdp configure and verify cdpcisco        cdp                     cdp           cdp               show-cdp                       cdp                               no-cdp-enable              cdp                          cdp                                cdp            cdp-enable                                      cdp                    cdp-run                     no-cdp-run                           cdp                       show-cdp interface               cdp                                            
device discovery with cdp discover devices by using cdp       cdp              show-cdp neighbors                                                 r1  g0 0 1                  s1           s1  f0 5           r1  show-cdp neighbors capability codes  r - router  t - trans bridge  b - source route bridges - switch  h - host  i - igmp  r - repeater  p - phone  d - remote  c - cvta  m - two-port mac relay device id   local intrfce  holdtme  capability  platform  port id s1     gig 0 0 1     179     s i   ws-c3560-  fas 0 5
device discovery with cdp discover devices by using cdp  cont            show-cdp-neighbors-detail           s1  ip                        s1      192  168 1 2    r1  show-cdp-neighbors-detail ------------------------- device id  s1 entry address es   ip-address  192 168 1 2 platform  cisco ws-c3560-24ts  capabilities  switch igmpinterface  gigabitethernet0 0 1  port id  outgoing port   fastethernet0 5holdtime   136 sec  output omitted 
10 2 device discovery with lldp
device discovery with lldp lldp overviewlink-layer-discovery-protocol  lldp   cdp                            id                            2                   
device discovery with lldp configure and verify lldplldp                         cisco           lldp                                 lldp-run            lldp                             noldp run           lldp                             lldp                lldp               lldp                 exec      showldp          switch  conf t enter configuration commands  one per line  end with cntl z  switch config   lldp-run switch config   interface gigabitethernet 0 1 switch config-if   lldp transmit switch config-if   lldp receive switch config-if   endswitch  show-lldp global lldp information  status  active lldp advertisements are sent every 30 seconds lldp hold time advertised is 120 seconds lldp interface reinitialisation delay is 2 seconds
device discovery with lldp discover devices by using lldplldp                showldp neighbors                            s1  show-lldp neighbors capability codes   r  router   b  bridge   t  telephone   c  docsis cable device  w  wlan access-point   p  repeater   s  station   o  other device id  local intf  hold-time  capability  port id r1    fa0 5   117    r    gi0 0 1 s2    fa0 1   112    b    fa0 1 total entries displayed  2
device discovery with lldp discover devices by using lldp  cont                         showldp nears detail        ios    ip                          s1  show-lldp neighbors detail ------------------------------------------------ chassis id  848a 8d44 49b0 port id  gi0 0 1 port description  gigabitethernet0 0 1 system name  r1 system description  cisco ios software  fuji   isr software  x86 64 linux       release software  fc2  technical support  http www cisco com techsupport copyright  c  1986-2019 by cisco systems  inc  compiled thu 22-aug-19 18 09 by mcpre time remaining  111 seconds system capabilities  b r enabled capabilities  r management addresses - not advertised  output omitted 
10 7 ios image management
ios image management video - managing cisco ios imagesthis video will demonstrate the process of upgrading the ios on a cisco router 
ios image management tftp servers as a backup locationas a network grows  cisco ios software images and configuration-files can be stored on a central tftp server  this helps to control the number of ios images and the revisions to those ios images  as well as the configuration-files that must be maintained production internetworks usually span wide areas and contain multiple-routers  for any network  it is good practice to keep a backup copy of the cisco ios software image in case the system image on the router becomes corrupted or accidentally erased widely distributed routers need a source or backup location for cisco ios software images  using a network tftp server allows image and configuration uploads and downloads over the network  the network tftp server can be another-router  a workstation  or a host system 
ios image management backup ios image to tftp server exampleto maintain network operations with minimum down time  it is necessary to have procedures in place for backing up cisco ios images  this allows the network administrator to quickly copy an image back to a router in case of a corrupted or erased image  use the following steps step 1  ping the tftp server  ping the tftp server to test connectivity step 2  verify image size in flash  verify that the tftp server has sufficient disk space to accommodate the cisco ios software image  use the show-flash0  command on the router to determine the size of the cisco ios image file  step 3  copy the image to the tftp server  copy the image to the tftp server by using the copy source-url destination-url command  after issuing the command by using the specified source and destination urls  the user is prompted for the source file name  ip-address of the remote-host  and destination file name  the transfer will then begin 
ios image management copy an ios image to a device examplestep 1  ping the tftp server  ping the tftp server to test connectivity step 2  verify the amount of free flash  ensure that there is sufficient flash space on the device being upgraded by using the show-flash  command  compare the free flash space with the new image file size step 3  copy the ios image file from the tftp server to the router by using the copy tftp  flash  command  after issuing this command  the user will be prompted for the ip-address of the remote-host  source file name  and destination file name  r1  copy tftp  flash  address or name of remote-host     2001 db8 cafe 100  99 source filename     isr4200-universalk9 ias 16 09 04 spa bin destination filename  isr4200-universalk9 ias 16 09 04 spa bin   accessing tftp 2001 db8 cafe 100  99  isr4200- universalk9 ias 16 09 04 spa bin    loading isr4200-universalk9 ias 16 09 04 spa bin from 2001 db8 cafe 100  99  via gigabitethernet0 0 0                         ok - 517153193 bytes  517153193 bytes copied in 868 128 secs  265652 bytes sec 
ios image management the boot-system commandduring startup  the bootstrap code parses the startup-configuration-file in nvram for the boot-system commands that specify the name and location of the cisco ios software image to load  several boot-system commands can be entered in sequence to provide a fault-tolerant boot plan if there are no boot-system commands in the configuration  the router defaults to loading the first valid cisco ios image in flash memory and runs it to upgrade to the copied ios image after that image is saved on the flash memory of the router  configure the router to load the new image by using the boot-system command  save the configuration  reload the router to boot the router with new image r1  configure-terminal r1 config   boot-system flash0 isr4200-universalk9 ias 16 09 04 spa bin r1 config   exit r1  copy-running-config-startup-config r1  reload
ios image management packet tracer - use a tftp server to upgrade a cisco ios imagein this packet tracer  you will complete the following objectives part 1  upgrade an ios image on a cisco device part 2  backup an ios image on a tftp server
10 3 ntp
ntp time and calendar services                                                                                                                                                                                                                                            ntp             r1  clock set 20 36 00 nov 15 2019 r1   nov 15 20 36 00 000   sys-6-clockupdate  system clock has been updated from 21 32 31 utc fri nov 15 2019 to 20 36 00 utc fri nov 15 2019  configured from console by console 
ntp time and calendar services  cont                                                                          ntp                                            ntp                                                          ntp                   ntp                  ntp  udp    123        rfc 1305                  
ntp ntp operationntp                                                                                                     ntp                           15      16                                      
ntp ntp operation  cont  0                                                                1    0                                             2       2                   1              ntp           2       1   ntp                         3                                                                                                  
ntp configure and verify ntp       ntp           show-clock                             detail                                              clock                            ntp-server ip-address                      209 165 200 225  r1  ntp                ntp                  show-clock detail                             ntp    r1  show-clock detail 20 55 10 207 utc fri nov 15 2019 time source is user configurationr1  config tr1 config   ntp-server 209 165 200 225 r1 config   end r1  show-clock detail 21 01 34 563 utc fri nov 15 2019 time source is ntp
ntp configure and verify ntp  cont  show-ntp-associations   show status     r1  209 165 200 225   ntp                          r1  gps          209 165 200 225   1   ntp            show-ntp-status     r1  209 165 220 225   ntp          2                r1  show-ntp-associationsaddress       ref clock  st   when poll each delay offset disp   209 165 200 225    gps    1    61   64   377  0 481 7 480  4 261 sys peer    selected    candidate  - outlyer  x falseticker    configured r1  show-ntp-status clock is synchronized  stratum 2  reference is 209 165 200 225 nominal freq is 250 0000 hz  actual freq is 249 9995 hz  precision is 2  19 output omitted 
ntp configure and verify ntp  cont  s1      ntp-server ip-address      r1                    show-ntp-associations                         s1      ntp     192 168 1 1   r1                     r1  2         s1               ntp               3         s1 config   ntp-server 192 168 1 1 s1 config   end s1  show-ntp-associations address   ref clock    st when poll reach delay offset disp   192 168 1 1  209 165 200 225  2  12   64   377   1 066 13 616 3 840 sys peer    selected    candidate  - outlyer  x falseticker    configured output omitted s1  show-ntp-status clock is synchronized  stratum 3  reference is 192 168 1 1 nominal freq is 119 2092 hz  actual freq is 119 2088 hz  precision is 2  17 output omitted
10 6 router and switch file maintenance
router and switch file maintenance router file-systemsthe cisco ios file-system  ifs  allows the administrator to navigate to different directories and list the files in a directory  the administrator can also create subdirectories in flash memory or on a disk  the directories available depend on the device the example displays the output of the show file-systems command  which lists all of the available file-systems on a cisco 4221 router the asterisk indicates the current default file-system  the pound sign     indicates a bootable disk  both of these are assigned to the flash file-system by default
router and switch file maintenance router file-systems  cont  because flash is the default file-system  the dir command lists the contents of flash  of specific interest is the last listing  this is the name of the current cisco ios file image that is running in ram 
router and switch file maintenance router file-systems  cont  to view the contents of nvram  you must change the current default file-system by using the cd  change directory  command  as shown in the example the present working directory command is pwd  this command verifies that we are viewing the nvram directory  finally  the dir command lists the contents of nvram  although there are several configuration-files listed  of specific interest is the startup-configuration-file  
router and switch file maintenance switch file-systemswith the cisco 2960 switch flash file-system  you can copy configuration-files  and archive  upload and download  software images the command to view the file-systems on a catalyst switch is the same as on a cisco router  show file-systems 
router and switch file maintenance use a text file to back up a configurationconfiguration-files can be saved to a text file by using tera term step 1  on the file menu  click log  step 2  choose the location to save the file  tera term will begin capturing text  step 3  after capture has been started  execute the show-running-config or show-startup-config command at the privileged-exec-prompt  text displayed in the terminal window will be directed to the chosen file  step 4  when the capture is complete  select close in the tera term  log window  step 5  view the file to verify that it was not corrupted 
router and switch file maintenance use a text file to restore a configurationa configuration can be copied from a file and then directly pasted to a device  the file will require editing to ensure that encrypted passwords are in plaintext  and that non-command text such as --more-- and ios messages are removed  in addition  you may want to add enable and configure-terminal to the beginning of the file or enter global configuration-mode before pasting the configuration  instead of copying and pasting  a configuration can be restored from a text file by using tera term  when using tera term  the steps are as follows step 1  on the file menu  click send file   step 2  locate the file to be copied into the device and click open   step 3  tera term will paste the file into the device the text in the file will be applied as commands in the cli and become the running-configuration on the device 
router and switch file maintenance using tftp to back up and restore a configurationfollow these steps to back up the running-configuration to a tftp server step 1  enter the copy running-config tftp command  step 2  enter the ip-address of the host where the configuration-file will be stored  step 3  enter the name to assign to the configuration-file  step 4  press enter to confirm each choice use the following steps to restore the running-configuration from a tftp server step 1  enter the copy tftp running-config command  step 2  enter the ip-address of the host where the configuration-file is stored  step 3  enter the name to assign to the configuration-file  step 4  press enter to confirm each choice r1  copy running-config tftp remote-host    192 168 10 254 name of the configuration-file to write r1-config   r1-jan-2019write file r1-jan-2019 to 192 168 10 254   confirm  writing r1-jan-2019         ok 
router and switch file maintenance usb ports on a cisco routerthe universal-serial-bus  usb  storage feature enables certain models of cisco routers to support usb flash drives  the usb flash feature provides an optional secondary storage capability and an additional boot device  the usb ports of a cisco 4321 router are shown in the figure use the dir command to view the contents of the usb flash drive 
router and switch file maintenance using usb to back up and restore a configurationissue the show file-systems command to verify that the usb drive is there and confirm its name  for this example  the usb file-system is named usbflash0  use the copy-run-usbflash0   command to copy the configuration-file to the usb flash drive  be sure to use the name of the flash drive  as indicated in the file-system  the slash is optional but indicates the root directory of the usb flash drive the ios will prompt for the filename  if the file already exists on the usb flash drive  the router will prompt to overwrite r1  copy running-config usbflash0  destination filename  running-config   r1-config  warning there is a file already existing with this name do you want to over write   confirm  5024 bytes copied in 1 796 secs  2797 bytes sec  r1 
router and switch file maintenance using usb to back up and restore a configuration  cont  use the dir command to see the file on the usb drive and use the more command to see the contents to restore configurations with a usb flash drive  it will be necessary to edit the usb r1-config file with a text editor  assuming the file name is r1-config  use the command copy usbflash0  r1-config running-config to restore a running-configuration 
router and switch file maintenance password recovery procedurespasswords on devices are used to prevent unauthorized-access  for encrypted passwords  such as the enable-secret passwords  the passwords must be replaced after recovery  depending on the device  the detailed procedure for password recovery varies  however  all the password recovery procedures follow the same principle step 1  enter the rommon mode  step 2  change the configuration register  step 3  copy the startup-config to the running-config  step 4  change the password  step 5  save the running-config as the new startup-config  step 6  reload the device 
router and switch file maintenance password recovery examplestep 1  enter the rommon mode  with console access  a user can access the rommon mode by using a break sequence during the boot up process or removing the external flash memory when the device is powered off  when successful  the rommon 1   prompt displays  as shown in the example readonly rommon initialized monitor  command  boot  aborted due to user interrupt rommon 1   
router and switch file maintenance password recovery example  cont  step 2  change the configuration register  the confreg 0x2142 command allows the user to set the configuration register to 0x2142  which causes the device to ignore the startup config file during startup  after setting the configuration register to 0x2142  type reset at the prompt to restart the device  enter the break sequence while the device is rebooting and decompressing the ios  the example displays the terminal output of a 1941 router in the rommon mode after using a break sequence during the boot up process rommon 1   confreg 0x2142 rommon 2   reset system bootstrap  version 15 0 1r m9  release software  fc1 technical support  http www cisco com techsupport copyright  c  2010 by cisco systems  inc   output omitted 
router and switch file maintenance password recovery example  cont  step 3  copy the startup-config to the running-config  after the device has finished reloading  issue the copy startup-config running-config command caution  do not enter copy-running-config-startup-config  this command erases your original startup-configuration router  copy startup-config running-configdestination filename  running-config   1450 bytes copied in 0 156 secs  9295 bytes sec  r1 
router and switch file maintenance password recovery example  cont  step 4  change the password  because you are in privileged-exec-mode  you can now configure all the necessary passwords note  the password cisco is not a strong password and is used here only as an exampler1  configure-terminal enter configuration commands  one per line  end with cntl z  r1 config   enable-secret cisco
router and switch file maintenance password recovery example  cont  step 5  save the running-config as the new startup-config  after the new passwords are configured  change the configuration register back to 0x2102 by using the config-register 0x2102 command in the global configuration-mode  save the running-config to startup-config r1 config   config-register 0x2102r1 config   end r1  copy-running-config-startup-config destination filename  startup-config   building configuration     ok  r1 
router and switch file maintenance packet tracer - backup configuration-filesin this activity  you will complete the following objectives  part 1  establish connectivity to tftp server part 2  transfer the configuration-file from tftp server part 3  backup configuration and ios to tftp server
router and switch file maintenance lab - use tera term to manage router configuration-filesin this lab  you will complete the following objectives part 1  configure basic-device-settingspart 2  use terminal emulation software to create a backup configuration-filepart 3  use a backup configuration-file to restore a router
router and switch file maintenance packet tracer - use tftp  flash  and usb to manage configuration-files   physical mode lab - use tftp  flash  and usb to manage configuration-filesin this packet tracer physical mode activity and in the lab  you will complete the following objectives part 1  cable the network and configure basic-device-settingspart 2  use tftp to back up and restore the switch running-configurationpart 3  use tftp to back up and restore the router running-configurationpart 4  back up and restore running-configurations using router flash memorypart 5   optional  use a usb drive to back up and restore the running-configuration  lab only 
router and switch file maintenance packet tracer   research password recovery procedures   physical mode lab - research password recovery proceduresin this packet tracer physical mode activity and in the lab  you will complete the following objectives part 1  research the configuration registerpart 2  document the password recovery procedure for a specific cisco router
10 4 snmp
snmp introduction to snmpsnmp was developed to allow administrators to manage nodes on an ip-network  it enables network administrators to monitor and manage network performance  find and solve network problems  and plan for network growth snmp is an application-layer protocol that provides a message format for communication between managers and agents  the snmp system consists of three elements snmp-managersnmp-agents  managed node management-information-base  mib snmp defines how management information is exchanged between network management applications and management agents  the snmp-manager polls the agents and queries the mib for snmp-agents on udp port 161  snmp-agents send any snmp-traps to the snmp-manager on udp port 162 
snmp introduction to snmp  cont  the snmp-manager is part of a network-management-system  nms   the snmp-manager can collect information from an snmp agent by using the  get  action and can change configurations on an agent by using the  set  action  snmp-agents can forward information directly to a network manager by using  traps  the snmp agent and mib reside on snmp client devices  mibs store data about the device and operational statistics and are meant to be available to authenticated remote users  the snmp agent is responsible for providing access to the local mib 
snmp snmp operationsnmp-agents that reside on managed devices collect and store information about the device and its operation locally in the mib  the snmp-manager then uses the snmp agent to access information within the mib there are two primary snmp-manager requests  get and set  in addition to configuration  a set can cause an action to occur  like restarting a router operationdescriptionget-requestretrieves a value from a specific variable get-next-requestretrieves a value from a variable within a table  the snmp-manager does not need to know the exact variable name  a sequential search is performed to find the needed variable from within a table get-bulk-requestretrieves large blocks of data  such as multiple rows in a table  that would otherwise require the transmission of many small blocks of data   only works with snmpv2 or later  get-responsereplies to a get-request  get-next-request  and set-request sent by an nms set-requeststores a value in a specific variable 
snmp snmp operation  cont  the snmp agent responds to snmp-manager requests as follows get an mib variable - the snmp agent performs this function in response to a getrequest-pdu from the network manager  the agent retrieves the value of the requested mib variable and responds to the network manager with that value set an mib variable - the snmp agent performs this function in response to a setrequest-pdu from the network manager  the snmp agent changes the value of the mib variable to the value specified by the network manager  an snmp agent reply to a set request includes the new settings in the device 
snmp snmp agent trapstraps are unsolicited messages alerting the snmp-manager to a condition or event on the network  trap-directed notifications reduce network and agent resources by eliminating the need for some of snmp polling requests the figure illustrates the use of an snmp trap to alert the network administrator that interface g0 0 0 has failed  the nms software can send the network administrator a text message  pop up a window on the nms software  or turn the router icon red in the nms gui 
snmp snmp versionssnmpv1 - legacy standard defined in rfc 1157  uses a simple community-string based authentication method  should not be used due to security risks snmpv2c - defined in rfcs 1901-1908  uses a simple community-string based authentication method  provides for bulk retrieval options  as well as more detailed error-messages snmpv3 - defined in rfcs 3410-3415  uses username authentication  provides data protection using hmac-md5 or hmac-sha and encryption using des  3des  or aes encryption 
snmp community-stringssnmpv1 and snmpv2c use community-strings that control access to the mib  community-strings are plaintext passwords  snmp community-strings authenticate access to mib objects there are two types of community-strings read-only  ro  - this type provides access to the mib variables  but does not allow these variables to be changed  only read  because security is minimal in version 2c  many organizations use snmpv2c in read-only mode read-write  rw  - this type provides read and write access to all objects in the mib to view or set mib variables  the user must specify the appropriate community string for read or write access 
snmp mib-object-idthe mib organizes variables hierarchically  formally  the mib defines each variable as an object-id  oid   oids uniquely identify managed objects  the mib organizes the oids based on rfc standards into a hierarchy of oids  usually shown as a tree the mib tree for any given device includes some branches with variables common to many networking-devices and some branches with variables specific to that device or vendor rfcs define some common public variables  most devices implement these mib variables  in addition  networking equipment vendors  like cisco  can define their own private branches of the tree to accommodate new variables specific to their devices 
snmp mib-object-id  cont  the figure shows portions of the mib structure defined by cisco  note how the oid can be described in words or numbers to help locate a particular variable in the tree  oids belonging to cisco  are numbered as follows   iso  1  org  3  dod  6  internet  1  private  4  enterprises  1  cisco  9   therefore  the oid is 1 3 6 1 4 1 9 
snmp snmp polling scenariosnmp can be used is to observe cpu utilization over a period of time by polling devices  cpu statistics can then be compiled on the nms and graphed  this creates a baseline for the network administrator the data is retrieved via the snmpget utility  issued on the nms  using the snmpget utility  you can manually retrieve real-time data  or have the nms run a report  this report would give you a period of time that you could use the data to get the average 
snmp snmp object navigatorthe snmpget utility gives some insight into the basic mechanics of how snmp works  however  working with long mib variable names like 1 3 6 1 4 1 9 2 1 58 0 can be problematic for the average user  more commonly  the network operations staff uses a network management product with an easy-to-use gui  which makes the entire mib data variable naming transparent to the user the cisco snmp navigator on the http www cisco com website allows a network administrator to research details about a particular oid 
snmp lab - research network monitoring softwarein this lab  you will complete the following objectives part 1  survey your understanding of network monitoringpart 2  research network monitoring toolspart 3  select a network monitoring tool
10 5 syslog
syslog introduction to syslogsyslog uses udp port 514 to send event notification messages across ip-networks to event message collectors  as shown in the figure the syslog logging service provides three primary functions  as follows the ability to gather logging information for monitoring and troubleshootingthe ability to select the type of logging information that is capturedthe ability to specify the destinations of captured syslog-messages
syslog syslog operationthe syslog protocol starts by sending system messages and debug output to a local logging process  syslog configuration may send these messages across the network to an external syslog-server  where they can be retrieved without needing to access the actual device  alternatively  syslog-messages may be sent to an internal buffer  messages sent to the internal buffer are only viewable through the cli of the device the network administrator may specify that only certain types of system messages be sent to various destinations  popular destinations for syslog-messages include the following logging-buffer  ram inside a router or switch console lineterminal linesyslog-server
syslog syslog-message formatcisco devices produce syslog-messages as a result of network events  every syslog-message contains a severity-level and a facility the smaller numerical levels are the more critical syslog alarms  the severity-level of the messages can be set to control where each type of message is displayed  i e  on the console or the other destinations   the complete list of syslog levels is shown in the table severity-nameseverity-levelexplanationemergencylevel 0system unusablealertlevel 1immediate action neededcriticallevel 2critical conditionerrorlevel 3error conditionwarninglevel 4warning conditionnotificationlevel 5normal  but significant conditioninformationallevel 6informational messagedebugginglevel 7debugging message
syslog syslog-facilitiesin addition to specifying the severity  syslog-messages also contain information on the facility  syslog-facilities are service identifiers that identify and categorize system state data for error and event message reporting  the logging facility options that are available are specific to the networking device some common syslog-message facilities reported on cisco-ios-routers include ipospf-protocolsys-operating-systemip-security  ipsec interface ip  if 
syslog syslog-facilities  cont  by default  the format of syslog-messages on the cisco ios software is as follows  facility-severity-mnemonic  description for example  sample output on a cisco switch for an etherchannel-link changing state to up is  link-3-updown  interface port-channel1  changed state to up here the facility is link and the severity-level is 3  with a mnemonic of updown 
syslog configure syslog timestampby default  log messages are not timestamped  log messages should be timestamped so that when they are sent to another destination  such as a syslog-server  there is record of when the message was generated  use the command service-timestamps-log-datetime to force logged events to display the date and time  r1  configure-terminal r1 config   interface g0 0 0 r1 config-if   shutdown  link-5-changed  interface gigabitethernet0 0 0  changed state to administratively down lineproto-5-updown  line protocol on interface gigabitethernet0 0 0  changed state to down r1 config-if   exit r1 config   service-timestamps-log-datetime r1 config   interface g0 0 0 r1 config-if   no-shutdown  mar 1 11 52 42   link-3-updown  interface gigabitethernet0 0 0  changed state to down  mar 1 11 52 45   link-3-updown  interface gigabitethernet0 0 0  changed state to up  mar 1 11 52 46   lineproto-5-updown  line protocol on interface gigabitethernet0 0 0  changed state to up r1 config-if  
6 5 dynamic-nat
static-nat dynamic-nat scenariodynamic-nat automatically-maps inside-local-addresses to inside global-addresses dynamic-nat uses a pool of inside global-addresses the pool of inside global-addresses is available to any device on the inside network on a first-come first-served basis if all addresses in the pool are in use  a device must wait for an available address before it can access the outside-network 
static-nat configure dynamic-natthere are five tasks when configuring dynamic-nat translations step 1 - define the pool of addresses that will be used for translation using the ip nat pool command  step 2 - configure a standard-acl to identify  permit  only those addresses that are to be translated step 3 - bind the acl to the pool  using the ip-nat-inside source list command r2 config   ip nat pool nat-pool1 209 165 200 226 209 165 200 240 netmask 255 255 255 224r2 config   access-list 1 permit 192 168 0 0 0 0 255 255r2 config   ip-nat-inside source list 1 pool nat-pool1
static-nat configure dynamic-nat  cont  there are five tasks when configuring dynamic-nat translations step 4 - identify which interfaces are inside  step 5 - identify which interfaces are outside  r2 config   ip nat pool nat-pool1 209 165 200 226 209 165 200 240 netmask 255 255 255 224r2 config   access-list 1 permit 192 168 0 0 0 0 255 255r2 config   ip-nat-inside source list 1 pool nat-pool1r2 config   interface serial 0 1 0r2 config-if   ip-nat-insider2 config-if   interface serial 0 1 1r2 config-if   ip-nat-outside
static-nat analyze dynamic-nat   inside to outsidedynamic-nat translation process pc1 and pc2 send packets requesting a connection to the server r2 receives the first-packet from pc1  checks the alc to determine if the packet should be translated  selects an available global-address  and creates a translation entry in the nat-table r2 replaces the inside local source address of pc1  192 168 10 10  with the translated inside global-address of 209 165 200 226 and forwards the packet   the same process occurs for the packet from pc2 using the translated address of 209 165 200 227  
static-nat analyze dynamic-nat   outside to insidedynamic-nat translation process the server receives the packet from pc1 and responds using the destination address of 209 165 200 226  the server receives the packet from pc2  it responds to using the destination address of 209 165 200 227  a  when r2 receives the packet with the destination address of 209 165 200 226  it performs a nat-table lookup and translates the address back to the inside-local-address and forwards the packet toward pc1   b  when r2 receives the packet with the destination address of 209 165 200 227  it performs a nat-table lookup and translates the address back to the inside-local-address 192 168 11 10 and forwards the packet toward pc2 
static-nat analyze dynamic-nat   outside to inside  cont  dynamic-nat translation process pc1 and pc2 receive the packets and continue the conversation  the router performs steps 2 to 5 for each packet 
static-nat verify dynamic-natthe output of the show-ip-nat-translations command displays all static translations that have been configured and any dynamic translations that have been created by traffic r2  show-ip-nat-translationspro inside global      inside local       outside local      outside global--- 209 165 200 228    192 168 10 10      ---                ------ 209 165 200 229    192 168 11 10      ---                ---r2 
static-nat verify dynamic-nat  cont  adding the verbose keyword displays additional information about each translation  including how long ago the entry was created and used r2  show ip nat translation verbosepro inside global      inside local       outside local      outside globaltcp 209 165 200 228    192 168 10 10      ---                ---create 00 02 11  use 00 02 11 timeout 86400000  left 23 57 48  map-id in   1  flags  none  use count  0  entry-id  10  lc entries  0tcp 209 165 200 229    192 168 11 10      ---                ---create 00 02 10  use 00 02 10 timeout 86400000  left 23 57 49  map-id in   1  flags  none  use count  0  entry-id  12  lc entries  0r2 
static-nat verify dynamic-nat  cont  by default  translation entries time out after 24 hours  unless the timers have been reconfigured with the ip-nat-translation-timeout timeout-seconds command in global configuration-mode  to clear dynamic entries before the timeout has expired  use the clear ip nat translation privileged-exec-mode command r2  clear ip nat translation  r2  show ip nat translationcommanddescriptionclear ip nat translation  clears all dynamic address translation entries from the nat translation table clear ip nat translation inside global-ip local-ip  outside local-ip global-ip clears a simple dynamic translation entry containing an inside translation or both inside and outside translation clear ip nat translation protocol inside global-ip global-port local-ip local-port   outside local-ip local-port global-ip global-port clears an extended dynamic translation entry 
static-nat verify dynamic-nat  cont  the show-ip-nat-statistics command displays information about the total number of active translations  nat configuration parameters  the number of addresses in the pool  and how many of the addresses have been allocated r2  show-ip-nat-statistics total active translations  4  0 static  4 dynamic  0 extended peak translations  4  occurred 00 31 43 agooutside interfaces serial0 1 1inside interfaces  serial0 1 0hits  47  misses  0cef translated packets  47  cef punted packets  0expired translations  5dynamic mappings -- inside source id  1  access-list 1 pool nat-pool1 refcount 4pool nat-pool1  netmask 255 255 255 224start 209 165 200 226 end 209 165 200 240type generic  total addresses 15  allocated 2  13    misses 0 output omitted r2 
static-nat verify dynamic-nat  cont  the show-running-config command and show s the nat  acl  interface  or pool commands with the required values  r2  show-running-config   include natip nat pool nat-pool1 209 165 200 226 209 165 200 240 netmask 255 255 255 224ip-nat-inside source list 1 pool nat-pool1
dynamic-nat packet tracer   configure dynamic-natin this packet tracer  you will complete the following objectives configure dynamic-natverify nat implementation
6 7 nat64
nat64 nat for ipv6 ipv6 was developed with the intention of making nat for ipv4 with translation between public and private ipv4-addresses unnecessary  however  ipv6 does include its own ipv6 private-address space  unique-local-addresses  ulas  ipv6 unique-local-addresses  ula  are similar to rfc-1918 private-addresses in ipv4 but have a different purpose  ula addresses are meant for only local communications within a site  ula addresses are not meant to provide additional ipv6-address space  nor to provide a level of security ipv6 does provide for protocol translation between ipv4 and ipv6 known as nat64 
nat64 nat64nat for ipv6 is used in a much different context than nat for ipv4  the varieties of nat for ipv6 are used to transparently provide access between ipv6-only and ipv4-only networks  as shown  it is not used as a form of private ipv6 to global ipv6 translation nat for ipv6 should not be used as a long-term-strategy  but as a temporary mechanism to assist in the migration from ipv4 to ipv6  
6 3 nat advantages and disadvantages
nat advantages and disadvantages advantages of natnat provides many benefits nat conserves the legally registered addressing-scheme by allowing the privatization of intranets  nat conserves addresses through application port-level multiplexing  nat increases the flexibility of connections to the public network nat provides consistency for internal-network addressing-schemes  nat allows the existing private ipv4-address scheme to remain while allowing for easy change to a new public-addressing-scheme  nat hides the ipv4-addresses of users and other devices  
nat advantages and disadvantages disadvantages of natnat does have drawbacks nat increases forwarding delays end-to-end addressing is lost end-to-end ipv4 traceability is lost nat complicates the use of tunneling-protocols  such as ipsec services that require the initiation of tcp-connections from the outside-network  or stateless-protocols  such as those using udp  can be disrupted  
module 6  nat for ipv4enterprise networking  security  and automation v7 0  ensa  
module objectivesmodule title  nat for ipv4module objective  configure nat services on the edge router to provide ipv4-address scalability topic titletopic objectivenat characteristicsexplain the purpose and function of nat types of natexplain the operation of different types of nat nat advantages and disadvantagesdescribe the advantages and disadvantages of nat static-natconfigure static-nat using the cli dynamic-natconfigure dynamic-nat using the cli patconfigure pat using the cli nat64describe nat for ipv6 
6 1 nat characteristics
nat characteristics ipv4-address spacenetworks are commonly implemented using private ipv4-addresses  as defined in rfc-1918 private ipv4-addresses cannot be routed over the internet and are used within an organization or site to allow devices to communicate locally to allow a device with a private ipv4-address to access devices and resources outside of the local-network  the private-address must first be translated to a public-address nat provides the translation of private-addresses to public-addresses classactivity typeactivity name10 0 0 0   10 255 255 25510 0 0 0 8172 16 0 0   172 31 255 255172 16 0 0 12192 168 0 0   192 168 255 255192 168 0 0 16
nat characteristics what is natthe primary use of nat is to conserve-public-ipv4-addresses nat allows networks to use private ipv4-addresses internally and translates them to a public-address when needed a nat router typically operates at the border of a stub-network when a device inside the stub-network wants to communicate with a device outside of its network  the packet is forwarded to the border router which performs the nat process  translating the internal private-address of the device to a public  outside  routable-address 
nat characteristics how nat workspc1 wants to communicate with an outside web-server with public-address 209 165 201 1 pc1 sends a packet addressed to the web-server  r2 receives the packet and reads the source ipv4-address to determine if it needs translation r2 adds mapping of the local to global-address to the nat-table r2 sends the packet with the translated source address toward the destination the web-server responds with a packet addressed to the inside global-address of pc1  209 165 200 226  r2 receives the packet with destination address 209 165 200 226  r2 checks the nat-table and finds an entry for this mapping  r2 uses this information and translates the inside global-address  209 165 200 226  to the inside-local-address  192 168 10 10   and the packet is forwarded toward pc1 
nat characteristics nat terminologynat includes four types of addresses inside-local-addressinside global-addressoutside-local-addressoutside global-addressnat terminology is always applied from the perspective of the device with the translated address inside address - the address of the device which is being translated by nat outside address - the address of the destination-device local-address - a local-address is any address that appears on the inside portion of the network global-address - a global-address is any address that appears on the outside portion of the network 
nat characteristics nat terminology  cont  inside-local-addressthe address of the source as seen from inside the network  this is typically a private ipv4-address  the inside-local-address of pc1 is 192 168 10 10 inside global-addressesthe address of source as seen from the outside-network  the inside global-address of pc1 is 209 165 200 226outside global-addressthe address of the destination as seen from the outside-network  the outside global-address of the web-server is 209 165 201 1outside-local-addressthe address of the destination as seen from the inside network  pc1 sends traffic to the web-server at the ipv4-address 209 165 201 1  while uncommon  this address could be different than the globally routable-address of the destination 
6 6 pat
pat configure pat to use a single ipv4-addressto configure pat to use a single ipv4-address  add the keyword overload to the ip-nat-inside source command in the example  all hosts from network 192 168 0 0 16  matching acl 1  that send traffic through router r2 to the internet will be translated to ipv4-address 209 165 200 225  ipv4-address of interface s0 1 1   the traffic flows will be identified by port-numbers in the nat-table because the overload keyword is configured r2 config   ip-nat-inside source list 1 interface serial 0 1 0 overloadr2 config   access-list 1 permit 192 168 0 0 0 0 255 255r2 config   interface serial0 1 0r2 config-if   ip-nat-insider2 config-if   exitr2 config   interface serial0 1 1r2 config-if   ip-nat-outside
pat configure pat to use an address poolan isp may allocate more than one public ipv4-address to an organization  in this scenario the organization can configure pat to use a pool of ipv4 public-addresses for translation to configure pat for a dynamic-nat address pool  simply add the keyword overload to the ip-nat-inside source command in the example  nat-pool2 is bound to an acl to permit 192 168 0 0 16 to be translated  these hosts can share an ipv4-address from the pool because pat is enabled with the keyword overload r2 config   ip nat pool nat-pool2 209 165 200 226 209 165 200 240 netmask 255 255 255 224r2 config   access-list 1 permit 192 168 0 0 0 0 255 255r2 config   ip-nat-inside source list 1 pool nat-pool2 overloadr2 config   interface serial0 1 0r2 config-if   ip-nat-insider2 config-if   interface serial0 1 0r2 config-if   ip-nat-outside
pat analyze pat   server to pcpc1 and pc2 send packets to svr1 and svr2 the packet from pc1 reaches r2 first  r2 modifies the source ipv4-address to 209 165 200 225  inside global-address   the packet is then forwarded towards svr1 the packet from pc2 arrives at r2  pat changes the source ipv4-address of pc2 to the inside global-address 209 165 200 225  pc2 has the same source-port-number as the translation for pc1  pat increments the source-port-number until it is a unique value in its table  in this instance  1445 
pat analyze pat   pc to serverpc1 and pc2 send packets to svr1 and svr2 the packet from pc1 reaches r2 first  r2 modifies the source ipv4-address to 209 165 200 225  inside global-address   the packet is then forwarded towards svr1 the packet from pc2 arrives at r2  pat changes the source ipv4-address of pc2 to the inside global-address 209 165 200 225  pc2 has the same source-port-number as the translation for pc1  pat increments the source-port-number until it is a unique value in its table  in this instance  it is 1445 
pat analyze pat   server to pcthe servers use the source-port from the received packet as the destination-port  and the source address as the destination address for the return traffic r2 changes the destination ipv4-address of the packet from srv1 from 209 165 200 225 to 192 168 10 10  and forwards the packet toward pc1 r2 changes the destination address of packet from srv2  from 209 165 200 225 to 192 168 10 11  and modifies the destinations port back to its original value of 1444  the packet is then forwarded toward pc2 
pat verify patthe same commands used to verify static and dynamic-nat are used to verify pat  the show-ip-nat-translations command displays the translations from two different hosts to different web-servers  notice that two different inside hosts are allocated the same ipv4-address of 209 165 200 226  inside global-address   the source-port-numbers in the nat-table differentiate the two transactions r2  show-ip-nat-translationspro inside global          inside local         outside local      outside globaltcp 209 165 200 225 1444  192 168 10 10 1444  209 165 201 1 80   209 165 201 1 80tcp 209 165 200 225 1445  192 168 11 10 1444  209 165 202 129 80 209 165 202 129 80r2 
pat verify pat  cont  the show-ip-nat-statistics command verifies that nat-pool2 has allocated a single-address for both translations  also shown are the number and type of active translations  nat configuration parameters  the number of addresses in the pool  and how many have been allocated r2  show-ip-nat-statistics total active translations  4  0 static  2 dynamic  2 extended peak translations  2  occurred 00 31 43 agooutside interfaces serial0 1 1inside interfaces  serial0 1 0hits  4  misses  0cef translated packets  47  cef punted packets  0expired translations  0dynamic mappings -- inside source id  3  access-list 1 pool nat-pool2 refcount 2pool nat-pool2  netmask 255 255 255 224start 209 165 200 225 end 209 165 200 240type generic  total addresses 15  allocated 1  6    misses 0 output omitted r2 
dynamic-nat packet tracer   configure patin this packet tracer  you will complete the following objectives configure dynamic-nat with overloadverify dynamic-nat with overload implementationconfigure pat using an interfaceverify pat interface implementation
6 4 static-nat
static-nat static-nat scenariostatic-nat is a one-to-one mapping between an inside address and an outside address  static-nat allows external-devices to initiate connections to internal devices using the statically assigned public-address  for instance  an internal web-server may be mapped to a specific inside global-address so that it is accessible from outside-networks 
static-nat configure static-natthere are two basic tasks when configuring static-nat translations step 1 - create a mapping between the inside-local-address and the inside global-addresses using the ip-nat-inside-source-static command step 2 - the interfaces participating in the translation are configured as inside or outside relative to nat with the ip-nat-inside and ip-nat-outside commands r2 config   ip-nat-inside-source-static 192 168 10 254 209 165 201 5r2 config  r2 config   interface serial 0 1 0r2 config-if   ip-address 192 168 1 2 255 255 255 252r2 config-if   ip-nat-insider2 config-if   exitr2 config   interface serial 0 1 1r2 config-if   ip-address 209 165 200 1 255 255 255 252r2 config-if   ip-nat-outside
static-nat analyze static-natthe static-nat translation process between the client and the web-server the client sends a packet to the web-server r2 receives packets from the client on its nat outside interface and checks its nat-table  r2 translates the inside global-address of to the inside-local-address and forwards the packet towards the web-server the web-server receives the packet and responds to the client using its inside-local-address  a  r2 receives the packet from the web-server on its nat inside interface with source address of the inside-local-address of the web-server and  b  translates the source address to the inside global-address  
static-nat verify static-natto verify nat operation  issue the show-ip-nat-translations command this command shows active nat translations  because the example is a static-nat configuration  the translation is always present in the nat-table regardless of any active communications if the command is issued during an active-session  the output also indicates the address of the outside device r2  show-ip-nat-translationspro  inside global       inside local       outside local     outside global---  209 165 201 5       192 168 10 254     ---               ---total number of translations  1r2  show-ip-nat-translationspro  inside global       inside local        outside local         outside globaltcp  209 165 201 5       192 168 10 254      209 165 200 254       209 165 200 254---  209 165 201 5       192 168 10 254        ---                   ---total number of translations  2
static-nat verify static-nat  cont  another useful command is show-ip-nat-statistics it displays information about the total number of active translations  nat configuration parameters  the number of addresses in the pool  and the number of addresses that have been allocated to verify that the nat translation is working  it is best to clear statistics from any past translations using the clear-ip-nat-statistics command before testing r2  show-ip-nat-statisticstotal active translations  1  1 static  0 dynamic  0 extended outside interfaces serial0 1 1inside interfaces serial0 1 0hits  4  misses  1 output omitted 
static-nat packet tracer   configure static-natin this packet tracer  you will complete the following objectives test access without natconfigure static-nattest access with nat
6 2 types of nat
types of nat static-natstatic-nat uses a one-to-one mapping of local and global-addresses configured by the network administrator that remain constant static-nat is useful for web-servers or devices that must have a consistent address that is accessible from the internet  such as a company web-server  it is also useful for devices that must be accessible by authorized personnel when offsite  but not by the general public on the internet note  static-nat requires that enough public-addresses are available to satisfy the total number of simultaneous user sessions 
types of nat dynamic-natdynamic-nat uses a pool of public-addresses and assigns them on a first-come  first-served basis  when an inside device requests access to an outside-network  dynamic-nat assigns an available public ipv4-address from the pool the other addresses in the pool are still available for use  note  dynamic-nat requires that enough public-addresses are available to satisfy the total number of simultaneous user sessions 
types of nat port-address-translationport-address-translation  pat   also known as nat overload  maps multiple private ipv4-addresses to a single public ipv4-address or a few addresses with pat  when the nat router receives a packet from the client  it uses the source-port-number to uniquely identify the specific nat translation pat ensures that devices use a different tcp port-number for each session with a server on the internet 
types of nat next available portpat attempts to preserve the original source-port  if the original source-port is already used  pat assigns the first available port-number starting from the beginning of the appropriate port group 0-511  512-1 023  or 1 024-65 535 when there are no more ports available and there is more than one external address in the address pool  pat moves to the next address to try to allocate the original source-port  the process continues until there are no more available ports or external ipv4-addresses in the address pool 
types of nat nat and pat comparisonsummary of the differences between nat and pat nat - only modifies the ipv4-addressespat - pat modifies both the ipv4-address and the port-number inside global-addressinside-local-address209 165 200 226192 168 10 10inside global-addressinside-local-address209 165 200 226 2031192 168 10 10 2031natpatone-to-one mapping between inside local and inside global-addresses one inside global-address can be mapped to many inside-local-addresses uses only ipv4-addresses in translation process uses ipv4-addresses and tcp or udp source-port-numbers in translation process a unique inside global-address is required for each inside host accessing the outside-network a single-unique-inside-global-address can be shared by many inside hosts accessing the outside-network 
types of nat packets without a layer 4 segmentsome packets do not contain a layer 4 port-number  such as icmpv4-messages  each of these types of protocols is handled differently by pat for example  icmpv4 query messages  echo requests  and echo replies include a query id  icmpv4 uses the query id to identify an echo request with its corresponding echo-reply note  other icmpv4-messages do not use the query id  these messages and other protocols that do not use tcp or udp port-numbers vary and are beyond the scope of this curriculum 
types of nat packet tracer   investigate nat operationsin this packet tracer  you will complete the following objectives investigate nat operation across the intranetinvestigate nat operation across the internetconduct further investigations
9 3 copper-cabling
ipv6 neighbor-discovery video   ipv6 neighbor-discoverythis video will explain the process of how ipv6 performs address-resolution using icmpv6 neighbor-solicitation and neighbor-advertisement messages 
ipv6 neighbor-discovery ipv6 neighbor-discovery messagesipv6 neighbor-discovery  nd  protocol provides address-resolutionrouter-discoveryredirection servicesicmpv6 neighbor-solicitation  ns  and neighbor-advertisement  na  messages are used for device-to-device messaging such as address-resolution icmtpv6 router-solicitation  rs  and router-advertisement  ra  messages are used for messaging between devices and routers for router-discovery icmpv6 redirect messages are used by routers for better next-hop selection 
ipv6 neighbor-discovery ipv6 neighbor-discovery   address-resolutionipv6 devices use nd to resolve the mac-address of a known ipv6-address icmpv6 neighbor-solicitation messages are sent using special ethernet and ipv6 multicast-addresses  
in this packet tracer  you will complete the following objectives part 1  ipv6 neighbor-discovery local-networkpart 2  ipv6 neighbor-discovery remote-networkipv6 neighbor-discovery packet tracer   ipv6 neighbor-discovery
14 3 apis
apis video - apisthis video will cover the following define apisee examples of popular apis soaprestnetconfrestconfexecute an api call in a browser and in postman 
apis the api conceptan api is software that allows other applications to access its data or services  it is a set of rules describing how one application can interact with another  and the instructions to allow the interaction to occur  the user sends an api-request to a server asking for specific information and receives an api-response in return from the server along with the requested information an api is similar to a waiter in a restaurant  as shown in the following figure  
apis an api exampleto really understand how apis can be used to provide data and services  we will look at two options for booking airline reservations  the first option uses the web site of a specific airline  using the airline s web site  the user enters the information to make a reservation request  the web site interacts directly with the airline s own database and provides the user with information matching the user s request 
apis an api example  cont  a travel site can access this same information  not only from a specific airline but a variety of airlines  in this case  the user enters in similar reservation information  the travel service web site interacts with the various airline databases using apis provided by each airline  the travel service uses each airline api to request information from that specific airline  and then it displays the information from all the airlines on the its web page  the api acts as a kind of messenger between the requesting application and the application on the server that provides the data or service  the message from the requesting application to the server where the data resides is known as an api call 
apis open  internal  and partner-apisan important consideration when developing an api is the distinction between open  internal  and partner-apis open-apis or public-apis - these apis are publicly available and can be used with no restrictions  because these apis are public  many api providers require the user to get a free key  or token  prior to using the api  this is to help control the number of api-requests they receive and process  internal or private-apis - these are apis that are used by an organization or company to access data and services for internal use only  an example of an internal-api is allowing authorized salespeople access to internal sales data on their mobile devices partner-apis - these are apis that are used between a company and its business partners or contractors to facilitate business between them  the business partner must have a license or other form of permission to use the api  a travel service using an airline s api is an example of a partner-api 
apis types of web service apisa web service is a service that is available over the internet  using the world wide web  there are four types of web service apis simple-object-access-protocol  soap representational-state-transfer  rest extensible-markup-language-remote procedure call  xml-rpc javascript-object-notation-remote procedure call  json-rpc characteristicsoaprestxml-rpcjson-rpcdata formatxmljson  xml  yaml  and othersxmljsonfirst released1998200019982005strengthswell-establishedflexible formatting and most widely usedwell-established  simplicitysimplicity
enterprise networking  security  and automation v7 0 ensa module 14  network automation
module objectivesmodule title  network-virtualizationmodule objective  explain the purpose and characteristics of network-virtualization topic titletopic objectivecloud-computingexplain the importance of cloud-computing virtualizationexplain the importance of virtualization virtual-network-infrastructuredescribe the virtualization of network-devices and services software-defined-networkingdescribe software-defined-networking controllersdescribe controllers used in network-programming 
14 1 automation overview
automation overview video - automation everywherewe now see automation everywhere  from self-serve checkouts at stores and automatic building environmental controls  to autonomous cars and planes  how many automated systems do you encounter in a single day 
automation overview the increase in automationthese are some of the benefits of automation machines can work 24 hours a day without breaks  which results in greater output machines provide a more uniform product automation allows the collection of vast amounts of data that can be quickly analyzed to provide information which can help guide an event or process robots are used in dangerous conditions such as mining  firefighting  and cleaning up industrial accidents  this reduces the risk to humans under certain circumstances  smart devices can alter their behavior to reduce energy usage  make a medical diagnosis  and improve automobile driving safety 
automation overview thinking devicesmany devices now incorporate smart technology to help to govern their behavior  this can be as simple as a smart appliance lowering its power consumption during periods of peak demand or as complex as a self-driving car whenever a device takes a course of action based on an outside piece of information  then that device is referred to as a smart device  many devices that we interact with now have the word smart in their names  this indicates that the device has the ability to alter its behavior depending on its environment in order for devices to  think   they need to be programmed using network automation tools 
14 5 configuration management tools
configuration management tools video - configuration management toolsthis video will cover the following compare configuration management tools including ansible  puppet  chef and saltstack review plays  tasks  modules  parameters  and variables in a sample playbook
configuration management tools traditional network configurationnetwork-devices have traditionally been configured by a network administrator using the cli  whenever there is a change or new feature  the necessary configuration commands must be manually entered on all of the appropriate devices  this becomes a major issue on larger-networks or with more complex configurations 
configuration management tools traditional network configurationsimple-network-management-protocol  snmp  lets administrators manage nodes on an ip-network  with a network-management-station  nms   network administrators use snmp to monitor and manage network performance  find and solve network problems  and perform queries for statistics  snmp is not typically used for configuration due to security concerns and difficulty in implementation you can also use apis to automate the deployment and management of network resources  instead of manually configuring ports  access lists  qos  and load-balancing policies  you can use tools to automate configurations  
configuration management tools network automationwe are rapidly moving away from a world where a network administrator manages a few dozen network-devices  to one where they are deploying and managing a great number of complex network-devices  both physical and virtual  with the help of software  this transformation is quickly spreading to all places in the network  there are new and different methods for network administrators to automatically monitor  manage  and configure the network  these include protocols and technologies such as rest  ansible  puppet  chef  python  json  xml  and more 
configuration management tools configuration management toolsconfiguration management tools make use of restful api-requests to automate tasks and can scale across thousands of devices  these are some characteristics of the network that administrators benefit from automating software and version controldevice attributes such as names  addressing  and securityprotocol configurationsacl configurationsconfiguration management tools typically include automation and orchestration  automation is when a tool automatically performs a task on a system  orchestration is the arranging of the automated tasks that results in a coordinate process or workflow 
configuration management tools configuration management tools  cont  there are several tools available to make configuration management easier ansiblechefpuppetsaltstackthe goal of all of these tools is to reduce the complexity and time involved in configuring and maintaining a large-scale network infrastructure with hundreds  even thousands of devices  these same tools can benefit smaller-networks as well 
configuration management tools compare ansible  chef  puppet  and saltstackansible  chef  puppet  and saltstack all come with api documentation for configuring restful api-requests  all of them support json and yaml as well as other data-formats  the following table shows a summary of a comparison of major characteristics of ansible  puppet  chef  and saltstack configuration management tools characteristicansiblechefpuppetsaltstackwhat programming language python   yamlrubyrubypythonagent-based or agentless agentlessagent-basedsupports bothsupports bothhow are devices managed any device can be  controller chef masterpuppet mastersalt masterwhat is created by the tool playbookcookbookmanifestpillar
14 2 data-formats
data-formats video - data-formatsthis video covers the following htmlxmljsonyaml
data-formats the data-formats conceptdata-formats are simply a way to store and exchange data in a structured format  one such format is called hypertext-markup-language  html   html is a standard markup language for describing the structure of web pages these are some common data-formats that are used in many applications including network automation and programmability javascript-object-notation  json extensible-markup-language  xml yaml ain t markup language  yaml the data format that is selected will depend on the format that is used by the application  tool  or script that you are using  many systems will be able to support more than one data format  which allows the user to choose their preferred one 
data-formats data format rulesdata-formats have rules and structure similar to what we have with programming and written languages  each data format will have specific characteristics syntax  which includes the types of brackets used  such as                the use of white space  or indentation  quotes  commas  and more how objects are represented  such as characters  strings  lists  and arrays how key value pairs are represented  the key is usually on the left side and it identifies or describes the data  the value on the right is the data itself and can be a character  string  number  list or another type of data 
data-formats compare data-formatsjson format   message    success     timestamp   1560789260    iss position      latitude    25 9990       longitude    -132 6992    yaml formatmessage  success timestamp  1560789260 iss position  latitude   25 9990   longitude   -132 6992 xml format  xml version  1 0  encoding  utf-8      root   message success  message   timestamp 1560789260  timestamp  iss position   latitude 25 9990  latitude   longitude -132 6992  longitude    iss position    root 
data-formats json data format json is a human readable data format used by applications for storing  transferring and reading data  json is a very popular format used by web services and apis to provide public data  this is because it is easy to parse and can be used with most modern programming languages  including python 
data-formats json data format  cont  compare the ios output above to the output in json format  notice that each object  each key value pair  is a different piece of data about the interface including its name  a description  and whether the interface is enabled gigabitethernet0 0 0 is up  line protocol is up  connected  description  wide area network internet address is 172 16 0 2 24   ietf-interfaces interface      name    gigabitethernet0 0 0   description    wide area network    enabled   true   ietf-ip ipv4      address        ip    172 16 0 2    netmask    255 255 255 0          
data-formats json syntax rulesthese are some of the characteristics of json it uses a hierarchical structure and contains nested values it uses braces     to hold objects and square-brackets     hold arrays its data is written as key value pairs with json  the data known as an object is one or more key value pairs enclosed in braces      the syntax for a json object includes keys must be strings within double quotation marks     values must be a valid json data type  string  number  array  boolean  null  or another object  keys and values are separated by a colon multiple key value pairs within an object are separated by commas white space is not significant 
data-formats json syntax rules  cont  at times a key may contain more than one value  this is known as an array  an array in json is an ordered list of values  characteristics of arrays in json include the key followed by a colon and a list of values enclosed in square-brackets     the array is an ordered list of values the array can contain multiple value types including a string  number  boolean  object or another array inside the array each value in the array is separated by a comma 
data-formats json syntax rules  cont  for example  a list of ipv4-addresses might look like the following output  the key is  addresses   each item in the list is a separate object  separated by braces      the objects are two key value pairs  an ipv4-address   ip   and a subnet-mask   netmask   separated by a comma  the array of objects in the list is also separated by a comma following the closing brace for each object     addresses        ip    172 16 0 2    netmask    255 255 255 0        ip    172 16 0 3    netmask    255 255 255 0        ip    172 16 0 4    netmask    255 255 255 0      
data-formats yaml data formatyaml is another type of human readable data format used by applications for storing  transferring  and reading data  some of the characteristic of yaml include it is like json and is considered a superset of json it has a minimalist format making it easy to both read and write it uses indentation to define its structure  without the use of brackets or commas 
data-formats yaml data format  cont  ios output in json is to the left  the same data in yaml format is below  it is easier to read  similar to json  a yaml object is one or more key value pairs  key value pairs are separated by a colon without the use of quotation marks  in yaml  a hyphen is used to separate each element in a list    ietf-interfaces interface      name    gigabitethernet2    description    wide area network    enabled   true   ietf-ip ipv4      address        ip    172 16 0 2    netmask    255 255 255 0        ip    172 16 0 3    netmask    255 255 255 0        ip    172 16 0 4    netmask    255 255 255 0          ietf-interfaces interface  name  gigabitethernet2 description  wide area network enabled  true ietf-ip ipv4  address  - ip  172 16 0 2 netmask  255 255 255 0 - ip  172 16 0 3 netmask  255 255 255 0 - ip  172 16 0 4 netmask  255 255 255 0
data-formats xml data formatxml is one more type of human readable data format used to store  transfer  and read data by applications  some of the characteristics of xml include it is like html   which is the standardized markup language for creating web pages and web applications it is self-descriptive  it encloses data within a related set of tags   tag data  tag unlike html  xml uses no predefined tags or document structure xml objects are one or more key value pairs  with the beginning tag used as the name of the key   key value  key 
data-formats xml data format  cont  the output shows the same data for gigabitethernet2 formatted as an xml data-structure  notice how the values are enclosed within the object tags  in this example  each key value pair is on a separate line and some lines are indented  this is not required but is done for readability  the list uses repeated instances of  tag   tag  for each element in the list  the elements within these repeated instances represent one or more key value pairs   xml version  1 0  encoding  utf-8      ietf-interfaces interface  name gigabitethernet2  name   description wide area network  description  enabled true  enabled   ietf-ip ipv4   address   ip 172 16 0 2  ip   netmask 255 255 255 0  netmask    address   address   ip 172 16 0 3  ip   netmask 255 255 255 0  netmask    address   address   ip 172 16 0 4  ip   netmask 255 255 255 0  netmask    address    ietf-ip ipv4    ietf-interfaces interface 
14 6 ibn and cisco dna center
ibn and cisco dna center video - intent-based networkingyou have learned of the many tools and software that can help you automate your network  intent-based networking  ibn  and cisco digital network-architecture  dna  center can help you bring it all together to create an automated network play the video by cisco s john apostolopoulos and anand oswal explaining how artificial intelligence and intent-based networking  ibn  can improve networks 
ibn and cisco dna center intent-based networking overviewibn is the emerging industry model for the next generation of networking  ibn builds on software-defined-networking  sdn   transforming a hardware-centric and manual approach to designing and operating networks to one that is software-centric and fully automated business objectives for the network are expressed as intent  ibn captures business intent and uses analytics  machine learning  and automation to align the network continuously and dynamically as business needs change ibn captures and translates business intent into network policies that can be automated and applied consistently across the network 
ibn and cisco dna center intent-based networking overview  cont  cisco views ibn as having three essential functions  translation  activation  and assurance  these functions interact with the underlying physical and virtual infrastructure  as shown in the figure translation - the translation function enables the network administrator to express the expected networking behavior that will best support the business intent activation - the captured intent then needs to be interpreted into policies that can be applied across the network  the activation function installs these policies into the physical and virtual-network-infrastructure using networkwide automation assurance - in order to continuously check that the expressed intent is honored by the network at any point in time  the assurance function maintains a continuous validation-and-verification loop 
ibn and cisco dna center network infrastructure as fabricfrom the perspective of ibn  the physical and virtual-network-infrastructure is a fabric  an overlay that represents the logical-topology used to virtually connect to devices  the overlay limits the number of devices the network administrator must program and provides services and alternative forwarding methods not controlled by the underlying physical devices  the overlay is where encapsulation protocols like ipsec and capwap occur  using an ibn solution  the network administrator can use policies to specify exactly what happens in the overlay control-plane  notice that how the switches are physically connected is not a concern of the overlay 
ibn and cisco dna center network infrastructure as fabric  cont  the underlay network is the physical-topology that includes all hardware required to meet business objectives  the underlay reveals additional devices and specifies how these devices are connected  end points  such as the servers in the figure  access the network through the layer-2 devices  the underlay control-plane is responsible for simple forwarding tasks 
ibn and cisco dna center cisco digital network-architecture  dna cisco implements the ibn fabric using cisco dna  the business intent is securely deployed into the network infrastructure  the fabric   cisco dna then continuously gathers data from a multitude of sources  devices and applications  to provide a rich context of information  this information can then be analyzed to make sure the network is performing securely at its optimal level and in accordance with business intent and network policies 
ibn and cisco dna center cisco digital network-architecture  dna   cont  cisco dna solutiondescriptionbenefitssd-accessfirst intent-based enterprise networking solution built using cisco dna  it uses a single network fabric across lan and wlan to create a consistent  highly secure user experience  it segments user  device  and application traffic and automates user-access policies to establish the right policy for any user or device  with any application  across a network enables network access in minutes for any user or device to any application without compromising security sd-wanit uses a secure cloud-delivered architecture to centrally manage wan connections  it simplifies and accelerates delivery of secure  flexible and rich wan services to connect data-centers  branches  campuses  and colocation facilities delivers better user experiences for applications residing on-premise or in the cloud  achieve greater agility and cost-savings through easier deployments and transport independence 
ibn and cisco dna center cisco digital network-architecture  dna   cont  cisco dna solutiondescriptionbenefitscisco dna assuranceused to troubleshoot and increase it productivity  it applies advanced analytics and machine learning to improve performance and issue resolution  and predict to assure network performance  it provides real-time notification for network conditions that require attention allows you to identify root causes and provides suggested remediation for faster troubleshooting  the cisco dna center provides an easy-to-use single dashboard with insights and drill-down capabilities  machine learning continually improves network intelligence to predict problems before they occur cisco dna securityused to provide visibility by using the network as a sensor for real-time analysis and intelligence  it provides increased granular control to enforce policy and contain threats across the network reduce risk and protect your organization against threats - even in encrypted traffic  gain 360-degree visibility through real-time analytics for deep intelligence across the network  lower complexity with end-to-end security 
ibn and cisco dna center cisco dna centercisco dna center is the foundational controller and analytics platform at the heart of cisco dna  it supports the expression of intent for multiple use cases  including basic automation capabilities  fabric provisioning  and policy-based segmentation in the enterprise network  cisco dna center is a network management and command center for provisioning and configuring network-devices  it is a hardware and software platform providing a  single-pane-of-glass   single interface  that focuses on assurance  analytics  and automation the dna center interface launch page gives you an overall health summary and network snapshot  from here  the network administrator can quickly drill down into areas of interest 
ibn and cisco dna center cisco dna center  cont  at the top  menus provide you access to dna center s five main areas  as shown in the figure  these are design - model your entire network  from sites and buildings to devices and links  both physical and virtual  across campus  branch  wan  and cloud policy - use policies to automate and simplify network management  reducing cost and risk while speeding rollout of new and enhanced services provision - provide new services to users with ease  speed  and security across your enterprise network  regardless of network size and complexity assurance - use proactive monitoring and insights from the network  devices  and applications to predict problems faster and ensure that policy and configuration changes achieve the business intent and the user experience you want platform - use apis to integrate with your preferred it systems to create end-to-end solutions and add support for multi-vendor devices 
ibn and cisco dna center video - dna center overview and platform apisthis video is an overview of the cisco dna center gui  it includes design  policy  provision  and assurance tools used to control multiple sites and multiple devices 
ibn and cisco dna center video - dna center design and provisionthis video is an overview of the cisco dna center design and provision areas where you can add new devices and update existing devices 
ibn and cisco dna center video - dna center policy and assurancethis video explains the cisco dna center policy and assurance areas  the policy area enables you to create policies that reflect your organization s business intent and deploy them across networks and devices  assurance provides you with an interface to quickly view and troubleshoot devices connected to the network 
ibn and cisco dna center video - dna center troubleshooting user connectivitythis video explains how to use cisco dna center to troubleshoot devices 
14 4 rest
software-defined-networking video - restthis video covers the following execute a rest api-requestweb browser - httpcommand-line - curlapplication - postmanprogramming language - python  javascript  ruby  and more
software-defined-networking rest and restful apiweb browsers use http or https to request  get  a web page  if successfully requested  http status-code 200   web-servers respond to get requests with an html-coded web page simply stated  a rest api is an api that works on top of the http protocol  it defines a set of functions developers can use to perform requests and receive responses via http protocol such as get and post conforming to the constraints of the rest architecture is generally referred to as being  restful   an api can be considered  restful  if it has the following features client-server - the client handles the front end and the server handles the back end  either can be replaced independently of the other stateless - no client data is stored on the server between requests  the session state is stored on the client cacheable - clients can cache responses to improve performance 
software-defined-networking restful implementationa restful web service is implemented using http  it is a collection of resources with four defined aspects the base uniform-resource-identifier  uri  for the web service  such as http example com resources the data format supported by the web service  this is often json  yaml  or xml but could be any other data format that is a valid hypertext standard the set of operations supported by the web service using http methods the api must be hypertext driven restful apis use common http methods including post  get  put  patch and delete  as shown in the following table  these correspond to restful operations  create  read  update  and delete  or crud  http methodrestful operationpostcreategetreadput patchupdatedeletedelete
software-defined-networking uri  urn  and urlweb resources and web services such as restful apis are identified using a uri  a uri is a string of characters that identifies a specific network resource  a uri has two specializations uniform-resource-name  urn  - identifies only the namespace of the resource  web page  document  image  etc   without reference to the protocol uniform-resource-locator  url  - defines the network location of a specific resource  http or https urls are typically used with web browsers  protocols such as ftp  sftp  ssh  and others can use a url  a url using sftp might look like  sftp sftp example com these are the parts of the uri https www example com author book html page155  protocol scheme   https or other protocols such as ftp  sftp  mailto  and nntphostname - www example compath-and-file-name -  author book htmlfragment -  page155
software-defined-networking anatomy of a restful requestin a restful web service  a request made to a resource s uri will elicit a response  the response will be a payload typically formatted in json  but could be html  xml  or some other format  the figure shows the uri for the mapquest directions api  the api-request is for directions from san jose  california to monterey  california 
software-defined-networking anatomy of a restful request  cont  these are the different parts of the api-request api-server - this is the url for the server that answers rest requests  in this example it is the mapquest api-server resources - specifies the api that is being requested  in this example it is the mapquest directions api query - specifies the data format and information the client is requesting from the api service  queries can include format   this is usually json but can be yaml or xml  in this example json is requested key - the key is for authorization  if required  mapquest requires a key for their directions api  in the above uri  you would need to replace  key  with a valid key to submit a valid request parameters - parameters are used to send information pertaining to the request  in this example  the query parameters include information about the directions that the api needs so it knows what directions to return   from san jose ca  and  to monterey ca  
software-defined-networking anatomy of a restful request  cont  many restful apis  including public-apis  require a key  the key is used to identify the source of the request  here are some reasons why an api provider may require a key to authenticate the source to make sure they are authorized to use the api to limit the number of people using the api to limit the number of requests per user to better capture and track the data being requested by users to gather-information on the people using the api note  the mapquest api does require a key  search the internet for the url to obtain a mapquest key  use the search parameters  developer mapquest  you can also search the internet for the current url that outlines the mapquest privacy policy 
software-defined-networking restful api applicationsmany web sites and applications use apis to access information and provide service for their customers some restful api-requests can be made by typing in the uri from within a web browser  the mapquest directions api is an example of this  a restful api-request can also be made in other ways developer-web-site  developers often maintain web sites that include information about the api  parameter information  and usage examples  these sites may also allow the user to perform the api-request within the developer web page by entering in the parameters and other information postman  postman is an application for testing and using rest apis  it contains everything required for constructing and sending rest api-requests  including entering query parameters and keys  python  apis can also be called from within a python program  this allows for possible automation  customization  and app integration of the api  network operating systems  using protocols such as netconf  net configuration  and restconf  network operating systems are beginning to provide an alternative method for configuration  monitoring  and management   
8 2 ipv4-packet
ipv4-packet ipv4-packet-headeripv4 is the primary communication protocol for the network-layer the network header has many purposes it ensures the packet is sent in the correct direction  to the destination  it contains information for network-layer processing in various fields the information in the header is used by all layer-3 devices that handle the packet
ipv4-packet ipv4-packet-header fieldsthe ipv4 network header characteristics it is in binary contains several fields of informationdiagram is read from left to right  4 bytes per linethe two most important fields are the source and destination protocols may have may have one or more functions 
ipv4-packet ipv4-packet-header fieldssignificant fields in the ipv4 header functiondescriptionversionthis will be for v4  as opposed to v6  a 4 bit field  0100  differentiated-servicesused for qos  diffserv   ds field or the older intserv   tos or type-of-service header-checksumdetect corruption in the ipv4 headertime-to-live  ttl layer-3 hop-count  when it becomes zero the router will discard the packet protocoli d s next level protocol  icmp  tcp  udp  etc source ipv4-address32 bit source addressdestination ipv4-address32 bit destination address
ipv4-packet video   sample ipv4 headers in wiresharkthis video will cover the following ipv4 ethernet-packets in wiresharkthe control informationthe difference between packets
8 3 ipv6-packets
ipv6-packets limitations of ipv4ipv4 has three major limitations ipv4-address depletion   we have basically run out of ipv4-addressing lack of end-to-end connectivity   to make ipv4 survive this long  private-addressing and nat were created  this ended direct communications with public-addressing increased network complexity   nat was meant as temporary solution and creates issues on the network as a side effect of manipulating the network headers addressing  nat causes latency and troubleshooting issues 
ipv6-packets ipv6 overviewipv6 was developed by internet-engineering-task-force  ietf  ipv6 overcomes the limitations of ipv4 improvements that ipv6 provides increased-address-space   based on 128 bit address  not 32 bitsimproved-packet-handling   simplified header with fewer fieldseliminates-the-need-for-nat   since there is a huge amount of addressing  there is no need to use private-addressing internally and be mapped to a shared public-address
ipv6-packets ipv4-packet-header fields in the ipv6-packet-headerthe ipv6 header is simplified  but not smaller the header is fixed at 40 bytes or octets long several ipv4 fields were removed to improve performance some ipv4 fields were removed to improve performance flagfragment-offsetheader-checksum
ipv6-packets ipv6-packet-headersignificant fields in the ipv4 header functiondescriptionversionthis will be for v6  as opposed to v4  a 4 bit field  0110  traffic-classused for qos  equivalent to diffserv   ds field flow-labelinforms device to handle identical flow-labels the same way  20 bit fieldpayload-lengththis 16-bit field indicates the length of the data portion or payload of the ipv6-packetnext headeri d s next level protocol  icmp  tcp  udp  etc hop-limitreplaces ttl field layer-3 hop-countsource ipv4-address128 bit source addressdestination ipv4-address128 bit destination address
ipv6-packets ipv6-packet-header  cont  ipv6-packet may also contain extension-headers  eh   eh headers characteristics  provide optional network-layer informationare optionalare placed between ipv6 header and the payloadmay be used for fragmentation  security  mobility support  etc note  unlike ipv4  routers do not fragment ipv6-packets 
ipv6-packets video   sample ipv6 headers in wiresharkthis video will cover the following ipv6 ethernet-packets in wiresharkthe control informationthe difference between packets
11 1 hierarchical-networks
hierarchical-networks video - three-layer network designthis video will demonstrate a three-layer model in network design 
hierarchical-networks the need to scale the networkorganizations increasingly rely on their network infrastructure to provide mission-critical services  evolving organizations require networks that can scale and support converged network-trafficcritical applicationsdiverse business needscentralized administrative-controlcampus network designs include small networks that use a single lan switch  up to very large networks with thousands of connections 
hierarchical-networks borderless-switched-networksthe cisco borderless network is a network-architecture that can connect anyone  anywhere  anytime  on any device  securely  reliably  and seamlessly  it provides the framework to unify wired and wireless-access  built on a hierarchical infrastructure of hardware that is scalable and resilient borderless-switched-networks are hierarchical  modular  resilient  and flexible 
hierarchical-networks hierarchy in the borderless switched networkhierarchical-networks use a tiered design of access  distribution  and core-layers with each-layer performing a well-defined role in the campus network  there are two time-tested and proven hierarchical design frameworks for campus networks three-tier layertwo-tier layer
hierarchical-networks access  distribution  and core-layer functionsaccess-layerthe access-layer provide network access to the user  access-layer switches connect to distribution-layer switches distribution-layerthe distribution-layer implements routing  quality-of-service  and security it aggregates large-scale wiring closet networks and limits layer-2 broadcast-domains distribution-layer switches connect to access-layer and core-layer switches core-layerthe core-layer is the network backbone and connects several layers of the network  the core-layer provides fault isolation and high-speed backbone connectivity 
hierarchical-networks three-tier and two-tier examplesthree-tier campus networkused by organizations requiring access  distribution  and core-layers  the recommendation is to build an extended-star physical network-topology from a centralized building location to all other buildings on the same campus two-tier campus networkused when separate distribution and core-layers is not required  useful for smaller campus locations  or in campus sites consisting of a single building also known as the collapsed core network design 
hierarchical-networks role of switched networksnetworks have fundamentally changed from a flat network of hubs to switched lans in a hierarchical network  a switched lan allows additional flexibility  traffic management  quality-of-service  security a switched lan may also support wireless networking and other technologies such as ip telephone and mobility services 
11 2 scalable-networks
scalable-networks design for scalabilityscalability is the term for a network that can grow without losing availability and reliability network designers must develop-strategies to enable the network to be available and to scale effectively and easily this is accomplished using redundancymultiple-linksscalable routing-protocolwireless connectivity
scalable-networks plan for redundancyredundancy can prevent disruption of network services by minimizing the possibility of a single-point of failure by installing duplicate equipment providing failover services for critical devicesredundant paths offer alternate physical-paths for data to traverse the network supporting high availability  however  redundant paths in an ethernet-network may cause logical layer-2 loops  therefore  spanning-tree-protocol  stp  is required 
scalable-networks reduce failure-domain sizea well-designed network controls traffic and limits the size of failure-domains  i e   the area of a network that is impacted when the network experiences problems  in the hierarchical design model  failure-domains are terminated at the distribution-layer  every router functions as a gateway for a limited number of access-layer users routers  or multilayer-switches  are usually deployed in pairs in a configuration referred to as a building  or departmental  switch block  each switch block acts independently of the others  as a result  the failure of a single device does not cause the network to go down 
scalable-networks increase bandwidthlink-aggregation  e g   etherchannel  allows an administrator to increase the amount of bandwidth between devices by creating one logical link made up of several physical links etherchannel combines existing switch ports into one logical link using a port-channel-interface  most configuration tasks are done on the port-channel-interface  instead of on each individual-port  to ensure configuration consistency on the links  etherchannel can load balance between links 
scalable-networks expand the access-layeran increasingly popular option for extending access-layer connectivity is through wireless  wireless-lans  wlans  provides increased flexibility  reduced-costs  and the ability to grow and adapt to changing network and business requirements to communicate wirelessly  end-devices require a wireless nic to connect to a wireless-router or a wireless-access-point  ap  considerations when implementing a wireless network include types of wireless-devices connecting to the wlanwireless coverage requirementsinterference considerationssecurity considerations
scalable-networks tune routing-protocolsadvanced routing-protocols  such as open-shortest-path-first  ospf  are used in large networks ospf is a link-state-routing-protocol that uses areas to support a hierarchical-networks  ospf routers establish and maintain neighbor-adjacencies with other connected ospf routers  ospf routers synchronize their link-state-database  when a network change occurs  link-state-updates are sent  informing other ospf routers of the change and establishing a new best-path  if one is available 
module 13  network-virtualizationenterprise networking  security  and automation v7 0 ensa 
module objectivesmodule title  network-virtualizationmodule objective  explain the purpose and characteristics of network-virtualization topic titletopic objectivecloud-computingexplain the importance of cloud-computing virtualizationexplain the importance of virtualization virtual-network-infrastructuredescribe the virtualization of network-devices and services software-defined-networkingdescribe software-defined-networking controllersdescribe controllers used in network-programming 
13 1 cloud-computing
cloud-computing video - cloud and virtualizationthis video will cover the following data-centerscloud-computing  saas  paas  and iaas virtualization  type 1 hypervisor  type 2 hypervisor 
cloud-computing cloud overviewcloud-computing addresses a variety of data management issues enables access to organizational data anywhere and at any timestreamlines the organization s it operations by subscribing only to needed serviceseliminates or reduces the need for onsite it equipment  maintenance  and managementreduces cost for equipment  energy  physical plant requirements  and personnel training needsenables rapid responses to increasing data volume requirements
cloud-computing cloud servicesthe three main cloud-computing services defined by the national institute of standards and technology  nist  in their special publication 800-145 are as follows software-as-a-service  saas  - the cloud provider is responsible for access to applications and services that are delivered over the internet platform-as-a-service  paas  - the cloud provider is responsible for providing users access to the development tools and services used to deliver the applications  infrastructure-as-a-service  iaas  - the cloud provider is responsible for giving it managers access to the network-equipment  virtualized network services  and supporting network infrastructure cloud service-providers have extended this model to also provide it support for each of the cloud-computing services  itaas   for businesses  itaas can extend the capability of the network without requiring investment in new infrastructure  training new personnel  or licensing new software 
cloud-computing cloud modelsthere are four primary cloud models public-clouds - cloud-based applications and services made available to the general population  private-clouds - cloud-based applications and services intended for a specific organization or entity  such as the government  hybrid-clouds - a hybrid cloud is made up of two or more clouds  example  part private  part public   where each part remains a separate object  but both are connected using a single architecture community-clouds - a community cloud is created for exclusive use by a specific community  the differences between public-clouds and community-clouds are the functional needs that have been customized for the community  for example  healthcare organizations must remain compliant with policies and laws  e g   hipaa  that require special authentication and confidentiality 
cloud-computing cloud-computing versus data-centerthese are the correct definitions of data-center and cloud-computing data-center  typically  a data storage and processing facility run by an in-house it department or leased offsite  data-centers are typically very expensive to build and maintain  cloud-computing  typically  an off-premise service that offers on-demand access to a shared pool of configurable computing resources  these resources can be rapidly provisioned and released with minimal management effort data-centers are the physical facilities that provide the compute  network  and storage needs of cloud-computing services  cloud service-providers use data-centers to host their cloud services and cloud-based resources 
13 5 controllers
controllers sdn controller and operationsthe sdn controller defines the data-flows between the centralized control-plane and the data-planes on individual routers and switches each flow traveling through the network must first get permission from the sdn controller  which verifies that the communication is permissible according to the network policy all complex functions are performed by the controller  the controller populates flow-tables  switches manage the flow-tables  
controllers sdn controller and operations  cont  within each switch  a series of tables implemented in hardware or firmware are used to manage the flows of packets through the switch  to the switch  a flow is a sequence of packets that matches a specific entry in a flow-table the three table types shown in the previous figure are as follows flow-table - this table matches incoming packets to a particular flow and specifies the functions that are to be performed on the packets  there may be multiple flow-tables that operate in a pipeline fashion group-table - a flow-table may direct a flow to a group-table  which may trigger a variety of actions that affect one or more flows meter-table - this table triggers a variety of performance-related actions on a flow including the ability to rate-limit the traffic 
controllers video - cisco acivery few organizations actually have the desire or skill to program the network using sdn tools  however  the majority of organizations want to automate the network  accelerate application deployments  and align their it infrastructures to better meet business requirements  cisco developed the application-centric-infrastructure  aci  to meet these objectives in more advanced and innovative ways than earlier sdn approaches cisco aci is a hardware solution for integrating cloud-computing and data-center management  at a high level  the policy element of the network is removed from the data-plane  this simplifies the way data-center networks are created 
controllers core components of acithere are three core components of the aci architecture application-network-profile  anp  - an anp is a collection of end-point groups  epg   their connections  and the policies that define those connections  application-policy-infrastructure-controller  apic  - apic is a centralized software controller that manages and operates a scalable aci clustered fabric  it is designed for programmability and centralized management  it translates application policies into network-programming cisco nexus 9000 series switches - these switches provide an application-aware switching fabric and work with an apic to manage the virtual and physical network infrastructure the apic is positioned between the apn and the aci-enabled network infrastructure  the apic translates the application requirements into a network configuration to meet those needs 
controllers core components of aci  cont  
controllers spine-leaf-topologythe cisco aci fabric is composed of the apic and the cisco nexus 9000 series switches using two-tier spine-leaf-topology  as shown in the figure  the leaf switches attach to the spines  but they never attach to each other  similarly  the spine switches only attach to the leaf and core switches  not shown   in this two-tier topology  everything is one hop from everything else when compared to sdn  the apic controller does not manipulate the data path directly  instead  the apic centralizes the policy definition and programs the leaf switches to forward traffic based on the defined policies 
controllers sdn typesthe cisco application-policy-infrastructure-controller - enterprise module  apic-em  extends aci aimed at enterprise and campus deployments  to better understand apic-em  it is helpful to take a broader look at the three types of sdn device-based sdn  devices are programmable by applications running on the device itself or on a server in the network  as shown in the figure 
controllers sdn types  cont  controller-based sdn  uses a centralized-controller that has knowledge of all devices in the network  as shown in the figure  the applications can interface with the controller responsible for managing devices and manipulating traffic flows throughout the network  the cisco open sdn controller is a commercial distribution of opendaylight 
controllers sdn types  cont  policy-based sdn  similar to controller-based sdn where a centralized-controller has a view of all devices in the network  as shown in the figure  policy-based sdn includes an additional policy layer that operates at a higher level of abstraction  it uses built-in applications that automate advanced configuration tasks via a guided workflow and user-friendly gui  no programming skills are required  cisco apic-em is an example of this type of sdn 
controllers apic-em featurescisco apic-em provides a single interface for network management including discovering and accessing device and host inventories viewing the topology  as shown in the figure  tracing a path between end points setting policies 
controllers apic-em path tracethe apic-em path trace tool allows the administrator to easily visualize traffic flows and discover any conflicting  duplicate  or shadowed acl entries  this tool examines specific acls on the path between two end nodes  displaying any potential issues  you can see where any acls along the path either permitted or denied your traffic  as shown in the figure  notice how branch-router2 is permit all traffic  the network administrator can now make adjustments  if necessary  to better filter traffic 
13 4 software-defined-networking
software-defined-networking video - software-defined-networkingthis video will cover the following network-programmingsdn  open network foundation  openflow  and openstack controllers
software-defined-networking control-plane and data-planea network-device contains the following planes control-plane - this is typically regarded as the brains of a device  it is used to make forwarding decisions  the control-plane contains layer-2 and layer-3 route forwarding mechanisms  such as routing-protocol neighbor-tables and topology-tables  ipv4 and ipv6 routing-tables  stp  and the arp-table  information sent to the control-plane is processed by the cpu data-plane - also called the forwarding plane  this plane is typically the switch fabric connecting the various network ports on a device  the data-plane of each device is used to forward traffic flows  routers and switches use information from the control-plane to forward incoming traffic out the appropriate egress interface  information in the data-plane is typically processed by a special data-plane processor without the cpu getting involved 
software-defined-networking control-plane and data-plane  cont  cef is an advanced  layer-3 ip switching technology that enables forwarding of packets to occur at the data-plane without consulting the control-plane  sdn is basically the separation of the control-plane and data-plane  the control-plane function is removed from each device and is performed by a centralized-controller  the centralized-controller communicates control-plane functions to each device  each device can now focus on forwarding data while the centralized-controller manages data-flow  increases security  and provides other services 
software-defined-networking control-plane and data-plane  cont  the management-plane is responsible for managing a device through its connection to the network  network administrators use applications such as secure-shell  ssh   trivial-file-transfer-protocol  tftp   secure ftp  and secure hypertext-transfer-protocol  https  to access the management-plane and configure a device  the management-plane is how you have accessed and configured devices in your networking studies  in addition  protocols like simple-network-management-protocol  snmp   use the management-plane 
software-defined-networking network-virtualization technologiestwo major network-architectures have been developed to support network-virtualization software-defined-networking  sdn  - a network-architecture that virtualizes the network  offering a new approach to network administration and management that seeks to simplify and streamline the administration process cisco-application-centric-infrastructure  aci  - a purpose-built hardware solution for integrating cloud-computing and data-center management 
software-defined-networking network-virtualization technologies  cont  components of sdn may include the following openflow - this approach was developed at stanford university to manage traffic between routers  switches  wireless-access-points  and a controller  the openflow protocol is a basic element in building sdn solutions  openstack - this approach is a virtualization and orchestration platform designed to build scalable cloud environments and provide an iaas solution  openstack is often used with cisco aci  orchestration in networking is the process of automating the provisioning of network components such as servers  storage  switches  routers  and applications  other components - other components include interface to the routing system  i2rs   transparent interconnection of lots of links  trill   cisco fabricpath  fp   and ieee 802 1aq shortest path bridging  spb  
software-defined-networking traditional and sdn architecturesin a traditional router or switch architecture  the control-plane and data-plane functions occur in the same device  routing decisions and packet-forwarding are the responsibility of the device operating system  in sdn  management of the control-plane is moved to a centralized sdn controller  the figure compares traditional and sdn architectures 
software-defined-networking traditional and sdn architectures  cont  the sdn controller is a logical entity that enables network administrators to manage and dictate how the data-plane of switches and routers should handle network-traffic  it orchestrates  mediates  and facilitates communication between applications and network elements the complete sdn framework is shown in the figure  note the use of application programming interfaces  apis   an api is a standardized definition of the proper way for an application to request services from another application  the sdn controller uses northbound apis to communicate with the upstream applications  helping network administrators shape traffic and deploy services  the sdn controller uses southbound apis to define the behavior of the data-planes on downstream switches and routers  openflow is a widely implemented southbound api 
13 2 virtualization
virtualization cloud-computing and virtualizationthe terms  cloud-computing  and  virtualization  are often used interchangeably  however  they mean different things  virtualization is the foundation of cloud-computing  without it  cloud-computing  as it is most-widely implemented  would not be possible virtualization separates the operating system  os  from the hardware  various providers offer virtual cloud services that can dynamically provision servers as required  these virtualized instances of servers are created on demand  
virtualization dedicated servershistorically  enterprise-servers consisted of a server os  such as windows server or linux server  installed on specific hardware  all of a server s ram  processing power  and hard drive space were dedicated to the service provided  e g   web  email services  etc   when a component fails  the service that is provided by this server becomes unavailable  this is known as a single-point of failure  dedicated servers were generally underused  they often sat idle for long periods of time  waiting until there was a need to deliver the specific service they provide  these servers wasted energy and took up more space than was warranted by the amount of service provided  this is known as server sprawl 
virtualization server-virtualizationserver-virtualization takes advantage of idle resources and consolidates the number of required servers  this also allows for multiple operating systems to exist on a single hardware platform the use of virtualization normally includes redundancy to protect from a single-point of failure the hypervisor is a program  firmware  or hardware that adds an abstraction layer on top of the physical hardware  the abstraction layer is used to create virtual machines which have access to all the hardware of the physical machine such as cpus  memory  disk controllers  and nics 
virtualization advantages of virtualizationone major advantage of virtualization is overall reduced-cost less equipment is requiredless energy is consumed less space is required these are additional benefits of virtualization easier prototypingfaster server provisioningincreased server uptime improved disaster recoverylegacy support 
virtualization abstraction-layersa computer system consists of the following abstraction-layers  services  os  firmware  and hardware at each of these layers of abstraction  some type of programming code is used as an interface between the layer below and the layer above  a hypervisor is installed between the firmware and the os  the hypervisor can support multiple instances of oss 
virtualization type 2 hypervisorsa type 2 hypervisor is software that creates and runs vm instances  the computer  on which a hypervisor is supporting one or more vms  is a host machine  type 2 hypervisors are also called hosted hypervisors  a big advantage of type 2 hypervisors is that management console software is not required 
13 3 virtual-network-infrastructure
virtual-network-infrastructure type 1 hypervisorstype 1 hypervisors are also called the  bare metal  approach because the hypervisor is installed directly on the hardware  type 1 hypervisors are usually used on enterprise-servers and data-center networking-devices with type 1 hypervisors  the hypervisor is installed directly on the server or networking hardware  then  instances of an os are installed on the hypervisor  as shown in the figure  type 1 hypervisors have direct access to the hardware resources  therefore  they are more efficient than hosted architectures  type 1 hypervisors improve scalability  performance  and robustness 
virtual-network-infrastructure installing a vm on a hypervisortype 1 hypervisors require a  management console  to manage the hypervisor  management software is used to manage-multiple servers using the same hypervisor  the management console can automatically consolidate servers and power on or off servers as required the management console provides recovery from hardware failure  if a server component fails  the management console automatically moves the vm to another server  cisco unified-computing-system  ucs  manager controls multiple servers and manages resources for thousands of vms some management consoles also allow server over allocation  over allocation is when multiple os instances are installed  but their memory allocation exceeds the total amount of memory that a server has  over allocation is a common practice because all four os instances rarely require the all their allocated resources at any one moment 
virtual-network-infrastructure the complexity of network-virtualizationserver-virtualization hides server resources  this can create problems when using traditional network-architectures vms are movable  and the network administrator must be able to add  drop  and change network resources and profiles to support their mobility  this process would be manual and time-consuming with traditional network-switches traffic flows differ from the traditional client-server model  typically  there is a considerable amount of traffic being exchanged between virtual servers  east-west traffic  that changes in location and intensity over time  north-south traffic is typically traffic destined for offsite locations such as another data-center  other cloud providers  or the internet 
virtual-network-infrastructure the complexity of network-virtualization  cont  dynamic ever-changing traffic requires a flexible approach to network resource management  existing network infrastructures can respond to changing requirements related to the management of traffic flows by using quality-of-service  qos  and security level configurations for individual flows  however  in large enterprises using multivendor-equipment  each time a new vm is enabled  the necessary reconfiguration can be very time-consuming the network infrastructure can also benefit from virtualization  network functions can be virtualized  each network-device can be segmented into multiple virtual devices that operate as independent devices  examples include subinterfaces  virtual-interfaces  vlans  and routing-tables  virtualized routing is called virtual-routing-and-forwarding  vrf  
module 5  number systemsintroduction to networks v7 0  itn 
module objectivesmodule title  number systemsmodule objective  calculate numbers between decimal  binary  and hexadecimal systems topic titletopic objectivebinary-number-systemcalculate numbers between decimal and binary systems hexadecimal-number-systemcalculate numbers between decimal and hexadecimal systems 
5 1 binary-number-system
binary-number-system binary and ipv4-addressesbinary-numbering-system consists of 1s and 0s  called bitsdecimal numbering system consists of digits 0 through 9hosts  servers  and network-equipment using binary-addressing to identify each other each address is made up of a string of 32 bits  divided into four sections called octets each octet contains 8 bits  or 1 byte  separated by a dot for ease of use by people  this dotted notation is converted to dotted decimal 
binary-number-system video   convert between binary and decimal-numbering-systemsthis video will cover the following positional notation reviewpowers of 10 reviewdecimal   base 10 numbering reviewbinary   base 2 numbering reviewconvert an p address in binary to decimal numbering
binary-number-system binary positional notationpositional notation means that a digit represents different values depending on the  position  the digit occupies in the sequence of numbers the decimal positional notation system operates as shown in the tables below radix10101010position in numbercalculate 103  102  101  100 position value100010010thousandshundredstensonespositional value100010010decimal number  1234 calculate1 x 10002 x 1003 x 104 x 1add them up 1000  200  30  4result1 234
binary-number-system binary positional notation  cont  the binary-positional-notation-system operates as shown in the tables below radixposition in numbercalculate 27  26  25  24  23  22  21  20 position value128643216positional value128643216binary number  11000000 calculate1x1281x640x320x160x80x40x20x1add them up 128  64  0  0  0  0  0  0result192
binary-number-system convert binary to decimalconvert 11000000 10101000 00001011 00001010 to decimal positional value128643216binary number  11000000 calculate1x1281x640x320x160x80x40x20x1add them up 128  64  0  0  0  0  0  0binary number  10101000 calculate1x1280x641x320x161x80x40x20x1add them up 128  0  32  0  8  0  0  0binary number  00001011 calculate0x1280x640x320x161x80x41x21x1add them up   0  0  0  8  0  2  1binary number  00001010 calculate0x1280x640x320x161x80x41x20x1add them up   0  0  0  8  0  2  01921681110192 168 11 10
binary-number-system decimal to binary conversionthe binary positional value table is useful in converting a dotted decimal ipv4-address to binary start in the 128 position  the most significant bit   is the decimal number of the octet  n  equal to or greater than 128 if no  record a binary 0 in the 128 positional value and move to the 64 positional value if yes  record a binary 1 in the 128 positional value  subtract 128 from the decimal number  and move to the 64 positional value repeat these steps through the 1 positional value 
binary-number-system decimal to binary conversion exampleconvert decimal 168 to binaryis 168   128 yes  enter 1 in 128 position and subtract 128  168-128 40 is 40   64 no  enter 0 in 64 position and move onis 40   32 yes  enter 1 in 32 position and subtract 32  40-32 8 is 8   16 no  enter 0 in 16 position and move onis 8   8 equal  enter 1 in 8 position and subtract 8  8-8 0 no values left  enter 0 in remaining binary positions128643216decimal 168 is written as 10101000 in binary
binary-number-system ipv4-addressesrouters and computers only understand binary  while humans work in decimal  it is important for you to gain a thorough understanding of these two numbering systems and how they are used in networking 
5 2 hexadecimal-number-system
hexadecimal-number-system hexadecimal and ipv6-addressesto understand ipv6-addresses  you must be able to convert hexadecimal to decimal and vice versa hexadecimal is a base-sixteen-numbering-system  using the digits 0 through 9 and letters a to f it is easier to express a value as a single-hexadecimal-digit than as four binary bit hexadecimal is used to represent ipv6-addresses and mac-addresses 
hexadecimal-number-system hexadecimal and ipv6-addresses  cont  ipv6-addresses are 128 bits in length  every 4 bits is represented by a single-hexadecimal-digit  that makes the ipv6-address a total of 32 hexadecimal values the figure shows the preferred method of writing out an ipv6-address  with each x representing four hexadecimal values each four hexadecimal character group is referred to as a hextet 
hexadecimal-number-system video   converting between hexadecimal and decimal-numbering-systemsthis video will cover the following characteristics of the hexadecimal systemconvert from hexadecimal to decimalconvert from decimal to hexadecimal
hexadecimal-number-system decimal to hexadecimal conversionsfollow the steps listed to convert decimal-numbers to hexadecimal values convert the decimal number to 8-bit binary strings divide the binary strings in groups of four starting from the rightmost position convert each four binary numbers into their equivalent hexadecimal digit for example  168 converted into hex using the three-step process 168 in binary is 10101000 10101000 in two groups of four binary-digits is 1010 and 1000 1010 is hex a and 1000 is hex 8  so 168 is a8 in hexadecimal 
hexadecimal-number-system hexadecimal to decimal conversionsfollow the steps listed to convert hexadecimal-numbers to decimal values convert the hexadecimal number to 4-bit binary strings create 8-bit binary grouping starting from the rightmost position convert each 8-bit binary grouping into their equivalent decimal digit for example  d2 converted into decimal using the three-step process d2 in 4-bit binary strings is 1110 and 0010 1110 and 0010 is 11100010 in an 8-bit grouping 11100010 in binary is equivalent to 210 in decimal  so d2 is 210 is decimal
3 7 data-access
data-access addressesboth the data-link and network-layers use addressing to deliver data from source to destination-network-layer source and destination addresses - responsible for delivering the ip-packet from original source to the final destination  data-link layer source and destination addresses   responsible for delivering the data-link frame from one network-interface-card  nic  to another nic on the same network 
data-access-layer-3 logical-addressthe ip-packet contains two ip-addresses source ip-address - the ip-address of the sending device   original source of the packet destination-ip-address - the ip-address of the receiving device  final destination of the packet these addresses may be on the same link or remote 
data-access-layer-3 logical-address  cont  an ip-address contains two parts network-portion  ipv4  or prefix  ipv6   the left-most part of the address indicates the network group which the ip-address is a member each lan or wan will have the same network-portion host-portion  ipv4  or interface-id  ipv6  the remaining part of the address identifies a specific device within the group  this portion is unique for each device on the network 
data-access devices on the same networkwhen devices are on the same network the source and destination will have the same number in network-portion of the address pc1   192 168 1 110ftp server   192 168 1 9
data-access role of the data-link layer addresses  same ip-networkwhen devices are on the same ethernet-network the data-link frame will use the actual mac-address of the destination nic mac-addresses are physically embedded into the ethernet-nic and are local-addressing the source-mac-address will be that of the originator on the link the destination-mac-address will always be on the same link as the source  even if the ultimate destination is remote 
data-access devices on a remote-networkwhat happens when the actual  ultimate  destination is not on the same lan and is remote  what happens when pc1 tries to reach the web-server does this impact the network and data-link layers 
data-access role of the network-layer addresseswhen the source and destination have a different network-portion  this means they are on different networks pc1   192 168 1web-server   172 16 1
data-access role of the data-link layer addresses  different ip-networkswhen the final destination is remote  layer-3 will provide layer-2 with the local default-gateway ip-address  also known as the router-address the default-gateway  dgw  is the router-interface ip-address that is part of this lan and will be the  door  or  gateway  to all other remote-locations all devices on the lan must be told about this address or their traffic will be confined to the lan only  once layer-2 on pc1 forwards to the default-gateway  router   the router then can start the routing-process of getting the information to actual destination  
data-access role of the data-link layer addresses  different ip-networks  cont  the data-link addressing is local-addressing so it will have a source and destination for each link the mac-addressing for the first segment is  source    aa-aa-aa-aa-aa-aa  pc1  sends the frame destination   11-11-11-11-11-11  r1- default-gateway mac  receives the frame note  while the l2 local-addressing will change from link to link or hop-to-hop  the l3-addressing remains the same 
data-access data-link addressessince data-link addressing is local-addressing   it will have a source and destination for each segment or hop of the journey to the destination the mac-addressing for the first segment is source     pc1 nic  sends framedestination    first router- dgw interface  receives frame
data-access data-link addresses  cont  the mac-addressing for the second hop is source     first router- exit-interface  sends framedestination    second router  receives frame
data-access data-link addresses  cont  the mac-addressing for the last segment is source     second router- exit-interface  sends framedestination    web-server nic  receives frame
data-access data-link addresses  cont  notice that the packet is not modified  but the frame is changed  therefore the l3 ip-addressing does not change from segment to segment like the l2 mac-addressing the l3-addressing remains the same since it is global and the ultimate destination is still the web-server 
data-access lab   install wiresharkin this lab you will do the following download and install wireshark 
data-access lab   use wireshark to view network-trafficin this lab  you will do the following part 1  capture and analyze local icmp data in wireshark part 2  capture and analyze remote icmp data in wireshark 
3 6 data-encapsulation
data-encapsulation segmenting-messagessegmenting is the process of breaking up messages into smaller units  multiplexing is the processes of taking multiple-streams of segmented-data and interleaving them together segmenting-messages has two primary benefits increases-speed - large amounts of data can be sent over the network without tying up a communications link increases-efficiency - only segments which fail to reach the destination need to be retransmitted  not the entire data-stream 
data-encapsulation sequencingsequencing-messages is the process of numbering-the-segments so that the message may be reassembled at the destination tcp is responsible for sequencing the individual-segments 
data-encapsulation protocol-data-unitsencapsulation is the process where protocols add their information to the data at each stage of the process  a pdu has a different name to reflect its new functions  there is no universal naming convention for pdus  in this course  the pdus are named according to the protocols of the tcp ip suite  pdus passing down the stack are as follows data  data-stream segmentpacketframebits  bit-stream 
data-encapsulation encapsulation exampleencapsulation is a top down process the level above does its process and then passes it down to the next level of the model  this process is repeated by each-layer until it is sent out as a bit-stream 
data-encapsulation de-encapsulation exampledata is de-encapsulated as it moves up the stack when a layer completes its process  that layer strips off its header and passes it up to the next level to be processed  this is repeated at each-layer until it is a data-stream that the application can process received as bits  bit-stream framepacketsegmentdata  data-stream 
3 5 reference-models
reference-models the benefits of using a layered modelcomplex concepts such as how a network operates can be difficult to explain and understand  for this reason  a layered model is used two layered models describe network operations open-system-interconnection  osi  reference modeltcp ip reference model
reference-models the benefits of using a layered model  cont  these are the benefits of using a layered model assist in protocol design because protocols that operate at a specific layer have defined information that they act upon and a defined interface to the layers above and belowfoster competition because products from different vendors can work togetherprevent technology or capability changes in one layer from affecting other layers above and belowprovide a common-language to describe networking functions and capabilities 
reference-models the osi-reference-modelosi model layerdescription7 - applicationcontains protocols used for process-to-process communications 6 - presentationprovides for common representation of the data transferred between application-layer services 5 - sessionprovides services to the presentation-layer and to manage data exchange 4 - transportdefines services to segment  transfer  and reassemble the data for individual communications 3 - networkprovides services to exchange the individual pieces of data over the network 2 - data-linkdescribes methods for exchanging data frames over a common media 1 - physicaldescribes the means to activate  maintain  and de-activate physical-connections 
reference-models the tcp ip reference modeltcp ip model layerdescriptionapplicationrepresents data to the user  plus encoding and dialog control transportsupports communication between various devices across diverse networks internetdetermines the best-path through the network network accesscontrols the hardware-devices and media that make up the network 
reference-models osi and tcp ip model comparisonthe osi model divides the network access-layer and the application-layer of the tcp ip model into multiple layers the tcp ip protocol-suite does not specify which protocols to use when transmitting over a physical-medium osi layers 1 and 2 discuss the necessary procedures to access the media and the physical means to send data over a network 
reference-models packet tracer   investigate the tcp ip and osi models in actionthis simulation activity is intended to provide a foundation for understanding the tcp ip protocol-suite and the relationship to the osi model  simulation-mode allows you to view the data contents being sent across the network at each-layer in this packet tracer  you will  part 1  examine http web traffic part 2  display elements of the tcp ip protocol-suite 
2 5 default-route-propagation
default-route-propagation propagate a default-static-route in ospfv2to propagate a default-route  the edge router must be configured with the following a default-static-route using the ip route 0 0 0 0 0 0 0 0  next-hop-address   exit-intf  command the default-information-originate-router configuration command  this instructs r2 to be the source of the default-route information and propagate the default-static-route in ospf updates in the example  r2 is configured with a loopback to simulate a connection to the internet  a default-route is configured and propagated to all other ospf routers in the routing-domain note  when configuring static-routes  best-practice is to use the next-hop ip-address  however  when simulating a connection to the internet  there is no next-hop ip-address  therefore  we use the exit-intf argument r2 config   interface lo1 r2 config-if   ip-address 64 100 0 1 255 255 255 252 r2 config-if   exit r2 config   ip route 0 0 0 0 0 0 0 0 loopback 1  default-route without gateway  if not a point-to-point interface  may impact performance r2 config   router-ospf-10 r2 config-router   default-information originate r2 config-router   end r2 
default-route-propagation verify the propagated default-routeyou can verify the default-route settings on r2 using the show-ip-route command  you can also verify that r1 and r3 received a default-route notice that the route-source on r1 is o e2  signifying that it was learned using ospfv2  the asterisk identifies this as a good candidate for the default-route  the e2 designation identifies that it is an external route  the meaning of e1 and e2 is beyond the scope of this module r2  show-ip-route   begin gateway gateway of last-resort is 0 0 0 0 to network 0 0 0 0 s     0 0 0 0 0 is directly-connected  loopback1 10 0 0 0 8 is variably subnetted  9 subnets  3 masks output omitted r1  show-ip-route   begin gateway gateway of last-resort is 10 1 1 6 to network 0 0 0 0 o e2  0 0 0 0 0  110 1  via 10 1 1 6  00 11 08  gigabitethernet0 0 0      10 0 0 0 8 is variably subnetted  9 subnets  3 masks output omitted 
default-route-propagation packet tracer - propagate a default-route in ospfv2in this packet tracer activity  you will complete the following propagate a default-routepart 2  verify connectivity
2 4 modify single-area-ospfv2
modify single-area-ospfv2 cisco ospf cost metricrouting-protocols use a metric to determine the best-path of a packet across a network  ospf uses cost as a metric  a lower cost indicates a better path the cisco cost of an interface is inversely proportional to the bandwidth of the interface  therefore  a higher bandwidth indicates a lower cost  the formula used to calculate the ospf cost is cost   reference-bandwidth   interface-bandwidththe default reference-bandwidth is 108  100 000 000   therefore  the formula is cost   100 000 000 bps   interface-bandwidth in bpsbecause the ospf cost value must be an integer  fastethernet  gigabit-ethernet  and 10 gige interfaces share the same cost  to correct this situation  you can adjust the reference-bandwidth with the auto-cost-reference-bandwidth command on each ospf router manually set the ospf cost value with the ip ospf cost command on necessary interfaces 
modify single-area-ospfv2 cisco ospf cost metric  cont  refer to the table for a breakdown of the cost-calculation
modify single-area-ospfv2 adjust the reference-bandwidththe cost value must be an integer  if something less than an integer is calculated  ospf rounds up to the nearest integer  therefore  the ospf cost assigned to a gigabit-ethernet-interface with the default reference-bandwidth of 100 000 000 bps would equal 1  because the nearest integer for 0 1 is 0 instead of 1 cost   100 000 000 bps   1 000 000 000   1for this reason  all interfaces faster than fast-ethernet will have the same cost value of 1 as a fast-ethernet-interface  to assist ospf in making the correct path determination  the reference-bandwidth must be changed to a higher value to accommodate networks with links faster than 100 mbps 
modify single-area-ospfv2 adjust the reference-bandwidth  cont  changing the reference-bandwidth does not actually affect the bandwidth capacity on the link  rather  it simply affects the calculation used to determine the metric  to adjust the reference-bandwidth  use the auto-cost-reference-bandwidth mbps router configuration command this command must be configured on every router in the ospf-domain  notice in the command that the value is expressed in mbps  therefore  to adjust the costs for gigabit-ethernet  use the command auto-cost-reference-bandwidth 1000  for 10 gigabit-ethernet  use the command auto-cost-reference-bandwidth 10000 to return to the default reference-bandwidth  use the auto-cost-reference-bandwidth 100 command another option is to change the cost on one specific interface using the ip ospf cost cost command 
modify single-area-ospfv2 adjust the reference-bandwidth  cont  whichever method is used  it is important to apply the configuration to all routers in the ospf routing-domain  the table shows the ospf cost if the reference-bandwidth is adjusted to accommodate 10 gigabit-ethernet links  the reference-bandwidth should be adjusted anytime there are links faster than fastethernet  100 mbps  use the show-ip-ospf interface command to verify the current ospfv2 cost assigned to the interface 
modify single-area-ospfv2 ospf accumulates costthe cost of an ospf route is the accumulated value from one router to the destination-network  assuming the auto-cost-reference-bandwidth 10000 command has been configured on all three routers  the cost of the links between each router is now 10  the loopback-interfaces have a default cost of 1 
modify single-area-ospfv2 ospf accumulates cost  cont  you can calculate the cost for each router to reach each network  for example  the total cost for r1 to reach the 10 10 2 0 24 network is 11  this is because the link to r2 cost   10 and the loopback default cost   1  10   1   11 you can verify this with the show-ip-route command 
modify single-area-ospfv2 ospf accumulates cost  cont  verifying the accumulated cost for the path to the 10 10 2 0 24 network r1  show-ip-route   include 10 10 2 0 o     10 10 2 0 24  110 11  via 10 1 1 6  01 05 02  gigabitethernet0 0 0 r1  show-ip-route 10 10 2 0 routing entry for 10 10 2 0 24 known via  ospf 10   distance 110  metric 11  type intra area last update from 10 1 1 6 on gigabitethernet0 0 0  01 05 13 ago routing descriptor blocks    10 1 1 6  from 2 2 2 2  01 05 13 ago  via gigabitethernet0 0 0 route metric is 11  traffic share count is 1 r1 
modify single-area-ospfv2 manually set ospf cost valuereasons to manually set the cost value include the administrator may want to influence path-selection within ospf  causing different paths to be selected than what normally would given default costs and cost accumulation connections to equipment from other vendors who use a different formula to calculate ospf cost to change the cost value reported by the local ospf router to other ospf routers  use the interface configuration command ip ospf cost value r1 config   interface g0 0 1 r1 config-if   ip ospf cost 30 r1 config-if   interface lo0 r1 config-if   ip ospf cost 10 r1 config-if   end r1 
modify single-area-ospfv2 test failover to backup routewhat happens if the link between r1 and r2 goes down  you can simulate that by shutting down the gigabit-ethernet 0 0 0 interface and verifying the routing-table is updated to use r3 as the next-hop router  notice that r1 can now reach the 10 1 1 4 30 network through r3 with a cost value of 50 r1  show-ip-route ospf   begin 10 10 0 0 0 8 is variably subnetted  8 subnets  3 masks o   10 1 1 4 30  110 50  via 10 1 1 13  00 00 14  gigabitethernet0 0 1 o   10 1 1 8 30  110 40  via 10 1 1 13  00 00 14  gigabitethernet0 0 1 o   10 10 2 0 24  110 50  via 10 1 1 13  00 00 14  gigabitethernet0 0 1 o   10 10 3 0 24  110 40  via 10 1 1 13  00 00 14  gigabitethernet0 0 1 r1 
modify single-area-ospfv2 hello-packet intervalsospfv2 hello-packets are transmitted to multicast-address 224 0 0 5  all ospf routers  every 10 seconds  this is the default-timer-value on multiaccess and point-to-point-networks note  hello-packets are not sent on interfaces set to passive by the passive-interface command the dead-interval is the period that the router waits to receive a hello-packet before declaring the neighbor down  if the dead-interval expires before the routers receive a hello-packet  ospf removes that neighbor from its link-state-database  lsdb   the router floods the lsdb with information about the down neighbor out all ospf-enabled interfaces  cisco uses a default of 4 times the hello-interval  this is 40 seconds on multiaccess and point-to-point-networks 
modify single-area-ospfv2 verify hello and dead-intervalsthe ospf hello and dead-intervals are configurable on a per-interface basis  the ospf intervals must match or a neighbor adjacency does not occur  to verify the currently configured ospfv2 interface intervals  use the show-ip-ospf interface command  the gigabit-ethernet 0 0 0 hello and dead-intervals are set to the default 10 seconds and 40 seconds respectively r1  show-ip-ospf interface g0 0 0gigabitethernet0 0 0 is up  line protocol is up internet address 10 1 1 5 30  area 0  attached via interface enableprocess-id 10  router-id 1 1 1 1  network type point-to-point  cost  10topology-mtid  cost  disabled  shutdown  topology name 0   10      no      no      base enabled by interface config  including secondary ip-addresses transmit delay is 1 sec  state point-to-point timer intervals configured  hello 10  dead 40  wait 40  retransmit 5oob-resync timeout 40 output omitted 
modify single-area-ospfv2 verify hello and dead-intervals  cont  use the show-ip-ospf-neighbor command to see the dead time counting down from 40 seconds  by default  this value is refreshed every 10 seconds when r1 receives a hello from the neighbor r1  show-ip-ospf-neighbor neighbor id  pri  state  dead time  address   interface 3 3 3 3   0  full  -  00 00 35  10 1 1 13  gigabitethernet0 0 12 2 2 2   0  full  -  00 00 31  10 1 1 6       gigabitethernet0 0 0r1 
modify single-area-ospfv2 modify ospfv2 intervalsit may be desirable to change the ospf timers so that routers detect network failures in less time  doing this increases traffic  but sometimes the need for quick convergence is more important than the extra traffic it creates note  the default hello and dead-intervals are based on best-practices and should only be altered in rare situations ospfv2 hello and dead-intervals can be modified manually using the following interface configuration-mode commands router config-if   ip ospf hello-interval secondsrouter config-if   ip ospf dead-interval secondsuse the no ip ospf hello-interval and no ip ospf dead-interval commands to reset the intervals to their default 
modify single-area-ospfv2 modify ospfv2 intervals  cont  in the example  the hello-interval for the link between r1 and r2 is changed to 5 seconds  the cisco ios automatically modifies the dead-interval to four times the hello-interval  however  you can document the new dead-interval in the configuration by manually setting it to 20 seconds  as shown when the dead timer on r1 expires  r1 and r2 lose adjacency  r1 and r2 must be configured with the same hello-interval  use the show-ip-ospf-neighbor command on r1 to verify the neighbor-adjacencies r1 config   interface g0 0 0 r1 config-if   ip ospf hello-interval 5 r1 config-if   ip ospf dead-interval 20 r1 config-if    jun 7 04 56 07 571   ospf-5-adjchg  process 10  nbr 2 2 2 2 on gigabitethernet0 0 0 from full to down  neighbor down  dead timer expiredr1 config-if   end r1  show-ip-ospf-neighbor neighbor id  pri  state  dead time  address   interface 3 3 3 3   0  full  -  00 00 37   10 1 1 13  gigabitethernet0 0 1 r1 
modify single-area-ospfv2 packet tracer - modify single-area-ospfv2in this packet tracer activity  you will complete the following adjust the reference-bandwidth to account for gigabit and faster speedsmodify the ospf cost valuemodify the ospf hello-timersverify the modifications are accurately reflected in the routers 
2 3 multiaccess-ospf networks
multiaccess-ospf networks opsf network typesanother type of network that uses ospf is the multiaccess-ospf network  multiaccess-ospf networks are unique in that one router controls the distribution of lsas  the router that is elected for this role should be determined by the network administrator through proper configuration 
multiaccess-ospf networks opsf designated-routerin multiaccess-networks  ospf elects a dr and bdr  the dr is responsible for collecting and distributing lsas sent and received  the dr uses the multicast ipv4-address 224 0 0 5 which is meant for all ospf routers a bdr is also elected in case the dr-fails  the bdr listens passively and maintains a relationship with all the routers  if the dr stops producing hello-packets  the bdr promotes itself and assumes the role of dr all other-routers become a drother  a router that is neither the dr nor the bdr   drothers use the multiaccess address 224 0 0 6  all designated-routers  to send ospf-packets to the dr and bdr  only the dr and bdr listen for 224 0 0 6 
multiaccess-ospf networks opsf multiaccess reference topologyin the multiaccess topology shown in the figure  there are three routers interconnected over a common ethernet multiaccess-network  192 168 1 0 24 because the routers are connected over a common multiaccess-network  ospf has automatically elected a dr and bdr  r3 has been elected as the dr because its router-id is 3 3 3 3  which is the highest in this network  r2 is the bdr because it has the second highest router-id in the network 
multiaccess-ospf networks verify ospf router rolesto verify the roles of the ospfv2 router  use the show-ip-ospf interface command the output generated by r1 confirms that the following r1 is not the dr or bdr  but is a drother with a default priority of 1   line 7 the dr is r3 with router-id 3 3 3 3 at ipv4-address 192 168 1 3  while the bdr is r2 with router-id 2 2 2 2 at ipv4-address 192 168 1 2   lines 8 and 9 r1 has two adjacencies  one with the bdr and one with the dr   lines 20-22 r1  show-ip-ospf interface gigabitethernet 0 0 0 gigabitethernet0 0 0 is up  line protocol is upinternet address 192 168 1 1 24  area 0  attached via interface enable process-id 10  router-id 1 1 1 1  network type broadcast  cost  1      output omitted  transmit delay is 1 sec  state drother  priority 1   designated-router  id  3 3 3 3  interface-address 192 168 1 3 backup designated-router  id  2 2 2 2  interface-address 192 168 1 2  output omitted neighbor count is 2  adjacent neighbor count is 2 adjacent with neighbor 2 2 2 2  backup designated-router  adjacent with neighbor 3 3 3 3  designated-router  suppress hello for 0 neighbor s  r1 
multiaccess-ospf networks verify ospf router roles  cont  the output generated by r2 confirms that r2 is the bdr with a default priority of 1   line 7 the dr is r3 with router-id 3 3 3 3 at ipv4-address 192 168 1 3  while the bdr is r2 with router-id 2 2 2 2 at ipv4-address 192 168 1 2   lines 8 and 9 r2 has two adjacencies  one with a neighbor with router-id 1 1 1 1  r1  and the other with the dr   lines 20-22 r2  show-ip-ospf interface gigabitethernet 0 0 0 gigabitethernet0 0 0 is up  line protocol is up internet address 192 168 1 2 24  area 0  attached via interface enableprocess-id 10  router-id 2 2 2 2  network type broadcast  cost  1  output omitted transmit delay is 1 sec  state bdr  priority 1 designated-router  id  3 3 3 3  interface-address 192 168 1 3 backup designated-router  id  2 2 2 2  interface-address 192 168 1 2 output omitted neighbor count is 2  adjacent neighbor count is 2 adjacent with neighbor 1 1 1 1 adjacent with neighbor 3 3 3 3  designated-router  suppress hello for 0 neighbor s  r2 
multiaccess-ospf networks verify ospf router roles  cont  the output generated by r3 confirms that r3 is the dr with a default priority of 1   line 7 the dr is r3 with router-id 3 3 3 3 at ipv4-address 192 168 1 3  while the bdr is r2 with router-id 2 2 2 2 at ipv4-address 192 168 1 2   lines 8 and 9 r3 has two adjacencies  one with a neighbor with router-id 1 1 1 1  r1  and the other with the bdr   lines 20-22 r3  show-ip-ospf interface gigabitethernet 0 0 0 gigabitethernet0 0 0 is up  line protocol is up internet address 192 168 1 3 24  area 0  attached via interface enableprocess-id 10  router-id 2 2 2 2  network type broadcast  cost  1  output omitted transmit delay is 1 sec  state dr  priority 1 designated-router  id  3 3 3 3  interface-address 192 168 1 3 backup designated-router  id  2 2 2 2  interface-address 192 168 1 2 output omitted neighbor count is 2  adjacent neighbor count is 2 adjacent with neighbor 1 1 1 1 adjacent with neighbor 2 2 2 2  backup designated-router  suppress hello for 0 neighbor s  r3 
multiaccess-ospf networks verify dr bdr adjacenciesto verify the ospfv2 adjacencies  use the show-ip-ospf-neighbor command  the state of neighbors in multiaccess-networks can be as follows full drother - this is a dr or bdr router that is fully adjacent with a non-dr or bdr router  these two neighbors can exchange hello-packets  updates  queries  replies  and acknowledgments full dr - the router is fully adjacent with the indicated dr neighbor  these two neighbors can exchange hello-packets  updates  queries  replies  and acknowledgments full bdr - the router is fully adjacent with the indicated bdr neighbor  these two neighbors can exchange hello-packets  updates  queries  replies  and acknowledgments 2-way drother - the non-dr or bdr router has a neighbor relationship with another non-dr or bdr router  these two neighbors exchange hello-packets the normal state for an ospf router is usually full  if a router is stuck in another state  it is an indication that there are problems in forming adjacencies  the only exception to this is the 2-way state  which is normal in a multiaccess broadcast network  
multiaccess-ospf networks verify dr bdr adjacencies  cont  the output generated by r2 confirms that r2 has adjacencies with the following routers r1 with router-id 1 1 1 1 is in a full-state and r1 is neither the dr nor bdr r3 with router-id 3 3 3 3 is in a full-state and the role of r3 is dr r2  show-ip-ospf-neighbor neighbor id  pri  state   dead time  address   interface 1 1 1 1   1  full drother 00 00 31  192 168 1 1    gigabitethernet0 0 03 3 3 3   1  full dr   00 00 34  192 168 1 3  gigabitethernet0 0 0 r2 
multiaccess-ospf networks default dr bdr election processthe ospf dr and bdr election is based on the following criteria  in sequential order the routers in the network elect the router with the highest interface priority as the dr  the router with the second highest interface priority is becomes the bdr  the priority can be configured to be any number between 0   255  if the interface priority-value is set to 0  that interface cannot be elected as dr nor bdr  the default priority of multiaccess broadcast interfaces is 1 if the interface priorities are equal  then the router with the highest router-id is elected the dr  the router with the second highest router-id is the bdr the election process takes place when the first router with an ospf-enabled interface is active on the network  if all of the routers on the network have not finished booting  it is possible that a router with a lower router-id becomes the dr the addition of a new router does not initiate a new election process 
multiaccess-ospf networks dr failure and recoveryafter the dr is elected  it remains the dr until one of the following events occurs the dr-fails the ospf-process on the dr-fails or is stopped the multiaccess interface on the dr-fails or is shutdown if the dr-fails  the bdr is automatically promoted to dr  this is the case even if another drother with a higher priority or router-id is added to the network after the initial dr bdr election  however  after a bdr is promoted to dr  a new bdr election occurs and the drother with the highest-priority or router-id is elected as the new bdr 
multiaccess-ospf networks the ip ospf priority commandif the interface priorities are equal on all routers  the router with the highest router-id is elected the dr  instead of relying on the router-id  it is better to control the election by setting interface priorities  this also allows a router to be the dr in one network and a drother in another  to set the priority of an interface  use the command ip ospf priority-value  where value is 0 to 255  a value of 0 does not become a dr or a bdr  a value of 1 to 255 on the interface makes it more likely that the router becomes the dr or the bdr 
multiaccess-ospf networks configure ospf prioritythe example shows the commands being used to change the r1 g0 0 0 interface priority from 1 to 255 and then reset the ospf-process r1 config   interface gigabitethernet 0 0 0 r1 config-if   ip ospf priority 255 r1 config-if   end r1  clear ip ospf-process reset all ospf-processes   no   y r1   jun 5 03 47 41 563   ospf-5-adjchg  process 10  nbr 2 2 2 2 on gigabitethernet0 0 0 from full to down  neighbor down  interface down or detached
multiaccess-ospf networks packet tracer - determine the dr and bdrin this activity  you will complete the following examine dr and bdr roles and watch the roles change when there is a change in the network modify the priority to control the roles and force a new election verify routers are filling the desired roles
module 1  single-area-ospfv2 conceptsenterprise networking  security  and automation v7 0 ensa 
module objectivesmodule title  single-area-ospf conceptsmodule objective  explain how single-area-ospf operates in both point-to-point and broadcast multiaccess-networks topic titletopic objectiveospf features and characteristicsdescribe basic ospf features and characteristics ospf-packetsdescribe the ospf-packet-types used in single-area-ospf ospf operationexplain how single-area-ospf operates 
1 1 ospf features and characteristics
ospf features and characteristics introduction to ospfospf is a link-state-routing-protocol that was developed as an alternative for the distance vector routing-information protocol  rip   ospf has significant advantages over rip in that it offers faster-convergence and scales to much larger-network implementations ospf is a link-state-routing-protocol that uses the concept of areas  a network administrator can divide the routing-domain into distinct areas that help control routing-update traffic  a link is an interface on a router  a network-segment that connects two routers  or a stub-network such as an ethernet-lan that is connected to a single-router  information about the state of a link is known as a link-state  all link-state information includes the network-prefix  prefix-length  and cost this module covers basic  single-area-ospf implementations and configurations 
ospf features and characteristics components of ospfall routing-protocols share similar components  they all use routing-protocol-messages to exchange route information  the messages help build data-structures  which are then processed using a routing-algorithm routers running ospf exchange messages to convey routing-information using five types of packets hello-packetdatabase-description-packetlink-state-request-packetlink-state-update-packetlink-state-acknowledgment-packetthese packets are used to discover-neighboring-routers and also to exchange routing-information to maintain accurate-information about the network 
ospf features and characteristics components of ospf  cont  ospf-messages are used to create and maintain three ospf-databases  as follows databasetabledescriptionadjacency-databaseneighbor-tablelist of all neighbor routers to which a router has established bi-directional communication  this table is unique for each router  can be viewed using the show-ip-ospf-neighbor command link-state-database  lsdb topology-tablelists information about all other-routers in the network  the database represents the network lsdb  all routers within an area have identical lsdb  can be viewed using the show-ip-ospf-database command forwarding-databaserouting-tablelist of routes generated when an algorithm is run on the link-state-database  each router s routing-table is unique and contains information on how and where to send packets to other-routers  can be viewed using the show-ip-route command 
ospf features and characteristics components of ospf  cont  the router builds the topology-table using results of calculations based on the dijkstra-shortest-path-first  spf  algorithm  the spf algorithm is based on the cumulative-cost to reach a destination the spf algorithm creates an spf tree by placing each router at the root of the tree and calculating the shortest path to each node  the spf tree is then used to calculate the best-routes  ospf places the best-routes into the forwarding-database  which is used to make the routing-table 
ospf features and characteristics link-state operationto maintain routing-information  ospf routers complete a generic-link-state-routing-process to reach a state-of-convergence  the following are the link-state-routing steps that are completed by a router establish neighbor-adjacenciesexchange link-state-advertisementsbuild the link-state-databaseexecute the spf algorithmchoose the best-route
ospf features and characteristics single-area and multiarea-ospfto make ospf more efficient and scalable  ospf supports hierarchical routing using areas  an ospf area is a group of routers that share the same link-state information in their lsdbs  ospf can be implemented in one of two ways  as follows single-area-ospf - all routers are in one area  best-practice is to use area 0 multiarea-ospf - ospf is implemented using multiple areas  in a hierarchical fashion  all areas must connect to the backbone-area  area 0   routers-interconnecting-the-areas are referred to as area-border-routers  abrs  the focus of this module is on single-area-ospfv2 
ospf features and characteristics multiarea-ospfthe hierarchical-topology-design options with multiarea-ospf can offer the following advantages smaller routing-tables - tables are smaller because there are fewer routing-table entries  this is because network addresses can be summarized between areas  route-summarization is not enabled by default reduced-link-state-update-overhead - designing multiarea-ospf with smaller areas minimizes processing and memory requirements reduced-frequency-of-spf-calculations -  multiarea-ospf localize the impact of a topology change within an area  for instance  it minimizes routing-update impact because lsa-flooding stops at the area-boundary 
ospf features and characteristics ospfv3ospfv3 is the ospfv2 equivalent for exchanging ipv6 prefixes  ospfv3 exchanges routing-information to populate the ipv6 routing-table with remote prefixes note  with the ospfv3 address-families feature  ospfv3 includes support for both ipv4 and ipv6  ospf address-families is beyond the scope of this curriculum ospfv3 has the same functionality as ospfv2  but uses ipv6 as the network-layer transport  communicating with ospfv3 peers and advertising ipv6 routes  ospfv3 also uses the spf algorithm as the computation engine to determine the best-paths throughout the routing-domain ospfv3 has separate processes from its ipv4-counterpart  the processes and operations are basically the same as in the ipv4 routing-protocol  but run independently  
1 3 ospf operation
ospf operation video - ospf operationthis video will cover the 7 states of ospf operation down-stateinit-statetwo-way-stateexstart-stateexchange-stateloading-statefull-state
ospf operation ospf operational statesstatedescriptiondown-stateno hello-packets received   down  router sends hello-packets  transition to init-state init-statehello-packets are received from the neighbor  they contain the router-id of the sending router  transition to two-way-state two-way-statein this state  communication between the two routers is bidirectional  on multiaccess-links  the routers elect a dr and a bdr  transition to exstart-state 
ospf operation ospf operational states  cont  statedescriptionexstart-stateon point-to-point-networks  the two routers decide which router will initiate the dbd packet exchange and decide upon the initial dbd packet-sequence-number exchange-staterouters exchange dbd packets  if additional router information is required then transition to loading  otherwise  transition to the full-state loading-statelsrs and lsus are used to gain additional route information  routes are processed using the spf algorithm  transition to the full-state full-statethe link-state-database of the router is fully synchronized 
ospf operation establish neighbor-adjacenciesto determine if there is an ospf neighbor on the link  the router sends a hello-packet that contains its router-id out all ospf-enabled interfaces  the hello-packet is sent to the reserved all ospf routers ipv4 multicast-address 224 0 0 5  only ospfv2 routers will process these packets  the ospf router-id is used by the ospf-process to uniquely identify each router in the ospf area  a router-id is a 32-bit number formatted like an ipv4-address and assigned to uniquely identify a router among ospf-peers when a neighboring ospf-enabled router receives a hello-packet with a router-id that is not within its neighbor-list  the receiving router attempts to establish an adjacency with the initiating-router 
ospf operation establish neighbor-adjacencies  cont  the process routers use to establish adjacency on a multiaccess-network down to init-statewhen ospfv2 is enabled on the interface  r1 transitions from down to init and starts sending ospfv2 hellos out of the interface in an attempt to discover-neighbors init-statewhen a r2 receives a hello from the previously unknown router r1  it adds r1 s router-id to the neighbor-list and responds with a hello-packet containing its own router-id two-way-stater1 receives r2 s hello and notices that the message contains the r1 router-id in the list of r2 s neighbors  r1 adds r2 s router-id to the neighbor-list and transitions to the two-way-state  if r1 and r2 are connected with a point-to-point-link  they transition to exstart if r1 and r2 are connected over a common ethernet-network  the dr bdr election occurs elect the dr   bdrthe dr and bdr election occurs  where the router with the highest router-id or highest-priority is elected as the dr  and second highest is the bdr
ospf operation synchronizing ospf-databasesafter the two-way-state  routers transition to database synchronization-states  this is a three step process  as follows decide first router  the router with the highest router-id sends its dbd first exchange dbds  as many as needed to convey the database  the other-router must acknowledge each dbd with an lsack packet send an lsr  each router compares the dbd information with the local-lsdb  if the dbd has more current link information  the router transitions to the loading-state after all lsrs have been exchanged and satisfied  the routers are considered synchronized and in a full-state  updates  lsus  are sent when a change is perceived  incremental-updates every 30 minutes
ospf operation the need for a drmultiaccess-networks can create two challenges for ospf regarding the flooding-of-lsas  as follows creation of multiple-adjacencies - ethernet-networks could potentially interconnect many ospf routers over a common link  creating adjacencies with every router would lead to an excessive number of lsas exchanged between routers on the same network extensive-flooding-of-lsas - link-state routers flood their lsas any time ospf is initialized  or when there is a change in the topology  this flooding can become excessive 
ospf operation lsa-flooding with a dran increase in the number of routers on a multiaccess-network also increases the number of lsas exchanged between the routers  this flooding-of-lsas significantly impacts the operation of ospf if every router in a multiaccess-network had to flood and acknowledge all received lsas to all other-routers on that same multiaccess-network  the network-traffic would become quite-chaotic on multiaccess-networks  ospf elects a dr to be the collection and distribution point for lsas sent and received  a bdr is also elected in case the dr-fails  all other-routers become drothers  a drother is a router that is neither the dr nor the bdr note  the dr is only used for the dissemination of lsas  the router will still use the best next-hop router indicated in the routing-table for the forwarding of all other packets 
1 2 ospf-packets
ospf-packets video - ospf-packetsthis video will cover the following packet-types hellodatabase-description  dbd link-state-request  lsr link-state-update  lsu link-state-acknowledgment  lsack 
ospf-packets types of ospf-packetsthe table summarizes the five different types of link state packets  lsps  used by ospfv2  ospfv3 has similar packet-types typepacket namedescriptionhellodiscovers neighbors and builds adjacencies between themdatabase-description  dbd checks for-database-synchronization between routerslink-state-request  lsr requests specific link-state records from router to routerlink-state-update  lsu sends specifically requested link-state recordslink-state-acknowledgment  lsack acknowledges the other packet-types
ospf-packets link-state-updateslsus are also used to forward ospf routing-updates  an lsu packet can contain 11 different types of ospfv2 lsas  ospfv3 renamed several of these lsas and also contains two additional lsas lsu and lsa are often used interchangeably  but the correct hierarchy is lsu packets contain lsa messages 
ospf-packets hello-packetthe ospf type 1 packet is the hello-packet  hello-packets are used to do the following discover ospf neighbors and establish neighbor-adjacencies advertise parameters on which two routers must agree to become neighbors elect the designated-router  dr  and backup designated-router  bdr  on multiaccess-networks like ethernet  point-to-point-links do not require dr or bdr 
module 2  single-area-ospfv2 configurationenterprise networking  security  and automation v7 0 ensa 
module objectivesmodule title  single-area-ospfv2 configurationmodule objective  implement single-area-ospfv2 in both point-to-point and broadcast multiaccess-networks topic titletopic objectiveospf router-idconfigure an ospfv2 router-id point-to-point ospf networksconfigure single-area-ospfv2 in a point-to-point-network multiaccess-ospf networksconfigure the ospf interface priority to influence the dr bdr election in a multiaccess-network modify single-area-ospfv2implement modifications to change the operation of single-area-ospfv2 default-route-propagationconfigure ospf to propagate a default-route verify single-area-ospfv2verify a single-area-ospfv2 implementation 
2 1 ospf router-id
ospf router-id ospf reference topologythe figure shows the topology used for configuring ospfv2 in this module  the routers in the topology have a starting configuration  including interface-addresses  there is currently no static-routing or dynamic-routing configured on any of the routers  all interfaces on r1  r2  and r3  except the loopback 1 on r2  are within the ospf backbone-area  the isp-router is used as the gateway to the internet of the routing-domain 
ospf router-id router configuration-mode for ospfospfv2 is enabled using the router ospf-process-id global configuration-mode command  the process-id value represents a number between 1 and 65 535 and is selected by the network administrator  the process-id value is locally significant  it is considered best-practice to use the same process-id on all ospf routers r1 config   router-ospf-10 r1 config-router     area      ospf area parameters auto-cost     calculate ospf interface cost according to bandwidth default-information   control distribution of default information distance     define an administrative-distance exit      exit from routing-protocol configuration-mode log-adjacency-changes   log changes in adjacency state neighbor     specify a neighbor router network     enable routing on an ip-network no      negate a command or set its defaults passive-interface   suppress routing-updates on an interface redistribute    redistribute information from another routing-protocol router-id     router-id for this ospf-process r1 config-router  
ospf router-id router-idsan ospf router-id is a 32-bit value  represented as an ipv4-address  it is used to uniquely identify an ospf router  and all ospf-packets include the router-id of the originating-router  every router requires a router-id to participate in an ospf-domain  it can be defined by an administrator or automatically assigned by the router  the router-id is used by an ospf-enabled router to do the following participate in the synchronization of ospf-databases   during the exchange-state  the router with the highest router-id will send their database descriptor  dbd  packets first participate in the election of the designated-router  dr  - in a multiaccess-lan environment  the router with the highest router-id is elected the dr  the routing device with the second highest router-id is elected the backup designated-router  bdr  
ospf router-id router-id order of precedencecisco routers derive the router-id based on one of three criteria  in the following preferential order the router-id is explicitly configured using the ospf router-id rid router configuration-mode command  this is the recommended method to assign a router-id the router chooses the highest ipv4-address of any of configured loopback-interfaces the router chooses the highest active ipv4-address of any of its physical-interfaces 
ospf router-id configure a loopback-interface as the router-idinstead of relying on physical interface  the router-id can be assigned to a loopback-interface  typically  the ipv4-address for this type of loopback-interface should be configured using a 32-bit subnet-mask  255 255 255 255   this effectively creates a host route  a 32-bit host route would not get advertised as a route to other ospf routers ospf does not need to be enabled on an interface for that interface to be chosen as the router-id 
ospf router-id explicitly configure a router-idin our reference topology the router-id for each router is assigned as follows r1 uses router-id 1 1 1 1r2 uses router-id 2 2 2 2r3 uses router-id 3 3 3 3use the router-id rid router configuration-mode command to manually assign a router-id  in the example  the router-id 1 1 1 1 is assigned to r1  use the show-ip-protocols command to verify the router-id  r1 config   router-ospf-10 r1 config-router   router-id 1 1 1 1 r1 config-router   end  may 23 19 33 42 689   sys-5-config i  configured from console by console r1  show-ip-protocols   include router-id router-id 1 1 1 1 r1 
ospf router-id modify a router-idafter a router selects a router-id  an active ospf router does not allow the router-id to be changed until the router is reloaded or the ospf-process is reset clearing the ospf-process is the preferred method to reset the router-id r1  show-ip-protocols   include router-id router-id 10 10 1 1 r1  conf t enter configuration commands  one per line  end with cntl z  r1 config   router-ospf-10 r1 config-router   router-id 1 1 1 1   ospf  reload or use  clear ip ospf-process  command  for this to take effect r1 config-router   end r1  clear ip ospf-process reset all ospf-processes   no   y  jun 6 01 09 46 975   ospf-5-adjchg  process 10  nbr 3 3 3 3 on gigabitethernet0 0 1 from full to down  neighbor down  interface down or detached  jun 6 01 09 46 981   ospf-5-adjchg  process 10  nbr 3 3 3 3 on gigabitethernet0 0 1 from loading to full  loading done  r1  show-ip-protocols   include router-id router-id 1 1 1 1 r1 
2 2 point-to-point ospf networks
point-to-point ospf networks the network command syntaxyou can specify the interfaces that belong to a point-to-point-network by configuring the network command  you can also configure ospf directly on the interface with the ip ospf command the basic syntax for the network command is as follows router config-router   network network-address-wildcard-mask area area-idthe network-address-wildcard-mask syntax is used to enable ospf on interfaces  any interfaces on a router that match this part of the command are enabled to send and receive ospf-packets the area area-id syntax refers to the ospf area  when configuring single-area-ospfv2  the network command must be configured with the same area-id value on all routers  although any area-id can be used  it is good practice to use an area-id of 0 with single-area-ospfv2  this convention makes it easier if the network is later altered to support multiarea-ospfv2 
point-to-point ospf networks the wildcard-maskthe wildcard-mask is typically the inverse of the subnet-mask configured on that interface  the easiest method for calculating a wildcard-mask is to subtract the network subnet-mask from 255 255 255 255  as shown for  24 and  26 subnet-masks in the figure 
point-to-point ospf networks configure ospf using the network commandwithin routing configuration-mode  there are two ways to identify the interfaces that will participate in the ospfv2 routing-process in the first example  the wildcard-mask identifies the interface based on the network addresses  any active interface that is configured with an ipv4-address belonging to that network will participate in the ospfv2 routing-process note  some ios-versions allow the subnet-mask to be entered instead of the wildcard-mask  the ios then converts the subnet-mask to the wildcard-mask format r1 config   router-ospf-10 r1 config-router   network 10 10 1 0 0 0 0 255 area 0 r1 config-router   network 10 1 1 4 0 0 0 3 area 0r1 config-router   network 10 1 1 12 0 0 0 3 area 0r1 config-router  
point-to-point ospf networks configure ospf using the network command  cont  as an alternative  ospfv2 can be enabled by specifying the exact-interface ipv4-address using a quad zero wildcard-mask  entering network 10 1 1 5 0 0 0 0 area 0 on r1 tells the router to enable interface gigabit-ethernet 0 0 0 for the routing-process  the advantage of specifying the interface is that the wildcard-mask calculation is not necessary  notice that in all cases  the area argument specifies area 0 r1 config   router-ospf-10 r1 config-router   network 10 10 1 1 0 0 0 0 area 0 r1 config-router   network 10 1 1 5 0 0 0 0 area 0 r1 config-router   network 10 1 1 14 0 0 0 0 area 0 r1 config-router  
point-to-point ospf networks configure ospf using the ip ospf commandto configure ospf directly on the interface  use the ip ospf interface configuration-mode command  the syntax is as follows router config-if   ip ospf-process-id area area-idremove the network commands using the no form of the command  then go to each interface and configure the ip ospf commandr1 config   router-ospf-10 r1 config-router   no network 10 10 1 1 0 0 0 0 area 0 r1 config-router   no network 10 1 1 5 0 0 0 0 area 0 r1 config-router   no network 10 1 1 14 0 0 0 0 area 0 r1 config-router   interface gigabitethernet 0 0 0 r1 config-if   ip ospf 10 area 0 r1 config-if   interface gigabitethernet 0 0 1 r1 config-if   ip ospf 10 area 0 r1 config-if   interface loopback 0 r1 config-if   ip ospf 10 area 0 r1 config-if  
point-to-point ospf networks passive-interfaceby default  ospf-messages are forwarded out all ospf-enabled interfaces  however  these messages only need to be sent out interfaces that are connecting to other ospf-enabled routers sending out unneeded messages on a lan affects the network in three ways inefficient-use-of-bandwidth - available bandwidth is consumed transporting unnecessary messages inefficient-use-of-resources - all devices on the lan must process and eventually discard the message increased-security-risk - without additional ospf security configurations  ospf-messages can be intercepted with packet-sniffing software  routing-updates can be modified and sent back to the router  corrupting the routing-table with false metrics that misdirect-traffic 
point-to-point ospf networks configure passive-interfacesuse the passive-interface router configuration-mode command to prevent the transmission of routing messages through a router-interface  but still allow that network to be advertised to other-routers  the show-ip-protocols command is then used to verify that the interface is listed as passive 
point-to-point ospf networks ospf point-to-point-networksby default  cisco routers elect a dr and bdr on ethernet-interfaces  even if there is only one other device on the link  you can verify this with the show-ip-ospf interface command  the dr  bdr election process is unnecessary as there can only be two routers on the point-to-point-network between r1 and r2  notice in the output that the router has designated the network type as broadcast  r1  show-ip-ospf interface gigabitethernet 0 0 0gigabitethernet0 0 0 is up  line protocol is up internet address 10 1 1 5 30  area 0  attached via interface enableprocess-id 10  router-id 1 1 1 1  network type broadcast  cost  1 topology-mtid    cost    disabled    shutdown    topology name 0           1        no           no          base enabled by interface config  including secondary ip-addresses transmit delay is 1 sec  state bdr  priority 1 designated-router  id  2 2 2 2  interface-address 10 1 1 6 backup designated-router  id  1 1 1 1  interface-address 10 1 1 5 timer intervals configured  hello 10  dead 40  wait 40  retransmit 5 oob-resync timeout 40
point-to-point ospf networks ospf point-to-point-networks  cont  to change this to a point-to-point-network  use the interface configuration command ip-ospf-network-point-to-point on all interfaces where you want to disable the dr bdr election process r1 config   interface gigabitethernet 0 0 0 r1 config-if   ip-ospf-network-point-to-point  jun 6 00 44 05 208   ospf-5-adjchg  process 10  nbr 2 2 2 2 on gigabitethernet0 0 0 from full to down  neighbor down  interface down or detached  jun 6 00 44 05 211   ospf-5-adjchg  process 10  nbr 2 2 2 2 on gigabitethernet0 0 0 from loading to full  loading done r1 config-if   end r1  show-ip-ospf interface gigabitethernet 0 0 0gigabitethernet0 0 0 is up  line protocol is up internet address 10 1 1 5 30  area 0  attached via interface enableprocess-id 10  router-id 1 1 1 1  network type point-to-point  cost  1                      topology-mtid    cost    disabled    shutdown    topology name
point-to-point ospf networks loopbacks and point-to-point-networksuse loopbacks to provide additional interfaces for a variety of purposes  by default  loopback-interfaces are advertised as  32 host routes to simulate a real lan  the loopback-interface can be configured as a point-to-point-network to advertise the full network what r2 sees when r1 advertises the loopback-interface as-is r2  show-ip-route   include 10 10 1 o  10 10 1 1 32  110 2  via 10 1 1 5  00 03 05  gigabitethernet0 0 0configuration change at r1 r1 config-if   interface loopback 0 r1 config-if   ip-ospf-network-point-to-pointresult at r2 r2  show-ip-route   include 10 10 1 o  10 10 1 0 24  110 2  via 10 1 1 5  00 03 05  gigabitethernet0 0 0
point-to-point ospf networks packet tracer - point-to-point single-area-ospfv2 configurationin this packet tracer activity  you will do the following explicitly configure router-ids configure the network command on r1 using wildcard-mask based on the subnet-mask configure the network command on r2 using a quad-zero wildcard-mask configure the ip ospf interface command on r3 configure passive-interfaces verify ospf operation using the show-ip-protocols and show-ip-route commands 
2 6 verify single-area-ospfv2
verify single-area-ospfv2 verify ospf neighborsafter configuring single-area-ospfv2  you will need to verify your configurations  the following two commands are particularly useful for verifying routing show-ip-interface-brief - this verifies that the desired interfaces are active with correct ip-addressing show-ip-route- this verifies that the routing-table contains all the expected routes additional commands for determining that ospf is operating as expected include the following show-ip-ospf-neighborshow-ip-protocolsshow-ip-ospfshow-ip-ospf interface
verify single-area-ospfv2 verify ospf neighbors  cont  use the show-ip-ospf-neighbor command to verify that the router has formed an adjacency with its neighboring-routers  if the router-id of the neighboring-router is not displayed  or if it does not show as being in a state of full  the two routers have not formed an ospfv2 adjacency note  a non-dr or bdr router that has a neighbor relationship with another non-dr or bdr router will display a two-way adjacency instead of full the following command output displays the neighbor-table of r1 r1  show-ip-ospf-neighbor neighbor id  pri  state  dead time  address   interface 3 3 3 3   0  full  -  00 00 35  10 1 1 13  gigabitethernet0 0 12 2 2 2   0  full  -  00 00 31  10 1 1 6  gigabitethernet0 0 0r1 
verify single-area-ospfv2 verify ospf neighbors  cont  two routers may not form an ospfv2 adjacency if the following occurs the subnet-masks do not match  causing the routers to be on separate networks the ospfv2 hello or dead timers do not match the ospfv2 network types do not match there is a missing or incorrect ospfv2 network command 
verify single-area-ospfv2 verify ospf-protocol settingsthe show-ip-protocols command is a quick way to verify vital ospf configuration information  as shown in the command output  this includes the ospfv2 process-id  the router-id  interfaces explicitly configured to advertise ospf routes  the neighbors the router is receiving updates from  and the default administrative-distance  which is 110 for ospf r1  show-ip-protocols     ip-routing is nsf aware      output omitted  routing-protocol is  ospf 10  outgoing update filter list for all interfaces is not set incoming update filter list for all interfaces is not set    router-id 1 1 1 1 number of areas in this router is 1  1 normal 0 stub 0 nssa maximum path  4 routing for networks  routing on interfaces configured explicitly  area 0       loopback0 gigabitethernet0 0 1 gigabitethernet0 0 0 routing-information sources  gateway  distance   last update 3 3 3 3  110    00 09 30 2 2 2 2  110    00 09 58 distance   default is 110  r1 
verify single-area-ospfv2 verify ospf-process informationthe show-ip-ospf command can also be used to examine the ospfv2 process-id and router-id  as shown in the command output  this command displays the ospfv2 area information and the last time the spf algorithm was executed r1  show-ip-ospf routing-process  ospf 10  with id 1 1 1 1 start time  00 01 47 390  time elapsed  00 12 32 320 output omitted cisco nsf helper support enabled reference-bandwidth unit is 10000 mbps area backbone 0  number of interfaces in this area is 3 area has no authentication spf algorithm last executed 00 11 31 231 ago spf algorithm executed 4 times area ranges are number of lsa 3  checksum sum 0x00e77e number of opaque link lsa 0  checksum sum 0x000000 number of dcbitless lsa 0 number of indication lsa 0 number of donotage lsa 0 flood list length 0 r1 
verify single-area-ospfv2 verify ospf interface settingsthe show-ip-ospf interface command provides a detailed list for every ospfv2-enabled interface  specify an interface to display the settings of just that interface  this command shows the process-id  the local-router-id  the type of network  ospf cost  dr and bdr information on multiaccess-links  not shown   and adjacent neighbors r1  show-ip-ospf interface gigabitethernet 0 0 0gigabitethernet0 0 0 is up  line protocol is upinternet address 10 1 1 5 30  area 0  attached via interface enableprocess-id 10  router-id 1 1 1 1  network type point-to-point  cost  10        output omitted neighbor count is 1  adjacent neighbor count is 1 adjacent with neighbor 2 2 2 2 suppress hello for 0 neighbor s  r1 
verify single-area-ospfv2 verify ospf interface settings  cont  to get a quick summary of ospfv2-enabled interfaces  use the show-ip-ospf interface brief command  as shown in the command output  this command is useful for seeing important information including interfaces are participating in ospfnetworks that are being advertised  ip-address mask cost of each linknetwork statenumber of neighbors on each linkr1  show-ip-ospf interface brief interface  pid  area  ip-address mask  cost  state  nbrs f c lo0    10  0   10 10 1 1 24  10   p2p   0 0 gi0 0 1   10  0   10 1 1 14 30  30   p2p   1 1 gi0 0 0   10  0   10 1 1 5 30   10   p2p   1 1 r1 
verify single-area-ospfv2 packet tracer - verify single-area-ospfv2in this packet tracer activity  you will complete the following identify and verify the status of ospf neighbors determine how the routes are being learned in the network explain how the neighbor state is determined examine the settings for the ospf-process-id add a new lan into an existing ospf network and verify connectivity 
8 2 ipv4-packet
ipv4-packet ipv4-packet-headeripv4 is the primary communication protocol for the network-layer the network header has many purposes it ensures the packet is sent in the correct direction  to the destination  it contains information for network-layer processing in various fields the information in the header is used by all layer-3 devices that handle the packet
ipv4-packet ipv4-packet-header fieldsthe ipv4 network header characteristics it is in binary contains several fields of informationdiagram is read from left to right  4 bytes per linethe two most important fields are the source and destination protocols may have may have one or more functions 
ipv4-packet ipv4-packet-header fieldssignificant fields in the ipv4 header functiondescriptionversionthis will be for v4  as opposed to v6  a 4 bit field  0100  differentiated-servicesused for qos  diffserv   ds field or the older intserv   tos or type-of-service header-checksumdetect corruption in the ipv4 headertime-to-live  ttl layer-3 hop-count  when it becomes zero the router will discard the packet protocoli d s next level protocol  icmp  tcp  udp  etc source ipv4-address32 bit source addressdestination ipv4-address32 bit destination address
ipv4-packet video   sample ipv4 headers in wiresharkthis video will cover the following ipv4 ethernet-packets in wiresharkthe control informationthe difference between packets
8 3 ipv6-packets
ipv6-packets limitations of ipv4ipv4 has three major limitations ipv4-address depletion   we have basically run out of ipv4-addressing lack of end-to-end connectivity   to make ipv4 survive this long  private-addressing and nat were created  this ended direct communications with public-addressing increased network complexity   nat was meant as temporary solution and creates issues on the network as a side effect of manipulating the network headers addressing  nat causes latency and troubleshooting issues 
ipv6-packets ipv6 overviewipv6 was developed by internet-engineering-task-force  ietf  ipv6 overcomes the limitations of ipv4 improvements that ipv6 provides increased-address-space   based on 128 bit address  not 32 bitsimproved-packet-handling   simplified header with fewer fieldseliminates-the-need-for-nat   since there is a huge amount of addressing  there is no need to use private-addressing internally and be mapped to a shared public-address
ipv6-packets ipv4-packet-header fields in the ipv6-packet-headerthe ipv6 header is simplified  but not smaller the header is fixed at 40 bytes or octets long several ipv4 fields were removed to improve performance some ipv4 fields were removed to improve performance flagfragment-offsetheader-checksum
ipv6-packets ipv6-packet-headersignificant fields in the ipv4 header functiondescriptionversionthis will be for v6  as opposed to v4  a 4 bit field  0110  traffic-classused for qos  equivalent to diffserv   ds field flow-labelinforms device to handle identical flow-labels the same way  20 bit fieldpayload-lengththis 16-bit field indicates the length of the data portion or payload of the ipv6-packetnext headeri d s next level protocol  icmp  tcp  udp  etc hop-limitreplaces ttl field layer-3 hop-countsource ipv4-address128 bit source addressdestination ipv4-address128 bit destination address
ipv6-packets ipv6-packet-header  cont  ipv6-packet may also contain extension-headers  eh   eh headers characteristics  provide optional network-layer informationare optionalare placed between ipv6 header and the payloadmay be used for fragmentation  security  mobility support  etc note  unlike ipv4  routers do not fragment ipv6-packets 
ipv6-packets video   sample ipv6 headers in wiresharkthis video will cover the following ipv6 ethernet-packets in wiresharkthe control informationthe difference between packets
4 3 copper-cabling
copper-cabling characteristics of copper-cablingcopper-cabling is the most common type of cabling used in networks today  it is inexpensive  easy to install  and has low resistance to electrical current flow limitations attenuation   the longer the electrical-signals have to travel  the weaker they get  the electrical signal is susceptible to interference from two sources  which can distort and corrupt the data-signals  electromagnetic-interference  emi  and radio-frequency-interference  rfi  and crosstalk  mitigation strict adherence to cable-length-limits will mitigate attenuation some kinds of copper cable mitigate emi and rfi by using metallic shielding and grounding some kinds of copper cable mitigate crosstalk by twisting opposing circuit pair wires together 
copper-cabling types of copper-cabling
copper-cabling unshielded-twisted-pair  utp utp is the most common networking media terminated with rj-45-connectorsinterconnects hosts with intermediary network-devices key-characteristics of utpthe outer jacket protects the copper wires from physical-damage twisted pairs protect the signal from interference color-coded plastic insulation electrically isolates the wires from each other and identifies each pair 
copper-cabling shielded twisted pair  stp better noise-protection than utpmore expensive than utpharder to install than utpterminated with rj-45-connectorsinterconnects hosts with intermediary network-deviceskey-characteristics of stpthe outer jacket protects the copper wires from physical-damagebraided or foil shield provides emi rfi protectionfoil shield for each pair of wires provides emi rfi protectioncolor-coded plastic insulation electrically isolates the wires from each other and identifies each pair
copper-cabling coaxial-cableconsists of the following outer-cable jacket to prevent minor physical-damagea woven copper braid  or metallic-foil  acts as the second wire in the circuit and as a shield for the inner conductor a layer of flexible-plastic-insulationa copper-conductor is used to transmit the electronic signals there are different types of connectors used with coax cable commonly used in the following situations wireless installations - attach antennas to wireless-devicescable internet installations - customer premises wiring
4 5 fiber-optic-cabling
fiber-optic-cabling properties of fiber-optic-cablingnot as common as utp because of the expense involvedideal for some networking scenariostransmits data over longer distances at higher bandwidth than any other networking medialess susceptible to attenuation  and completely immune to emi rfimade of flexible  extremely thin strands of very pure glassuses a laser or led to encode bits as pulses of lightthe fiber-optic cable acts as a wave guide to transmit light between the two ends with minimal signal loss
fiber-optic-cabling types of fiber mediasingle-mode-fibervery small coreuses expensive laserslong-distance applicationsmultimode-fiberlarger coreuses less expensive ledsleds transmit at different anglesup to 10 gbps over 550 metersdispersion refers to the spreading out of a light pulse over time  increased dispersion means increased loss of signal strength  mmf has greater dispersion than smf  with a the maximum cable distance for mmf is 550 meters 
fiber-optic-cabling fiber-optic-cabling usagefiber-optic-cabling is now being used in four types of industry enterprise-networks - used for backbone cabling applications and interconnecting infrastructure devicesfiber-to-the-home  ftth  - used to provide always-on broadband services to homes and small businesseslong-haul-networks - used by service-providers to connect countries and citiessubmarine-cable-networks - used to provide reliable high-speed  high-capacity solutions capable of surviving in harsh undersea environments at up to transoceanic distances  our focus in this course is the use of fiber within the enterprise 
fiber-optic-cabling fiber-optic connectorsstraight-tip  st  connectorssubscriber-connector  sc  connectorslucent-connector  lc  simplex-connectorsduplex-multimode-lc-connectors
fiber-optic-cabling fiber patch cordssc-sc-mm-patch-cordlc-lc-sm-patch-cordst-lc-mm-patch-cordst-sc-sm-patch-corda yellow jacket is for single-mode-fiber cables and orange  or aqua  for multimode-fiber cables 
fiber-optic-cabling fiber versus copperoptical-fiber is primarily used as backbone cabling for high-traffic  point-to-pointconnections between data distribution facilities and for the interconnection of buildingsin multi-building campuses implementation issuesutp-cablingfiber-optic-cablingbandwidth supported10 mb s - 10 gb s10 mb s - 100 gb sdistancerelatively short  1 - 100 meters relatively long   1 - 100 000 meters immunity to emi and rfilowhigh  completely immune immunity to electrical hazardslowhigh  completely immune media and connector costslowesthighestinstallation skills requiredlowesthighestsafety precautionslowesthighest
4 4 utp-cabling
utp-cabling properties of utp-cablingutp has four pairs of color-coded copper wires twisted together and encased in a flexible plastic sheath  no shielding is used  utp relies on the following properties to limit crosstalk cancellation - each wire in a pair of wires uses opposite polarity  one wire is negative  the other wire is positive  they are twisted together and the magnetic fields effectively cancel each other and outside emi rfi variation in twists per foot in each wire - each wire is twisted a different amount  which helps prevent crosstalk amongst the wires in the cable 
utp-cabling utp-cabling standards and connectorsstandards for utp are established by the tia eia  tia eia-568 standardizes elements like cable-typescable-lengthsconnectorscable-terminationtesting-methodselectrical standards for copper-cabling are established by the ieee  which rates cable according to its performance  examples include category-3category-5-and-5ecategory-6
utp-cabling utp-cabling standards and connectors  cont  rj-45-connectorrj-45-socketpoorly-terminated-utp-cableproperly-terminated-utp-cable
utp-cabling straight-through and crossover utp cables cable-typestandardapplicationethernet straight-throughboth ends t568a or t568bhost to network-deviceethernet crossover  one end t568a  other end t568bhost-to-host  switch-to-switch  router-to-router  considered legacy due to most nics using auto-mdix to sense cable type and complete connectionrollovercisco proprietaryhost serial port to router or switch console-port  using an adapter
4 6 wireless-media
wireless-media properties of wireless-mediait carries electromagnetic-signals representing binary-digits using radio or microwave-frequencies  this provides the greatest mobility option  wireless-connection-numbers continue to increase some of the limitations of wireless coverage-area - effective coverage can be significantly impacted by the physical characteristics of the deployment location interference - wireless is susceptible to interference and can be disrupted by many common devices security - wireless communication coverage requires no access to a physical strand of media  so anyone can gain access to the transmission shared-medium - wlans operate in half-duplex  which means only one device can send or receive at a time  many users accessing the wlan simultaneously results in reduced bandwidth for each user 
wireless-media types of wireless-mediathe ieee and telecommunications industry standards for wireless data communicationscover both the data-link and physical-layers  in each of these standards  physical-layerspecifications dictate data to radio signal encoding methodsfrequency and power of transmissionsignal reception and decoding requirementsantenna design and constructionwireless standards wi-fi  ieee 802 11  - wireless-lan  wlan  technologybluetooth  ieee 802 15  - wireless-personal-area-network  wpan  standardwimax  ieee 802 16  - uses a point-to-multipoint-topology to provide broadband wireless-accesszigbee  ieee 802 15 4  - low data-rate  low power-consumption communications  primarily for internet of things  iot  applications
wireless-media wireless-lanin general  a wireless-lan  wlan  requires the following devices wireless-access-point  ap  - concentrate wireless-signals from users and connect to the existing copper-based network infrastructurewireless-nic-adapters - provide wireless communications capability to network hoststhere are a number of wlan standards  when purchasing wlan equipment  ensure compatibility  and interoperability network administrators must develop and apply stringent security policies and processes to protect wlans from unauthorized-access and damage 
wireless-media packet tracer   connect a wired and wireless-lanin this packet tracer  you will do the following connect to the cloudconnect a routerconnect remaining devicesverify connectionsexamine the physical-topology
wireless-media lab   view wired and wireless nic informationin this lab  you will complete the following objectives identify and work with pc nicsidentify and use the system-tray-network-icons
enterprise networking  security  and automation v7 0 ensa module 10  network management
module objectivesmodule title  network managementmodule objective   implement protocols to manage the network topic titletopic objectivedevice discovery with cdpuse cdp to map a network-topology device discovery with lldpuse lldp to map a network-topology ntpimplement ntp between an ntp client and ntp-server snmpexplain how snmp operates syslogexplain syslog operation router and switch file maintenanceuse commands to back up and restore an ios configuration-file ios image managementimplement protocols to manage the network 
10 1 device discovery with cdp
device discovery with cdp cdp overviewcdp                   cisco                        cisco    2            cdp                                             cisco                                cdp                                                                
device discovery with cdp configure and verify cdpcisco        cdp                     cdp           cdp               show-cdp                       cdp                               no-cdp-enable              cdp                          cdp                                cdp            cdp-enable                                      cdp                    cdp-run                     no-cdp-run                           cdp                       show-cdp interface               cdp                                            
device discovery with cdp discover devices by using cdp       cdp              show-cdp neighbors                                                 r1  g0 0 1                  s1           s1  f0 5           r1  show-cdp neighbors capability codes  r - router  t - trans bridge  b - source route bridges - switch  h - host  i - igmp  r - repeater  p - phone  d - remote  c - cvta  m - two-port mac relay device id   local intrfce  holdtme  capability  platform  port id s1     gig 0 0 1     179     s i   ws-c3560-  fas 0 5
device discovery with cdp discover devices by using cdp  cont            show-cdp-neighbors-detail           s1  ip                        s1      192  168 1 2    r1  show-cdp-neighbors-detail ------------------------- device id  s1 entry address es   ip-address  192 168 1 2 platform  cisco ws-c3560-24ts  capabilities  switch igmpinterface  gigabitethernet0 0 1  port id  outgoing port   fastethernet0 5holdtime   136 sec  output omitted 
10 2 device discovery with lldp
device discovery with lldp lldp overviewlink-layer-discovery-protocol  lldp   cdp                            id                            2                   
device discovery with lldp configure and verify lldplldp                         cisco           lldp                                 lldp-run            lldp                             noldp run           lldp                             lldp                lldp               lldp                 exec      showldp          switch  conf t enter configuration commands  one per line  end with cntl z  switch config   lldp-run switch config   interface gigabitethernet 0 1 switch config-if   lldp transmit switch config-if   lldp receive switch config-if   endswitch  show-lldp global lldp information  status  active lldp advertisements are sent every 30 seconds lldp hold time advertised is 120 seconds lldp interface reinitialisation delay is 2 seconds
device discovery with lldp discover devices by using lldplldp                showldp neighbors                            s1  show-lldp neighbors capability codes   r  router   b  bridge   t  telephone   c  docsis cable device  w  wlan access-point   p  repeater   s  station   o  other device id  local intf  hold-time  capability  port id r1    fa0 5   117    r    gi0 0 1 s2    fa0 1   112    b    fa0 1 total entries displayed  2
device discovery with lldp discover devices by using lldp  cont                         showldp nears detail        ios    ip                          s1  show-lldp neighbors detail ------------------------------------------------ chassis id  848a 8d44 49b0 port id  gi0 0 1 port description  gigabitethernet0 0 1 system name  r1 system description  cisco ios software  fuji   isr software  x86 64 linux       release software  fc2  technical support  http www cisco com techsupport copyright  c  1986-2019 by cisco systems  inc  compiled thu 22-aug-19 18 09 by mcpre time remaining  111 seconds system capabilities  b r enabled capabilities  r management addresses - not advertised  output omitted 
10 3 ntp
ntp time and calendar services                                                                                                                                                                                                                                            ntp             r1  clock set 20 36 00 nov 15 2019 r1   nov 15 20 36 00 000   sys-6-clockupdate  system clock has been updated from 21 32 31 utc fri nov 15 2019 to 20 36 00 utc fri nov 15 2019  configured from console by console 
ntp time and calendar services  cont                                                                          ntp                                            ntp                                                          ntp                   ntp                  ntp  udp    123        rfc 1305                  
ntp ntp operationntp                                                                                                     ntp                           15      16                                      
ntp ntp operation  cont  0                                                                1    0                                             2       2                   1              ntp           2       1   ntp                         3                                                                                                  
ntp configure and verify ntp       ntp           show-clock                             detail                                              clock                            ntp-server ip-address                      209 165 200 225  r1  ntp                ntp                  show-clock detail                             ntp    r1  show-clock detail 20 55 10 207 utc fri nov 15 2019 time source is user configurationr1  config tr1 config   ntp-server 209 165 200 225 r1 config   end r1  show-clock detail 21 01 34 563 utc fri nov 15 2019 time source is ntp
ntp configure and verify ntp  cont  show-ntp-associations   show status     r1  209 165 200 225   ntp                          r1  gps          209 165 200 225   1   ntp            show-ntp-status     r1  209 165 220 225   ntp          2                r1  show-ntp-associationsaddress       ref clock  st   when poll each delay offset disp   209 165 200 225    gps    1    61   64   377  0 481 7 480  4 261 sys peer    selected    candidate  - outlyer  x falseticker    configured r1  show-ntp-status clock is synchronized  stratum 2  reference is 209 165 200 225 nominal freq is 250 0000 hz  actual freq is 249 9995 hz  precision is 2  19 output omitted 
ntp configure and verify ntp  cont  s1      ntp-server ip-address      r1                    show-ntp-associations                         s1      ntp     192 168 1 1   r1                     r1  2         s1               ntp               3         s1 config   ntp-server 192 168 1 1 s1 config   end s1  show-ntp-associations address   ref clock    st when poll reach delay offset disp   192 168 1 1  209 165 200 225  2  12   64   377   1 066 13 616 3 840 sys peer    selected    candidate  - outlyer  x falseticker    configured output omitted s1  show-ntp-status clock is synchronized  stratum 3  reference is 192 168 1 1 nominal freq is 119 2092 hz  actual freq is 119 2088 hz  precision is 2  17 output omitted
3 2 protocols
protocols network protocol overviewnetwork-protocols define a common set of rules can be implemented on devices in softwarehardwarebothprotocols have their own functionformatrulesprotocol typedescriptionnetwork-communicationsenable two or more devices to communicate over one or more networksnetwork securitysecure data to provide authentication  data-integrity  and data-encryptionroutingenable routers to exchange route information  compare path information  and select  best-pathservice-discoveryused for the automatic detection of devices or services
protocols network protocol functionsdevices use agreed-upon protocols to communicate  protocols may have may have one or functions functiondescriptionaddressingidentifies sender and receiverreliabilityprovides guaranteed deliveryflow-controlensures-data-flows at an efficient ratesequencinguniquely labels each transmitted segment of dataerror-detectiondetermines if data became corrupted during transmissionapplication-interfaceprocess-to-process communications between network applications
protocols protocol interactionnetworks require the use of several protocols each protocol has its own function and format protocolfunctionhypertext-transfer-protocol  http governs the way a web-server and a web client interact defines content and formattransmission-control-protocol  tcp manages the individual-conversations provides guaranteed delivery manages flow-controlinternet protocol  ip delivers messages globally from the sender to the receiverethernetdelivers messages from one nic to another nic on the same ethernet local-area-network  lan 
3 3 protocol-suites
protocol-suites network protocol-suitesprotocols must be able to work with other protocols protocol-suite a group of inter-related protocols necessary to perform a communication-functionsets of rules that work together to help solve a problemthe protocols are viewed in terms of layers higher-layerslower-layers- concerned with moving data and provide services to upper-layers
protocol-suites evolution of protocol-suitesthere are several protocol-suites internet protocol-suite or tcp ip- the most common protocol-suite and maintained by the internet-engineering-task-force  ietf open-systems-interconnection  osi  protocols- developed by the international-organization-for-standardization  iso  and the international-telecommunications-union  itu appletalk- proprietary suite release by apple inc novell-netware- proprietary suite developed by novell inc 
protocol-suites tcp ip protocol exampletcp ip-protocols operate at the application  transport  and internet-layers the most common network access-layer lan protocols are ethernet and wlan  wireless-lan  
protocol-suites tcp ip protocol-suitetcp ip is the protocol-suite used by the internet and includes many protocols tcp ip is an open standard protocol-suite that is freely available to the public and can be used by any vendora standards-based protocol-suite that is endorsed by the networking industry and approved by a standards organization to ensure interoperability 
protocol-suites tcp ip communication processa web-server encapsulating and sending a web page to a client a client de-encapsulating the web page for the web browser
10 4 snmp
snmp introduction to snmpsnmp was developed to allow administrators to manage nodes on an ip-network  it enables network administrators to monitor and manage network performance  find and solve network problems  and plan for network growth snmp is an application-layer protocol that provides a message format for communication between managers and agents  the snmp system consists of three elements snmp-managersnmp-agents  managed node management-information-base  mib snmp defines how management information is exchanged between network management applications and management agents  the snmp-manager polls the agents and queries the mib for snmp-agents on udp port 161  snmp-agents send any snmp-traps to the snmp-manager on udp port 162 
snmp introduction to snmp  cont  the snmp-manager is part of a network-management-system  nms   the snmp-manager can collect information from an snmp agent by using the  get  action and can change configurations on an agent by using the  set  action  snmp-agents can forward information directly to a network manager by using  traps  the snmp agent and mib reside on snmp client devices  mibs store data about the device and operational statistics and are meant to be available to authenticated remote users  the snmp agent is responsible for providing access to the local mib 
snmp snmp operationsnmp-agents that reside on managed devices collect and store information about the device and its operation locally in the mib  the snmp-manager then uses the snmp agent to access information within the mib there are two primary snmp-manager requests  get and set  in addition to configuration  a set can cause an action to occur  like restarting a router operationdescriptionget-requestretrieves a value from a specific variable get-next-requestretrieves a value from a variable within a table  the snmp-manager does not need to know the exact variable name  a sequential search is performed to find the needed variable from within a table get-bulk-requestretrieves large blocks of data  such as multiple rows in a table  that would otherwise require the transmission of many small blocks of data   only works with snmpv2 or later  get-responsereplies to a get-request  get-next-request  and set-request sent by an nms set-requeststores a value in a specific variable 
snmp snmp operation  cont  the snmp agent responds to snmp-manager requests as follows get an mib variable - the snmp agent performs this function in response to a getrequest-pdu from the network manager  the agent retrieves the value of the requested mib variable and responds to the network manager with that value set an mib variable - the snmp agent performs this function in response to a setrequest-pdu from the network manager  the snmp agent changes the value of the mib variable to the value specified by the network manager  an snmp agent reply to a set request includes the new settings in the device 
snmp snmp agent trapstraps are unsolicited messages alerting the snmp-manager to a condition or event on the network  trap-directed notifications reduce network and agent resources by eliminating the need for some of snmp polling requests the figure illustrates the use of an snmp trap to alert the network administrator that interface g0 0 0 has failed  the nms software can send the network administrator a text message  pop up a window on the nms software  or turn the router icon red in the nms gui 
snmp snmp versionssnmpv1 - legacy standard defined in rfc 1157  uses a simple community-string based authentication method  should not be used due to security risks snmpv2c - defined in rfcs 1901-1908  uses a simple community-string based authentication method  provides for bulk retrieval options  as well as more detailed error-messages snmpv3 - defined in rfcs 3410-3415  uses username authentication  provides data protection using hmac-md5 or hmac-sha and encryption using des  3des  or aes encryption 
snmp community-stringssnmpv1 and snmpv2c use community-strings that control access to the mib  community-strings are plaintext passwords  snmp community-strings authenticate access to mib objects there are two types of community-strings read-only  ro  - this type provides access to the mib variables  but does not allow these variables to be changed  only read  because security is minimal in version 2c  many organizations use snmpv2c in read-only mode read-write  rw  - this type provides read and write access to all objects in the mib to view or set mib variables  the user must specify the appropriate community string for read or write access 
snmp mib-object-idthe mib organizes variables hierarchically  formally  the mib defines each variable as an object-id  oid   oids uniquely identify managed objects  the mib organizes the oids based on rfc standards into a hierarchy of oids  usually shown as a tree the mib tree for any given device includes some branches with variables common to many networking-devices and some branches with variables specific to that device or vendor rfcs define some common public variables  most devices implement these mib variables  in addition  networking equipment vendors  like cisco  can define their own private branches of the tree to accommodate new variables specific to their devices 
snmp mib-object-id  cont  the figure shows portions of the mib structure defined by cisco  note how the oid can be described in words or numbers to help locate a particular variable in the tree  oids belonging to cisco  are numbered as follows   iso  1  org  3  dod  6  internet  1  private  4  enterprises  1  cisco  9   therefore  the oid is 1 3 6 1 4 1 9 
snmp snmp polling scenariosnmp can be used is to observe cpu utilization over a period of time by polling devices  cpu statistics can then be compiled on the nms and graphed  this creates a baseline for the network administrator the data is retrieved via the snmpget utility  issued on the nms  using the snmpget utility  you can manually retrieve real-time data  or have the nms run a report  this report would give you a period of time that you could use the data to get the average 
snmp snmp object navigatorthe snmpget utility gives some insight into the basic mechanics of how snmp works  however  working with long mib variable names like 1 3 6 1 4 1 9 2 1 58 0 can be problematic for the average user  more commonly  the network operations staff uses a network management product with an easy-to-use gui  which makes the entire mib data variable naming transparent to the user the cisco snmp navigator on the http www cisco com website allows a network administrator to research details about a particular oid 
snmp lab - research network monitoring softwarein this lab  you will complete the following objectives part 1  survey your understanding of network monitoringpart 2  research network monitoring toolspart 3  select a network monitoring tool
3 4 standards-organizations
standards-organizations open standardsopen standards encourage interoperabilitycompetitioninnovationstandards-organizations are vendor-neutral non-profit organizations established to develop and promote the concept of open standards  
standards-organizations internet standardsinternet-society  isoc  - promotes the open development and evolution of internetinternet-architecture-board  iab  - responsible for management and development of internet standardsinternet-engineering-task-force  ietf  - develops  updates  and maintains internet and tcp ip technologiesinternet-research-task-force  irtf  - focused on long-term research related to internet and tcp ip-protocols
standards-organizations internet standards  cont  standards-organizations involved with the development and support of tcp ipinternet-corporation-for-assigned-names-and-numbers  icann  -  coordinates ip-address allocation  the management of domain-names  and assignment of other informationinternet-assigned-numbers-authority  iana  - oversees and manages ip-address allocation  domain-name-management  and protocol identifiers for icann
standards-organizations electronic and communications standardsinstitute-of-electrical-and-electronics-engineers  ieee  pronounced  i-triple-e   - dedicated to creating standards in power and energy  healthcare  telecommunications  and networkingelectronic-industries-alliance  eia  - develops standards relating to electrical wiring  connectors  and the 19-inch racks used to mount networking equipmenttelecommunications-industry-association  tia  - develops communication standards in radio equipment  cellular towers  voice-over-ip  voip  devices  satellite communications  and moreinternational-telecommunications-union-telecommunication standardization sector  itu-t  - defines standards for video compression  internet-protocol-television  iptv   and broadband communications  such as a digital-subscriber-line  dsl 
standards-organizations lab   researching networking standardsin this lab  you will do the following part 1  research networking standards-organizationspart 2  reflect on internet and computer networking experience
10 5 syslog
syslog introduction to syslogsyslog uses udp port 514 to send event notification messages across ip-networks to event message collectors  as shown in the figure the syslog logging service provides three primary functions  as follows the ability to gather logging information for monitoring and troubleshootingthe ability to select the type of logging information that is capturedthe ability to specify the destinations of captured syslog-messages
syslog syslog operationthe syslog protocol starts by sending system messages and debug output to a local logging process  syslog configuration may send these messages across the network to an external syslog-server  where they can be retrieved without needing to access the actual device  alternatively  syslog-messages may be sent to an internal buffer  messages sent to the internal buffer are only viewable through the cli of the device the network administrator may specify that only certain types of system messages be sent to various destinations  popular destinations for syslog-messages include the following logging-buffer  ram inside a router or switch console lineterminal linesyslog-server
syslog syslog-message formatcisco devices produce syslog-messages as a result of network events  every syslog-message contains a severity-level and a facility the smaller numerical levels are the more critical syslog alarms  the severity-level of the messages can be set to control where each type of message is displayed  i e  on the console or the other destinations   the complete list of syslog levels is shown in the table severity-nameseverity-levelexplanationemergencylevel 0system unusablealertlevel 1immediate action neededcriticallevel 2critical conditionerrorlevel 3error conditionwarninglevel 4warning conditionnotificationlevel 5normal  but significant conditioninformationallevel 6informational messagedebugginglevel 7debugging message
syslog syslog-facilitiesin addition to specifying the severity  syslog-messages also contain information on the facility  syslog-facilities are service identifiers that identify and categorize system state data for error and event message reporting  the logging facility options that are available are specific to the networking device some common syslog-message facilities reported on cisco-ios-routers include ipospf-protocolsys-operating-systemip-security  ipsec interface ip  if 
syslog syslog-facilities  cont  by default  the format of syslog-messages on the cisco ios software is as follows  facility-severity-mnemonic  description for example  sample output on a cisco switch for an etherchannel-link changing state to up is  link-3-updown  interface port-channel1  changed state to up here the facility is link and the severity-level is 3  with a mnemonic of updown 
syslog configure syslog timestampby default  log messages are not timestamped  log messages should be timestamped so that when they are sent to another destination  such as a syslog-server  there is record of when the message was generated  use the command service-timestamps-log-datetime to force logged events to display the date and time  r1  configure-terminal r1 config   interface g0 0 0 r1 config-if   shutdown  link-5-changed  interface gigabitethernet0 0 0  changed state to administratively down lineproto-5-updown  line protocol on interface gigabitethernet0 0 0  changed state to down r1 config-if   exit r1 config   service-timestamps-log-datetime r1 config   interface g0 0 0 r1 config-if   no-shutdown  mar 1 11 52 42   link-3-updown  interface gigabitethernet0 0 0  changed state to down  mar 1 11 52 45   link-3-updown  interface gigabitethernet0 0 0  changed state to up  mar 1 11 52 46   lineproto-5-updown  line protocol on interface gigabitethernet0 0 0  changed state to up r1 config-if  
3 1 the rules
the rules video   devices in a bubblethis video will explain the protocols that devices use to see their place in the network and communicate with other devices 
the rules communications fundamentalsnetworks can vary in size and complexity  it is not enough to have a connection  devices must agree on  how  to communicate there are three elements to any communication there will be a source  sender  there will be a destination  receiver  there will be a channel  media  that provides for the path of communications to occur 
the rules communications protocolsall communications are governed by protocols protocols are the rules that communications will follow these rules will vary depending on the protocol 
the rules rule establishmentindividuals must use established rules or agreements to govern the conversation the first message is difficult to read because it is not formatted properly  the second shows the message properly formatted
the rules rule establishment  cont  protocols must account for the following requirements an identified sender and receivercommon-language and grammarspeed and timing of deliveryconfirmation or acknowledgment-requirements
the rules network protocol requirementscommon computer protocols must be in agreement and include the following requirements  message-encodingmessage-formatting-and-encapsulationmessage-sizemessage-timingmessage-delivery-options
the rules message-encodingencoding is the process of converting information into another acceptable form for transmission  decoding reverses this process to interpret the information  
the rules message-formatting-and-encapsulationwhen a message is sent  it must use a specific format or structure  message-formats depend on the type of message and the channel that is used to deliver the message  
the rules message-sizeencoding between hosts must be in an appropriate-format for the medium messages sent across the network are converted to bitsthe bits are encoded into a pattern of light  sound  or electrical-impulses the destination-host must decode the signals to interpret the message 
the rules message-timingmessage-timing includes the following  flow-control   manages the rate of data-transmission and defines how much information can be sent and the speed at which it can be delivered response-timeout   manages how long a device waits when it does not hear a reply from the destination access-method - determines when someone can send a message  there may be various rules governing issues like  collisions   this is when more than one device sends traffic at the same time and the messages become corrupt  some protocols are proactive and attempt to prevent collisions  other protocols are reactive and establish a recovery method after the collision occurs 
the rules message-delivery-optionsmessage delivery may one of the following methods  unicast   one-to-one communicationmulticast   one-to-many  typically not allbroadcast   one-to-allnote  broadcasts are used in ipv4 networks  but are not an option for ipv6  later we will also see  anycast  as an additional delivery option for ipv6 
the rules a note about the node icondocuments may use the node icon   typically a circle  to represent all devices  the figure illustrates the use of the node icon for delivery options 
module 9  qos conceptsenterprise networking  security  and automation v7 0  ensa  
module objectivesmodule title  qos conceptsmodule objective  explain how networking-devices implement qos topic titletopic objectivenetwork-transmission qualityexplain how network-transmission characteristics impact quality traffic characteristicsdescribe minimum network requirements for voice  video  and data traffic queuing algorithmsdescribe the queuing algorithms used by networking-devices qos modelsdescribe the different qos models qos implementation techniquesexplain how qos uses mechanisms to ensure transmission quality 
9 1 network-transmission quality
network-transmission quality video   the purpose of qosthis video explains quality-of-service  qos  and why it is needed 
network-transmission quality prioritizing-trafficwhen traffic volume is greater than what can be transported across the network  devices queue  hold  the packets in memory until resources become available to transmit them queuing packets causes delay because new packets cannot be transmitted until previous packets have been processed if the number of packets to be queued continues to increase  the memory within the device fills up and packets are dropped  one qos technique that can help with this problem is to classify data into multiple queues  as shown in the figure note  a device implements qos only when it is experiencing some type of congestion 
network-transmission quality bandwidth  congestion  delay  and jitternetwork bandwidth is measured in the number of bits that can be transmitted in a single second  or bits-per-second  bps  network congestion causes delay  an interface experiences congestion when it is presented with more traffic than it can handle  network congestion points are ideal candidates for qos mechanisms the typical congestion points are aggregation  speed mismatch  and lan to wan 
network-transmission quality bandwidth  congestion  delay  and jitter  cont  delay or latency refers to the time it takes for a packet to travel from the source to the destination fixed delay is the amount of time a specific process takes  such as how long it takes to place a bit on the transmission media  variable delay takes an unspecified amount of time and is affected by factors such as how much traffic is being processed jitter is the variation of delay of received packets delaydescriptioncode delaythe fixed amount of time it takes to compress data at the source before transmitting to the first internetworking device  usually a switch packetization delaythe fixed time it takes to encapsulate a packet with all the necessary header information queuing delaythe variable amount of time a frame or packet waits to be transmitted on the link serialization delaythe fixed amount of time it takes to transmit a frame onto the wire propagation delaythe variable amount of time it takes for the frame to travel between the source and destination de-jitter delaythe fixed amount of time it takes to buffer a flow-of-packets and then send them out in evenly spaced intervals 
network-transmission quality packet-losswithout qos mechanisms  time-sensitive packets  such as real-time video and voice  are dropped with the same frequency as data that is not time-sensitive when a router receives a real-time-protocol  rtp  digital audio stream for voice-over-ip  voip   it compensates for the jitter that is encountered using a playout delay buffer  the playout delay buffer buffers these packets and then plays them out in a steady stream 
network-transmission quality packet-loss  cont  if the jitter is so large that it causes packets to be received out of the range of the play out buffer  the out-of-range packets are discarded and dropouts are heard in the audio for losses as small as one packet  the digital-signal-processor  dsp  interpolates what it thinks the audio should be and no problem is audible to the user  when jitter exceeds what the dsp can do to make up for the missing packets  audio problems are heard note  in a properly designed network  packet-loss should be near zero 
9 5 qos implementation techniques
qos implementation techniques video   qos implementation techniquesthis video will cover the following implementation tools  classification and marking  congestion avoidance  and congestion management traffic marking
qos implementation techniques avoiding packet-losspacket-loss is usually the result of congestion on an interface  most applications that use tcp experience slowdown because tcp automatically adjusts to network congestion  dropped tcp-segments cause tcp sessions to reduce their window-sizes  some applications do not use tcp and cannot handle drops  fragile flows  the following approaches can prevent drops in sensitive applications increase link capacity to ease or prevent congestion guarantee enough bandwidth and increase buffer space to accommodate bursts of traffic from fragile flows  wfq  cbwfq  and llq can guarantee bandwidth and provide prioritized forwarding to drop-sensitive applications drop lower-priority packets before congestion occurs  cisco ios qos provides queuing mechanisms  such as weighted-random-early-detection  wred   that start dropping lower-priority packets before congestion occurs 
qos implementation techniques qos toolsthere are three categories of qos tool  as described in the table qos toolsdescriptionclassification and marking toolssessions  or flows  are analyzed to determine what traffic-class they belong to  when the traffic-class is determined  the packets are marked congestion avoidance toolstraffic-classes are allotted portions of network resources  as defined by the qos policy  the qos policy also identifies how some traffic may be selectively dropped  delayed  or re-marked to avoid-congestion  the primary congestion avoidance tool is wred and is used to regulate tcp data traffic in a bandwidth-efficient manner before tail drops caused by queue overflows occur congestion management toolswhen traffic exceeds available network resources  traffic is queued to await availability of resources  common cisco ios-based congestion management tools include cbwfq and llq algorithms 
qos implementation techniques qos tools  cont  the figure shows the sequence of qos tools used when applied to packet flows ingress packets are classified and their respective ip-header is marked  to avoid-congestion  packets are then allocated resources based on defined policies  packets are then queued and forwarded out the egress interface based on their defined qos shaping and policing policy note  classification and marking can be done on ingress or egress  whereas other qos actions such queuing and shaping are usually done on egress 
qos implementation techniques classification and markingbefore a packet can have a qos policy applied to it  the packet has to be classified classification determines the class of traffic to which packets or frames belong  only after traffic is marked can policies be applied to it how a packet is classified depends on the qos implementation  methods of classifying traffic flows at layer-2 and 3 include using interfaces  acls  and class maps  traffic can also be classified at layers 4 to 7 using network based application recognition  nbar  
qos implementation techniques classification and marking  cont  how traffic is marked usually depends on the technology  the decision of whether to mark traffic at layers 2 or 3  or both  is not trivial and should be made after consideration of the following points layer-2 marking of frames can be performed for non-ip traffic layer-2 marking of frames is the only qos option available for switches that are not  ip aware  layer-3 marking will carry the qos information end-to-end qos toolslayermarking fieldwidth in bitsethernet  802 1q  802 1p class-of-service  cos 802 11  wi-fi wi-fi traffic identifier  tid mplsexperimental  exp ipv4 and ipv6ip precedence  ipp ipv4 and ipv6differentiated-services code point  dscp 
qos implementation techniques marking at layer-2802 1q is the ieee standard that supports vlan-tagging at layer-2 on ethernet-networks  when 802 1q is implemented  two fields are inserted into the ethernet-frame following the source-mac-address field 
qos implementation techniques marking at layer-2  cont  the 802 1q standard also includes the qos prioritization scheme known as ieee 802 1p  the 802 1p standard uses the first three bits in the tag-control-information  tci  field  known as the priority  pri  field  this 3-bit field identifies the class-of-service  cos  markings three bits means that a layer-2 ethernet-frame can be marked with one of eight levels of priority  values 0-7  cos valuecos binary valuedescription000best-effort data001medium-priority data010high-priority data011call signaling100videoconferencing101voice bearer  voice traffic 110reserved111reserved
qos implementation techniques marking at layer-3ipv4 and ipv6 specify an 8-bit field in their packet-headers to mark packets  both ipv4 and ipv6 support an 8-bit field for marking  the type-of-service  tos  field for ipv4 and the traffic-class field for ipv6 
qos implementation techniques type-of-service and traffic-class fieldthe type-of-service  ipv4  and traffic-class  ipv6  carry the packet marking as assigned by the qos classification tools rfc 791 specified the 3-bit ip precedence  ipp  field to be used for qos markings rfc 2474 supersedes rfc 791 and redefines the tos field by renaming and extending the ipp field to 6 bits called the differentiated-services code point  dscp  field  these six bits offer a maximum of 64 possible classes of service the remaining two ip extended congestion notification  ecn  bits can be used by ecn-aware routers to mark packets instead of dropping them  
qos implementation techniques dscp valuesthe 64 dscp values are organized into three categories best-effort  be  - this is the default for all ip-packets  the dscp value is 0  the per-hop behavior is normal routing  when a router experiences congestion  these packets will be dropped  no qos plan is implemented expedited-forwarding  ef  - rfc 3246 defines ef as the dscp decimal value 46  binary 101110   the first 3 bits  101  map directly to the layer-2 cos value 5 used for voice traffic  at layer-3  cisco recommends that ef only be used to mark voice packets assured-forwarding  af  - rfc 2597 defines af to use the 5 most significant dscp bits to indicate queues and drop preference  
qos implementation techniques dscp values  cont  assured-forwarding values are shown in the figure the afxy formula is specified as follows the first 3 most significant bits are used to designate the class  class 4 is the best queue and class 1 is the worst queue the 4th and 5th most significant bits are used to designate the drop preference the 6th most significant bit is set to zero for example  af32 belongs to class 3  binary 011  and has a medium drop preference  binary 10   the full dscp value is 28 because you include the 6th 0 bit  binary 011100  
qos implementation techniques class-selector-bitsclass selector  cs  bits the first 3 most significant bits of the dscp field and indicate the class map directly to the 3 bits of the cos field and the ipp field to maintain compatibility with 802 1p and rfc 791 
qos implementation techniques trust-boundariestraffic should be classified and marked as close to its source as technically and administratively feasible  this defines the trust boundary trusted endpoints have the capabilities and intelligence to mark application traffic to the appropriate layer-2 cos and or layer-3 dscp values  secure endpoints can have traffic marked at the layer-2 switch traffic can also be marked at layer-3 switches   routers 
qos implementation techniques congestion avoidancecongestion avoidance tools monitor network-traffic loads in an effort to anticipate and avoid-congestion at common network and internetwork bottlenecks before congestion becomes a problem they monitor network-traffic loads in an effort to anticipate and avoid-congestion at common network and internetwork bottlenecks before congestion becomes a problem they monitor the average depth of the queue  when the queue is below the minimum threshold  there are no drops  as the queue fills up to the maximum threshold  a small percentage of packets are dropped  when the maximum threshold is passed  all packets are dropped some congestion avoidance techniques provide preferential treatment for which packets get dropped weighted-random-early-detection  wred  allows for congestion avoidance on network interfaces by providing buffer management and allowing tcp traffic to decrease  or throttle back  before buffers are exhausted wred helps avoid tail drops and maximizes network use and tcp-based application performance  
qos implementation techniques shaping and policingtraffic shaping and traffic policing are two mechanisms provided by cisco ios qos software to prevent congestion traffic shaping retains excess packets in a queue and then schedules the excess for later transmission over increments of time  traffic shaping results in a smoothed packet output rate shaping is an outbound concept  packets going out an interface get queued and can be shaped  in contrast  policing is applied to inbound traffic on an interface  
qos implementation techniques shaping and policing  cont  policing is applied to inbound traffic on an interface  policing is commonly implemented by service-providers to enforce a contracted customer-information-rate  cir   however  the service-provider may also allow bursting over the cir if the service-provider s network is not currently experiencing congestion 
qos implementation techniques qos policy guidelinesqos policies must consider the full path from source to destination a few guidelines that help ensure the best experience for end users includes the following enable queuing at every device in the path between source and destination classify and mark traffic as close the source as possible shape and police traffic flows as close to their sources as possible 
9 4 qos models
qos models video   qos modelsthis video will cover the following best-effort-modelintegrated-services  intserv differentiated-services  diffserv 
qos models selecting an appropriate qos policy modelthere are three models for implementing qos  qos is implemented in a network using either intserv or diffserv  intserv provides the highest guarantee of qos  it is very resource-intensive  and therefore  not easily scalable  diffserv is less resource-intensive and more scalable  intserv and diffserv are sometimes co-deployed in network qos implementations modeldescriptionbest-effort-modelnot an implementation as qos is not explicitly configured  use when qos is not required integrated-services  intserv provides very high qos to ip-packets with guaranteed delivery  defines a signaling process for applications to signal to the network that they require special qos for a period and that bandwidth should be reserved  intserv can severely limit the scalability of a network differentiated-services  diffserv provides high scalability and flexibility in implementing qos  network-devices recognize traffic-classes and provide different levels of qos to different traffic-classes 
qos models best-effortthe basic design of the internet is best-effort packet delivery and provides no guarantees the best-effort-model treats all network packets in the same way  so an emergency voice message is treated the same way that a digital photograph attached to an email is treated benefits and drawbacks of the best-effort-model benefitsdrawbacksthe model is the most scalable there are no guarantees of delivery scalability is only limited by available bandwidth  in which case all traffic is equally affected packets will arrive whenever they can and in any order possible  if they arrive at all no special qos mechanisms are required no packets have preferential treatment it is the easiest and quickest model to deploy critical data is treated the same as casual email is treated 
qos models integrated-servicesintserv delivers the end-to-end qos that real-time applications require  explicitly manages network resources to provide qos to individual flows or streams  sometimes called microflows  uses resource reservation and admission-control mechanisms as building blocks to establish and maintain qos uses a connection-oriented approach  each individual communication must explicitly specify its traffic descriptor and requested resources to the network  the edge router performs admission control to ensure that available resources are sufficient in the network  
qos models integrated-services  cont  in the intserv model  the application requests a specific kind of service from the network before sending data  the application informs the network of its traffic profile and requests a particular kind of service that can encompass its bandwidth and delay requirements  intserv uses the resource-reservation-protocol  rsvp  to signal the qos needs of an application s traffic along devices in the end-to-end path through the network  if network-devices along the path can reserve the necessary bandwidth  the originating application can begin transmitting  if the requested reservation fails along the path  the originating application does not send any data benefitsdrawbacksexplicit end-to-end resource admission control per-request policy admission control signaling of dynamic-port-numbersresource intensive due to the stateful architecture requirement for continuous signaling  flow-based approach not scalable to large implementations such as the internet 
qos models differentiated-servicesthe differentiated-services  diffserv  qos model specifies a simple and scalable mechanism for classifying and managing network-traffic is not an end-to-end qos strategy because it cannot enforce end-to-end guarantees hosts forward traffic to a router which classifies the flows into aggregates  classes  and provides the appropriate qos policy for the classes  enforces and applies qos mechanisms on a hop-by-hop basis  uniformly applying global meaning to each traffic-class to provide both flexibility and scalability 
qos models differentiated-services  cont  diffserv divides network-traffic into classes based on business requirements  each of the classes can then be assigned a different level of service  as the packets traverse a network  each of the network-devices identifies the packet class-and services the packet according to that class  it is possible to choose many levels of service with diffserv  benefitsdrawbackshighly scalable provides many different levels of qualityno absolute guarantee of service quality requires a set of complex mechanisms to work in concert throughout the network
9 3 queuing algorithms
queuing algorithms video   qos algorithmsthis video will cover the following fifo queuing  absence of qos weighted-fair-queuing  wfq class-based weighted-fair-queuing  cbwfq low-latency-queuing  llq 
queuing algorithms queuing overviewthe qos policy implemented by the network administrator becomes active when congestion occurs on the link  queuing is a congestion management tool that can buffer  prioritize  and  if required  reorder packets before being transmitted to the destination a number of queuing algorithms are available first-in  first-out  fifo weighted-fair-queuing  wfq class-based weighted-fair-queuing  cbwfq low-latency-queuing  llq 
queuing algorithms first-in-first-outfirst-in-first-out  fifo  queuing buffers and forwards packets in the order of their arrival fifo has no concept of priority or classes of traffic and consequently  makes no decision about packet priority there is only one queue  and all packets are treated equally  packets are sent out an interface in the order in which they arrive 
queuing algorithms weighted-fair-queuing  wfq weighted-fair-queuing  wfq  is an automated scheduling method that provides fair bandwidth allocation to all network-traffic  wfq applies priority  or weights  to identified traffic  classifies it into conversations or flows  and then determines how much bandwidth each flow is allowed relative to other flows wfq classifies traffic into different flows based on source and destination-ip-addresses  mac-addresses  port-numbers  protocol  and type-of-service  tos  value wfq is not supported with tunneling and encryption because these features modify the packet content information required by wfq for classification 
queuing algorithms class-based weighted-fair-queuing  cbwfq class-based weighted-fair-queuing  cbwfq  extends the standard wfq functionality to provide support for user-defined traffic-classes  traffic-classes are defined based on match criteria including protocols  access-control-lists  acls   and input interfaces  packets satisfying the match criteria for a class-constitute the traffic for that class-a fifo queue is reserved for each class  and traffic belonging to a class is directed to the queue for that class-a class-can be assigned characteristics  such as bandwidth  weight  and maximum packet limit  the bandwidth assigned to a class is the guaranteed bandwidth delivered during congestion packets belonging to a class-are subject to the bandwidth and queue limits  which is the maximum-number of packets allowed to accumulate in the queue  that characterize the class 
queuing algorithms class-based weighted-fair-queuing  cbwfq   cont  after a queue has reached its configured queue limit  adding more packets to the class-causes tail drop or packet drop to take effect  depending on how class policy is configured  tail drop discards any packet that arrives at the tail end of a queue that has completely used up its packet-holding resources  this is the default queuing response to congestion  tail drop treats all traffic equally and does not differentiate between classes of service 
queuing algorithms low-latency-queuing  llq the low-latency-queuing  llq  feature brings strict priority queuing  pq  to cbwfq  strict pq allows delay-sensitive packets such as voice to be sent before packets in other queues  llq allows delay-sensitive packets such as voice to be sent first  before packets in other queues   giving delay-sensitive packets preferential treatment over other traffic cisco recommends that only voice traffic be directed to the priority queue 
9 2 traffic characteristics
traffic characteristics video   traffic characteristicsthis video will explain the characteristics of voice  video  and data traffic 
traffic characteristics network-traffic trendsin the early 2000s  the predominant types of ip traffic were voice and data  voice traffic has a predictable bandwidth need and known packet arrival times  data traffic is not real-time and has unpredictable bandwidth need  data traffic can temporarily burst  as when a large file is being downloaded  this bursting can consume the entire bandwidth of a link more recently  video traffic has become the increasingly important to business communications and operations  according to the cisco visual-networking-index  vni   video traffic represented 70  of all traffic in 2017  by 2022  video will represent 82  of all traffic  mobile video traffic will reach 60 9 exabytes per month by 2022  the type of demands that voice  video  and data traffic place on the network are very different 
traffic characteristics voicevoice traffic is predictable and smooth and very sensitive to delays and dropped packets  voice packets must receive a higher priority than other types of traffic  cisco products use the rtp port range 16384 to 32767 to prioritize voice traffic  voice can tolerate a certain amount of latency  jitter  and loss without any noticeable effectslatency should be no more than 150 milliseconds  ms   jitter should be no more than 30 ms  and packet-loss no more than 1   voice traffic requires at least 30 kbps of bandwidth  voice traffic characteristicsone-way requirementssmooth benign drop sensitive delay sensitive upd prioritylatency   150ms jitter   30ms loss   1  bandwidth  30-128 kbps 
traffic characteristics videovideo traffic tends to be unpredictable  inconsistent  and bursty  compared to voice  video is less resilient to loss and has a higher volume of data per packet  the number and size of video packets varies every 33 ms based on the content of the video udp ports such as 554  are used for the real-time-streaming-protocol  rstp  and should be given priority over other  less delay-sensitive  network-traffic latency should be no more than 400 milliseconds  ms   jitter should be no more than 50 ms  and video packet-loss should be no more than 1   video traffic requires at least 384 kbps of bandwidth video traffic characteristicsone-way requirementsbursty greedy drop sensitive delay sensitive upd prioritylatency   200-400 ms jitter   30-50 ms loss   0 1   1  bandwidth  384 kbps - 20 mbps 
traffic characteristics datadata applications that have no tolerance for data-loss  such as email and web pages  use tcp to ensure that if packets are lost in transit  they will be resent  data traffic can be smooth or bursty  network control traffic is usually smooth and predictable some tcp applications can consume a large portion of network capacity  ftp will consume as much bandwidth as it can get when you download a large file  such as a movie or game data traffic characteristicssmooth bursty benign greedy drop insensitive delay insensitive tcp retransmits
traffic characteristics data  cont  data traffic is relatively insensitive to drops and delays compared to voice and video  quality-of-experience or qoe is important to consider with data traffic does the data come from an interactive application is the data mission critical factormission criticalnot mission  criticalinteractiveprioritize for the lowest delay of all data traffic and strive for a 1 to 2 second response time applications could benefit from lower delay not interactivedelay can vary greatly as long as the necessary minimum bandwidth is supplied gets any leftover bandwidth after all voice  video  and other data application needs are met 
introduction to networks v7 0  itn module 10  basic router configuration
module objectivesmodule title  basic router configurationmodule objective  implement initial-settings on a router and end-devices topic titletopic objectiveconfigure initial router settingsconfigure initial-settings on an ios cisco router configure interfacesconfigure two active interfaces on a cisco-ios-router configure the default-gatewayconfigure devices to use the default-gateway 
10 1 configure initial router settings
configure initial router settings basic router configuration stepsconfigure the device name secure privileged-exec-mode secure user-exec-mode secure remote telnet   ssh-access encrypt all plaintext passwords provide legal notification and save the configuration router config   hostname hostnamerouter config   enable-secret passwordrouter config   line-console 0router config-line   password passwordrouter config-line   loginrouter config   line-vty 0 4router config-line   password passwordrouter config-line   loginrouter config-line   transport input  ssh   telnet router config   service-password-encryptionrouter config   banner-motd   message  router config   endrouter  copy-running-config-startup-config
configure initial router settings basic router configuration examplecommands for basic router configuration on r1 configuration is saved to nvram r1 config   hostname r1r1 config   enable-secret classr1 config   line-console 0r1 config-line   password ciscor1 config-line   loginr1 config-line   line-vty 0 4r1 config-line   password ciscor1 config-line   loginr1 config-line   transport input ssh telnetr1 config-line   exitr1 config   service-password-encryptionr1 config   banner-motd  enter text message  end with a new line and the                                                  warning  unauthorized-access is prohibited                                               r1 config   exitr1  copy-running-config-startup-config
configure initial router settings packet tracer   configure initial router settingsin this packet tracer  you will do the following verify the default-router configuration configure and verify the initial router configuration save the running-configuration-file 
10 2 configure interfaces
configure interfaces configure router-interfacesconfiguring a router-interface includes issuing the following commands router config   interface type-and-number router config-if   description description-text router config-if   ip-address ipv4-address subnet-mask router config-if   ipv6-address ipv6-address prefix-length router config-if   no-shutdown it is a good practice to use the description command to add information about the network connected to the interface the no-shutdown command activates the interface 
configure interfaces configure router-interfaces examplethe commands to configure interface g0 0 0 on r1 are shown here r1 config   interface gigabitethernet 0 0 0r1 config-if   description link to lanr1 config-if   ip-address 192 168 10 1 255 255 255 0r1 config-if   ipv6-address 2001 db8 acad 10  1 64r1 config-if   no-shutdownr1 config-if   exitr1 config   aug  1 01 43 53 435   link-3-updown  interface gigabitethernet0 0 0  changed state to down aug  1 01 43 56 447   link-3-updown  interface gigabitethernet0 0 0  changed state to up aug  1 01 43 57 447   lineproto-5-updown  line protocol on interface gigabitethernet0 0 0  changed state to up
configure interfaces configure router-interfaces example  cont  the commands to configure interface g0 0 1 on r1 are shown here r1 config   interface gigabitethernet 0 0 1r1 config-if   description link to r2r1 config-if   ip-address 209 165 200 225 255 255 255 252r1 config-if   ipv6-address 2001 db8 feed 224  1 64r1 config-if   no-shutdownr1 config-if   exitr1 config   aug  1 01 46 29 170   link-3-updown  interface gigabitethernet0 0 1  changed state to down aug  1 01 46 32 171   link-3-updown  interface gigabitethernet0 0 1  changed state to up aug  1 01 46 33 171   lineproto-5-updown  line protocol on interface gigabitethernet0 0 1  changed state to up
configure interfaces verify interface configurationto verify interface configuration use the show-ip-interface-brief and show-ipv6-interface brief commands shown here r1   show-ip-interface-briefinterface              ip-address      ok  method status                protocol gigabitethernet0 0 0   192 168 10 1    yes manual up                    up gigabitethernet0 0 1   209 165 200 225 yes manual up                    up vlan1                  unassigned      yes unset  administratively down down r1   show-ipv6-interface briefgigabitethernet0 0 0        up up fe80  201 c9ff fe89 45012001 db8 acad 10  1gigabitethernet0 0 1        up up fe80  201 c9ff fe89 45022001 db8 feed 224  1vlan1                       administratively down down unassigned r1 
configure interfaces configure verification commandsthe table summarizes show commands used to verify interface configuration commandsdescriptionshow-ip-interface-brief show-ipv6-interface briefdisplays all interfaces  their ip-addresses  and their current status  show-ip-route show-ipv6-routedisplays the contents of the ip-routing-tables stored in ram show-interfacesdisplays statistics for all interfaces on the device  only displays the ipv4-addressing information show-ip-interfacesdisplays the ipv4 statistics for all interfaces on a router show-ipv6-interfacesdisplays the ipv6 statistics for all interfaces on a router 
configure interfaces configure verification commands  cont  view status of all interfaces with the show-ip-interface-brief and show-ipv6-interface brief commands  shown here r1  show-ip-interface-briefinterface              ip-address      ok  method status                protocol gigabitethernet0 0 0   192 168 10 1    yes manual up                    up gigabitethernet0 0 1   209 165 200 225 yes manual up                    up vlan1                  unassigned      yes unset  administratively down down r1 r1  show-ipv6-interface briefgigabitethernet0 0 0        up up fe80  201 c9ff fe89 45012001 db8 acad 10  1gigabitethernet0 0 1        up up fe80  201 c9ff fe89 45022001 db8 feed 224  1vlan1                       administratively down down unassigned r1 
configure interfaces configure verification commands  cont  display the contents of the ip-routing-tables with the show-ip-route and show-ipv6-route commands as shown here r1  show-ip-route  output omitted gateway of last-resort is not set192 168 10 0 24 is variably subnetted  2 subnets  2 masksc        192 168 10 0 24 is directly-connected  gigabitethernet0 0 0l        192 168 10 1 32 is directly-connected  gigabitethernet0 0 0209 165 200 0 24 is variably subnetted  2 subnets  2 masksc        209 165 200 224 30 is directly-connected  gigabitethernet0 0 1l        209 165 200 225 32 is directly-connected  gigabitethernet0 0 1r1 r1  show-ipv6-route output omitted c   2001 db8 acad 10   64  0 0 via gigabitethernet0 0 0  directly-connectedl   2001 db8 acad 10  1 128  0 0 via gigabitethernet0 0 0  receivec   2001 db8 feed 224   64  0 0 via gigabitethernet0 0 1  directly-connectedl   2001 db8 feed 224  1 128  0 0 via gigabitethernet0 0 1  receivel   ff00   8  0 0 via null0  receiver1 
configure interfaces configure verification commands  cont  display statistics for all interfaces with the show-interfaces command  as shown here r1  show-interfaces gig0 0 0gigabitethernet0 0 0 is up  line protocol is up hardware is isr4321-2x1ge  address is a0e0 af0d e140  bia  a0e0 af0d e140 description  link to laninternet address is 192 168 10 1 24mtu 1500 bytes  bw 100000 kbit sec  dly 100 usec  reliability 255 255  txload 1 255  rxload 1 255encapsulation arpa  loopback not setkeepalive not supported full-duplex  100mbps  link type is auto  media type is rj45output flow-control is off  input flow-control is offarp type  arpa  arp timeout 04 00 00last input 00 00 01  output 00 00 35  output hang neverlast clearing of  show interface  counters neverinput queue  0 375 0 0  size max drops flushes   total output     drops  0queueing strategy  fifooutput queue  0 40  size max 5 minute input rate 0 bits sec  0 packets sec5 minute output rate 0 bits sec  0 packets sec1180 packets input  109486 bytes  0 no bufferreceived 84 broadcasts  0 ip multicasts 0 runts  0 giants  0 throttles  output omitted r1 
configure interfaces configure verification commands  cont  display ipv4 statistics for router-interfaces with the show-ip-interface command  as shown here r1  show-ip-interface g0 0 0gigabitethernet0 0 0 is up  line protocol is upinternet address is 192 168 10 1 24broadcast address is 255 255 255 255address determined by setup commandmtu is 1500 byteshelper address is not setdirected broadcast forwarding is disabledoutgoing common access list is not set outgoing access list is not setinbound common access list is not set inbound  access list is not setproxy arp is enabledlocal proxy arp is disabledsecurity level is defaultsplit horizon is enabledicmp-redirects are always senticmp-unreachables are always senticmp mask replies are never sentip fast-switching is enabledip flow switching is disabled output omitted r1 
configure interfaces configure verification commands  cont  display ipv6 statistics for router-interfaces with the show-ipv6-interface command shown here r1  show-ipv6-interface g0 0 0gigabitethernet0 0 0 is up  line protocol is upipv6 is enabled  link-local-address is fe80  868a 8dff fe44 49b0no virtual link-local-address es  description  link to langlobal-unicast-address es  2001 db8 acad 10  1  subnet is 2001 db8 acad 10   64joined group address es  ff02  1ff02  1 ff00 1ff02  1 ff44 49b0mtu is 1500 bytesicmp error-messages limited to one every 100 millisecondsicmp-redirects are enabledicmp-unreachables are sentnd dad is enabled  number of dad attempts  1nd reachable time is 30000 milliseconds  using 30000 nd ns retransmit interval is 1000 millisecondsr1 
10 3 configure the default-gateway
configure the default-gateway default-gateway on a hostthe default-gateway is used when a host sends a packet to a device on another network the default-gateway address is generally the router-interface-address attached to the local-network of the host to reach pc3  pc1 addresses a packet with the ipv4-address of pc3  but forwards the packet to its default-gateway  the g0 0 0 interface of r1 note  the ip-address of the host and the router-interface must be in the same network 
configure the default-gateway default-gateway on a switcha switch must have a default-gateway address configured to remotely manage the switch from another network to configure an ipv4 default-gateway on a switch  use the ip-default-gateway ip-address global-configuration-command media is working on a corrected version of the graphic from 10 3 2 it is wrong on ar  and on the global bug liststop
configure initial router settings packet tracer   connect a router to a lanin this packet tracer  you will do the following display the router information configure router-interfaces  verify the configuration 
configure initial router settings packet tracer   troubleshoot default-gateway issuesin this packet tracer  you will do the following verify the network documentation and use tests to isolate problems determine an appropriate solution for a given problem implement the solution test to verify the problem is resolved document the solution 
11 4 router-hardware
router-hardware router requirementsrouters use the network-portion  prefix  of the destination-ip-address to route packets to the proper destination  they select an alternate path if a link goes down  all hosts on a network specify the ip-address of the local-router-interface as their default-gateway  routers also serve other beneficial functions as follows they provide broadcast containment by limiting broadcasts to the local-network they interconnect geographically separated locations the group users logically by application or department within a company  who have command needs or require access to the same resources they provide enhanced security by filtering unwanted traffic through access-control-lists 
router-hardware cisco routersbranch routers  shown in the figure  optimize branch services on a single platform while delivering an optimal application experience across branch and wan infrastructures  shown are the cisco integrated-services router  isr  4000 series routers 
router-hardware cisco routers  cont  network edge routers  shown in the figure  enable the network edge to deliver high-performance  highly secure  and reliable services that unite campus  data-center  and branch networks  shown are the cisco aggregation services routers  asr  9000 series routers 
router-hardware cisco routers  cont  service-provider routers  shown in the figure  deliver end-to-end scalable solutions and subscriber-aware services  shown are the cisco network-convergence-system  ncs  6000 series routers 
router-hardware cisco routers  cont  industrial routers  such as the ones shown in the figure  are designed to provide enterprise-class features in rugged and harsh environments  shown are the cisco 1100 series industrial integrated-services routers 
router-hardware router form factorscisco 900 series  this is a small branch office router  it combines wan  switching  security  and advanced connectivity options in a compact  fanless platform for small and medium-sized businesses 
router-hardware router form factorscisco asr 9000 and 1000 series aggregation services routers  these routers provide density and resiliency with programmability  for a scalable network edge 
router-hardware router form factorscisco network-convergence-system 5500 series routers  these routers are designed to efficiently scale between large data-centers and large enterprise-networks  web  and service-provider wan and aggregation networks 
router-hardware router form factorscisco 800 industrial integrated-services router  this router is compact and designed for harsh environments 
14 3 basic router configuration review
basic router configuration review topologythe topology in the figure will be used for configuration and verification examples  it will also be used in the next topic to discuss the ip-routing-table 
basic router configuration review configuration commandsrouter  enable router  configure-terminal enter configuration commands  one per line  end with cntl z  router config   hostname r1 r1 config   enable-secret class r1 config   line-console 0 r1 config-line   logging synchronous r1 config-line   password cisco r1 config-line   login r1 config-line   exit r1 config   line-vty 0 4 r1 config-line   password cisco r1 config-line   login r1 config-line   transport input ssh telnet r1 config-line   exit r1 config   service-password-encryption r1 config   banner-motd   enter text message  end with a new line and the                                                   warning  unauthorized-access is prohibited                                                  r1 config   ipv6-unicast-routing r1 config   interface gigabitethernet 0 0 0 r1 config-if   description link to lan 1 r1 config-if   ip-address 10 0 1 1 255 255 255 0 r1 config-if   ipv6-address 2001 db8 acad 1  1 64 r1 config-if   ipv6-address fe80  1 a link-local r1 config-if   no-shutdown r1 config-if   exit r1 config   interface gigabitethernet 0 0 1 r1 config-if   description link to lan 2 r1 config-if   ip-address 10 0 2 1 255 255 255 0 r1 config-if   ipv6-address 2001 db8 acad 2  1 64 r1 config-if   ipv6-address fe80  1 b link-local r1 config-if   no-shutdown r1 config-if   exit r1 config   interface serial 0 1 1 r1 config-if   description link to r2 r1 config-if   ip-address 10 0 3 1 255 255 255 0 r1 config-if   ipv6-address 2001 db8 acad 3  1 64 r1 config-if   ipv6-address fe80  1 c link-local r1 config-if   no-shutdown r1 config-if   exit r1  copy-running-config-startup-config destination filename  startup-config   building configuration     ok  r1 
basic router configuration review verification commandscommon verification commands include the following show-ip-interface-briefshow-running-config-interface interface-type numbershow-interfacesshow-ip-interfaceshow-ip-routepingin each case  replace ip with ipv6 for the ipv6 version of the command 
basic router configuration review filter command outputfiltering commands can be used to display specific sections of output  to enable the filtering command  enter a pipe     character after the show command and then enter a filtering parameter and a filtering-expression the filtering parameters that can be configured after the pipe include section - this displays the entire section that starts with the filtering-expression include - this includes all output lines that match the filtering-expression exclude - this excludes all output lines that match the filtering-expression begin - this displays all the output lines from a certain point  starting with the line that matches the filtering-expression note  output filters can be used in combination with any show command 
basic router configuration review packet tracer - basic router configuration reviewin this packet tracer  you will do the following configure devices and verify connectivitydisplay router information
15 4 configure floating static-routes
configure floating static-routes floating static-routesanother type of static-route is a floating-static-route  floating static-routes are static-routes that are used to provide a backup path to a primary static or dynamic route  the floating-static-route is only used when the primary-route is not available to accomplish this  the floating-static-route is configured with a higher administrative-distance than the primary-route  the administrative-distance represents the trustworthiness of a route  if multiple paths to the destination exist  the router will choose the path with the lowest administrative-distance by default  static-routes have an administrative-distance of 1  making them preferable to routes learned from dynamic-routing-protocols  the administrative-distance of a static-route can be increased to make the route less desirable than that of another static-route or a route learned through a dynamic-routing-protocol  in this way  the static-route  floats  and is not used when the route with the better administrative-distance is active  
configure floating static-routes configure ipv4 and ipv6 floating static-routesthe commands to configure default and floating ip default-routes are as follows the show-ip-route and show-ipv6-route output verifies that the default-routes to r2 are installed in the routing-table  note that the ipv4 floating-static-route to r3 is not present in the routing-table  r1 config   ip route 0 0 0 0 0 0 0 0 172 16 2 2 r1 config   ip route 0 0 0 0 0 0 0 0 10 10 10 2 5 r1 config   ipv6 route    0 2001 db8 acad 2  2 r1 config   ipv6 route    0 2001 db8 feed 10  2 5
configure floating static-routes test the floating static-routeswhat would happen if r2 failed  to simulate this  r2 shuts down both of its serial interfaces r1 automatically generates syslog-messages for the link going down a look at r1 s routing-table would show the secondary route being used 
15 3 configure ip default static-routes
configure ip default static-routes default-static-routea default-route is a static-route that matches all packets  a single default-route represents any network that is not in the routing-table routers commonly use default-routes that are either configured locally or learned from another-router  the default-route is used as the gateway of last-resort default static-routes are commonly used when connecting an edge router to a service-provider network  or a stub router  a router with only one upstream neighbor router  the figure shows a typical default-static-route scenario 
configure ip default static-routes default-static-route  cont  ipv4 default-static-route  the command syntax for an ipv4 default-static-route is similar to any other ipv4 static-route  except that the network address is 0 0 0 0 and the subnet-mask is 0 0 0 0  the 0 0 0 0 0 0 0 0 in the route will match any network address note  an ipv4 default-static-route is commonly referred to as a quad-zero-route the basic command syntax for an ipv4 default-static-route is as follows router config   ip route 0 0 0 0 0 0 0 0  ip-address   exit-intf ipv6 default-static-route  the command syntax for an ipv6 default-static-route is similar to any other ipv6 static-route  except that the ipv6-prefix prefix-length is    0  which matches all routes the basic command syntax for an ipv6 default-static-route is as follows router config   ipv6 route    0  ipv6-address   exit-intf 
configure ip default static-routes configure a default-static-routethe example shows an ipv4 default-static-route configured on r1  with the configuration shown in the example  any packets not matching more specific route entries are forwarded to r2 at 172 16 2 2 r1 config   ip route 0 0 0 0 0 0 0 0 172 16 2 2an ipv6 default-static-route is configured in similar fashion  with this configuration any packets not matching more specific ipv6 route entries are forwarded to r2 at 2001 db8 acad 2  2r1 config   ipv6 route    0 2001 db8 acad 2  2
configure ip default static-routes verify a default-static-routethe show-ip-route static command output from r1 displays the contents of the static-routes in the routing-table  note the asterisk     next to the route with code  s   the asterisk indicates that this static-route is a candidate default-route  which is why it is selected as the gateway of last-resort notice that the static default-route configuration uses the  0 mask for ipv4 default-routes  remember that the ipv4 subnet-mask in a routing-table determines how many bits must match between the destination-ip-address of the packet and the route in the routing-table  a  0 mask indicates that none of the bits are required to match  as long as a more specific match does not exist  the default-static-route matches all packets 
configure ip default static-routes verify a default-static-route  cont  this example shows the show-ipv6-route-static command output to display the contents of the routing-table notice that the static default-route configuration uses the    0 prefix for ipv6 default-routes  remember that the ipv6 prefix-length in a routing-table determines how many bits must match between the destination-ip-address of the packet and the route in the routing-table  a    0 prefix indicates that none of the bits are required to match  as long as a more specific match does not exist  the default-static-route matches all packets 
15 2 configure ip static-routes
configure ip static-routes ipv4 next-hop static-routein a next-hop static-route  only the next-hop ip-address is specified  the exit-interface is derived from the next-hop  for example  three next-hop ipv4 static-routes are configured on r1 using the ip-address of the next-hop  r2 r1 config   ip route 172 16 1 0 255 255 255 0 172 16 2 2 r1 config   ip route 192 168 1 0 255 255 255 0 172 16 2 2 r1 config   ip route 192 168 2 0 255 255 255 0 172 16 2 2the resulting routing-table entries on r1 
configure ip static-routes ipv6 next-hop static-routethe commands to configure r1 with the ipv6 static-routes to the three remote-networks are as follows r1 config   ipv6-unicast-routing r1 config   ipv6 route 2001 db8 acad 1   64 2001 db8 acad 2  2 r1 config   ipv6 route 2001 db8 cafe 1   64 2001 db8 acad 2  2 r1 config   ipv6 route 2001 db8 cafe 2   64 2001 db8 acad 2  2the routing-table for r1 now has routes to the three remote ipv6 networks 
configure ip static-routes ipv4 directly-connected static-routewhen configuring a static-route  another option is to use the exit-interface to specify the next-hop address   three directly-connected ipv4 static-routes are configured on r1 using the exit-interface note  using a next-hop address is generally recommended  directly-connected static-routes should only be used with point-to-point serial interfaces   r1 config   ip route 172 16 1 0 255 255 255 0 s0 1 0 r1 config   ip route 192 168 1 0 255 255 255 0 s0 1 0 r1 config   ip route 192 168 2 0 255 255 255 0 s0 1 0
configure ip static-routes ipv6 directly-connected static-routein the example  three directly-connected ipv6 static-routes are configured on r1 using the exit-interface note  using a next-hop address is generally recommended  directly-connected static-routes should only be used with point-to-point serial interfaces  r1 config   ipv6 route 2001 db8 acad 1   64 s0 1 0 r1 config   ipv6 route 2001 db8 cafe 1   64 s0 1 0 r1 config   ipv6 route 2001 db8 cafe 2   64 s0 1 0
configure ip static-routes ipv4 fully-specified-static-routein a fully-specified-static-route  both the exit-interface and the next-hop ip-address are specified  this form of static-route is used when the exit-interface is a multi-access interface and it is necessary to explicitly identify the next-hop  the next-hop must be directly-connected to the specified exit-interface  using an exit-interface is optional  however it is necessary to use a next-hop address it is recommended that when the exit-interface is an ethernet-network  that the static-route includes a next-hop address  you can also use a fully-specified-static-route that includes both the exit-interface and the next-hop address 
configure ip static-routes ipv6 fully-specified-static-routein a fully-specified-static-route  both the exit-interface and the next-hop ipv6-address are specified  there is a situation in ipv6 when a fully-specified-static-route must be used  if the ipv6 static-route uses an ipv6-link-local-address as the next-hop address  use a fully-specified-static-route  the figure shows an example of a fully specified ipv6 static-route using an ipv6-link-local-address as the next-hop address 
configure ip static-routes ipv6 fully-specified-static-route  cont  the reason a fully-specified-static-route must be used is because ipv6-link-local-addresses are not contained in the ipv6 routing-table  link-local-addresses are only unique on a given link or network  the next-hop link-local-address may be a valid address on multiple networks connected to the router  therefore  it is necessary that the exit-interface be included the following example shows the ipv6 routing-table entry for this route  notice that both the next-hop link-local-address and the exit-interface are included 
configure ip static-routes verify a static-routealong with show-ip-route  show-ipv6-route  ping and traceroute  other useful commands to verify static-routes include the following show-ip-route staticshow-ip-route networkshow-running-config   section ip routereplace ip with ipv6 for the ipv6 versions of the command 
15 5 configure static-host-routes
configure static-host-routes host routesa host route is an ipv4-address with a 32-bit mask  or an ipv6-address with a 128-bit mask  the following shows the three ways a host route can be added to the routing-table automatically installed when an ip-address is configured on the routerconfigured as a static-host-routehost route automatically obtained through other methods  discussed in later courses 
configure static-host-routes automatically installed host routescisco ios automatically installs a host route  also known as a local-host route  when an interface-address is configured on the router  a host route allows for a more efficient process for packets that are directed to the router itself  rather than for packet-forwarding  this is in addition to the connected route  designated with a c in the routing-table for the network address of the interface the local-routes are marked with l in the output of the routing-table 
configure static-host-routes static-host-routesa host route can be a manually-configured static-route to direct traffic to a specific destination-device  such as the server shown in the figure  the static-route uses a destination-ip-address and a 255 255 255 255   32  mask for ipv4 host routes  and a  128 prefix-length for ipv6 host routes 
configure static-host-routes configure static-host-routesthe example shows the ipv4 and ipv6 static-host-route configuration on the branch router to access the server branch config   ip route 209 165 200 238 255 255 255 255 198 51 100 2branch config   ipv6 route 2001 db8 acad 2  238 128 2001 db8 acad 1  2branch config   exit branch 
configure static-host-routes verify static-host-routesa review of both the ipv4 and ipv6 route tables verifies that the routes are active 
configure static-host-routes configure ipv6 static-host-route with link-local next-hopfor ipv6 static-routes  the next-hop address can be the link-local-address of the adjacent router  however  you must specify an interface type and an interface number when using a link-local-address as the next-hop  as shown in the example  first  the original ipv6 static-host-route is removed  then a fully specified route configured with the ipv6-address of the server and the ipv6-link-local-address of the isp-router 
8 4 how a host routes
how a host routes host-forwarding-decisionpackets are always created at the source each host devices creates their own routing-table a host can send packets to the following itself   127 0 0 1  ipv4     1  ipv6 local-hosts   destination is on the same lanremote-hosts   devices are not on the same lan 
how a host routes host-forwarding-decision  cont  the source device determines whether the destination is local or remotemethod of determination ipv4   source uses its own ip-address and subnet-mask  along with the destination-ip-addressipv6   source uses the network address and prefix advertised by the local-routerlocal-traffic is dumped out the host interface to be handled by an intermediary device remote traffic is forwarded directly to the default-gateway on the lan 
how a host routes default-gatewaya router or layer-3 switch can be a default-gateway features of a default-gateway  dgw  it must have an ip-address in the same range as the rest of the lan it can accept data from the lan and is capable of forwarding traffic off of the lan it can route to other networks if a device has no default-gateway or a bad default-gateway  its traffic will not be able to leave the lan 
how a host routes a host routes to the default-gatewaythe host will know the default-gateway  dgw  either statically or through dhcp in ipv4 ipv6 sends the dgw through a router-solicitation  rs  or can be configured manually a dgw is static-route which will be a last-resort route in the routing-table all device on the lan will need the dgw of the router if they intend to send traffic remotely 
how a host routes  host routing-tableson windows  route print or netstat--r to display the pc routing-tablethree sections displayed by these two commands interface list   all potential interfaces and mac-addressingipv4 routing-tableipv6 routing-table
8 5 introduction to routing
introduction to routing router packet-forwarding decisionwhat happens when the router receives the frame from the host device 
introduction to routing ip router routing-tablethere three types of routes in a router s routing-table directly-connected   these routes are automatically added by the router  provided the interface is active and has addressing remote   these are the routes the router does not have a direct-connection and may be learned manually   with a static-routedynamically   by using a routing-protocol to have the routers share their information with each otherdefault-route   this forwards all traffic to a specific direction when there is not a match in the routing-table 
introduction to routing static-routingstatic-route characteristics must be configured manuallymust be adjusted manually by the administrator when there is a change in the topologygood for small non-redundant-networksoften used in conjunction with a dynamic-routing-protocol for configuring a default-route
introduction to routing dynamic-routingdynamic routes automatically discover remote-networksmaintain up-to-date informationchoose the best-path to the destinationfind new best-paths when there is a topology changedynamic-routing can also share static default-routes with the other-routers 
introduction to routing video   ipv4 router routing-tablesthis video will explain the information in the ipv4 router routing-table 
introduction to routing introduction to an ipv4 routing-tablethe show-ip-route command shows the following route-sources l - directly-connected local interface ip-addressc   directly-connected-networks   static-route was manually-configured by an administratoro    ospfd   eigrpthis command shows types of routes directly-connected   c and lremote routes   o  d  etc default-routes   s  
14 4 ip-routing-table
ip-routing-table route-sourcesa routing-table contains a list of routes to known networks  prefixes and prefix-lengths   the source of this information is derived from the following directly-connected-networksstatic-routesdynamic-routing-protocolsthe source for each route in the routing-table is identified by a code  common codes include the following l - identifies the address assigned to a router-interface  c - identifies a directly-connected-network s - identifies a static-route created to reach a specific network o - identifies a dynamically-learned network from another-router using the ospf routing-protocol   - this route is a candidate for a default-route 
ip-routing-table routing-table principlesthere are three routing-table principles as described in the table  these are issues that are addressed by the proper configuration of dynamic-routing-protocols or static-routes on all the routers between the source and destination-devices routing-table principleexampleevery router makes its decision alone  based on the information it has in its own routing-table r1 can only forward packets using its own routing-table  r1 does not know what routes are in the routing-tables of other-routers  e g   r2  the information in a routing-table of one router does not necessarily match the routing-table of another-router just because r1 has route in its routing-table to a network in the internet via r2  that does not mean that r2 knows about that same network routing-information about a path does not provide return routing-information r1 receives a packet with the destination-ip-address of pc1 and the source ip-address of pc3  just because r1 knows to forward the packet out its g0 0 0 interface  doesn t necessarily mean that it knows how to forward packets originating from pc1 back to the remote-network of pc3
ip-routing-table routing-table entriesin the figure  the numbers identify the following information route-source - this identifies how the route was learned destination-network  prefix and prefix-length  - this identifies the address of the remote-network administrative-distance - this identifies the trustworthiness of the route-source  lower values indicate preferred route-source metric - this identifies the value assigned to reach the remote-network  lower values indicate preferred routes next-hop - this identifies the ip-address of the next router to which the packet would be forwarded route-timestamp - this identifies how much time has passed since the route was learned exit-interface - this identifies the egress interface to use for outgoing packets to reach their final destination note  the prefix-length of the destination-network specifies the minimum number of far-left bits that must match between the ip-address of the packet and the destination-network  prefix  for this route to be used 
ip-routing-table directly-connected-networksto learn about any remote-networks  the router must have at least one active interface configured with an ip-address and subnet-mask  prefix-length   this is known as a directly-connected-network or a directly-connected route  routers add a directly-connected route to its routing-table when an interface is configured with an ip-address and is activated a directly-connected-network is denoted by a status-code of c in the routing-table  the route contains a network-prefix and prefix-length the routing-table also contains a local-route for each of its directly-connected-networks  indicated by the status-code of l  for ipv4 local-routes the prefix-length is  32 and for ipv6 local-routes the prefix-length is  128  this means the destination-ip-address of the packet must match all the bits in the local-route for this route to be a match  the purpose of the local-route is to efficiently determine when it receives a packet for the interface instead of a packet that needs to be forwarded 
ip-routing-table static-routesafter directly-connected interfaces are configured and added to the routing-table  static or dynamic-routing can be implemented for accessing remote-networks  static-routes are manually-configured  they define an explicit path between two networking-devices  they are not automatically updated and must be manually reconfigured if the network-topology changes  static-routing has three primary uses it provides ease of routing-table maintenance in smaller-networks that are not expected to grow significantly it uses a single default-route to represent a path to any network that does not have a more specific match with another route in the routing-table  default-routes are used to send traffic to any destination beyond the next upstream router it routes to and from stub-networks  a stub-network is a network accessed by a single-route  and the router has only one neighbor 
ip-routing-table static-routes in the ip-routing-tablethe topology in the figure is simplified to show only one lan attached to each router  the figure shows ipv4 and ipv6 static-routes configured on r1 to reach the 10 0 4 0 24 and 2001 db8 acad 4   64 networks on r2  
ip-routing-table dynamic-routing-protocolsdynamic-routing-protocols are used by routers to automatically share information about the reachability and status of remote-networks  dynamic-routing-protocols perform several activities  including network discovery and maintaining routing-tables 
ip-routing-table dynamic routes in the routing-tableospf is now being used in our sample topology to dynamically learn all the networks connected to r1 and r2  the routing-table entries use the status-code of o to indicate the route was learned by the ospf routing-protocol  both entries also include the ip-address of the next-hop router  via ip-address note  ipv6 routing-protocols use the link-local-address of the next-hop router note  ospf routing configuration for ipv4 and ipv6 is beyond the scope of this course r1  show-ip-route codes  l - local  c - connected  s - static  r - rip  m - mobile  b - bgp d - eigrp  ex - eigrp external  o - ospf  ia - ospf inter area  output omitted for brevity  o 10 0 4 0 24  110 50  via 10 0 3 2  00 24 22  serial0 1 1 o 10 0 5 0 24  110 50  via 10 0 3 2  00 24 15  serial0 1 1 r1  show-ipv6-route ipv6 routing-table - default - 10 entries  output omitted  ndr - redirect  rl - rpl  o - ospf intra  oi - ospf inter o 2001 db8 acad 4   64  110 50  via fe80  2 c  serial0 1 1 o 2001 db8 acad 5   64  110 50  via fe80  2 c  serial0 1 1
ip-routing-table default-routethe default-route specifies a next-hop router to use when the routing-table does not contain a specific route that matches the destination-ip-address  a default-route can be either a static-route or learned automatically from a dynamic-routing-protocol  a default-route has an ipv4 route-entry of 0 0 0 0 0 or an ipv6 route-entry of    0  this means that zero or no bits need to match between the destination-ip-address and the default-route 
ip-routing-table structure of an ipv4 routing-tableipv4 was standardized using the now obsolete classful-addressing-architecture  the ipv4 routing-table is organized using this same classful structure  although the lookup process no longer uses classes  the structure of the ipv4 routing-table still retains in this format an indented entry is known as a child-route  a route-entry is indented if it is the subnet of a classful-address  class-a  b or c network   directly-connected-networks will always be indented  child-routes  because the local-address of the interface is always entered in the routing-table as a  32  the child-route will include the route-source and all the forwarding information such as the next-hop address  the classful-network-address of this subnet will be shown above the route-entry  less indented  and without a source-code  that route is known as a parent-route 
ip-routing-table structure of an ipv4 routing-tablean indented entry is known as a child-route  a route-entry is indented if it is the subnet of a classful-address  class-a  b or c network   directly-connected-networks will always be indented  child-routes  because the local-address of the interface is always entered in the routing-table as a  32  the child-route will include the route-source and all the forwarding information such as the next-hop address  the classful-network-address of this subnet will be shown above the route-entry  less indented  and without a source-code  that route is known as a parent-route router  show-ip-route  output omitted  192 168 1 0 24 is variably  c    192 168 1 0 24 is direct  l    192 168 1 1 32 is direct  o    192 168 2 0 24  110 65   o    192 168 3 0 24  110 65   192 168 12 0 24 is variab  c    192 168 12 0 30 is direct  l    192 168 12 1 32 is direct  192 168 13 0 24 is variably  c    192 168 13 0 30 is direct  l    192 168 13 1 32 is direct  192 168 23 0 30 is subnette  o    192 168 23 0 30  110 128   router 
ip-routing-table structure of an ipv6 routing-tablethe concept of classful-addressing was never part of ipv6  so the structure of an ipv6 routing-table is very straight forward  every ipv6 route-entry is formatted and aligned the same way r1  show-ipv6-route  output omitted for brevity  oe2    0  110 1   tag 2 via fe80  2 c  serial0 0 1 c 2001 db8 acad 1   64  0 0  via gigabitethernet0 0 0  directly-connected l 2001 db8 acad 1  1 128  0 0  via gigabitethernet0 0 0  receive c 2001 db8 acad 2   64  0 0  via gigabitethernet0 0 1  directly-connected l 2001 db8 acad 2  1 128  0 0  via gigabitethernet0 0 1  receive c 2001 db8 acad 3   64  0 0  via serial0 1 1  directly-connected l 2001 db8 acad 3  1 128  0 0  via serial0 1 1  receive o 2001 db8 acad 4   64  110 50  via fe80  2 c  serial0 1 1 o 2001 db8 acad 5   64  110 50  via fe80  2 c  serial0 1 1 l ff00   8  0 0  via null0  receive r1 
ip-routing-table administrative-distancea route-entry for a specific network address  prefix and prefix-length  can only appear once in the routing-table  however  it is possible that the routing-table learns about the same network address from more than one routing-source  except for very specific circumstances  only one dynamic-routing-protocol should be implemented on a router  each routing-protocol may decide on a different path to reach the destination based on the metric of that routing-protocol this raises a few questions  such as the following how does the router know which source to use which route should it install in the routing-table  cisco ios uses what is known as the administrative-distance  ad  to determine the route to install into the ip-routing-table  the ad represents the  trustworthiness  of the route  the lower the ad  the more trustworthy the route-source 
ip-routing-table administrative-distance  cont  the table lists various routing-protocols and their associated ads route-sourceadministrative-distancedirectly-connectedstatic-routeeigrp-summary-routeexternal-bgp20internal-eigrp90ospf110is-is115rip120external-eigrp170internal-bgp200
14 2 packet-forwarding
packet-forwarding packet-forwarding decision processthe data-link frame with an encapsulated ip-packet arrives on the ingress interface the router examines the destination-ip-address in the packet-header and consults its ip-routing-table the router finds the longest matching prefix in the routing-table the router encapsulates the packet in a data-link frame and forwards it out the egress interface  the destination could be a device connected to the network or a next-hop router however  if there is no matching route-entry the packet is dropped 
packet-forwarding packet-forwarding decision process  cont  after a router has determined the best-path  it could do the following forward the packet to a device on a directly-connected-networkif the route-entry indicates that the egress interface is a directly-connected-network  the packet can be forwarded directly to the destination-device  typically this is an ethernet-lan to encapsulate the packet in the ethernet-frame  the router needs to determine the destination-mac-address associated with the destination-ip-address of the packet  the process varies based on whether the packet is an ipv4 or ipv6-packet 
packet-forwarding packet-forwarding decision process  cont  after a router has determined the best-path  it could do the following  forward the packet to a next-hop routerif the route-entry indicates that the destination-ip-address is on a remote-network  meaning a device on network that is not directly-connected  the packet must be forwarded to the next-hop router  the next-hop address is indicated in the route-entry if the forwarding-router and the next-hop router are on an ethernet-network  a similar process  arp and icmpv6 neighbor-discovery  will occur for determining the destination-mac-address of the packet as described previously  the difference is that the router will search for the ip-address of the next-hop router in its arp-table or neighbor-cache  instead of the destination-ip-address of the packet note  this process will vary for other types of layer-2 networks 
packet-forwarding packet-forwarding decision process  cont  after a router has determined the best-path  it could do the following drop the packet - no match in routing-tableif there is no match between the destination-ip-address and a prefix in the routing-table  and if there is no default-route  the packet will be dropped 
packet-forwarding end-to-end packet-forwardingthe primary responsibility of the packet-forwarding function is to encapsulate packets in the appropriate data-link frame type for the outgoing-interface  for example  the data-link frame format for a serial-link could be point-to-point  ppp  protocol  high-level data-link control  hdlc  protocol  or some other layer-2 protocol 
packet-forwarding packet-forwarding mechanismsthe primary responsibility of the packet-forwarding function is to encapsulate packets in the appropriate data-link frame type for the outgoing-interface  the more efficiently a router can perform this task  the faster-packets can be forwarded by the router  routers support the following three packet-forwarding mechanisms process-switchingfast-switchingcisco-express-forwarding  cef 
packet-forwarding packet-forwarding mechanisms  cont  process-switching  an older packet-forwarding mechanism still available for cisco routers  when a packet arrives on an interface  it is forwarded to the control-plane where the cpu matches the destination address with an entry in its routing-table  and then determines the exit-interface and forwards the packet  it is important to understand that the router does this for every packet  even if the destination is the same for a stream of packets 
packet-forwarding packet-forwarding mechanisms  cont  fast-switching  another  older packet-forwarding mechanism which was the successor to process-switching  fast-switching uses a fast-switching cache to store next-hop information  when a packet arrives on an interface  it is forwarded to the control-plane where the cpu searches for a match in the fast-switching cache  if it is not there  it is process-switched and forwarded to the exit-interface  the flow information for the packet is then stored in the fast-switching cache  if another packet going to the same destination arrives on an interface  the next-hop information in the cache is re-used without cpu intervention 
packet-forwarding packet-forwarding mechanisms  cont  cisco-express-forwarding  cef   the most recent and default cisco ios packet-forwarding mechanism  cef builds a forwarding-information-base  fib   and an adjacency-table  the table entries are not packet-triggered like fast-switching but change-triggered  such as when something changes in the network-topology  when a network has converged  the fib and adjacency-tables contain all the information that a router would have to consider when forwarding a packet  
module 16  troubleshoot static and default-routesswitching  routing and wireless essentials v7 0  srwe 
module objectivesmodule title  troubleshoot static and default-routesmodule objective  troubleshoot static and default-route configurations topic titletopic objectivepacket processing with static-routes explain how a router processes packets when a static-route is configured troubleshoot ipv4 static and default-route configurationtroubleshoot common static and default-route configuration issues 
16 1 packet processing with static-routes
packet processing with static-routes static-routes and packet-forwardingpc1 addresses a packet to pc3 and sends it to the default-gateway address when the packet arrives on the r1 g0 0 0 interface  r1 decapsulates the packet and searches the routing-table for a matching destination-network entry if the destination-ip-address matches a static-route-entry  r1 will use the static-route to identify the next-hop ip-address or exit-interface does not match a specific route to the destination-network  then r1 will use the default-static-route  if configured  does not match a route table entry  then r1 will drop the packet and send an icmp-message back to the source  i e   pc1  
packet processing with static-routes static-routes and packet-forwarding  cont  assuming r1 matched a routing-table entry  it encapsulates the packet in a new-frame and forwards it out of interface s0 1 0 to r2  r2 receives the packet on its s0 1 0 interface it decapsulates and processes the packet the same way r1 did when r2 finds a match in the routing-table  it uses the identified next-hop ip-address or exit-interface and sends the packet out of its interface s0 1 1 towards r3 
packet processing with static-routes static-routes and packet-forwarding  cont  r3 receives the packet  decapsulates it  and searches the routing-table for a match the destination-ip-address of pc3 matches the directly-connected g0 0 0 interface  therefore  r3 searches the arp-table for the layer-2 mac-address of pc3  if no arp-entry exists  then r3 sends an arp-request out of the g0 0 0 interface pc3 responds with an arp-reply containing its mac-address r3 encapsulates the packet in a new-frame and uses the pc3 mac-address as the destination-mac-address and the g0 0 0 mac-address as the source-mac-address the frame is forwarded out of interface g0 0 0 and pc3 receives and processes it accordingly 
switching  routing  and wireless essentials v7 0 srwe module 14  routing concepts
module objectivesmodule title  routing conceptsmodule objective  explain how routers use information in packets to make forwarding decisions topic titletopic objectivepath determinationexplain how routers determine the best-path packet-forwardingexplain how routers forward packets to the destination basic router configuration reviewconfigure basic settings on a router ip-routing-tabledescribe the structure of a routing-table static and dynamic-routingcompare static and dynamic-routing concepts 
14 1 path determination
path determination two functions of a routerwhen a router receives an ip-packet on one interface  it determines which interface to use to forward the packet to the destination  this is known as routing  the interface that the router uses to forward the packet may be the final destination  or it may be a network connected to another-router that is used to reach the destination-network  each network that a router connects to typically requires a separate interface  but this may not always be the case the primary functions of a router are to determine the best-path to forward packets based on the information in its routing-table  and to forward packets toward their destination 
path determination router functions examplethe router uses its ip-routing-table to determine which path  route  to use to forward a packet  r1 and r2 will use their respective ip-routing-tables to first determine the best-path  and then forward the packet 
path determination best-path equals longest matchthe best-path in the routing-table is also known as the longest match the routing-table contains route entries consisting of a prefix  network address  and prefix-length  for there to be a match between the destination-ip-address of a packet and a route in the routing-table  a minimum number of far-left bits must match between the ip-address of the packet and the route in the routing-table  the prefix-length of the route in the routing-table is used to determine the minimum number of far-left bits that must match  the longest match is the route in the routing-table that has the greatest number of far-left matching-bits with the destination-ip-address of the packet  the longest match is always the preferred route note  the term prefix-length will be used to refer to the network-portion of both ipv4 and ipv6-addresses 
path determination ipv4 longest match examplein the table  an ipv4-packet has the destination ipv4-address 172 16 0 10  the router has three route entries in its ipv4 routing-table that match this packet  172 16 0 0 12  172 16 0 0 18  and 172 16 0 0 26  of the three routes  172 16 0 0 26 has the longest match and would be chosen to forward the packet  for any of these routes to be considered a match there must be at least the number of matching-bits indicated by the subnet-mask of the route destination ipv4-addressaddress in binary172 16 0 1010101100 00010000 00000000 00001010route-entryprefix prefix-lengthaddress in binary172 16 0 0 1210101100 00010000 00000000 00001010172 16 0 0 1810101100 00010000 00000000 00001010172 16 0 0 2610101100 00010000 00000000 00001010
path determination ipv6 longest match examplean ipv6-packet has the destination ipv6-address 2001 db8 c000  99  this example shows three route entries  but only two of them are a valid match  with one of those being the longest match  the first two route entries have prefix-lengths that have the required number of matching-bits as indicated by the prefix-length  the third route-entry is not a match because its  64 prefix requires 64 matching-bits  destination2001 db8 c000  99 48route-entryprefix prefix-lengthdoes it match 2001 db8 c000   40match of 40 bits2001 db8 c000   48match of 48 bits  longest match 2001 db8 c000 5555   64does not match 64 bits
path determination build the routing-tabledirectly-connected-networks  added to the routing-table when a local interface is configured with an ip-address and subnet-mask  prefix-length  and is active  up-and-up  remote-networks  networks that are not directly-connected to the router  routers learn about remote-networks in two ways static-routes - added to the routing-table when a route is manually-configured dynamic-routing-protocols - added to the routing-table when routing-protocols dynamically learn about the remote-network  default-route  specifies a next-hop router to use when the routing-table does not contain a specific route that matches the destination-ip-address  the default-route can be entered manually as a static-route  or learned automatically from a dynamic-routing-protocol a default-route has a  0 prefix-length  this means that no bits need to match the destination-ip-address for this route-entry to be used  if there are no routes with a match longer than 0 bits  the default-route is used to forward the packet  the default-route is sometimes referred to as a gateway of last-resort 
14 5 static and dynamic-routing
static and dynamic-routing static or dynamic static and dynamic-routing are not mutually exclusive  rather  most networks use a combination of dynamic-routing-protocols and static-routes static-routes are commonly used in the following scenarios as a default-route forwarding packets to a service-providerfor routes outside the routing-domain and not learned by the dynamic-routing-protocolwhen the network administrator wants to explicitly define the path for a specific networkfor routing between stub-networksstatic-routes are useful for smaller-networks with only one path to an outside-network  they also provide security in a larger-network for certain types of traffic  or links to other networks that need more control 
static and dynamic-routing static or dynamic   cont  dynamic-routing-protocols are implemented in any type of network consisting of more than just a few routers  dynamic-routing-protocols are scalable and automatically determine better routes if there is a change in the topology dynamic-routing-protocols are commonly used in the following scenarios in networks consisting of more than just a few routerswhen a change in the network-topology requires the network to automatically determine another pathfor scalability  as the network grows  the dynamic-routing-protocol automatically learns about any new networks 
static and dynamic-routing static or dynamic   cont  the table shows a comparison of some the differences between dynamic and static-routing featuredynamic-routingstatic-routingconfiguration complexityindependent of network sizeincreases with network sizetopology changesautomatically adapts to topology changesadministrator intervention requiredscalabilitysuitable for simple to complex network topologiessuitable for simple topologiessecuritysecurity must be configuredsecurity is inherentresource-usageuses cpu  memory  and link bandwidthno additional resources neededpath-predictabilityroute depends on topology and routing-protocol usedexplicitly defined by the administrator
static and dynamic-routing dynamic-routing evolutiondynamic-routing-protocols have been used in networks since the late 1980s  one of the first routing-protocols was rip  ripv1 was released in 1988  but some of the basic algorithms within the protocol were used on the advanced-research-projects-agency-network  arpanet  as early as 1969  as networks evolved and became more complex  new routing-protocols emerged  
static and dynamic-routing dynamic-routing evolution  cont  the table classifies the current routing-protocols  interior gateway protocols  igps  are routing-protocols used to exchange routing-information within a routing-domain administered by a single-organization  there is only one egp and it is bgp  bgp is used to exchange routing-information between different organizations  known as autonomous-systems  as   bgp is used by isps to route packets over the internet  distance vector  link-state  and path-vector routing-protocols refer to the type of routing-algorithm used to determine best-path interior gateway protocolsexterior gateway protocolsdistance vectorlink-statepath-vectoripv4ripv2eigrpospfv2is-isbgp-4ipv6ripngeigrp for ipv6ospfv3is-is for ipv6bgp-mp
static and dynamic-routing dynamic-routing-protocol conceptsa routing-protocol is a set of processes  algorithms  and messages that are used to exchange routing-information and populate the routing-table with the choice of best-paths  the purpose of dynamic-routing-protocols includes the following discovery of remote-networksmaintaining up-to-date routing-informationchoosing the best-path to destination-networksability to find a new best-path if the current path is no longer available
static and dynamic-routing dynamic-routing-protocol concepts  cont  the main components of dynamic-routing-protocols include the following data-structures - routing-protocols typically use tables or databases for their operations  this information is kept in ram routing-protocol-messages - routing-protocols use various types of messages to discover-neighboring-routers  exchange routing-information  and other tasks to learn and maintain accurate-information about the network algorithm - an algorithm is a finite list of steps used to accomplish a task  routing-protocols use algorithms for facilitating routing-information and for the best-path determination routing-protocols determine the best-path  or route  to each network  that route is then offered to the routing-table  the route will be installed in the routing-table if there is not another routing-source with a lower ad  
static and dynamic-routing best-paththe best-path is selected by a routing-protocol based on the value or metric it uses to determine the distance to reach a network  a metric is the quantitative value used to measure the distance to a given network  the best-path to a network is the path with the lowest metric dynamic-routing-protocols typically use their own rules and metrics to build and update routing-tables  the following table lists common dynamic protocols and their metrics routing-protocolmetricrouting-information protocol  rip the metric is  hop-count   each router along a path adds a hop to the hop-count  a maximum of 15 hops allowed open-shortest-path-first  ospf the metric is  cost  which is the based on the cumulative bandwidth from source to destination  faster links are assigned lower costs compared to slower  higher cost  links enhanced-interior-gateway-routing-protocol  eigrp it calculates a metric based on the slowest bandwidth and delay values  it could also include load and reliability into the metric calculation 
static and dynamic-routing load-balancingwhen a router has two or more paths to a destination with equal cost metrics  then the router forwards the packets using both paths equally  this is called equal cost load-balancing  the routing-table contains the single destination-network  but has multiple exit-interfaces  one for each equal cost-path  the router forwards packets using the multiple exit-interfaces listed in the routing-table if configured correctly  load-balancing can increase the effectiveness and performance of the network equal cost load-balancing is implemented automatically by dynamic-routing-protocols  it is enabled with static-routes when there are multiple static-routes to the same destination-network using different next-hop routers note  only eigrp supports unequal cost load-balancing 
switching  routing  and wireless essentials v7 0  srwe module 15  ip static-routing
module objectivesmodule title  ip static-routingmodule objective  configure ipv4 and ipv6 static-routes topic titletopic objectivestatic-routesdescribe the command syntax for static-routes configure ip static-routesconfigure ipv4 and ipv6 static-routes configure ip default static-routesconfigure ipv4 and ipv6 default static-routes configure floating static-routesconfigure a floating-static-route to provide a backup connection configure static-host-routesconfigure ipv4 and ipv6 static-host-routes that direct traffic to a specific host 
15 1 static-routes
static-routes types of static-routesstatic-routes are commonly implemented on a network  this is true even when there is a dynamic-routing-protocol configured  static-routes can be configured for ipv4 and ipv6  both protocols support the following types of static-routes standard-static-routedefault-static-routefloating static-routesummary static-routestatic-routes are configured using the ip route and ipv6 route global-configuration-commands 
static-routes next-hop optionswhen configuring a static-route  the next-hop can be identified by an ip-address  exit-interface  or both  how the destination is specified creates one of the three following types of static-route next-hop route - only the next-hop ip-address is specifieddirectly-connected static-route - only the router exit-interface is specifiedfully-specified-static-route - the next-hop ip-address and exit-interface are specified
static-routes ipv4 static-route commandipv4 static-routes are configured using the following global-configuration-command router config   ip route network-address subnet-mask   ip-address   exit-intf  ip-address    distance note  either the ip-address  exit-intf  or the ip-address and exit-intf parameters must be configured 
static-routes ipv6 static-route commandipv6 static-routes are configured using the following global-configuration-command router config   ipv6 route ipv6-prefix prefix-length  ipv6-address   exit-intf  ipv6-address    distance most of parameters are identical to the ipv4 version of the command 
static-routes dual-stack topologythe figure shows a dual-stack network-topology  currently  no static-routes are configured for either ipv4 or ipv6 
static-routes ipv4 starting routing-tableseach router has entries only for directly-connected-networks and associated local-addresses r1 can ping r2  but cannot ping the r3 lanr1  show-ip-route   begin gateway gateway of last-resort is not set 172 16 0 0 16 is variably subnetted  4 subnets  2 masks c  172 16 2 0 24 is directly-connected  serial0 1 0 l  172 16 2 1 32 is directly-connected  serial0 1 0 c  172 16 3 0 24 is directly-connected  gigabitethernet0 0 0 l  172 16 3 1 32 is directly-connected  gigabitethernet0 0 0 r1 r1  ping 172 16 2 2 type escape sequence to abort  sending 5  100-byte icmp echos to 172 16 2 2  timeout is 2 seconds       success rate is 100 percent  5 5 r1  ping 192 168 2 1 type escape sequence to abort  sending 5  100-byte icmp echos to 192 168 2 1  timeout is 2 seconds        success rate is 0 percent  0 5 
static-routes ipv6 starting routing-tableseach router has entries only for directly-connected-networks and associated local-addresses r1 can ping r2  but cannot ping the r3 lan r1  show-ipv6-route   begin c c 2001 db8 acad 2   64  0 0  via serial0 1 0  directly-connected l 2001 db8 acad 2  1 128  0 0  via serial0 1 0  receive c 2001 db8 acad 3   64  0 0  via gigabitethernet0 0 0  directly-connected l 2001 db8 acad 3  1 128  0 0  via gigabitethernet0 0 0  receive l ff00   8  0 0  via null0  receive r1 r1  ping 2001 db8 acad 2  2 type escape sequence to abort  sending 5  100-byte icmp echos to 2001 db8 acad 2  2  timeout is 2 seconds        success rate is 100 percent  5 5   round-trip min avg max   2 2 3 ms r1  ping 2001 db8 cafe 2  1 type escape sequence to abort  sending 5  100-byte icmp echos to 2001 db8 cafe 2  1  timeout is 2 seconds    no valid route for destination success rate is 0 percent  0 1 
16 2 troubleshoot ipv4 static and default-route configuration
troubleshoot ipv4 static and default-route configuration network changesnetworks fail for a number of reasons an interface can faila service-provider drops a connectionlinks can become oversaturatedan administrator may enter a wrong-configuration network administrators are responsible for pinpointing and solving the problem  to efficiently find and solve these issues  it is advantageous to be intimately familiar with tools to help isolate routing-problems quickly 
troubleshoot ipv4 static and default-route configuration common troubleshooting commandscommanddescriptionpingverify layer-3 connectivity to destination  extended-pings provide additional options tracerouteverify path to destination-network  it uses icmp-echo-reply-messages to determine the hops to the destination show-ip-routedisplays the routing-table  used to verify route entries for destination-ip-addresses show-ip-interface-briefdisplays the status of device interfaces  used to verify the operational-status and ip-address of an interface show-cdp neighborsdisplays a list of directly-connected cisco devices  also used to validate layer 1 and 2 connectivity 
troubleshoot ipv4 static and default-route configuration solve a connectivity problemconnectivity from pc1 to pc3 fails extended-pings from the r1 g0 0 0 interface to pc3 fail pings from r1  i e   s0 1 0 interface  to r2 are successful pings from r1  i e   s0 1 0 interface  to r3 are successful r2 routing-table reveals the problem and the incorrect static-route is removed a new static-route solves the problem ip route 172 16 3 0 255 255 255 0 172 16 2 1r2  show-ip-route   begin gatewaygateway of last-resort is not set172 16 0 0 16 is variably subnetted  5 subnets  2 masks c      172 16 1 0 24 is directly-connected  gigabitethernet0 0 0l        172 16 1 1 32 is directly-connected  gigabitethernet0 0 0c        172 16 2 0 24 is directly-connected  serial0 l 0l        172 16 2 2 32 is directly-connected  serial0 l 0s        172 16 3 0 24  1 0  via 192 168 1 1192 168 1 0 24 is variably subnetted  2 subnets  2 masks c        192 168 1 0 24 is directly-connected  serial0 1 1l        192 168 1 2 32 is directly-connected  serial0 1 1s     192 168 2 0 24  1 0  via 192 168 1 1 r2 
10 2 access-control
access-control authentication with a local passwordmany types of authentication can be performed on networking-devices  and each method offers varying levels of security  the simplest method of remote-access authentication is to configure a login and password combination on console  vty-lines  and aux ports ssh is a more secure form of remote-access it requires a username and a password the username and password can be authenticated locally the local-database-method has some limitations user accounts must be configured locally on each device which is not scalable the method provides no fallback authentication method  
access-control aaa componentsaaa stands for authentication  authorization  and accounting  and provides the primary-framework to set up access-control on a network-device  aaa is a way to control who is permitted to access a network  authenticate   what they can do while they are there  authorize   and to audit what actions they performed while accessing the network  accounting  
access-control authenticationlocal and server-based are two common methods of implementing aaa authentication local-aaa-authentication  method stores usernames and passwords locally in a network-device  e g   cisco router   users authenticate against the local database  local aaa is ideal for small networks server-based aaa authentication  with the server-based method  the router accesses a central aaa-server  the aaa-server contains the usernames and password for all users  the router uses either the remote-authentication-dial-in-user-service  radius  or terminal access-controller access-control system  tacacs   protocols to communicate with the aaa-server  when there are multiple-routers and switches  server-based aaa is more appropriate 
access-control authorizationaaa authorization is automatic and does not require users to perform additional steps after authentication  authorization governs what users can and cannot do on the network after they are authenticated authorization uses a set of attributes that describes the user s access to the network  these attributes are used by the aaa-server to determine privileges and restrictions for that user 
access-control accountingaaa accounting collects and reports usage data  this data can be used for such purposes as auditing or billing  the collected data might include the start and stop connection times  executed commands  number of packets  and number of bytes a primary use of accounting is to combine it with aaa authentication  the aaa-server keeps a detailed log of exactly what the authenticated user does on the device  as shown in the figure  this includes all exec and configuration commands issued by the user  the log contains numerous data fields  including the username  the date and time  and the actual command that was entered by the user  this information is useful when troubleshooting devices  it also provides evidence for when individuals perform malicious acts 
access-control 802 1xthe ieee 802 1x standard is a port-based access-control and authentication-protocol  this protocol restricts unauthorized workstations from connecting to a lan through publicly accessible switch ports  the authentication-server authenticates each workstation that is connected to a switch port before making available any services offered by the switch or the lan with 802 1x port-based authentication  the devices in the network have specific roles client  supplicant  - this is a device running 802 1x-compliant client software  which is available for wired or wireless-devices switch  authenticator   the switch acts as an intermediary between the client and the authentication-server  it requests identifying information from the client  verifies that information with the authentication-server  and relays a response to the client  another device that could act as authenticator is a wireless-access-point authentication-server  the server validates the identity of the client and notifies the switch or wireless-access-point that the client is or is not authorized to access the lan and switch services 
3 5 common network-attacks
common network-attacks overview of common network-attackswhen malware is delivered and installed  the payload can be used to cause a variety of network related attacks to mitigate attacks  it is useful to understand the types of attacks  by categorizing network-attacks  it is possible to address types of attacks rather than individual attacks networks are susceptible to the following types of attacks reconnaissance-attacksaccess-attacksdos-attacks
common network-attacks video - common network-attacksthis video will explain the following techniques used in a reconnaissance-attack perform an information query on a targetinitiate a ping-sweep of the target networkinitiate a port-scan of active ip-addressesrun vulnerability-scannersrun exploitation-tools
common network-attacks reconnaissance-attacksreconnaissance is information gathering  threat-actors use reconnaissance  or recon  attacks to do unauthorized discovery and mapping of systems  services  or vulnerabilities  recon-attacks precede access-attacks or dos-attacks 
common network-attacks reconnaissance-attacks  cont  some of the techniques used by malicious threat-actors to conduct reconnaissance-attacks are described in the table techniquedescriptionperform an information-query-of-a-targetthe threat-actor is looking for initial information about a target  various tools can be used  including the google search  organizations website  whois  and more initiate a ping-sweep of the target networkthe information query usually reveals the target s network address  the threat-actor can now initiate a ping-sweep to determine which ip-addresses are active initiate a port-scan of active ip-addressesthis is used to determine which ports or services are available  examples of port-scanners include nmap  superscan  angry ip scanner  and netscantools run vulnerability-scannersthis is to query the identified ports to determine the type and version of the application and operating system that is running on the host  examples of tools include nipper  core impact  nessus  saint  and open vas run exploitation-toolsthe threat-actor now attempts to discover vulnerable services that can be exploited  a variety of vulnerability-exploitation-tools exist including metasploit  core impact  sqlmap  social engineer toolkit  and netsparker 
common network-attacks video   access and social-engineering-attacksthis video will cover the following techniques used in access-attacks  password-attacks  spoofing-attacks  trust-exploitations  port-redirections  man-in-the-middle-attacks  buffer-overflow attacks techniques used in social-engineering-attacks  pretesting  phishing  spear-phishing  spam  something-for-something  baiting  impersonation  tailgating  shoulder-surfing  dumpster-diving 
common network-attacks access-attacksaccess-attacks exploit known vulnerabilities in authentication-services  ftp-services  and web services  the purpose of these types of attacks is to gain entry to web accounts  confidential databases  and other sensitive-information threat-actors use access-attacks on network-devices and computers to retrieve data  gain access  or to escalate access privileges to administrator status password-attacks  in a password-attack  the threat-actor attempts to discover critical-system passwords using various methods  password-attacks are very common and can be launched using a variety of password cracking tools spoofing-attacks  in spoofing-attacks  the threat-actor device attempts to pose as another device by falsifying-data  common spoofing-attacks include ip-spoofing  mac-spoofing  and dhcp-spoofing  these spoofing-attacks will be discussed in more detail later in this moduleother access-attacks include trust-exploitationsport-redirectionsman-in-the-middle-attacksbuffer-overflow attacks
common network-attacks social-engineering-attackssocial engineering is an access-attack that attempts to manipulate individuals into performing actions or divulging confidential information  some social engineering techniques are performed in-person while others may use the telephone or internet social engineers often rely on people s willingness to be helpful  they also prey on people s weaknesses  
common network-attacks social-engineering-attacks  cont  social-engineering-attackdescriptionpretextinga threat-actor pretends to need personal or financial data to confirm the identity of the recipient phishinga threat-actor sends fraudulent email which is disguised as being from a legitimate  trusted source to trick the recipient into installing malware on their device  or to share personal or financial information spear-phishinga threat-actor creates a targeted phishing attack tailored for a specific individual or organization spamalso known as junk mail  this is unsolicited email which often contains harmful links  malware  or deceptive-content something-for-somethingsometimes called  quid-pro-quo   this is when a threat-actor requests personal information from a party in exchange for something such as a gift baitinga threat-actor leaves a malware infected flash drive in a public location  a victim finds the drive and unsuspectingly inserts it into their laptop  unintentionally installing malware impersonationthis type of attack is where a threat-actor pretends to be someone they are not to gain the trust of a victim tailgatingthis is where a threat-actor quickly follows an authorized person into a secure location to gain access to a secure area shoulder-surfingthis is where a threat-actor inconspicuously looks over someone s shoulder to steal their passwords or other information dumpster-divingthis is where a threat-actor rummages through trash bins to discover confidential documents
common network-attacks social-engineering-attacks  cont  the social-engineering-toolkit  set  was designed to help white-hat-hackers and other network security professionals create social-engineering-attacks to test their own networks enterprises must educate their users about the risks of social engineering  and develop-strategies to validate identities over the phone  via email  or in person the figure shows recommended practices that should be followed by all users 
common network-attacks lab - social engineeringin this lab  you will research examples of social engineering and identify ways to recognize and prevent it 
common network-attacks video   denial-of-service-attacksthis video will cover the following techniques used in denial-of-service attacks  overwhelming quantity of traffic  maliciously formatted packets techniques used in distributed denial-of-service-attacks  zombies 
common network-attacks dos and ddos-attacksa denial-of-service  dos  attack creates some sort of interruption of network services to users  devices  or applications  there are two major types of dos-attacks overwhelming quantity of traffic - the threat-actor sends an enormous quantity of data at a rate that the network  host  or application cannot handle  this causes transmission and response times to slow down  it can also crash a device or service maliciously formatted packets - the threat-actor sends a maliciously formatted packet to a host or application and the receiver is unable to handle it  this causes the receiving device to run very slowly or crash dos-attacks are a major risk because they interrupt communication and cause significant loss of time and money  these attacks are relatively simple to conduct  even by an unskilled threat-actor a distributed dos-attack  ddos  is similar to a dos-attack  but it originates from multiple  coordinated sources  
3 10 cryptography
cryptography video - cryptographythis video will demonstrate security data using hashing and encryption 
cryptography securing communicationsorganizations must provide support to secure the data as it travels across links  this may include internal traffic  but it is even more important to protect the data that travels outside of the organization these are the four elements of secure communications data-integrity - guarantees that the message was not altered  integrity is ensured by implementing either message-digest-version-5  md5  or secure-hash-algorithm  sha  hash-generating algorithms origin-authentication - guarantees that the message is not a forgery and does come from whom it states  many modern networks ensure authentication with protocols  such as hash-message-authentication-code  hmac  data-confidentiality - guarantees that only authorized users can read the message  data-confidentiality is implemented using symmetric and asymmetric encryption-algorithms data-non-repudiation - guarantees that the sender cannot repudiate  or refute  the validity of a message sent  nonrepudiation relies on the fact that only the sender has the unique characteristics or signature for how that message is treated cryptography can be used almost anywhere that there is data communication  in fact  the trend is toward all communication being encrypted 
cryptography data-integrityhash functions are used to ensure the integrity of a message  they guarantee that message data has not changed accidentally or intentionally in the figure  the sender is sending a  100 money transfer to alex  the sender wants to ensure that the message is not altered on its way to the receiver the sending device inputs the message into a hashing algorithm and computes its fixed-length hash of 4ehidx67nmop9 this hash is then attached to the message and sent to the receiver  both the message and the hash are in plaintext the receiving device removes the hash from the message and inputs the message into the same hashing algorithm  if the computed hash is equal to the one that is attached to the message  the message has not been altered during transit  if the hashes are not equal  then the integrity of the message can no longer be trusted 
cryptography hash functionsthere are three well-known hash functions md5 with 128-bit digest  md5 is a one-way function that produces a 128-bit hashed message  md5 is a legacy algorithm that should only be used when no better alternatives are available  use sha-2 instead sha hashing algorithm  sha-1 is very similar to the md5 hash functions  sha-1 creates a 160-bit hashed message and is slightly slower than md5  sha-1 has known flaws and is a legacy algorithm  use sha-2 when possible sha-2  this includes sha-224  224 bit   sha-256  256 bit   sha-384  384 bit   and sha-512  512 bit   sha-256  sha-384  and sha-512 are next-generation algorithms and should be used whenever possible while hashing can be used to detect accidental changes  it cannot be used to guard against deliberate changes  this means that anyone can compute a hash for any data  if they have the correct hash function therefore  hashing is vulnerable to man-in-the-middle-attacks and does not provide security to transmitted data  
cryptography origin-authenticationto add authentication to integrity assurance  use a keyed-hash-message-authentication-code  hmac   an hmac is calculated using any cryptographic algorithm that combines a cryptographic hash function with a secret key  only parties who have access to that secret key can compute the digest of an hmac function  this defeats man-in-the-middle-attacks and provides authentication of the data origin 
cryptography data-confidentialitythere are two classes of encryption used to provide data-confidentiality  these two classes differ in how they use keys symmetric encryption-algorithms such as  des   3des  and advanced-encryption-standard  aes  are based on the premise that each communicating party knows the pre-shared-key  data-confidentiality can also be ensured using asymmetric-algorithms  including rivest  shamir  and adleman  rsa  and the public-key-infrastructure  pki  the figure highlights some differences between each encryption algorithm method 
cryptography symmetric encryptionsymmetric-algorithms use the same pre-shared-key  also called a secret key  to encrypt and decrypt data  a pre-shared-key is known by the sender and receiver before any encrypted communications can take place symmetric encryption-algorithms are commonly used with vpn traffic because they  use less cpu resources than asymmetric encryption-algorithms  when using symmetric encryption-algorithms  the longer the key  the longer it will take for someone to discover the key  to ensure that the encryption is safe  use a minimum key length of 128 bits 
cryptography symmetric encryption  cont  symmetric encryption-algorithmsdescriptiondata-encryption-algorithm  des this is a legacy symmetric encryption algorithm  it can be used in stream cipher mode but usually operates in block mode by encrypting data in 64-bit block size  a stream cipher encrypts one byte or one bit at a time 3des  triple des this is a newer version of des  but it repeats the des algorithm process three times  it is considered very trustworthy when implemented using very short key lifetimes advanced-encryption-standard  aes aes is a secure and more efficient algorithm than 3des  it is a popular and recommended symmetric encryption algorithm  it offers nine combinations of key and block length by using a variable key length of 128-  192-  or 256-bit key to encrypt data blocks that are 128  192  or 256 bits long software-optimized-encryption-algorithm  seal seal is a faster alternative symmetric encryption algorithm to des  3des  and aes  it uses a 160-bit encryption key and has a lower impact on the cpu compared to other software-based algorithms rivest-ciphers  rc  series algorithmsthis algorithm was developed by ron rivest  several variations have been developed  but rc4 is the most prevalent in use  rc4 is a stream cipher and is used to secure web traffic in ssl and tls 
cryptography asymmetric encryptionasymmetric-algorithms  also called public-key algorithms  are designed so that the key that is used for encryption is different from the key that is used for decryption  asymmetric-algorithms use a public key and a private key  the complementary paired key is required for decryption  data encrypted with the public key requires the private key to decrypt  asymmetric-algorithms achieve confidentiality  authentication  and integrity by using this process because neither party has a shared secret  very long key lengths must be used  asymmetric encryption can use key lengths between 512 to 4 096 bits  key lengths greater than or equal to 1 024 bits can be trusted while shorter key lengths are considered unreliable 
cryptography asymmetric encryption  cont  examples of protocols that use asymmetric key algorithms include internet-key-exchange  ike  - this is a fundamental component of ipsec-vpns secure-socket-layer  ssl  - this is now implemented as ietf standard transport-layer-security  tls  secure-shell  ssh  - this protocol provides a secure remote-access connection to network-devices pretty-good-privacy  pgp  - this computer program provides cryptographic privacy and authentication  it is often used to increase the security of email communications asymmetric-algorithms are substantially slower than symmetric-algorithms  their design is based on computational problems  such as factoring extremely large numbers or computing discrete logarithms of extremely large numbers because they are slow  asymmetric-algorithms are typically used in low-volume cryptographic mechanisms  such as digital signatures and key exchange  
cryptography asymmetric encryption  cont  asymmetric encryption algorithmkey lengthdescriptiondiffie-hellman  dh 512  1024  2048  3072  4096the diffie-hellman algorithm allows two parties to agree on a key that they can use to encrypt messages they want to send to each other  the security of this algorithm depends on the assumption that it is easy to raise a number to a certain power  but difficult to compute which power was used given the number and the outcome digital-signature-standard  dss  and digital-signature-algorithm  dsa 512 - 1024dss specifies dsa as the algorithm for digital signatures  dsa is a public key algorithm based on the elgamal signature scheme  signature creation speed is similar to rsa but is 10 to 40 times slower for verification rivest  shamir  and adleman encryption-algorithms  rsa 512 to 2048rsa is for public-key cryptography that is based on the current difficulty of factoring very large numbers  it is the first algorithm known to be suitable for signing as well as encryption  it is widely used in electronic commerce protocols and is believed to be secure given sufficiently long keys and the use of up-to-date implementations eigamal512 - 1024an asymmetric key encryption algorithm for public-key cryptography which is based on the diffie-hellman key agreement  a disadvantage of the elgamal system is that the encrypted message becomes very big  about twice the size of the original message and for this reason it is only used for small messages such as secret keys elliptical-curve-techniques160elliptic curve cryptography can be used to adapt many cryptographic algorithms  such as diffie-hellman or elgamal  the main advantage of elliptic curve cryptography is that the keys can be much smaller 
cryptography diffie-hellmandiffie-hellman  dh  is an asymmetric mathematical algorithm where two computers generate an identical shared secret key without having communicated before  the new shared-key is never actually exchanged between the sender and receiver here are three examples of instances when dh is commonly used data is exchanged using an ipsec-vpn data is encrypted on the internet using either ssl or tls ssh data is exchanged dh security uses unbelievably large numbers in its calculations  unfortunately  asymmetric key systems are extremely slow for any sort of bulk encryption  therefore  it is common to encrypt the bulk of the traffic using a symmetric algorithm  such as 3des or aes and then use the dh algorithm to create keys that will be used by the encryption algorithm 
cryptography diffie-hellman  cont  the colors in the figure will be used instead of numbers to simplify the dh key agreement process  the dh key exchange begins with alice and bob agreeing on an arbitrary common color that does not need to be kept secret  the agreed upon color in our example is yellow next  alice and bob will each select a secret color  alice chose red while bob chose blue  these secret colors will never be shared with anyone  the secret color represents the chosen secret private key of each party alice and bob now mix the shared common color  yellow  with their respective secret color to produce a private color  therefore  alice will mix the yellow with her red color to produce a private color of orange  bob will mix the yellow and the blue to produce a private color of green alice sends her private color  orange  to bob and bob sends his private color  green  to alice alice and bob each mix the color they received with their own  original secret color  red for alice and blue for bob    the result is a final brown color mixture that is identical to the other s final color mixture  the brown color represents the resulting shared secret key between bob and alice 
module 3  network security conceptsenterprise networking  security  and automation v7 0 ensa 
module objectivesmodule title  network security conceptsmodule objective  explain how vulnerabilities  threats  and exploits can be mitigated to enhance network security topic titletopic objectivecurrent-state of cybersecurity describe the current-state of cybersecurity and vectors of data-loss threat-actorsdescribe tools used by threat-actors to exploit-networks malwaredescribe malware-types common network-attacksdescribe common network-attacks ip vulnerabilities and threatsexplain how ip vulnerabilities are exploited by threat-actors tcp and udp vulnerabilitiesexplain how tcp and udp vulnerabilities are exploited by threat-actors ip-servicesexplain how ip-services are exploited by threat-actors network security best-practicesdescribe best-practices for protecting a network cryptographydescribe common cryptographic-processes used to protect-data in transit 
ethical hacking statementin this module  learners may be exposed to tools and techniques in a  sandboxed   virtual-machine-environment to demonstrate various types of cyber-attacks  experimentation with these tools  techniques  and resources is at the discretion of the instructor and local-institution  if the learner is considering using attack-tools for educational purposes  they should contact their instructor prior to any experimentation unauthorized-access to data  computer  and network systems is a crime in many jurisdictions and often is accompanied by severe-consequences  regardless of the perpetrator s motivations  it is the learner s responsibility  as the user of this material  to be cognizant of and compliant with computer use laws 
3 1 current-state of cybersecurity
current-state of cybersecurity current-state of affairscyber-criminals now have the expertise and tools necessary to take-down critical-infrastructure and systems  their tools and techniques continue to evolve maintaining a secure-network ensures the safety-of-network users and protects commercial-interests  all users should be aware of security-terms in the table security-termsdescriptionassetsan asset is anything of value to the organization  it includes people  equipment  resources  and data vulnerabilitya vulnerability is a weakness in a system  or its design  that could be exploited by a threat threata threat is a potential-danger to a company s assets  data  or network functionality exploitan exploit is a mechanism that takes advantage of a vulnerability mitigationmitigation is the counter-measure that reduces the likelihood or severity of a potential-threat or risk  network security involves multiple-mitigation techniques riskrisk is the likelihood of a threat to exploit the vulnerability of an asset  with the aim of negatively affecting an organization  risk is measured using the probability of the occurrence of an event and its consequences 
current-state of cybersecurity vectors of network-attacksan attack-vector is a path by which a threat-actor can gain access to a server  host  or network  attack-vectors originate from inside or outside the corporate network  as shown in the figure  internal-threats have the potential to cause greater damage than external-threats because internal users have direct access to the building and its infrastructure devices  
current-state of cybersecurity data-lossdata-loss or data exfiltration is when data is intentionally or unintentionally lost  stolen  or leaked to the outside world  the data-loss can result in brand damage and loss of reputationloss of competitive-advantageloss of customersloss of revenuelitigation legal action resulting in fines and civil-penaltiessignificant cost and effort to notify affected parties and recover from the breachnetwork security professionals must protect the organization s data  various data-loss prevention  dlp  controls must be implemented which combine strategic  operational and tactical-measures 
current-state of cybersecurity data-loss  cont  data-loss vectorsdescriptionemail social networkingintercepted email or im messages could be captured and reveal confidential information unencrypted-devicesif the data is not stored using an encryption algorithm  then the thief can retrieve valuable confidential data cloud storage devicessensitive-data can be lost if access to the cloud is compromised due to weak security settings removable-mediaone risk is that an employee could perform an unauthorized transfer of data to a usb drive  another risk is that a usb drive containing valuable corporate-data could be lost hard copyconfidential data should be shredded when no longer required improper access-controlpasswords or weak-passwords which have been compromised can provide a threat-actor with easy access to corporate-data 
16 4 device-security
device-security cisco autosecurethe security settings are set to the default values when a new operating system is installed on a device  in most cases  this level of security is inadequate  for cisco routers  the cisco autosecure feature can be used to assist securing the system in addition  there are some simple steps that should be taken that apply to most operating systems default usernames and passwords should be changed immediately access to system resources should be restricted to only the individuals that are authorized to use those resources any unnecessary services and applications should be turned off and uninstalled when possible often  devices shipped from the manufacturer have been sitting in a warehouse for a period of time and do not have the most up-to-date patches installed  it is important to update any software and install any security patches prior to implementation 
device-security passwordsto protect network-devices  it is important to use strong passwords  here are standard guidelines to follow use a password length of at least eight characters  preferably 10 or more characters  make passwords complex  include a mix of uppercase and lowercase letters  numbers  symbols  and spaces  if allowed avoid passwords based on repetition  common dictionary words  letter or number sequences  usernames  relative or pet names  biographical information  such as birthdates  id numbers  ancestor names  or other easily identifiable pieces of information deliberately misspell a password  for example  smith   smyth   5myth or security   5ecur1ty change passwords often  if a password is unknowingly compromised  the window of opportunity for the threat-actor to use the password is limited do not write passwords down and leave them in obvious places such as on the desk or monitor on cisco routers  leading spaces are ignored for passwords  but spaces after the first character are not  therefore  one method to create a strong password is to use the space bar and create a phrase made of many words  this is called a passphrase  a passphrase is often easier to remember than a simple password  it is also longer and harder to guess 
device-security additional password securitythere are several steps that can be taken to help ensure that passwords remain secret on a cisco router and switch including these encrypt all plaintext passwords with the service-password-encryption command set a minimum acceptable password length with the security-passwords-min-length command deter brute-force password guessing attacks with the login block-for   attempts   within   command disable an inactive privileged-exec-mode access after a specified amount of time with the exec-timeout command 
device-security enable sshit is possible to configure a cisco device to support ssh using the following steps configure a unique device hostname  a device must have a unique hostname other than the default configure the ip domain-name  configure the ip domain-name of the network by using the global configuration-mode command ip-domain-name generate a key to encrypt ssh traffic  ssh encrypts traffic between source and destination  however  to do so  a unique authentication key must be generated by using the global-configuration-command crypto-key-generate-rsa-general-keys-modulus bits  the modulus bits determines the size of the key and can be configured from 360 bits to 2048 bits  the larger the bit value  the more secure the key  however  larger bit values also take longer to encrypt and decrypt information  the minimum recommended modulus length is 1024 bits verify or create a local database entry  create a local database username entry using the username global-configuration-command authenticate against the local database  use the login-local line configuration command to authenticate the vty-line against the local database enable vty inbound ssh-sessions  by default  no input session is allowed on vty-lines  you can specify multiple input protocols including telnet and ssh using the transport input  ssh   telnet  command 
device-security disable unused servicescisco routers and switches start with a list of active services that may or may not be required in your network  disable any unused services to preserve system resources  such as cpu cycles and ram  and prevent threat-actors from exploiting these services  the type-of-services that are on by default will vary depending on the ios-version  for example  ios-xe typically will have only https and dhcp ports open  you can verify this with the show-ip-ports-all command ios-versions prior to ios-xe use the show-control-plane-host-open-ports command  
device-security packet tracer   configure secure passwords and sshin this packet tracer  you will configure passwords and ssh the network administrator has asked you to prepare rta and sw1 for deployment  before they can be connected to the network  security measures must be enabled  
device-security lab   configure network-devices with sshin this lab  you will complete the following objectives part 1  configure basic-device-settingspart 2  configure the router for ssh-accesspart 3  configure the switch for ssh-accesspart 4  ssh from the cli on the switch
module 10  lan security conceptsswitching  routing and wireless essentials v7 0  srwe 
module objectivesmodule title  lan security conceptsmodule objective  explain how vulnerabilities compromise lan securitytopic titletopic objectiveendpoint-securityexplain how to use endpoint-security to mitigate attacksaccess-controlexplain how aaa and 802 1x are used to authenticate lan endpoints and deviceslayer-2 security-threatsidentify layer-2 vulnerabilitiesmac-address table attackexplain how a mac-address table attack compromised lan securitylan-attacksexplain how lan-attacks compromise lan security
10 1 endpoint-security
endpoint-security network-attacks todaythe news media commonly covers attacks on enterprise-networks  simply search the internet for  latest network-attacks  to find up-to-date information on current attacks  most likely  these attacks will involve one or more of the following distributed-denial-of-service  ddos    this is a coordinated attack from many devices  called zombies  with the intention of degrading or halting public access to an organization s website and resources data-breach   this is an attack in which an organization s data servers or hosts are compromised to steal confidential information malware   this is an attack in which an organization s hosts are infected with malicious-software that cause a variety of problems  for example  ransomware such as wannacry encrypts the data on a host and locks access to it until a ransom is paid 
endpoint-security network security devicesvarious network security devices are required to protect the network perimeter from outside access  these devices could include the following virtual private-network  vpn  enabled router - provides a secure connection to remote users across a public network and into the enterprise network  vpn services can be integrated into the firewall next-generation-firewall  ngfw  - provides stateful-packet-inspection  application-visibility and control  a next-generation-intrusion-prevention-system  ngips   advanced-malware-protection  amp   and url-filtering network access-control  nac  - includes authentication  authorization  and accounting  aaa  services  in larger enterprises  these services might be incorporated into an appliance that can manage access policies across a wide variety of users and device types  the cisco identity-services-engine  ise  is an example of a nac device 
endpoint-security endpoint protectionendpoints are hosts which commonly consist of laptops  desktops  servers  and ip phones  as well as employee-owned devices  endpoints are particularly susceptible to malware-related attacks that originate through email or web browsing  endpoints have typically used traditional host-based security features  such as antivirus antimalware  host-based firewalls  and host-based-intrusion-prevention-systems  hipss   endpoints today are best protected by a combination of nac  amp software  an email-security-appliance  esa   and a web-security-appliance  wsa   
endpoint-security cisco email-security-appliancethe cisco esa device is designed to monitor simple-mail-transfer-protocol  smtp   the cisco esa is constantly updated by real-time feeds from the cisco talos  which detects and correlates threats and solutions by using a worldwide-database-monitoring-system  this threat intelligence data is pulled by the cisco esa every three to five minutes  these are some of the functions of the cisco esa block known threatsremediate against stealth malware that evaded initial detectiondiscard emails with bad linksblock access to newly infected sites encrypt content in outgoing email to prevent data-loss 
endpoint-security cisco web-security-appliancethe cisco web-security-appliance  wsa  is a mitigation technology for web-based threats  it helps organizations-address the challenges of securing and controlling web traffic  the cisco wsa combines advanced-malware-protection  application-visibility and control  acceptable use policy controls  and reporting cisco wsa provides complete control over how users access the internet  certain features and applications  such as chat  messaging  video and audio  can be allowed  restricted with time and bandwidth limits  or blocked  according to the organization s requirements  the wsa can perform blacklisting of urls  url-filtering  malware-scanning  url-categorization  web-application-filtering  and encryption and decryption of web traffic 
3 8 ip-services
ip-services arp vulnerabilitieshosts broadcast an arp-request to other hosts on the segment to determine the mac-address of a host with a particular ip-address  the host with the matching ip-address in the arp-request sends an arp-reply any client can send an unsolicited arp-reply called a  gratuitous-arp   when a host sends a gratuitous-arp  other hosts on the subnet store the mac-address and ip-address contained in the gratuitous-arp in their arp-tables this feature of arp also means that any host can claim to be the owner of any ip or mac  a threat-actor can poison the arp cache of devices on the local-network  creating an mitm attack to redirect traffic  
ip-services arp cache poisoningarp cache poisoning can be used to launch various man-in-the-middle-attacks pc-a requires the mac-address of its default-gateway  r1   therefore  it sends an arp-request for the mac-address of 192 168 10 1 r1 updates its arp cache with the ip and mac-addresses of pc-a  r1 sends an arp-reply to pc-a  which then updates its arp cache with the ip and mac-addresses of r1 the threat-actor sends two spoofed gratuitous-arp replies using its own mac-address for the indicated destination-ip-addresses  pc-a updates its arp cache with its default-gateway which is now pointing to the threat-actor s host mac-address  r1 also updates its arp cache with the ip-address of pc-a pointing to the threat-actor s mac-address the arp-poisoning-attack can be passive or active  passive-arp-poisoning is where threat-actors steal confidential information  active arp poisoning is where threat-actors modify data in transit or inject-malicious-data 
ip-services video   arp-spoofingthis video will explain an arp-spoofing-attack 
ip-services dns attacksthe domain-name-service  dns  protocol defines an automated service that matches resource names  such as www cisco com  with the required numeric-network-address  such as the ipv4 or ipv6-address  it includes the format for queries  responses  and data and uses resource-records  rr  to identify the type of dns response securing dns is often overlooked  however  it is crucial to the operation of a network and should be secured accordingly dns attacks include the following dns-open-resolver-attacksdns-stealth-attacksdns-domain-shadowing-attacksdns-tunneling-attacks
ip-services dns attacks  cont  dns-open-resolver-attacks  a dns open resolver answers queries from clients outside of its administrative domain  dns open resolvers are vulnerable to multiple malicious activities described in the table dns resolver vulnerabilitiesdescriptiondns cache poisoning attacksthreat-actors send spoofed  falsified record resource  rr  information to a dns resolver to redirect users from legitimate sites to malicious sites  dns cache poisoning attacks can all be used to inform the dns resolver to use a malicious name server that is providing rr information for malicious activities dns amplification and reflection-attacksthreat-actors use dos or ddos-attacks on dns open resolvers to increase the volume of attacks and to hide the true source of an attack  threat-actors send dns-messages to the open resolvers using the ip-address of a target-host  these attacks are possible because the open resolver will respond to queries from anyone asking a question dns resource utilization attacksa dos-attack that consumes the resources of the dns open resolvers  this dos-attack consumes all the available resources to negatively affect the operations of the dns open resolver  the impact of this dos-attack may require the dns open resolver to be rebooted or services to be stopped and restarted 
ip-services dns attacks  cont  dns-stealth-attacks  to hide their identity  threat-actors also use the dns stealth techniques described in the table to carry out their attacks dns stealth techniquesdescriptionfast-fluxthreat-actors use this technique to hide their phishing and malware delivery sites behind a quickly-changing network of compromised dns hosts  the dns ip-addresses are continuously changed within minutes  botnets often employ fast-flux techniques to effectively hide malicious servers from being detected double-ip-fluxthreat-actors use this technique to rapidly change the hostname to ip-address mappings and to also change the authoritative name server  this increases the difficulty of identifying the source of the attack domain-generation-algorithmsthreat-actors use this technique in malware to randomly generate domain-names that can then be used as rendezvous points to their command-and-control  c c  servers 
ip-services dns attacks  cont  dns-domain-shadowing-attacks  domain shadowing involves the threat-actor gathering domain account credentials in order to silently create multiple sub-domains to be used during the attacks  these subdomains typically point to malicious servers without alerting the actual owner of the parent domain 
ip-services dns tunnelingthreat-actors who use dns tunneling place non-dns traffic within dns traffic  this method often circumvents security solutions when a threat-actor wishes to communicate with bots inside a protected network  or exfiltrate data from the organization  this is how dns tunneling works for cnc commands sent to a botnet the command data is split into multiple encoded chunks each chunk is placed into a lower level domain-name label of the dns query because there is no response from the local or networked dns for the query  the request is sent to the isp s recursive dns servers the recursive dns service will forward the query to the threat-actor s authoritative name server the process is repeated until all the queries containing the chunks of are sent when the threat-actor s authoritative name server receives the dns queries from the infected devices  it sends responses for each dns query  which contain the encapsulated  encoded cnc commands the malware on the compromised host recombines the chunks and executes the commands hidden within the dns record to stop dns tunneling  the network administrator must use a filter that inspects dns traffic  pay close attention to dns queries that are longer than average  or those that have a suspicious domain-name  
ip-services dhcpdhcp-servers dynamically provide ip-configuration-information to clients  in the figure  a client broadcasts a dhcp-discover-message  the dhcp responds with a unicast offer that includes addressing information the client can use  the client broadcasts a dhcp-request to tell the server that the client accepts the offer  the server responds with a unicast acknowledgment accepting the request 
ip-services dhcp-attacksa dhcp-spoofing-attack occurs when a rogue dhcp-server is connected to the network and provides false ip configuration parameters to legitimate clients  a rogue server can provide a variety of misleading information wrong default-gateway - threat-actor provides an invalid gateway  or the ip-address of its host to create a mitm attack  this may go entirely undetected as the intruder intercepts the data-flow through the network wrong-dns-server - threat-actor provides an incorrect dns-server-address pointing the user to a malicious website wrong ip-address - threat-actor provides an invalid ip-address  invalid default-gateway ip-address  or both  the threat-actor then creates a dos-attack on the dhcp-client 
ip-services dhcp-attacks  cont  assume a threat-actor has successfully connected a rogue dhcp-server to a switch port on the same subnet as the target clients  the goal of the rogue server is to provide clients with false ip-configuration-information the client broadcasts a dhcp-discover request looking for a response from a dhcp-server  both servers receive the message the legitimate and rogue dhcp-servers each respond with valid ip configuration parameters  the client replies to the first offer receivedthe client received the rogue offer first  it broadcasts a dhcp-request accepting the parameters from the rogue server  the legitimate and rogue server each receive the request only the rogue server unicasts a reply to the client to acknowledge its request  the legitimate server stops communicating with the client because the request has already been acknowledged 
ip-services lab   explore dns trafficin this lab  you will complete the following objectives capture dns trafficexplore dns query trafficexplore dns response traffic
3 6 ip vulnerabilities and threats
ip vulnerabilities and threats video   common ip and icmp-attacksthis video will cover the following techniques used in ip attacks  icmp-attacks  amplification and reflection-attacks  address spoofing-attacks  man-in-the-middle-attacks  session-hijacking techniques used in icmp-attacks  icmp-echo-request-and-echo-reply  icmp-unreachable  icmp-mask-reply  icmp-redirects  icmp-router-discovery 
ip vulnerabilities and threats ipv4 and ipv6ip does not validate whether the source ip-address contained in a packet actually came from that source  for this reason  threat-actors can send packets using a spoofed source ip-address  security analysts must understand the different fields in both the ipv4 and ipv6 headers some of the more common ip related attacks are shown in the tableip attack techniquesdescriptionicmp-attacksthreat-actors use internet-control-message-protocol  icmp  echo packets  pings  to discover subnets and hosts on a protected network  to generate dos flood attacks  and to alter host routing-tables amplification and reflection-attacksthreat-actors attempt to prevent legitimate users from accessing information or services using dos and ddos-attacks address spoofing-attacksthreat-actors spoof the source ip-address in an ip-packet to perform blind-spoofing or non-blind-spoofing man-in-the-middle-attack  mitm threat-actors position themselves between a source and destination to transparently monitor  capture  and control the communication  they could eavesdrop by inspecting captured packets  or alter packets and forward them to their original destination session-hijackingthreat-actors gain access to the physical network  and then use an mitm attack to hijack a session
ip vulnerabilities and threats icmp-attacksthreat-actors use icmp for reconnaissance and scanning attacks  they can launch information-gathering attacks to map out a network-topology  discover which hosts are active  reachable   identify the host operating system  os fingerprinting   and determine the state of a firewall  threat-actors also use icmp for dos-attacks note  icmp for ipv4  icmpv4  and icmp for ipv6  icmpv6  are susceptible to similar types of attacks networks should have strict icmp access-control-list  acl  filtering on the network edge to avoid icmp probing from the internet  in the case of large networks  security devices such as firewalls and intrusion-detection-systems  ids  detect such attacks and generate alerts to the security analysts 
ip vulnerabilities and threats icmp-attacks  cont  common icmp-messages of interest to threat-actors are listed in the table icmp-messages used by hackersdescriptionicmp-echo-request-and-echo-replythis is used to perform host verification and dos-attacks icmp-unreachablethis is used to perform network reconnaissance and scanning attacks icmp-mask-replythis is used to map an internal ip-network icmp-redirectsthis is used to lure a target-host into sending all traffic through a compromised device and create a mitm attack icmp-router-discoverythis is used to inject bogus route entries into the routing-table of a target-host 
ip vulnerabilities and threats video   amplification  reflection  and spoofing-attacksthis video will explain the amplification  reflection  and spoofing-attack 
ip vulnerabilities and threats amplification and reflection-attacksthreat-actors often use amplification and reflection techniques to create dos-attacks  the example in the figure illustrates a smurf-attack is used to overwhelm a target-host note  newer forms of amplification and reflection-attacks such as dns-based reflection and amplification-attacks and network-time-protocol  ntp  amplification-attacks are now being used threat-actors also use resource exhaustion attacks to either to crash a target-host or to consume the resources of a network  
ip vulnerabilities and threats address spoofing-attacksip-address spoofing-attacks occur when a threat-actor creates packets with false source ip-address information to either hide the identity of the sender  or to pose as another legitimate user  spoofing is usually incorporated into another attack such as a smurf-attack spoofing-attacks can be non-blind or blind non-blind-spoofing - the threat-actor can see the traffic that is being sent between the host and the target  non-blind-spoofing determines the state of a firewall and sequence-number-prediction  it can also hijack an authorized-session blind-spoofing - the threat-actor cannot see the traffic that is being sent between the host and the target  blind-spoofing is used in dos-attacks mac-address spoofing-attacks are used when threat-actors have access to the internal-network  threat-actors alter the mac-address of their host to match another known mac-address of a target-host  
10 5 lan-attacks
lan-attacks video   vlan and dhcp-attacksthis video will cover the following vlan-hopping attackvlan-double-tagging-attackdhcp-starvation attackdhcp-spoofing-attack
lan-attacks vlan-hopping attacksa vlan-hopping attack enables traffic from one vlan to be seen by another vlan without the aid of a router  in a basic vlan-hopping attack  the threat-actor configures a host to act like a switch to take advantage of the automatic trunking-port feature enabled by default on most switch ports the threat-actor configures the host to spoof 802 1q signaling and cisco-proprietary dynamic-trunking-protocol  dtp  signaling to trunk with the connecting switch  if successful  the switch establishes a trunk-link with the host  as shown in the figure  now the threat-actor can access all the vlans on the switch  the threat-actor can send and receive traffic on any vlan  effectively hopping between vlans 
lan-attacks vlan-double-tagging-attacksa threat-actor is specific situations could embed a hidden 802 1q tag inside the frame that already has an 802 1q tag  this tag allows the frame to go to a vlan that the original 802 1q tag did not specify step 1  the threat-actor sends a double-tagged 802 1q frame to the switch  the outer header has the vlan tag of the threat-actor  which is the same as the native-vlan of the trunk port step 2  the frame arrives on the first switch  which looks at the first 4-byte 802 1q tag  the switch sees that the frame is destined for the native-vlan  the switch forwards the packet out all native-vlan ports after stripping the vlan tag  the frame is not retagged because it is part of the native-vlan  at this point  the inner vlan tag is still intact and has not been inspected by the first switch step 3  the frame arrives at the second switch which has no knowledge that it was supposed to be for the native-vlan  native-vlan traffic is not tagged by the sending switch as specified in the 802 1q specification  the second switch looks only at the inner 802 1q tag that the threat-actor inserted and sees that the frame is destined the target vlan  the second switch sends the frame on to the target or floods it  depending on whether there is an existing mac-address table entry for the target 
lan-attacks vlan-double-tagging-attacks  cont  a vlan-double-tagging-attack is unidirectional and works only when the attacker is connected to a port residing in the same vlan as the native-vlan of the trunk port  the idea is that double tagging allows the attacker to send data to hosts or servers on a vlan that otherwise would be blocked by some type of access-control configuration  presumably the return traffic will also be permitted  thus giving the attacker the ability to communicate with devices on the normally blocked vlan vlan-attack-mitigation - vlan-hopping and vlan-double-tagging-attacks can be prevented by implementing the following trunk-security-guidelines  as discussed in a previous module disable trunking on all access-ports disable auto trunking on trunk-links so that trunks must be manually enabled be sure that the native-vlan is only used for trunk-links 
lan-attacks dhcp-messagesdhcp-servers dynamically provide ip-configuration-information including ip-address  subnet-mask  default-gateway  dns servers  and more to clients  a review of the sequence of the dhcp message exchange between client and server is show in the figure 
lan-attacks dhcp-attackstwo types of dhcp-attacks are dhcp-starvation and dhcp-spoofing  both attacks are mitigated by implementing dhcp-snooping dhcp-starvation attack    the goal of this attack is to create a dos for connecting clients  dhcp-starvation attacks require an attack-tool such as gobbler  gobbler has the ability to look at the entire scope of leasable ip-addresses and tries to lease them all  specifically  it creates dhcp-discovery messages with bogus mac-addresses dhcp-spoofing-attack   this occurs when a rogue dhcp-server is connected to the network and provides false ip configuration parameters to legitimate clients  a rogue server can provide a variety of misleading information  including the following wrong default-gateway - the rogue server provides an invalid gateway or the ip-address of its host to create a man-in-the-middle-attack  this may go entirely undetected as the intruder intercepts the data-flow through the network wrong-dns-server - the rogue server provides an incorrect dns-server-address pointing the user to a nefarious website wrong ip-address - the rogue server provides an invalid ip-address effectively creating a dos-attack on the dhcp-client 
lan-attacks video   arp-attacks  stp-attacks  and cdp reconnaissancethis video will cover the following arp-spoofing-attackarp-poisoning-attackstp attackcdp reconnaissance
lan-attacks arp-attackshosts broadcast arp-requests to determine the mac-address of a host with a destination-ip-address  all hosts on the subnet receive and process the arp-request  the host with the matching ip-address in the arp-request sends an arp-reply a client can send an unsolicited arp-reply called a  gratuitous-arp   other hosts on the subnet store the mac-address and ip-address contained in the gratuitous-arp in their arp-tables an attacker can send a gratuitous-arp message containing a spoofed mac-address to a switch  and the switch would update its mac table accordingly  in a typical attack  a threat-actor sends unsolicited arp replies to other hosts on the subnet with the mac-address of the threat-actor and the ip-address of the default-gateway  effectively setting up a man-in-the-middle-attack there are many tools available on the internet to create arp man-in-the-middle-attacks  ipv6 uses icmpv6 neighbor-discovery protocol for layer-2 address-resolution  ipv6 includes strategies to mitigate neighbor-advertisement spoofing  similar to the way ipv6 prevents a spoofed arp-reply arp-spoofing and arp poisoning are mitigated by implementing dynamic-arp-inspection  dai  
lan-attacks address spoofing-attacksip-address spoofing is when a threat-actor hijacks a valid ip-address of another device on the subnet or uses a random ip-address  ip-address spoofing is difficult to mitigate  especially when it is used inside a subnet in which the ip belongs mac-address spoofing-attacks occur when the threat-actors alter the mac-address of their host to match another known mac-address of a target-host  the switch overwrites the current mac table entry and assigns the mac-address to the new port  it then inadvertently forwards frames destined for the target-host to the attacking host when the target-host sends traffic  the switch will correct the error  realigning the mac-address to the original port  to stop the switch from returning the port assignment to its correct state  the threat-actor can create a program or script that will constantly send frames to the switch so that the switch maintains the incorrect or spoofed information  there is no security mechanism at layer-2 that allows a switch to verify the source of mac-addresses  which is what makes it so vulnerable to spoofing ip and mac-address spoofing can be mitigated by implementing ip-source-guard  ipsg  
lan-attacks stp attacknetwork-attackers can manipulate the spanning-tree-protocol  stp  to conduct an attack by spoofing the root-bridge and changing the topology of a network  attackers can then capture all traffic for the immediate switched domain to conduct an stp manipulation attack  the attacking host broadcasts stp bridge-protocol-data-units  bpdus  containing configuration and topology changes that will force spanning-tree recalculations  the bpdus sent by the attacking host announce a lower bridge-priority in an attempt to be elected as the root-bridge this stp attack is mitigated by implementing bpdu-guard on all access-ports  bpdu-guard is discussed in more detail later in the course 
lan-attacks cdp reconnaissancethe cisco-discovery-protocol  cdp  is a proprietary layer-2 link discovery protocol  it is enabled on all cisco devices by default  network administrators also use cdp to help configure and troubleshoot network-devices  cdp information is sent out cdp-enabled ports in periodic  unencrypted  unauthenticated broadcasts  cdp information includes the ip-address of the device  ios software version  platform  capabilities  and the native-vlan  the device receiving the cdp message updates its cdp database to mitigate the exploitation of cdp  limit the use of cdp on devices or ports  for example  disable cdp on edge ports that connect to untrusted devices to disable cdp globally on a device  use the no-cdp-run global configuration-mode command  to enable cdp globally  use the cdp-run global-configuration-command to disable cdp on a port  use the no-cdp-enable interface configuration command  to enable cdp on a port  use the cdp-enable interface configuration command note  link-layer-discovery-protocol  lldp  is also vulnerable to reconnaissance-attacks  configure no lldp-run to disable lldp globally  to disable lldp on the interface  configure no lldp transmit and no lldp receive 
10 3 layer-2 security-threats
layer-2 security-threats layer-2 vulnerabilitiesrecall that the osi-reference-model is divided into seven-layers which work independently of each other  the figure shows the function of each-layer and the core elements that can be exploited network administrators routinely implement security solutions to protect the elements in layer-3 up through layer 7  they use vpns  firewalls  and ips devices to protect these elements  however  if layer-2 is compromised  then all the layers above it are also affected  for example  if a threat-actor with access to the internal-network captured layer-2 frames  then all the security implemented on the layers above would be useless  the threat-actor could cause a lot of damage on the layer-2 lan networking infrastructure 
layer-2 security-threats switch attack categoriessecurity is only as strong as the weakest link in the system  and layer-2 is considered to be that weak link  this is because lans were traditionally under the administrative-control of a single-organization  we inherently trusted all persons and devices connected to our lan  today  with byod and more sophisticated attacks  our lans have become more vulnerable to penetration categoryexamplesmac-table-attacksincludes mac-address flooding attacks vlan-attacksincludes vlan-hopping and vlan-double-tagging-attacks  it also includes attacks between devices on a common vlan dhcp-attacksincludes dhcp-starvation and dhcp-spoofing-attacks arp-attacksincludes arp-spoofing and arp-poisoning-attacks address spoofing-attacksincludes mac-address and ip-address spoofing-attacks stp-attacksincludes spanning-tree-protocol manipulation attacks 
layer-2 security-threats switch attack mitigation techniquessolutiondescriptionport-securityprevents many types of attacks including mac-address flooding attacks and dhcp-starvation attacks dhcp-snoopingprevents dhcp-starvation and dhcp-spoofing-attacks dynamic-arp-inspection  dai prevents arp-spoofing and arp-poisoning-attacks ip-source-guard  ipsg prevents mac and ip-address spoofing-attacks these layer-2 solutions will not be effective if the management protocols are not secured  the following strategies are recommended always use secure variants of management protocols such as ssh  secure-copy-protocol  scp   secure ftp  sftp   and secure-socket-layer transport-layer-security  ssl tls  consider using out-of-band management network to manage devices use a dedicated management vlan where nothing but management traffic resides use acls to filter unwanted access 
10 4 mac-address table attack
mac-address table attack switch operation reviewrecall that to make forwarding decisions  a layer-2 lan switch builds a table based on the source-mac-addresses in received frames  this is called a mac-address table  mac-address tables are stored in memory and are used to more efficiently switch frames 
mac-address table attack mac-address table floodingall mac tables have a fixed size and consequently  a switch can run out of resources in which to store mac-addresses  mac-address flooding attacks take advantage of this limitation by bombarding the switch with fake source-mac-addresses until the switch mac-address table is full when this occurs  the switch treats the frame as an unknown unicast and begins to flood all incoming traffic out all ports on the same vlan without referencing the mac table  this condition now allows a threat-actor to capture all of the frames sent from one host to another on the local lan or local vlan note  traffic is flooded only within the local lan or vlan  the threat-actor can only capture traffic within the local lan or vlan to which the threat-actor is connected 
mac-address table attack mac-address table attack mitigationwhat makes tools such as macof so dangerous is that an attacker can create a mac table overflow attack very quickly  for instance  a catalyst 6500 switch can store 132 000 mac-addresses in its mac-address table  a tool such as macof can flood a switch with up to 8 000 bogus frames per second  creating a mac-address table overflow attack in a matter of a few seconds another reason why these attack-tools are dangerous is because they not only affect the local-switch  they can also affect other connected layer-2 switches  when the mac-address table of a switch is full  it starts flooding out all ports including those connected to other layer-2 switches to mitigate mac-address table overflow attacks  network administrators must implement port-security  port-security will only allow a specified number of source-mac-addresses to be learned on the port  port-security is further discussed in another module 
3 4 malware
malware overview of malwarenow that you know about the tools that hacker use  this topic introduces you to different types of malware that hackers use to gain access to end-devices end-devices are particularly prone to malware attacks  it is important to know about malware because threat-actors rely on users to install malware to help exploit the security gaps 
malware viruses and trojan-horsesthe first and most common type of computer malware is a virus  viruses require human action to propagate and infect other computers  the virus hides by attaching itself to computer-code  software  or documents on the computer  when opened  the virus executes and infects the computer viruses can alter  corrupt  delete files  or erase entire drives cause computer booting issues  and corrupt applications capture and send sensitive-information to threat-actors access and use email accounts to spread lay dormant until summoned by the threat-actor 
malware viruses and trojan-horses  cont  modern viruses are developed for specific intent such as those listed in the table types of virusesdescriptionboot-sector-virusvirus attacks the boot sector  file partition-table  or file-system firmware-virusesvirus attacks the device firmware macro-virusvirus uses the ms office macro feature maliciously program-virusesvirus inserts itself in another executable program script-virusesvirus attacks the os interpreter which is used to execute scripts 
malware viruses and trojan-horses  cont  threat-actors use trojan-horses to compromise hosts  a trojan-horse is a program that looks useful but also carries malicious-code  trojan-horses are often provided with free online programs such as computer-games  there are several types of trojan-horses as described in the table type of trojan-horsedescriptionremote-accesstrojan-horse enables unauthorized remote-access data-sendingtrojan-horse provides the threat-actor with sensitive-data  such as passwords destructivetrojan-horse corrupts or deletes files proxytrojan-horse will use the victim s computer as the source device to launch attacks and perform other illegal activities ftptrojan-horse enables unauthorized-file transfer services on end-devices security-software-disablertrojan-horse stops antivirus programs or firewalls from functioning denial-of-service  dos trojan-horse slows or halts network activity keyloggertrojan-horse actively attempts to steal confidential information  such as credit-card numbers  by recording key-strokes entered into a web form 
malware other types of malwaremalwaredescriptionadwareadware is usually distributed by downloading online software  adware can display unsolicited advertising using pop-up web browser windows  new toolbars  or unexpectedly redirect a webpage to a different website  pop-up windows may be difficult to control as new windows can pop-up faster than the user can close them ransomwareransomware typically denies a user access to their files by encrypting the files and then displaying a message demanding a ransom for the decryption key  users without up-to-date backups must pay the ransom to decrypt their files  payment is usually made using wire transfer or crypto currencies such as bitcoin rootkitrootkits are used by threat-actors to gain administrator account-level access to a computer  they are very difficult to detect because they can alter firewall  antivirus protection  system files  and even os commands to conceal their presence  they can provide a backdoor to threat-actors giving them access to the pc  and allowing them to upload files  and install new software to be used in a ddos-attack  special rootkit removal tools must be used to remove them  or a complete os re-install may be required spywarelike adware but  used to gather-information about the user and send to threat-actors without the user s consent  spyware can be a low threat  gathering browsing data  or it can be a high threat capturing personal and financial information worma worm is a self-replicating program that propagates automatically without user actions by exploiting vulnerabilities in legitimate software  it uses the network to search for other victims with the same vulnerability  the intent of a worm is usually to slow or disrupt network operations
11 4 mitigate arp-attacks
mitigate arp-attacks dynamic-arp-inspectionin a typical arp attack  a threat-actor can send unsolicited arp replies to other hosts on the subnet with the mac-address of the threat-actor and the ip-address of the default-gateway  to prevent arp-spoofing and the resulting arp poisoning  a switch must ensure that only valid arp-requests and replies are relayed dynamic-arp-inspection  dai  requires dhcp-snooping and helps prevent arp-attacks by not relaying invalid or gratuitous-arp replies out to other ports in the same vlan intercepting all arp-requests and replies on untrusted ports verifying each intercepted packet for a valid ip-to-mac-binding dropping and logging arp replies coming from invalid to prevent arp poisoning error-disabling the interface if the configured dai number of arp packets is exceeded 
mitigate arp-attacks dai implementation guidelinesto mitigate the chances of arp-spoofing and arp poisoning  follow these dai implementation guidelines enable dhcp-snooping globally enable dhcp-snooping on selected vlans enable dai on selected vlans configure trusted interfaces for dhcp-snooping and arp inspection it is generally advisable to configure all access switch ports as untrusted and to configure all uplink ports that are connected to other switches as trusted 
mitigate arp-attacks dai configuration examplein the previous topology  s1 is connecting two users on vlan 10  dai will be configured to mitigate against arp-spoofing and arp-poisoning-attacks dhcp-snooping is enabled because dai requires the dhcp-snooping binding table to operate  next  dhcp-snooping and arp inspection are enabled for the pcs on vlan10  the uplink port to the router is trusted  and therefore  is configured as trusted for dhcp-snooping and arp inspection 
mitigate arp-attacks dai configuration example  cont  dai can also be configured to check for both destination or source-mac and ip-addresses destination-mac - checks the destination-mac-address in the ethernet-header against the target mac-address in arp body source-mac - checks the source-mac-address in the ethernet-header against the sender mac-address in the arp body ip-address - checks the arp body for invalid and unexpected ip-addresses including addresses 0 0 0 0  255 255 255 255  and all ip multicast-addresses 
mitigate arp-attacks dai configuration example  cont  the ip-arp-inspection-validate   src-mac   dst-mac   ip   global-configuration-command is used to configure dai to drop arp packets when the ip-addresses are invalid  it can be used when the mac-addresses in the body of the arp packets do not match the addresses that are specified in the ethernet-header  notice in the following example how only one command can be configured  therefore  entering multiple ip-arp-inspection-validate commands overwrites the previous command  to include more than one validation method  enter them on the same command-line as shown in the output 
11 3 mitigate dhcp-attacks
mitigate dhcp-attacks dhcp attack reviewthe goal of a dhcp-starvation attack is to an attack-tool such as gobbler to create a denial-of-service  dos  for connecting clients  recall that dhcp-starvation attacks can be effectively mitigated by using port-security because gobbler uses a unique source-mac-address for each dhcp-request sent  however  mitigating dhcp-spoofing-attacks requires more protection  gobbler could be configured to use the actual interface mac-address as the source-ethernet-address  but specify a different ethernet address in the dhcp payload  this would render port-security ineffective because the source-mac-address would be legitimate dhcp-spoofing-attacks can be mitigated by using dhcp-snooping on trusted ports 
mitigate dhcp-attacks dhcp-snoopingdhcp-snooping filters dhcp-messages and rate-limits dhcp traffic on untrusted ports devices under administrative-control  e g   switches  routers  and servers  are trusted sources  trusted interfaces  e g   trunk-links  server ports  must be explicitly configured as trusted devices outside the network and all access-ports are generally treated as untrusted sources a dhcp table is built that includes the source-mac-address of a device on an untrusted port and the ip-address assigned by the dhcp-server to that device  the mac-address and ip-address are bound together  therefore  this table is called the dhcp-snooping binding table 
mitigate dhcp-attacks steps to implement dhcp-snoopinguse the following steps to enable dhcp-snooping step 1  enable dhcp-snooping by using the ip dhcp-snooping global-configuration-command step 2  on trusted ports  use the ip dhcp-snooping trust interface configuration command step 3  on untrusted interfaces  limit the number of dhcp-discovery messages that can be received using the ip dhcp-snooping limit rate packets-per-second interface configuration command step 4  enable dhcp-snooping by vlan  or by a range of vlans  by using the ip dhcp-snooping vlan global-configuration-command 
mitigate dhcp-attacks dhcp-snooping configuration examplerefer to the dhcp-snooping sample topology with trusted and untrusted ports  dhcp-snooping is first enabled on s1  the upstream interface to the dhcp-server is explicitly trusted  f0 5 to f0 24 are untrusted and are  therefore  rate limited to six packets per second  finally  dhcp-snooping is enabled on vlans 5  10  50  51  and 52 
mitigate dhcp-attacks dhcp-snooping configuration example  cont  use the show ip dhcp-snooping privileged exec command to verify dhcp-snooping settings use the show ip dhcp-snooping binding command to view the clients that have received dhcp information note  dhcp-snooping is also required by dynamic-arp-inspection  dai  
11 5 mitigate stp-attacks
mitigate stp-attacks portfast and bpdu-guardrecall that network-attackers can manipulate the spanning-tree-protocol  stp  to conduct an attack by spoofing the root-bridge and changing the topology of a network  to mitigate stp-attacks  use portfast and bridge protocol-data-unit  bpdu  guard portfastportfast immediately brings a port to the forwarding state from a blocking state  bypassing the listening and learning states  apply to all end-user access-ports  bpdu-guardbpdu-guard immediately error disables a port that receives a bpdu  like portfast  bpdu-guard should only be configured on interfaces attached to end-devices 
mitigate stp-attacks configure portfastportfast bypasses the stp listening and learning states to minimize the time that access-ports must wait for stp to converge  only enable portfast on access-ports portfast on inter switch links can create a spanning-tree loop portfast can be enabled on an interface   use the spanning-tree portfast interface configuration command  globally   use the spanning-tree portfast default global-configuration-command to enable portfast on all access-ports 
mitigate stp-attacks configure portfast  cont  to verify whether portfast is enabled globally you can use either the show-running-config   begin span command show-spanning-tree-summary commandto verify if portfast is enabled an interface  use the show-running-config-interface type number command  the show spanning-tree-interface type number detail command can also be used for verification 
mitigate stp-attacks configure bpdu-guardan access-port could receive an unexpected bpdus accidentally or because a user connected an unauthorized switch to the access-port if a bpdu is received on a bpdu-guard enabled access-port  the port is put into error-disabled-state  this means the port is shut-down and must be manually re-enabled or automatically recovered through the errdisable recovery cause psecure violation global-command bpdu-guard can be enabled on an interface   use the spanning-tree-bpduguard-enable interface configuration command  globally   use the spanning-tree-portfast-bpduguard-default global-configuration-command to enable bpdu-guard on all access-ports 
11 2 mitigate vlan-attacks
mitigate vlan-attacks vlan-attacks reviewa vlan-hopping attack can be launched in one of three ways spoofing-dtp-messages from the attacking host to cause the switch to enter trunking-mode  from here  the attacker can send traffic tagged with the target vlan  and the switch then delivers the packets to the destination introducing a rogue switch and enabling trunking  the attacker can then access all the vlans on the victim switch from the rogue switch another type of vlan-hopping attack is a double-tagging  or double-encapsulated  attack  this attack takes advantage of the way hardware on most switches operate 
mitigate vlan-attacks steps to mitigate vlan-hopping attacksuse the following steps to mitigate vlan-hopping attacks step 1  disable dtp  auto trunking  negotiations on non-trunking-ports by using the switchport-mode-access interface configuration command step 2  disable unused ports and put them in an unused vlan step 3  manually enable the trunk-link on a trunking-port by using the switchport-mode trunk command step 4  disable dtp  auto trunking  negotiations on trunking-ports by using the switchport-nonegotiate command step 5  set the native-vlan to a vlan other than vlan 1 by using the switchport trunk native-vlan vlan number command 
16 3 network-attack mitigations
network-attack mitigations the defense-in-depth-approachto mitigate network-attacks  you must first secure devices including routers  switches  servers  and hosts  most organizations employ a defense-in-depth-approach  also known as a layered approach  to security  this requires a combination of networking-devices and services working in tandem several security devices and services are implemented to protect an organization s users and assets against tcp ip threats vpn asa-firewall ips esa wsa aaa-server 
network-attack mitigations keep-backupsbacking up device configurations and data is one of the most effective ways of protecting against data-loss  backups should be performed on a regular basis as identified in the security-policy  data backups are usually stored offsite to protect the backup media if anything happens to the main facility  the table shows backup considerations and their descriptions considerationdescriptionfrequencyperform backups on a regular basis as identified in the security-policy  full backups can be time-consuming  therefore perform monthly or weekly backups with frequent partial backups of changed files storagealways validate backups to ensure the integrity of the data and validate the file restoration procedures securitybackups should be transported to an approved offsite storage location on a daily  weekly  or monthly rotation  as required by the security-policy validationbackups should be protected using strong passwords  the password is required to restore the data 
network-attack mitigations upgrade  update  and patchas new malware is released  enterprises need to keep current with the latest versions of antivirus-software the most effective way to mitigate a worm attack is to download security updates from the operating system vendor and patch all vulnerable systems one solution to the management of critical security patches is to make sure all end systems automatically download updates 
network-attack mitigations authentication  authorization  and accountingauthentication  authorization  and accounting  aaa  or  triple a   network security services provide the primary-framework to set up access-control on network-devices aaa is a way to control who is permitted to access a network  authenticate   what actions they perform while accessing the network  authorize   and making a record of what was done while they are there  accounting  the concept of aaa is similar to the use of a credit-card  the credit-card identifies who can use it  how much that user can spend  and keeps account of what items the user spent money on 
network-attack mitigations firewallsnetwork-firewalls reside between two or more networks  control the traffic between them  and help prevent unauthorized-access a firewall could allow outside users controlled-access to specific services  for example  servers accessible to outside users are usually located on a special network referred to as the demilitarized-zone  dmz   the dmz enables a network administrator to apply specific policies for hosts connected to that network 
network-attack mitigations types of firewallsfirewall products come packaged in various forms  these products use different techniques for determining what will be permitted or denied access to a network  they include the following packet-filtering - prevents or allows access based on ip or mac-addressesapplication-filtering - prevents or allows access by specific application types based on port-numbersurl-filtering - prevents or allows access to websites based on specific urls or keywordsstateful-packet-inspection  spi  - incoming packets must be legitimate responses to requests from internal hosts  unsolicited packets are blocked unless permitted specifically  spi can also include the capability to recognize and filter out specific types of attacks  such as denial-of-service  dos  
network-attack mitigations endpoint-securityan endpoint  or host  is an individual computer system or device that acts as a network client  common endpoints are laptops  desktops  servers  smartphones  and tablets securing endpoint devices is one of the most challenging jobs of a network administrator because it involves human nature  a company must have well-documented policies in place and employees must be aware of these rules  employees need to be trained on proper use of the network  policies often include the use of antivirus-software and host intrusion prevention  more comprehensive endpoint-security solutions rely on network access-control 
16 2 network-attacks
network-attacks types of malwaremalware is short for malicious-software  it is code or software specifically designed to damage  disrupt  steal  or inflict  bad  or illegitimate action on data  hosts  or networks  the following are types of malware viruses - a computer virus is a type of malware that propagates by inserting a copy of itself into  and becoming part of  another program  it spreads from one computer to another  leaving infections as it travels  worms - computer worms are similar to viruses in that they replicate functional copies of themselves and can cause the same type of damage  in contrast to viruses  which require the spreading of an infected host file  worms are standalone software and do not require a host program or human help to propagate  trojan-horses - it is a harmful piece of software that looks legitimate  unlike viruses and worms  trojan-horses do not reproduce by infecting other files  they self-replicate  trojan-horses must spread through user interaction such as opening an email attachment or downloading and running a file from the internet 
network-attacks reconnaissance-attacksin addition to malicious-code attacks  it is also possible for networks to fall prey to various network-attacks  network-attacks can be classified into three major categories reconnaissance-attacks - the discovery and mapping of systems  services  or vulnerabilities access-attacks - the unauthorized manipulation of data  system access  or user privileges denial-of-service - the disabling or corruption of networks  systems  or services for reconnaissance-attacks  external-threat-actors can use internet tools  such as the nslookup and whois utilities  to easily determine the ip-address space assigned to a given corporation or entity  after the ip-address space is determined  a threat-actor can then ping the publicly available ip-addresses to identify the addresses that are active  
network-attacks access-attacksaccess-attacks exploit known vulnerabilities in authentication-services  ftp-services  and web services to gain entry to web accounts  confidential databases  and other sensitive-information  access-attacks can be classified into four types  password-attacks - implemented using brute-force  trojan-horse  and packet-snifferstrust-exploitation -  a threat-actor uses unauthorized privileges to gain access to a system  possibly compromising the target port-redirection  - a threat-actor uses a compromised system as a base for attacks against other targets  for example  a threat-actor using ssh  port 22  to connect to a compromised host a  host a is trusted by host b and  therefore  the threat-actor can use telnet  port 23  to access it man-in-the-middle - the threat-actor is positioned in between two legitimate entities in order to read or modify the data that passes between the two parties 
network-attacks denial-of-service-attacksdenial-of-service  dos  attacks are the most publicized form of attack and among the most difficult to eliminate  however  because of their ease of implementation and potentially significant damage  dos-attacks deserve special attention from security administrators dos-attacks take many forms  ultimately  they prevent authorized people from using a service by consuming system resources  to help prevent dos-attacks it is important to stay up to date with the latest security updates for operating systems and applications dos-attacks are a major risk because they interrupt communication and cause significant loss of time and money  these attacks are relatively simple to conduct  even by an unskilled threat-actor a ddos is similar to a dos-attack  but it originates from multiple  coordinated sources  for example  a threat-actor builds a network of infected hosts  known as zombies  a network of zombies is called a botnet  the threat-actor uses a command-and-control  cnc  program to instruct the botnet of zombies to carry out a ddos-attack 
network-attacks lab   research network security-threatsin this lab  you will complete the following objectives part 1  explore the sans websitepart 2  identify recent network security-threatspart 3  detail a specific network security threat
3 9 network security best-practices
network security best-practices confidentiality  availability  and integritynetwork security consists of protecting information and information systems from unauthorized-access  use  disclosure  disruption  modification  or destruction most organizations follow the cia information security triad confidentiality - only authorized individuals  entities  or processes can access sensitive-information  it may require using cryptographic encryption-algorithms such as aes to encrypt and decrypt data-integrity - refers to protecting data from unauthorized alteration  it requires the use of cryptographic hashing algorithms such as sha availability - authorized users must have uninterrupted access to important resources and data  it requires implementing redundant services  gateways  and links 
network security best-practices the defense-in-depth-approachto ensure secure communications across both public and private-networks  you must secure devices including routers  switches  servers  and hosts  most organizations employ a defense-in-depth-approach to security  it requires a combination of networking-devices and services working together several security devices and services are implemented vpn asa-firewallipsesa wsaaaa-serverall network-devices including the router and switches are hardened you must also secure data as it travels across various links  
network security best-practices firewallsa firewall is a system  or group of systems  that enforces an access-control policy between networks 
network security best-practices ipsto defend against fast-moving and evolving attacks  you may need cost-effective detection and prevention systems integrated into the entry and exit points of the network ids and ips technologies share several characteristics  ids and ips technologies are both deployed as sensors  an ids or ips sensor can be in the form of several different devices a router configured with cisco ios ips softwarea device specifically designed to provide dedicated ids or ips servicesa network module installed in an adaptive-security-appliance  asa   switch  or routerids and ips technologies detect patterns in network-traffic using signatures  which is a set of rules that used to detect malicious activity  ids and ips technologies can detect atomic signature-patterns  single-packet  or composite signature-patterns  multi-packet  
network security best-practices ips  cont  the figure shows how an ips handles denied traffic the threat-actor sends a packet destined for the target laptop the ips intercepts the traffic and evaluates it against known threats and the configured policies the ips sends a log message to the management console the ips drops the packet 
network security best-practices content security devicesthe cisco email-security-appliance  esa  is a special device designed to monitor simple-mail-transfer-protocol  smtp   the cisco esa is constantly updated by real-time feeds from the cisco talos  this threat intelligence data is pulled by the cisco esa every three to five minutes the cisco web-security-appliance  wsa  is a mitigation technology for web-based threats  the cisco wsa combines advanced-malware-protection  application-visibility and control  acceptable use policy controls  and reporting cisco wsa provides complete control over how users access the internet  the wsa can perform blacklisting of urls  url-filtering  malware-scanning  url-categorization  web-application-filtering  and encryption and decryption of web traffic 
module 16  network security fundamentalsintroduction to networks v7 0  itn 
module objectivesmodule title  network security fundamentalsmodule objective  configure switches and routers with device hardening features to enhance security topic titletopic objectivesecurity-threats and vulnerabilitiesexplain why basic security measure are necessary on network-devices network-attacksidentify security vulnerabilities network-attack mitigationidentify general mitigation techniques device-securityconfigure network-devices with device hardening features to mitigate security-threats 
16 1 security-threats and vulnerabilities
security-threats and vulnerabilities types of threatsattacks on a network can be devastating and can result in a loss of time and money due to damage  or theft of important information or assets  intruders can gain access to a network through software vulnerabilities  hardware attacks  or through guessing someone s username and password  intruders who gain access by modifying software or exploiting software vulnerabilities are called threat-actors after the threat-actor gains access to the network  four types of threats may arise information-theftdata-loss and manipulationidentity-theftdisruption-of-service
security-threats and vulnerabilities types of vulnerabilitiesvulnerability is the degree of weakness in a network or a device  some degree of vulnerability is inherent in routers  switches  desktops  servers  and even security devices  typically  the network-devices under attack are the endpoints  such as servers and desktop computers  there are three primary vulnerabilities or weaknesses technological vulnerabilities might include tcp ip protocol weaknesses  operating system weaknesses  and network-equipment weaknesses configuration vulnerabilities might include unsecured user accounts  system accounts with easily guessed passwords  misconfigured internet services  unsecure default settings  and misconfigured network-equipment security-policy vulnerabilities might include lack of a written security-policy  politics  lack of authentication continuity  logical-access-controls not applied  software and hardware installation and changes not following policy  and a nonexistent disaster recovery plan all three of these sources of vulnerabilities can leave a network or device open to various attacks  including malicious-code attacks and network-attacks 
security-threats and vulnerabilities physical-securityif network resources can be physically compromised  a threat-actor can deny the use of network resources  the four classes of physical threats are as follows hardware threats - this includes physical-damage to servers  routers  switches  cabling-plant  and workstations environmental-threats - this includes temperature extremes  too hot or too cold  or humidity extremes  too wet or too dry  electrical threats - this includes voltage spikes  insufficient supply voltage  brownouts   unconditioned-power  noise   and total power loss maintenance threats - this includes poor handling of key electrical components  electrostatic discharge   lack of critical spare parts  poor-cabling  and poor-labeling a good plan for physical-security must be created and implemented to address these issues  
module 11  switch security configurationswitching  routing and wireless essentials v7 0  srwe 
module objectivesmodule title  switch security configurationmodule objective  configure switch security to mitigate lan-attackstopic titletopic objectiveimplement port-securityimplement port-security to mitigate mac-address table attacks mitigate vlan-attacksexplain how to configure dtp and native-vlan to mitigate vlan-attacks mitigate dhcp-attacksexplain how to configure dhcp-snooping to mitigate dhcp-attacks mitigate arp-attacksexplain how to configure arp inspection to mitigate arp-attacks mitigate stp-attacksexplain how to configure portfast and bpdu-guard to mitigate stp-attacks 
11 1 implement port-security
implement port-security secure unused portslayer-2 attacks are some of the easiest for hackers to deploy but these threats can also be mitigated with some common layer-2 solutions all switch ports  interfaces  should be secured before the switch is deployed for production use  how a port is secured depends on its function a simple method that many administrators use to help secure the network from unauthorized-access is to disable all unused ports on a switch  navigate to each unused port and issue the cisco ios shutdown command  if a port must be reactivated at a later time  it can be enabled with the no-shutdown command to configure a range of ports  use the interface-range command switch config   interface-range type module first-number   last-number 
implement port-security mitigate mac-address table attacksthe simplest and most effective method to prevent mac-address table overflow attacks is to enable port-security port-security limits the number of valid mac-addresses allowed on a port  it allows an administrator to manually configure mac-addresses for a port or to permit the switch to dynamically learn a limited number of mac-addresses  when a port configured with port-security receives a frame  the source-mac-address of the frame is compared to the list of secure source-mac-addresses that were manually-configured or dynamically-learned on the port by limiting the number of permitted mac-addresses on a port to one  port-security can be used to control unauthorized-access to the network 
implement port-security enable port-securityport-security is enabled with the switchport-port-security interface configuration command notice in the example  the switchport-port-security command was rejected  this is because port-security can only be configured on manually-configured access-ports or manually-configured trunk-ports  by default  layer-2 switch ports are set to dynamic-auto  trunking on   therefore  in the example  the port is configured with the switchport-mode-access interface configuration command note  trunk port-security is beyond the scope of this course 
implement port-security enable port-security  cont  use the show-port-security-interface command to display the current port-security settings for fastethernet 0 1  notice how port-security is enabled  the violation-mode is shutdown  and how the maximum-number of mac-addresses is 1  if a device is connected to the port  the switch will automatically add the device s mac-address as a secure mac  in this example  no device is connected to the port note  if an active port is configured with the switchport-port-security command and more than one device is connected to that port  the port will transition to the error-disabled-state  
implement port-security enable port-security  cont  after port-security is enabled  other port-security specifics can be configured  as shown in the example 
implement port-security limit and learn mac-addressesto set the maximum-number of mac-addresses allowed on a port  use the following command the default port-security value is 1  the maximum-number of secure mac-addresses that can be configured depends the switch and the ios  in this example  the maximum is 8192 switch config-if   switchport-port-security maximum value 
implement port-security limit and learn mac-addresses  cont  the switch can be configured to learn about mac-addresses on a secure port in one of three ways 1  manually-configured  the administrator manually configures a static mac-address es  by using the following command for each secure mac-address on the port switch config-if   switchport-port-security mac-address mac-address 2  dynamically-learned  when the switchport-port-security command is entered  the current source-mac for the device connected to the port is automatically secured but is not added to the running-configuration  if the switch is rebooted  the port will have to re-learn the device s mac-address 3  dynamically-learned   sticky  the administrator can enable the switch to dynamically learn the mac-address and  stick  them to the running-configuration by using the following command switch config-if   switchport-port-security mac-address sticky saving the running-configuration will commit the dynamically-learned mac-address to nvram 
implement port-security limit and learn mac-addresses  cont  the example demonstrates a complete port-security configuration for fastethernet 0 1  the administrator specifies a maximum of 4 mac-addresses  manually configures one secure mac-address  and then configures the port to dynamically learn additional secure mac-addresses up to the 4 secure mac-address maximum  use the show-port-security-interface and the show-port-security-address command to verify the configuration 
implement port-security port-security agingport-security aging can be used to set the aging time for static and dynamic-secure-addresses on a port and two types of aging are supported per port absolute - the secure addresses on the port are deleted after the specified aging time inactivity - the secure addresses on the port are deleted if they are inactive for a specified time use aging to remove secure mac-addresses on a secure port without manually deleting the existing secure mac-addresses  aging of statically configured secure addresses can be enabled or disabled on a per-port basis use the switchport-port-security aging command to enable or disable static aging for the secure port  or to set the aging time or type switch config-if   switchport-port-security aging  static   time time   type  absolute   inactivity  
implement port-security port-security aging  cont  the example shows an administrator configuring the aging type to 10 minutes of inactivity the show port-security command confirms the changes  interface command to verify the configuration 
implement port-security port-security-violation-modesif the mac-address of a device attached to a port differs from the list of secure addresses  then a port violation occurs and the port enters the error-disabled-state to set the port-security-violation-mode  use the following command switch config-if   switchport-port-security-violation  shutdown   restrict   protect  modedescriptionshutdown  default the port transitions to the error-disabled-state immediately  turns off the port led  and sends a syslog-message  it increments the violation counter  when a secure port is in the error-disabled-state  an administrator must re-enable it by entering the shutdown and no-shutdown commands restrictthe port drops packets with unknown source addresses until you remove a sufficient-number of secure mac-addresses to drop below the maximum value or increase the maximum value  this mode causes the security-violation counter to increment and generates a syslog-message protectthis is the least secure of the security-violation-modes  the port drops packets with unknown mac source addresses until you remove a sufficient-number of secure mac-addresses to drop below the maximum value or increase the maximum value  no syslog-message is sent the following table shows how a switch reacts based on the configured violation-mode 
implement port-security port-security-violation-modes  cont  the example shows an administrator changing the security-violation to  restrict   the output of the show-port-security-interface command confirms that the change has been made 
implement port-security ports in error-disabled-statewhen a port is shutdown and placed in the error-disabled-state  no traffic is sent or received on that port  a series of port-security related messages display on the console  as shown in the following example note  the port protocol and link status are changed to down and the port led is turned off 
implement port-security ports in error-disabled-state  cont  in the example  the show interface command identifies the port status as err-disabled  the output of the show-port-security-interface command now shows the port status as secure-shutdown  the security-violation counter increments by 1 the administrator should determine what caused the security-violation if an unauthorized device is connected to a secure port  the security threat is eliminated before re-enabling the port to re-enable the port  first use the shutdown command  then  use the no-shutdown command  
implement port-security verify port-securityafter configuring port-security on a switch  check each interface to verify that the port-security is set correctly  and check to ensure that the static mac-addresses have been configured correctly to display port-security settings for the switch  use the show port-security command  the example indicates that all 24 interfaces are configured with the switchport-port-security command because the maximum allowed is 1 and the violation-mode is shutdown  no devices are connected  therefore  the currentaddr  count  is 0 for each interface 
implement port-security verify port-security  cont  use the show-port-security-interface command to view details for a specific interface  as shown previously and in this example 
implement port-security verify port-security  cont  to verify that mac-addresses are  sticking  to the configuration  use the show run command as shown in the example for fastethernet 0 19 
implement port-security verify port-security  cont  to display all secure mac-addresses that are manually-configured or dynamically-learned on all switch interfaces  use the show-port-security-address command as shown in the example 
implement port-security packet tracer   implement port-securityin this packet tracer  you will complete the following objectives part 1  configure port-securitypart 2  verify port-security
3 7 tcp and udp vulnerabilities
tcp and udp vulnerabilities tcp-segment-headertcp-segment information appears immediately after the ip-header  the fields of the tcp-segment and the flags for the control-bits field are displayed in the figure the following are the six control-bits of the tcp-segment urg - urgent-pointer-field-significantack - acknowledgment-field-significantpsh - push-functionrst- reset-the-connectionsyn - synchronize-sequence-numbersfin - no-more-data-from-sender
tcp and udp vulnerabilities tcp servicestcp provides these services reliable-delivery - tcp incorporates acknowledgments to guarantee delivery  if a timely acknowledgment is not received  the sender retransmits the data  requiring acknowledgments of received data can cause substantial delays  examples of application-layer protocols that make use of tcp-reliability include http  ssl tls  ftp  dns-zone transfers  and others flow-control - tcp implements flow-control to address this issue  rather than acknowledge one segment at a time  multiple segments can be acknowledged with a single acknowledgment segment stateful-communication - tcp stateful-communication between two parties occurs during the tcp three-way-handshake  
tcp and udp vulnerabilities tcp services  cont  a tcp-connection is established in three steps the initiating client requests a client-to-server communication-session with the server the server acknowledges the client-to-server communication-session and requests a server-to-client communication-session the initiating client acknowledges the server-to-client communication-session 
tcp and udp vulnerabilities tcp attackstcp syn-flood-attackthe threat-actor sends multiple syn requests to a webserver the web-server replies with syn-acks for each syn request and waits to complete the three-way-handshake  the threat-actor does not respond to the syn-acks a valid user cannot access the web-server because the web-server has too many half-opened tcp-connections 
tcp and udp vulnerabilities tcp attacks  cont  terminating a tcp session uses the following four-way exchange process when the client has no more data to send in the stream  it sends a segment with the fin-flag-set the server sends an ack to acknowledge the receipt of the fin to terminate the session from client to server the server sends a fin to the client to terminate the server-to-client session the client responds with an ack to acknowledge the fin from the server a threat-actor could do a tcp reset attack and send a spoofed packet containing a tcp rst to one or both endpoints 
tcp and udp vulnerabilities tcp attacks  cont  tcp session-hijacking is another tcp vulnerability  although difficult to conduct  a threat-actor takes over an already-authenticated host as it communicates with the target  the threat-actor must spoof the ip-address of one host  predict the next sequence-number  and send an ack to the other host  if successful  the threat-actor could send  but not receive  data from the target device 
tcp and udp vulnerabilities udp segment-header and operationudp is commonly used by dns  tftp  nfs  and snmp  it is also used with real-time applications such as media streaming or voip  udp is a connectionless transport-layer protocol  it has much lower overhead than tcp because it is not connection-oriented and does not offer the sophisticated retransmission  sequencing  and flow-control mechanisms that provide reliability  these reliability functions are not provided by the transport-layer protocol and must be implemented elsewhere if required the low overhead of udp makes it very desirable for protocols that make simple request and reply transactions  
tcp and udp vulnerabilities udp attacksudp is not protected by any encryption  you can add encryption to udp  but it is not available by default  the lack of encryption means that anyone can see the traffic  change it  and send it on to its destination udp flood attacks  the threat-actor uses a tool like udp unicorn or low orbit ion cannon  these tools send a flood of udp packets  often from a spoofed host  to a server on the subnet  the program will sweep through all the known ports trying to find closed ports  this will cause the server to reply with an icmp port-unreachable message  because there are many closed ports on the server  this creates a lot of traffic on the segment  which uses up most of the bandwidth  the result is very similar to a dos-attack 
3 2 threat-actors
threat-actors the hackerhacker is a common term used to describe a threat-actorhacker typedescriptionwhite-hat-hackersthese are ethical hackers who use their programming skills for good  ethical  and legal purposes  security vulnerabilities are reported to developers for them to fix before the vulnerabilities can be exploited gray-hat-hackersthese are individuals who commit crimes and do arguably unethical things  but not for personal gain or to cause damage  gray-hat-hackers may disclose a vulnerability to the affected organization after having compromised their network black-hat-hackersthese are unethical criminals who compromise computer and network security for personal gain  or for malicious reasons  such as attacking networks 
threat-actors the evolution of hackersthe table displays modern hacking terms and a brief description of each hacking termdescriptionscript-kiddiesthese are teenagers or inexperienced hackers running existing scripts  tools  and exploits  to cause harm  but typically not for profit vulnerability-brokerthese are usually gray-hat-hackers who attempt to discover exploits and report them to vendors  sometimes for prizes or rewards hacktiviststhese are gray-hat-hackers who publicly protest organizations or governments by posting articles  videos  leaking sensitive-information  and performing network-attacks cyber-criminalsthese are black-hat-hackers who are either self-employed or working for large cybercrime organizations state-sponsoredthese are either white hat or black-hat-hackers who steal government secrets  gather intelligence  and sabotage networks  their targets are foreign governments  terrorist groups  and corporations  most countries in the world participate to some degree in state-sponsored hacking
threat-actors cyber-criminalsit is estimated that cyber-criminals steal billions of dollars from consumers and businesses  cyber-criminals operate in an underground economy where they buy  sell  and trade attack-toolkits  zero-day exploit-code  botnet services  banking trojans  keyloggers  and much more  they also buy and sell the private information and intellectual property they steal  cyber-criminals target small businesses and consumers  as well as large enterprises and entire industries 
threat-actors hacktiviststwo examples of hacktivist groups are anonymous and the syrian-electronic-army  although most hacktivist groups are not well organized  they can cause significant problems for governments and businesses  hacktivists tend to rely on fairly basic  freely available tools 
threat-actors state-sponsored hackersstate-sponsored hackers create advanced  customized attack-code  often using previously undiscovered software vulnerabilities called zero-day vulnerabilities  an example of a state-sponsored attack involves the stuxnet-malware that was created to damage iran s nuclear enrichment capabilities 
3 3 threat-actor tools
threat-actor tools video   threat-actor toolsthis video will cover the following explain the penetration testing-toolsexplain attack types
threat-actor tools introduction to attack-toolsto exploit a vulnerability  a threat-actor must have a technique or tool  over the years  attack-tools have become more sophisticated  and highly automated  these new tools require less technical knowledge to implement 
threat-actor tools evolution of security toolsthe table highlights categories of common penetration testing-tools  notice how some tools are used by white hats and black hats  keep in mind that the list is not exhaustive as new tools are always being developed penetration testing-tooldescriptionpassword-crackerspassword cracking tools are often referred to as password recovery tools and can be used to crack or recover a password  password-crackers repeatedly make guesses in order to crack the password  examples of password cracking tools include john the ripper  ophcrack  l0phtcrack  thc-hydra  rainbow-crack  and medusa wireless-hacking-toolswireless-hacking-tools are used to intentionally hack into a wireless network to detect security vulnerabilities  examples of wireless-hacking-tools include aircrack-ng  kismet  inssider  kismac  firesheep  and vistumbler network-scanning-and-hacking-toolsnetwork scanning tools are used to probe network-devices  servers  and hosts for open tcp or udp ports  examples of scanning tools include nmap  superscan  angry ip scanner  and netscantools packet-crafting-toolsthese tools are used to probe and test a firewall s robustness using specially crafted forged packets  examples include hping  scapy  socat  yersinia  netcat  nping  and nemesis packet-sniffersthese tools are used to capture and analyze packets within traditional ethernet-lans or wlans  tools include wireshark  tcpdump  ettercap  dsniff  etherape  paros  fiddler  ratproxy  and sslstrip 
threat-actor tools evolution of security tools  cont  penetration testing-tooldescriptionrootkit-detectorsthis is a directory and file integrity checker used by white hats to detect installed root kits  example tools include aide  netfilter  and pf  openbsd packet filter fuzzers-to-search-vulnerabilitiesfuzzers are tools used by threat-actors to discover a computer s security vulnerabilities  examples of fuzzers include skipfish  wapiti  and w3af forensic-toolsthese tools are used by white-hat-hackers to sniff out any trace of evidence existing in a computer  example of tools include sleuth kit  helix  maltego  and encase debuggersthese tools are used by black hats to reverse engineer binary files when writing exploits  they are also used by white hats when analyzing malware  debugging tools include gdb  windbg  ida pro  and immunity debugger hacking-operating-systemsthese are specially designed operating systems preloaded with tools optimized for hacking  examples of specially designed hacking-operating-systems include kali linux  backbox linux encryption-toolsencryption-tools use algorithm schemes to encode the data to prevent unauthorized-access to the encrypted data  examples of these tools include veracrypt  ciphershed  openssh  openssl  tor  openvpn  and stunnel vulnerability-exploitation-toolsthese tools identify whether a remote-host is vulnerable to a security attack  examples of vulnerability-exploitation-tools include metasploit  core impact  sqlmap  social engineer toolkit  and netsparker vulnerability-scannersthese tools scan a network or system to identify open ports  they can also be used to scan for known vulnerabilities and scan vms  byod devices  and client databases  examples of tools include nipper  core impact  nessus  saint  and openvas
threat-actor tools attack typesattack typedescriptioneavesdropping-attackthis is when a threat-actor captures and  listens  to network-traffic  this attack is also referred to as sniffing or snooping data-modification-attackif threat-actors have captured enterprise traffic  they can alter the data in the packet without the knowledge of the sender or receiver ip-address spoofing-attacka threat-actor constructs an ip-packet that appears to originate from a valid address inside the corporate intranet password-based-attacksif threat-actors discover a valid user account  the threat-actors have the same rights as the real user  threat-actors could use that valid account to obtain lists of other users  network information  change server and network configurations  and modify  reroute  or delete data denial-of-service-attacka dos-attack prevents normal use of a computer or network by valid users  a dos-attack can flood a computer or the entire network with traffic until a shutdown occurs because of the overload  a dos-attack can also block traffic  which results in a loss of access to network resources by authorized users man-in-the-middle-attackthis attack occurs when threat-actors have positioned themselves between a source and destination  they can now actively monitor  capture  and control the communication transparently compromised-key-attackif a threat-actor obtains a secret key  that key is referred to as a compromised key  a compromised key can be used to gain access to a secured communication without the sender or receiver being aware of the attack sniffer-attacka sniffer is an application or device that can read  monitor  and capture network data exchanges and read network packets  if the packets are not encrypted  a sniffer provides a full view of the data inside the packet
15 3 web and email-protocols
web and email-protocols hypertext-transfer-protocol and hypertext-markup-languagewhen a web address or uniform-resource-locator  url  is typed into a web browser  the web browser establishes a connection to the web service  the web service is running on the server that is using the http protocol  to better understand how the web browser and web-server interact  examine how a web page is opened in a browser step 1 the browser interprets the three parts of the url http  the protocol or scheme www cisco com  the server name index html  the specific filename requested 
web and email-protocols hypertext-transfer-protocol and hypertext-markup-language  cont   step 2the browser then checks with a name server to convert www cisco com into a numeric ip-address  which it uses to connect to the server  the client initiates an http request to a server by sending a get request to the server and asks for the index html file step 3in response to the request  the server sends the html-code for this web page to the browser 
web and email-protocols hypertext-transfer-protocol and hypertext-markup-language  cont   step 4the browser deciphers the html-code and formats the page for the browser window 
web and email-protocols http and httpshttp is a request response protocol that specifies the message-types used for that communication  the three common message-types are get  post  and put get - this is a client request for data  a client  web browser  sends the get-message to the web-server to request-html-pages post - this uploads data files to the web-server  such as form data put - this uploads resources or content to the web-server  such as an image note  http is not a secure protocol  for secure communications sent across the internet  https should be used 
web and email-protocols email-protocolsemail is a store-and-forward method of sending  storing  and retrieving electronic-messages across a network  email messages are stored in databases on mail servers  email clients communicate with mail servers to send and receive email the email-protocols used for operation are  simple-mail-transfer-protocol  smtp    used to send mail post-office-protocol  pop    imap   used for clients to receive mail 
web and email-protocols smtp  pop and imapwhen a client sends email  the client smtp process connects with a server smtp process on well-known port 25  after the connection is made  the client attempts to send the email to the server across the connection  when the server receives the message  it either places the message in a local account  if the recipient is local  or forwards the message to another mail server for delivery the destination email server may not be online or may be busy  if so  smtp-spools-messages to be sent at a later time  note  smtp message-formats require a message header  recipient email address   sender email address  and a message body 
web and email-protocols smtp  pop and imap  cont  pop is used by an application to retrieve mail from a mail server  when mail is downloaded from the server to the client using pop the messages are then deleted on the server  the server starts the pop service by passively listening on tcp port 110 for client connection requests  when a client wants to make use of the service  it sends a request to establish a tcp-connection with the server when the connection is established  the pop-server sends a greeting  the client and pop-server then exchange commands and responses until the connection is closed or aborted note  since pop does not store messages  it is not recommended for small businesses that need a centralized backup solution 
web and email-protocols smtp  pop and imap  cont  imap is another protocol that describes a method to retrieve email messages unlike pop  when a user connects to an imap-server  copies of the messages are downloaded to the client application  the original messages are kept on the server until manually deleted  when a user decides to delete a message  the server synchronizes that action and deletes the message from the server 
5 3 evolution of stp
evolution of stp different versions of stpmany professionals generically use spanning-tree and stp to refer to the various implementations of spanning-tree  such as rapid spanning-tree-protocol  rstp  and multiple spanning-tree-protocol  mstp   in order to communicate spanning-tree concepts correctly  it is important to refer to the implementation or standard of spanning-tree in context the latest ieee documentation on spanning-tree  ieee-802-1d-2004  says   stp has now been superseded by the rapid spanning-tree-protocol  rstp   the ieee uses  stp  to refer to the original implementation of spanning-tree and  rstp  to describe the version of spanning-tree specified in ieee-802 1d-2004  because the two protocols share much of the same terminology and methods for the loop-free path  the primary focus will be on the current standard and the cisco proprietary implementations of stp and rstp cisco-switches running ios 15 0 or later  run pvst  by default  this version incorporates many of the specifications of ieee 802 1d-2004  such as alternate-ports in place of the former non-designated-ports  switches must be explicitly configured for rapid spanning-tree mode in order to run the rapid spanning-tree-protocol 
evolution of stp different versions of stp  cont  stp varietydescriptionstpthis is the original ieee 802 1d version  802 1d-1998 and earlier  that provides a loop-free topology in a network with redundant links  also called common spanning-tree  cst   it assumes one spanning-tree-instance for the entire bridged network  regardless of the number of vlans pvst per-vlan spanning-tree  pvst   is a cisco enhancement of stp that provides a separate 802 1d spanning-tree-instance for each vlan configured in the network  pvst  supports portfast  uplinkfast  backbonefast  bpdu-guard  bpdu-filter  root-guard  and loop-guard 802 1d-2004this is an updated version of the stp standard  incorporating ieee 802 1w rstprapid spanning-tree-protocol  rstp  or ieee 802 1w is an evolution of stp that provides faster-convergence than stp rapid pvst this is a cisco enhancement of rstp that uses pvst  and provides a separate instance of 802 1w per vlan  each separate instance supports portfast  bpdu-guard  bpdu-filter  root-guard  and loop-guard mstpmultiple spanning-tree-protocol  mstp  is an ieee standard inspired by the earlier cisco proprietary multiple-instance-stp  mistp  implementation  mstp maps multiple-vlans into the same spanning-tree-instance mstmultiple spanning-tree  mst  is the cisco implementation of mstp  which provides up to 16 instances of rstp and combines many vlans with the same physical and logical-topology into a common rstp instance  each instance supports portfast  bpdu-guard  bpdu-filter  root-guard  and loop-guard 
evolution of stp rstp conceptsrstp  ieee 802 1w  supersedes the original 802 1d while retaining backward compatibility  the 802 1w stp terminology remains primarily the same as the original ieee 802 1d stp terminology  most parameters have been left unchanged  users that are familiar with the original stp standard can easily configure rstp  the same spanning-tree-algorithm is used for both stp and rstp to determine port roles and topology rstp increases the speed of the recalculation of the spanning-tree when the layer-2 network-topology changes  rstp can achieve much faster-convergence in a properly configured network  sometimes in as little as a few hundred milliseconds  if a port is configured to be an alternate-port it can immediately change to a forwarding state without waiting for the network to converge note  rapid pvst  is the cisco implementation of rstp on a per-vlan basis  with rapid pvst  an independent instance of rstp runs for each vlan 
evolution of stp rstp port states and port rolesthere are only three port states in rstp that correspond to the three possible operational states in stp  the 802 1d disabled  blocking  and listening states are merged into a unique 802 1w discarding state root-ports and designated-ports are the same for both stp and rstp  however  there are two rstp port roles that correspond to the blocking state of stp  in stp  a blocked port is defined as not being the designated or root-port  rstp has two port roles for this purpose 
evolution of stp rstp port states and port roles  cont  the alternate-port has an alternate path to the root-bridge  the backup port is a backup to a shared-medium  such as a hub  a backup port is less common because hubs are now considered legacy-devices 
evolution of stp portfast and bpdu-guardwhen a device is connected to a switch port or when a switch powers up  the switch port goes through both the listening and learning states  each time waiting for the forward delay timer to expire  this delay is 15 seconds for each state for a total of 30 seconds  this can present a problem for dhcp-clients trying to discover a dhcp-server because the dhcp process may timeout  the result is that an ipv4 client will not receive a valid ipv4-address when a switch port is configured with portfast  that port transitions from blocking to forwarding state immediately  avoiding the 30 second delay  you can use portfast on access-ports to allow devices connected to these ports to access the network immediately  portfast should only be used on access-ports  if you enable portfast on a port connecting to another switch  you risk creating a spanning-tree loop  a portfast-enabled switch port should never receive bpdus because that would indicate that switch is connected to the port  potentially causing a spanning-tree loop  cisco-switches support a feature called bpdu-guard  when enabled  it immediately puts the switch port in an errdisabled  error-disabled  state upon receipt of any bpdu  this protects against potential loops by effectively shutting down the port  the administrator must manually put the interface back into service 
evolution of stp alternatives to stpover the years  organizations required greater resiliency and availability in the lan  ethernet-lans went from a few interconnected switches connected to a single-router  to a sophisticated hierarchical network design including access  distribution and core-layer switches depending on the implementation  layer-2 may include not only the access-layer  but also the distribution or even the core-layers  these designs may include hundreds of switches  with hundreds or even thousands of vlans  stp has adapted to the added redundancy and complexity with enhancements  as part of rstp and mstp an important aspect to network design is fast and predictable convergence when there is a failure or change in the topology  spanning-tree does not offer the same efficiencies and predictabilities provided by routing-protocols at layer-3 layer-3 routing allows for redundant paths and loops in the topology  without blocking ports  for this reason  some environments are transitioning to layer-3 everywhere except where devices connect to the access-layer switch  in other words  the connections between access-layer switches and distribution switches would be layer-3 instead of layer-2 
module 5  stp conceptsswitching  routing and wireless essentials v7 0  srwe 
module objectivesmodule title  stp conceptsmodule objective  explain how stp enables redundancy in a layer-2 network topic titletopic objectivepurpose of stpexplain common problems in a redundant  l2 switched network stp-operationsexplain how stp operates in a simple switched network evolution of stpexplain how rapid pvst  operates 
5 1 purpose of stp
purpose of stp redundancy in layer-2 switched networksthis topic covers the causes of loops in a layer-2 network and briefly explains how spanning-tree-protocol works  redundancy is an important part of the hierarchical design for eliminating single-points of failure and preventing disruption of network services to users  redundant-networks require the addition of physical-paths  but logical redundancy must also be part of the design  having alternate physical-paths for data to traverse the network makes it possible for users to access network resources  despite path disruption  however  redundant paths in a switched ethernet-network may cause both physical and logical layer-2 loops ethernet-lans require a loop-free topology with a single-path between any two devices  a loop in an ethernet-lan can cause continued propagation of ethernet-frames until a link is disrupted and breaks the loop 
purpose of stp spanning-tree-protocolspanning-tree-protocol  stp  is a loop-prevention network protocol that allows for redundancy while creating a loop-free layer-2 topology  stp logically blocks physical loops in a layer-2 network  preventing frames from circling the network forever 
purpose of stp stp recalculationstp compensates for a failure in the network by recalculating and opening up previously blocked ports 
purpose of stp issues with redundant switch linkspath redundancy provides multiple network services by eliminating the possibility of a single-point of failure  when multiple paths exist between two devices on an ethernet-network  and there is no spanning-tree implementation on the switches  a layer-2 loop occurs  a layer-2 loop can result in mac-address table instability  link saturation  and high cpu utilization on switches and end-devices  resulting in the network becoming unusable layer-2 ethernet does not include a mechanism to recognize and eliminate endlessly looping frames  both ipv4 and ipv6 include a mechanism that limits the number of times a layer-3 networking device can retransmit a packet  a router will decrement the ttl  time-to-live  in every ipv4-packet  and the hop-limit field in every ipv6-packet  when these fields are decremented to 0  a router will drop the packet  ethernet and ethernet switches have no comparable mechanism for limiting the number of times a switch retransmits a layer-2 frame  stp was developed specifically as a loop prevention mechanism for layer-2 ethernet 
purpose of stp layer-2 loopswithout stp enabled  layer-2 loops can form  causing broadcast  multicast and unknown unicast-frames to loop endlessly  this can bring down a network quickly  when a loop occurs  the mac-address table on a switch will constantly change with the updates from the broadcast-frames  which results in mac database instability  this can cause high cpu utilization  which makes the switch unable to forward frames an unknown unicast-frame is when the switch does not have the destination-mac-address in its mac-address table and must forward the frame out all ports  except the ingress port 
purpose of stp broadcast-storma broadcast-storm is an abnormally high-number of broadcasts overwhelming the network during a specific amount of time  broadcast-storms can disable a network within seconds by overwhelming switches and end-devices  broadcast-storms can be caused by a hardware problem such as a faulty nic or from a layer-2 loop in the network-layer-2 broadcasts in a network  such as arp-requests are very common  layer-2 multicasts are typically forwarded the same way as a broadcast by the switch  ipv6-packets are never forwarded as a layer-2 broadcast  icmpv6 neighbor-discovery uses layer-2 multicasts a host caught in a layer-2 loop is not accessible to other hosts on the network  additionally  due to the constant changes in its mac-address table  the switch does not know out of which port to forward unicast-frames to prevent these issues from occurring in a redundant-network  some type of spanning-tree must be enabled on the switches  spanning-tree is enabled  by default  on cisco-switches to prevent layer-2 loops from occurring 
purpose of stp the spanning-tree-algorithmstp is based on an algorithm invented by radia perlman while working for digital-equipment corporation  and published in the 1985 paper  an algorithm for distributed computation of a spanning-tree in an extended lan   her spanning-tree-algorithm  sta  creates a loop-free topology by selecting a single root-bridge where all other switches determine a single least-cost-path stp prevents loops from occurring by configuring a loop-free path through the network using strategically placed  blocking-state  ports  the switches running stp are able to compensate for failures by dynamically unblocking the previously blocked ports and permitting traffic to traverse the alternate paths 
purpose of stp the spanning-tree-algorithm  cont  how does the sta create a loop-free topology selecting a root-bridge  this bridge  switch  is the reference point for the entire network to build a spanning-tree around block redundant paths  stp ensures that there is only one logical path between all destinations on the network by intentionally blocking redundant paths that could cause a loop  when a port is blocked  user data is prevented from entering or leaving that port create a loop-free topology  a blocked port has the effect of making that link a non-forwarding link between the two switches  this creates a topology where each switch has only a single-path to the root-bridge  similar to branches on a tree that connect to the root of the tree recalculate in case of link failure  the physical-paths still exist to provide redundancy  but these paths are disabled to prevent the loops from occurring  if the path is ever needed to compensate for a network cable or switch failure  stp recalculates the paths and unblocks the necessary-ports to allow the redundant path to become active  stp recalculations can also occur any time a new switch or new inter-switch link is added to the network 
purpose of stp video   observe stp-operationthis video demonstrates the use of stp in a network environment 
purpose of stp packet tracer   investigate stp loop preventionin this packet tracer activity  you will complete the following objectives create and configure a simple three switch network with stp view stp-operation disable stp and view operation again 
5 2 stp-operations
stp-operations steps to a loop-free topologyusing the sta  stp builds a loop-free topology in a four-step process elect the root-bridge elect the root-ports elect designated-ports elect alternate  blocked  ports during sta and stp functions  switches use bridge-protocol-data-units  bpdus  to share information about themselves and their connections  bpdus are used to elect the root-bridge  root-ports  designated-ports  and alternate-ports  each bpdu contains a bridge id  bid  that identifies which switch sent the bpdu  the bid is involved in making many of the sta decisions including root-bridge and port roles  the bid contains a priority-value  the mac-address of the switch  and an extended-system-id  the lowest bid value is determined by the combination of these three fields 
stp-operations steps to a loop-free topology  cont  bridge-priority  the default priority-value for all cisco-switches is the decimal value 32768  the range is 0 to 61440 in increments of 4096  a lower bridge-priority is preferable  a bridge-priority of 0 takes precedence over all other bridge priorities extended-system-id  the extended-system-id value is a decimal value added to the bridge-priority-value in the bid to identify the vlan for this bpdu mac-address  when two switches are configured with the same-priority and have the same extended-system-id  the switch having the mac-address with the lowest value  expressed in hexadecimal  will have the lower bid 
stp-operations 1  elect the root-bridgethe sta designates a single switch as the root-bridge and uses it as the reference point for all path calculations  switches exchange bpdus to build the loop-free topology beginning with selecting the root-bridge all switches in the-broadcast-domain participate in the election process  after a switch-boots  it begins to send out bpdu frames every two seconds  these bpdu frames contain the bid of the sending switch and the bid of the root-bridge  known as the root-id the switch with the lowest bid will become the root-bridge  at first  all switches declare themselves as the root-bridge with their own bid set as the root-id  eventually  the switches learn through the exchange of bpdus which switch has the lowest bid and will agree on one root-bridge 
stp-operations impact of default bidsbecause the default bid is 32768  it is possible for two or more switches to have the same-priority  in this scenario  where the priorities are the same  the switch with the lowest mac-address will become the root-bridge  the administrator should configure the desired root-bridge switch with a lower-priority in the figure  all switches are configured with the same-priority of 32769  here the mac-address becomes the deciding factor as to which switch becomes the root-bridge  the switch with the lowest hexadecimal mac-address value is the preferred root-bridge  in this example  s2 has the lowest value for its mac-address and is elected as the root-bridge for that spanning-tree-instance note  the priority of all the switches is 32769  the value is based on the 32768 default bridge-priority and the extended-system-id  vlan 1 assignment  associated with each switch  32768 1  
stp-operations determine the root path costwhen the root-bridge has been elected for a given spanning-tree-instance  the sta starts determining the best-paths to the root-bridge from all destinations in the-broadcast-domain  the path information  known as the internal-root-path-cost  is determined by the sum of all the individual-port costs along the path from the switch to the root-bridge when a switch receives the bpdu  it adds the ingress port cost of the segment to determine its internal-root-path-cost the default port costs are defined by the speed at which the port operates  the table shows the default port costs suggested by ieee  cisco-switches by default use the values as defined by the ieee 802 1d standard  also known as the short path cost  for both stp and rstp  although switch ports have a default port cost associated with them  the port cost is configurable  the ability to configure individual-port costs gives the administrator the flexibility to manually control the spanning-tree paths to the root-bridge link speedstp cost  ieee 802 1d-1998rstp cost  ieee 802 1w-200410 gbps2 0001 gbps20 000100 mbps19200 00010 mbps1002 000 000
stp-operations 2  elect the root-portsafter the root-bridge has been determined  the sta algorithm is used to select the root-port  every non-root switch will select one root-port  the root-port is the port closest to the root-bridge in terms of overall cost to the root-bridge  this overall cost is known as the internal-root-path-cost the internal-root-path-cost is equal to the sum of all the port costs along the path to the root-bridge  as shown in the figure  paths with the lowest cost become preferred  and all other redundant paths are blocked  in the example  the internal-root-path-cost from s2 to the root-bridge s1 over path 1 is 19 while the internal-root-path-cost over path 2 is 38  because path 1 has a lower overall path cost to the root-bridge  it is the preferred path and f0 1 becomes the root-port on s2 
stp-operations 3  elect designated-portsevery segment between two switches will have one designated-port  the designated-port is a port on the segment that has the internal-root-path-cost to the root-bridge  in other words  the designated-port has the best-path to receive traffic leading to the root-bridge what is not a root-port or a designated-port becomes an alternate or blocked port  all ports on the root-bridge are designated-ports if one end of a segment is a root-port  the other end is a designated-port all ports attached to end-devices are designated-ports on segments between two switches where neither of the switches is the root-bridge  the port on the switch with the least-cost-path to the root-bridge is a designated-port 
stp-operations 4  elect alternate  blocked  portsif a port is not a root-port or a designated-port  then it becomes an alternate  or backup  port  alternate-ports are in discarding or blocking state to prevent loops  in the figure  the sta has configured port f0 2 on s3 in the alternate role  port f0 2 on s3 is in the blocking state and will not forward ethernet-frames  all other inter-switch ports are in forwarding state  this is the loop-prevention part of stp 
stp-operations elect a root-port from multiple equal-cost-pathswhen a switch has multiple equal-cost-paths to the root-bridge  the switch will determine a port using the following criteria lowest sender bidlowest sender port prioritylowest sender port id
stp-operations elect a root-port from multiple equal-cost-paths  cont  lowest sender bid  this topology has four switches with switch s1 as the root-bridge  port f0 1 on switch s3 and port f0 3 on switch s4 have been selected as root-ports because they have the root path cost to the root-bridge for their respective switches  s2 has two ports  f0 1 and f0 2 with equal cost-paths to the root-bridge  the bridge ids of s3 and s4  will be used to break the tie  this is known as the sender s bid  s3 has a bid of 32769 5555 5555 5555 and s4 has a bid of 32769 1111 1111 1111  because s4 has a lower bid  the f0 1 port of s2  which is the port connected to s4  will be the root-port 
stp-operations elect a root-port from multiple equal-cost-paths  cont  lowest sender port priority  this topology has two switches which are connected with two equal-cost-paths between them  s1 is the root-bridge  so both of its ports are designated-ports s4 has two ports with equal-cost-paths to the root-bridge  because both ports are connected to the same switch  the sender s bid  s1  is equal  so the first step is a tie next  is the sender s  s1  port priority  the default port priority is 128  so both ports on s1 have the same port priority  this is also a tie  however  if either port on s1 was configured with a lower port priority  s4 would put its adjacent port in forwarding state  the other port on s4 would be a blocking state 
stp-operations elect a root-port from multiple equal-cost-paths  cont  lowest sender port id  the last tie-breaker is the lowest sender s port id  switch s4 has received bpdus from port f0 1 and port f0 2 on s1  the decision is based on the sender s port id  not the receiver s port id  because the port id of f0 1 on s1 is lower than port f0 2  the port f0 6 on switch s4 will be the root-port  this is the port on s4 that is connected to the f0 1 port on s1 port f0 5 on s4 will become an alternate-port and placed in the blocking state 
stp-operations stp timers and port statesstp convergence requires three timers  as follows hello-timer -the hello time is the interval between bpdus  the default is 2 seconds but can be modified to between 1 and 10 seconds forward delay timer -the forward delay is the time that is spent in the listening and learning state  the default is 15 seconds but can be modified to between 4 and 30 seconds max age timer -the max age is the maximum length of time that a switch waits before attempting to change the stp topology  the default is 20 seconds but can be modified to between 6 and 40 seconds note  the default times can be changed on the root-bridge  which dictates the value of these timers for the stp domain 
stp-operations stp timers and port states  cont  stp facilitates the logical loop-free path throughout the-broadcast-domain  the spanning-tree is determined through the information learned by the exchange of the bpdu frames between the interconnected switches  if a switch port transitions directly from the blocking state to the forwarding state without information about the full-topology during the transition  the port can temporarily create a data loop  for this reason  stp has five ports states  four of which are operational port states as shown in the figure  the disabled state is considered non-operational 
stp-operations operational details of each port statethe table summarizes the operational details of each port stateport statebpdumac-address tableforwarding data framesblockingreceive onlyno updatenolisteningreceive and sendno updatenolearningreceive and sendupdating tablenoforwardingreceive and sendupdating tableyesdisablednone sent or receivedno updateno
stp-operations per-vlan spanning-treestp can be configured to operate in an environment with multiple-vlans  in per-vlan spanning-tree  pvst  versions of stp  there is a root-bridge elected for each spanning-tree-instance  this makes it possible to have different root-bridges for different sets of vlans  stp operates a separate instance of stp for each individual vlan  if all ports on all switches are members of vlan 1  then there is only one spanning-tree-instance 
6 2 configure etherchannel
configure etherchannel configuration guidelinesthe following guidelines and restrictions are useful for configuring etherchannel etherchannel support - all ethernet-interfaces must support etherchannel with no requirement that interfaces be physically contiguous speed and duplex - configure all interfaces in an etherchannel to operate at the same speed and in the same duplex-mode vlan match - all interfaces in the etherchannel bundle must be assigned to the same vlan or be configured as a trunk  shown in the figure  range of vlans - an etherchannel supports the same allowed range of vlans on all the interfaces in a trunking-etherchannel  if the allowed range of vlans is not the same  the interfaces do not form an etherchannel  even when they are set to auto or desirable-mode 
configure etherchannel configuration guidelines  cont  the figure shows a configuration that would allow an etherchannel to form between s1 and s2 if these settings must be changed  configure them in port-channel-interface configuration-mode  any configuration that is applied to the port-channel-interface also affects individual-interfaces  however  configurations that are applied to the individual-interfaces do not affect the port-channel-interface  therefore  making configuration changes to an interface that is part of an etherchannel-link may cause interface compatibility issues the port-channel can be configured in access-mode  trunk-mode  most common   or on-a-routed-port 
configure etherchannel lacp configuration exampleconfiguring etherchannel with lacp requires the following three steps step 1  specify the interfaces that compose the etherchannel group using the interface-range interface global configuration-mode command  the range keyword allows you to select several-interfaces and configure them all together step 2  create the port-channel-interface with the channel-group identifier mode active command in interface-range configuration-mode  the identifier specifies a channel group number  the mode active keywords identify this as an lacp etherchannel configuration step3  to change layer-2 settings on the port-channel-interface  enter port-channel-interface configuration-mode using the interface port-channel command  followed by the interface-identifier  in the example  s1 is configured with an lacp etherchannel  the port-channel is configured as a trunk interface with the allowed vlans specified 
configure etherchannel packet tracer   configure etherchannelin this packet tracer  you will complete the following objectives configure basic switch settingsconfigure an etherchannel with cisco pagpconfigure and 802 3ad etherchannelconfigure a redundant etherchannel-link
module 6  etherchannelswitching  routing and wireless essentials v7 0  srwe 
module objectivesmodule title  etherchannelmodule objective  troubleshoot etherchannel on switched links topic titletopic objectiveetherchannel operationdescribe etherchannel technology configure etherchannelconfigure etherchannel verify and troubleshoot etherchanneltroubleshoot etherchannel 
6 1 etherchannel operation
etherchannel operation link-aggregationthere are scenarios in which more bandwidth or redundancy between devices is needed than what can be provided by a single-link  multiple-links could be connected between devices to increase bandwidth  however  spanning-tree-protocol  stp   which is enabled on layer-2 devices like cisco-switches by default  will block redundant links to prevent switching-loops a link-aggregation-technology is needed that allows redundant links between devices that will not be blocked by stp  that technology is known as etherchannel etherchannel is a link-aggregation-technology that groups multiple-physical-ethernet-links together into one single-logical-link  it is used to provide fault-tolerance  load sharing  increased bandwidth  and redundancy between switches  routers  and servers etherchannel technology makes it possible to combine the number of physical links between the switches to increase the overall speed of switch-to-switch communication 
etherchannel operation etherchanneletherchannel technology was originally developed by cisco as a lan switch-to-switch technique of grouping several fast-ethernet or gigabit-ethernet ports into one logical channel  when an etherchannel is configured  the resulting virtual-interface is called a port-channel  the physical-interfaces are bundled together into a port-channel-interface  as shown in the figure 
etherchannel operation advantages of etherchanneletherchannel technology has many advantages  including the following most configuration tasks can be done on the etherchannel interface instead of on each individual-port  ensuring configuration consistency throughout the links etherchannel relies on existing switch ports  there is no need to upgrade the link to a faster and more expensive connection to have more bandwidth load-balancing takes place between links that are part of the same etherchannel  etherchannel creates an aggregation that is seen as one logical link  when several etherchannel bundles exist between two switches  stp may block one of the bundles to prevent switching-loops  when stp blocks one of the redundant links  it blocks the entire etherchannel  this blocks all the ports belonging to that etherchannel-link  where there is only one etherchannel-link  all physical links in the etherchannel are active because stp sees only one  logical  link etherchannel provides redundancy because the overall link is seen as one logical connection  additionally  the loss of one physical link within the channel does not create a change in the topology  
etherchannel operation implementation restrictionsetherchannel has certain implementation restrictions  including the following interface types cannot be mixed  for example  fast-ethernet and gigabit-ethernet cannot be mixed within a single etherchannel currently each etherchannel can consist of up to eight compatibly-configured ethernet ports  etherchannel provides full-duplex bandwidth up to 800 mbps  fast etherchannel  or 8 gbps  gigabit etherchannel  between one switch and another switch or host the cisco catalyst-2960 layer-2 switch currently supports up to six etherchannels  the individual etherchannel group member port configuration must be consistent on both devices  if the physical ports of one side are configured as trunks  the physical ports of the other side must also be configured as trunks within the same native-vlan  additionally  all ports in each etherchannel-link must be configured as layer-2 ports each etherchannel has a logical port-channel-interface  a configuration applied to the port-channel-interface affects all physical-interfaces that are assigned to that interface 
etherchannel operation autonegotiation protocolsetherchannels can be formed through negotiation using one of two protocols  port-aggregation-protocol  pagp  or link-aggregation control protocol  lacp   these protocols allow ports with similar characteristics to form a channel through dynamic negotiation with adjoining switches note  it is also possible to configure a static or unconditional etherchannel without pagp or lacp 
etherchannel operation pagp operationpagp  pronounced  pag - p   is a cisco-proprietary protocol that aids in the automatic creation of etherchannel-links  when an etherchannel-link is configured using pagp  pagp packets are sent between etherchannel-capable ports to negotiate the forming of a channel  when pagp identifies matched ethernet links  it groups the links into an etherchannel  the etherchannel is then added to the spanning-tree as a single port when enabled  pagp also manages the etherchannel  pagp packets are sent every 30 seconds  pagp checks for configuration consistency and manages link additions and failures between two switches  it ensures that when an etherchannel is created  all ports have the same type of configuration note  in etherchannel  it is mandatory that all ports have the same speed  duplex setting  and vlan information  any port modification after the creation of the channel also changes all other channel ports 
etherchannel operation pagp operation  cont  pagp helps create the etherchannel-link by detecting the configuration of each side and ensuring that links are compatible so that the etherchannel-link can be enabled when needed  the modes for pagp as follows on - this mode forces the interface to channel without pagp  interfaces configured in the on mode do not exchange pagp packets pagp desirable - this pagp mode places an interface in an active negotiating state in which the interface initiates negotiations with other interfaces by sending pagp packets pagp auto - this pagp mode places an interface in a passive negotiating state in which the interface responds to the pagp packets that it receives but does not initiate pagp negotiation the modes must be compatible on each side  if one side is configured to be in auto mode  it is placed in a passive state  waiting for the other side to initiate the etherchannel negotiation  if the other side is also set to auto  the negotiation never starts and the etherchannel does not form  if all modes are disabled by using the no command  or if no mode is configured  then the etherchannel is disabled  the on mode manually places the interface in an etherchannel  without any negotiation  it works only if the other side is also set to on  if the other side is set to negotiate parameters through pagp  no etherchannel forms  because the side that is set to on mode does not negotiate  no negotiation between the two switches means there is no checking to make sure that all the links in the etherchannel are terminating on the other side  or that there is pagp compatibility on the other switch 
etherchannel operation pagp mode settings examplethe table shows the various combination of pagp modes on s1 and s2 and the resulting channel establishment outcome s1s2channel establishmentononyesondesirable autonodesirabledesirableyesdesirableautoyesautodesirableyesautoautono
etherchannel operation lacp operationlacp is part of an ieee specification  802 3ad  that allows several physical ports to be bundled to form a single logical channel  lacp allows a switch to negotiate an automatic bundle by sending lacp packets to the other switch  it performs a function similar to pagp with cisco etherchannel  because lacp is an ieee standard  it can be used to facilitate etherchannels in multivendor environments  on cisco devices  both protocols are supported lacp provides the same negotiation benefits as pagp  lacp helps create the etherchannel-link by detecting the configuration of each side and making sure that they are compatible so that the etherchannel-link can be enabled when needed  the modes for lacp are as follows on - this mode forces the interface to channel without lacp  interfaces configured in the on mode do not exchange lacp packets lacp active - this lacp mode places a port in an active negotiating state  in this state  the port initiates negotiations with other ports by sending lacp packets lacp passive - this lacp mode places a port in a passive negotiating state  in this state  the port responds to the lacp packets that it receives but does not initiate lacp packet negotiation 
etherchannel operation lacp mode settings examplethe table shows the various combination of lacp modes on s1 and s2 and the resulting channel establishment outcome s1s2channel establishmentononyesonactive passivenoactiveactiveyesactivepassiveyespassiveactiveyespassivepassiveno
7 1 ethernet-frames
ethernet-frames ethernet encapsulationethernet operates in the data-link layer and the physical-layer it is a family of networking technologies defined in the ieee 802 2 and 802 3 standards 
ethernet-frames data-link sublayersthe 802 lan man standards  including ethernet  use two separate sublayers of the data-link layer to operate llc-sublayer   ieee 802 2  places information in the frame to identify which network-layer protocol is used for the frame mac-sublayer   ieee 802 3  802 11  or 802 15  responsible for data-encapsulation and media access-control  and provides data-link layer addressing 
ethernet-frames mac-sublayerthe mac-sublayer is responsible for data-encapsulation and accessing the media data-encapsulationieee 802 3 data-encapsulation includes the following ethernet-frame - this is the internal structure of the ethernet-frame ethernet-addressing - the ethernet-frame includes both a source and destination-mac-address to deliver the ethernet-frame from ethernet-nic to ethernet-nic on the same lan ethernet error-detection - the ethernet-frame includes a frame-check-sequence  fcs  trailer used for error-detection 
ethernet-frames mac-sublayermedia accessthe ieee 802 3 mac-sublayer includes the specifications for different ethernet communications standards over various types of media including copper and fiber legacy ethernet using a bus topology or hubs  is a shared  half-duplex medium  ethernet over a half-duplex medium uses a contention-based-access-method  carrier sense multiple access collision-detection  csma cd   ethernet-lans of today use switches that operate in full-duplex  full-duplex-communications with ethernet switches do not require access-control through csma cd 
ethernet-frames ethernet-frame fieldsthe minimum ethernet-frame size is 64 bytes and the maximum is 1518 bytes  the preamble-field is not included when describing the size of the frame any frame less than 64 bytes in length is considered a  collision-fragment  or  runt-frame  and is automatically discarded  frames with more than 1500 bytes of data are considered  jumbo  or  baby-giant-frames  if the size of a transmitted frame is less than the minimum  or greater than the maximum  the receiving device drops the frame  dropped frames are likely to be the result of collisions or other unwanted signals  they are considered invalid  jumbo frames are usually supported by most fast-ethernet and gigabit-ethernet switches and nics 
ethernet-frames lab   use wireshark to examine ethernet-framesin this lab  you will complete the following objectives part 1  examine the header fields in an ethernet ii framepart 2  use wireshark to capture and analyze ethernet-frames
7 2 ethernet mac-address
ethernet mac-addresses mac-address and hexadecimalan ethernet mac-address consists of a 48-bit binary value  expressed using 12 hexadecimal values given that 8 bits  one byte  is a common binary grouping  binary 00000000 to 11111111 can be represented in hexadecimal as the range 00 to ff when using hexadecimal  leading zeroes are always displayed to complete the 8-bit representation  for example the binary value 0000 1010 is represented in hexadecimal as 0a hexadecimal-numbers are often represented by the value preceded by 0x  e g   0x73  to distinguish between decimal and hexadecimal values in documentation hexadecimal may also be represented by a subscript 16  or the hex number followed by an h  e g   73h  
ethernet mac-addresses ethernet mac-addressin an ethernet-lan  every network-device is connected to the same  shared media  mac-addressing provides a method for device identification at the data-link layer of the osi model an ethernet mac-address is a 48-bit address expressed using 12 hexadecimal digits  because a byte equals 8 bits  we can also say that a mac-address is 6 bytes in length all mac-addresses must be unique to the ethernet device or ethernet-interface  to ensure this  all vendors that sell ethernet devices must register with the ieee to obtain a unique 6 hexadecimal  i e   24-bit or 3-byte  code called the organizationally-unique-identifier  oui  an ethernet mac-address consists of a 6 hexadecimal vendor oui code followed by a 6 hexadecimal vendor-assigned value 
ethernet mac-addresses frame processingwhen a device is forwarding a message to an ethernet-network  the ethernet-header include a source-mac-address and a destination-mac-address when a nic receives an ethernet-frame  it examines the destination-mac-address to see if it matches the physical mac-address that is stored in ram  if there is no match  the device discards the frame  if there is a match  it passes the frame up the osi layers  where the de-encapsulation process takes place note  ethernet-nics will also accept frames if the destination-mac-address is a broadcast or a multicast-group of which the host is a member any device that is the source or destination of an ethernet-frame  will have an ethernet-nic and therefore  a mac-address  this includes workstations  servers  printers  mobile devices  and routers 
ethernet mac-addresses unicast mac-addressin ethernet  different mac-addresses are used for layer-2 unicast  broadcast  and multicast communications a unicast mac-address is the unique address that is used when a frame is sent from a single transmitting device to a single destination-device the process that a source host uses to determine the destination-mac-address associated with an ipv4-address is known as address-resolution-protocol  arp   the process that a source host uses to determine the destination-mac-address associated with an ipv6-address is known as neighbor-discovery  nd  note  the source-mac-address must always be a unicast 
ethernet mac-addresses broadcast mac-addressan ethernet broadcast-frame is received and processed by every device on the ethernet-lan  the features of an ethernet broadcast are as follows it has a destination-mac-address of ff-ff-ff-ff-ff-ff in hexadecimal  48 ones in binary  it is flooded out all ethernet switch ports except the incoming port  it is not forwarded by a router if the encapsulated data is an ipv4 broadcast-packet  this means the packet contains a destination ipv4-address that has all ones  1s  in the host-portion  this numbering in the address means that all hosts on that local-network  broadcast-domain  will receive and process the packet 
ethernet mac-addresses multicast mac-addressan ethernet multicast-frame is received and processed by a group of devices that belong to the same multicast-group  there is a destination-mac-address of 01-00-5e when the encapsulated data is an ipv4 multicast-packet and a destination-mac-address of 33-33 when the encapsulated data is an ipv6 multicast-packet there are other reserved multicast destination-mac-addresses for when the encapsulated data is not ip  such as spanning-tree-protocol  stp  it is flooded out all ethernet switch ports except the incoming port  unless the switch is configured for multicast-snooping  it is not forwarded by a router  unless the router is configured to route multicast-packets because multicast-addresses represent a group of addresses  sometimes called a host-group   they can only be used as the destination of a packet  the source will always be a unicast address as with the unicast and broadcast addresses  the multicast ip-address requires a corresponding multicast mac-address 
ethernet mac-addresses lab   view network-device mac-addressesin this lab  you will complete the following objectives part 1  set up the topology and initialize devicespart 2  configure devices and verify connectivitypart 3  display  describe  and analyze ethernet mac-addresses
5 3 evolution of stp
evolution of stp different versions of stpmany professionals generically use spanning-tree and stp to refer to the various implementations of spanning-tree  such as rapid spanning-tree-protocol  rstp  and multiple spanning-tree-protocol  mstp   in order to communicate spanning-tree concepts correctly  it is important to refer to the implementation or standard of spanning-tree in context the latest ieee documentation on spanning-tree  ieee-802-1d-2004  says   stp has now been superseded by the rapid spanning-tree-protocol  rstp   the ieee uses  stp  to refer to the original implementation of spanning-tree and  rstp  to describe the version of spanning-tree specified in ieee-802 1d-2004  because the two protocols share much of the same terminology and methods for the loop-free path  the primary focus will be on the current standard and the cisco proprietary implementations of stp and rstp cisco-switches running ios 15 0 or later  run pvst  by default  this version incorporates many of the specifications of ieee 802 1d-2004  such as alternate-ports in place of the former non-designated-ports  switches must be explicitly configured for rapid spanning-tree mode in order to run the rapid spanning-tree-protocol 
evolution of stp different versions of stp  cont  stp varietydescriptionstpthis is the original ieee 802 1d version  802 1d-1998 and earlier  that provides a loop-free topology in a network with redundant links  also called common spanning-tree  cst   it assumes one spanning-tree-instance for the entire bridged network  regardless of the number of vlans pvst per-vlan spanning-tree  pvst   is a cisco enhancement of stp that provides a separate 802 1d spanning-tree-instance for each vlan configured in the network  pvst  supports portfast  uplinkfast  backbonefast  bpdu-guard  bpdu-filter  root-guard  and loop-guard 802 1d-2004this is an updated version of the stp standard  incorporating ieee 802 1w rstprapid spanning-tree-protocol  rstp  or ieee 802 1w is an evolution of stp that provides faster-convergence than stp rapid pvst this is a cisco enhancement of rstp that uses pvst  and provides a separate instance of 802 1w per vlan  each separate instance supports portfast  bpdu-guard  bpdu-filter  root-guard  and loop-guard mstpmultiple spanning-tree-protocol  mstp  is an ieee standard inspired by the earlier cisco proprietary multiple-instance-stp  mistp  implementation  mstp maps multiple-vlans into the same spanning-tree-instance mstmultiple spanning-tree  mst  is the cisco implementation of mstp  which provides up to 16 instances of rstp and combines many vlans with the same physical and logical-topology into a common rstp instance  each instance supports portfast  bpdu-guard  bpdu-filter  root-guard  and loop-guard 
evolution of stp rstp conceptsrstp  ieee 802 1w  supersedes the original 802 1d while retaining backward compatibility  the 802 1w stp terminology remains primarily the same as the original ieee 802 1d stp terminology  most parameters have been left unchanged  users that are familiar with the original stp standard can easily configure rstp  the same spanning-tree-algorithm is used for both stp and rstp to determine port roles and topology rstp increases the speed of the recalculation of the spanning-tree when the layer-2 network-topology changes  rstp can achieve much faster-convergence in a properly configured network  sometimes in as little as a few hundred milliseconds  if a port is configured to be an alternate-port it can immediately change to a forwarding state without waiting for the network to converge note  rapid pvst  is the cisco implementation of rstp on a per-vlan basis  with rapid pvst  an independent instance of rstp runs for each vlan 
evolution of stp rstp port states and port rolesthere are only three port states in rstp that correspond to the three possible operational states in stp  the 802 1d disabled  blocking  and listening states are merged into a unique 802 1w discarding state root-ports and designated-ports are the same for both stp and rstp  however  there are two rstp port roles that correspond to the blocking state of stp  in stp  a blocked port is defined as not being the designated or root-port  rstp has two port roles for this purpose 
evolution of stp rstp port states and port roles  cont  the alternate-port has an alternate path to the root-bridge  the backup port is a backup to a shared-medium  such as a hub  a backup port is less common because hubs are now considered legacy-devices 
evolution of stp portfast and bpdu-guardwhen a device is connected to a switch port or when a switch powers up  the switch port goes through both the listening and learning states  each time waiting for the forward delay timer to expire  this delay is 15 seconds for each state for a total of 30 seconds  this can present a problem for dhcp-clients trying to discover a dhcp-server because the dhcp process may timeout  the result is that an ipv4 client will not receive a valid ipv4-address when a switch port is configured with portfast  that port transitions from blocking to forwarding state immediately  avoiding the 30 second delay  you can use portfast on access-ports to allow devices connected to these ports to access the network immediately  portfast should only be used on access-ports  if you enable portfast on a port connecting to another switch  you risk creating a spanning-tree loop  a portfast-enabled switch port should never receive bpdus because that would indicate that switch is connected to the port  potentially causing a spanning-tree loop  cisco-switches support a feature called bpdu-guard  when enabled  it immediately puts the switch port in an errdisabled  error-disabled  state upon receipt of any bpdu  this protects against potential loops by effectively shutting down the port  the administrator must manually put the interface back into service 
evolution of stp alternatives to stpover the years  organizations required greater resiliency and availability in the lan  ethernet-lans went from a few interconnected switches connected to a single-router  to a sophisticated hierarchical network design including access  distribution and core-layer switches depending on the implementation  layer-2 may include not only the access-layer  but also the distribution or even the core-layers  these designs may include hundreds of switches  with hundreds or even thousands of vlans  stp has adapted to the added redundancy and complexity with enhancements  as part of rstp and mstp an important aspect to network design is fast and predictable convergence when there is a failure or change in the topology  spanning-tree does not offer the same efficiencies and predictabilities provided by routing-protocols at layer-3 layer-3 routing allows for redundant paths and loops in the topology  without blocking ports  for this reason  some environments are transitioning to layer-3 everywhere except where devices connect to the access-layer switch  in other words  the connections between access-layer switches and distribution switches would be layer-3 instead of layer-2 
module 2  switching conceptsswitching  routing  and wireless essentials v7 0  srwe 
module objectivesmodule title  switching conceptsmodule objective  explain how layer-2 switches forward data topic titletopic objectiveframe-forwardingexplain how frames are forwarded in a switched network-switching-domainscompare a collision-domain to a broadcast-domain 
2 1 frame-forwarding
frame-forwarding switching in networkingtwo terms are associated with frames entering or leaving an interface ingress   entering-the-interfaceegress   exiting-the-interfacea switch forwards based on the ingress interface and the destination-mac-address a switch uses its mac-address table to make forwarding decisions note  a switch will never allow traffic to be forwarded out the interface it received the traffic 
frame-forwarding the switch mac-address tablea switch will use the destination-mac-address to determine the egress interface before a switch can make this decision it must learn what interface the destination is located a switch builds a mac-address table  also known as a content-addressable-memory  cam  table  by recording the source-mac-address into the table along with the port it was received 
frame-forwarding the switch learn and forward methodthe switch uses a two step process step 1  learn   examines source addressadds the source-mac if not in tableresets the time out setting back to 5 minutes if source is in the tablestep 2  forward   examines destination addressif the destination-mac is in the mac-address table it is forwarded out the specified port if a destination-mac is not in the table  it is flooded out all interfaces except the one it was received 
frame-forwarding video   mac-address tables on connected switchesthis video will cover the following how switches build mac-address tableshow switches forward frames based on the content of their mac-address tables
frame-forwarding switch-forwarding methodsswitches use software on application-specific-integrated-circuits  asics  to make very quick decisions a switch will use one of two methods to make forwarding decisions after it receives a frame store-and-forward-switching - receives the entire frame and ensures the frame is valid  store-and-forward-switching is cisco s preferred switching method cut-through-switching   forwards the frame immediately after determining the destination-mac-address of an incoming frame and the egress port  
frame-forwarding store-and-forward-switchingstore-and-forward has two primary characteristics  error-checking   the switch will check the frame-check-sequence  fcs  for crc-errors  bad frames will be discarded buffering   the ingress interface will buffer the frame while it checks the fcs  this also allows the switch to adjust to a potential difference in speeds between the ingress and egress ports 
frame-forwarding cut-through-switchingcut-through forwards the frame immediately after determining the destination-mac fragment  frag  free method will check the destination and ensure that the frame is at least 64 bytes  this will eliminate runts concepts of cut-through-switching is appropriate for switches needing latency to be under 10 microsecondsdoes not check the fcs  so it can propagate errorsmay lead to bandwidth issues if the switch propagates too many errorscannot support ports with differing speeds going from ingress to egress
module 5  stp conceptsswitching  routing and wireless essentials v7 0  srwe 
module objectivesmodule title  stp conceptsmodule objective  explain how stp enables redundancy in a layer-2 network topic titletopic objectivepurpose of stpexplain common problems in a redundant  l2 switched network stp-operationsexplain how stp operates in a simple switched network evolution of stpexplain how rapid pvst  operates 
5 1 purpose of stp
purpose of stp redundancy in layer-2 switched networksthis topic covers the causes of loops in a layer-2 network and briefly explains how spanning-tree-protocol works  redundancy is an important part of the hierarchical design for eliminating single-points of failure and preventing disruption of network services to users  redundant-networks require the addition of physical-paths  but logical redundancy must also be part of the design  having alternate physical-paths for data to traverse the network makes it possible for users to access network resources  despite path disruption  however  redundant paths in a switched ethernet-network may cause both physical and logical layer-2 loops ethernet-lans require a loop-free topology with a single-path between any two devices  a loop in an ethernet-lan can cause continued propagation of ethernet-frames until a link is disrupted and breaks the loop 
purpose of stp spanning-tree-protocolspanning-tree-protocol  stp  is a loop-prevention network protocol that allows for redundancy while creating a loop-free layer-2 topology  stp logically blocks physical loops in a layer-2 network  preventing frames from circling the network forever 
purpose of stp stp recalculationstp compensates for a failure in the network by recalculating and opening up previously blocked ports 
purpose of stp issues with redundant switch linkspath redundancy provides multiple network services by eliminating the possibility of a single-point of failure  when multiple paths exist between two devices on an ethernet-network  and there is no spanning-tree implementation on the switches  a layer-2 loop occurs  a layer-2 loop can result in mac-address table instability  link saturation  and high cpu utilization on switches and end-devices  resulting in the network becoming unusable layer-2 ethernet does not include a mechanism to recognize and eliminate endlessly looping frames  both ipv4 and ipv6 include a mechanism that limits the number of times a layer-3 networking device can retransmit a packet  a router will decrement the ttl  time-to-live  in every ipv4-packet  and the hop-limit field in every ipv6-packet  when these fields are decremented to 0  a router will drop the packet  ethernet and ethernet switches have no comparable mechanism for limiting the number of times a switch retransmits a layer-2 frame  stp was developed specifically as a loop prevention mechanism for layer-2 ethernet 
purpose of stp layer-2 loopswithout stp enabled  layer-2 loops can form  causing broadcast  multicast and unknown unicast-frames to loop endlessly  this can bring down a network quickly  when a loop occurs  the mac-address table on a switch will constantly change with the updates from the broadcast-frames  which results in mac database instability  this can cause high cpu utilization  which makes the switch unable to forward frames an unknown unicast-frame is when the switch does not have the destination-mac-address in its mac-address table and must forward the frame out all ports  except the ingress port 
purpose of stp broadcast-storma broadcast-storm is an abnormally high-number of broadcasts overwhelming the network during a specific amount of time  broadcast-storms can disable a network within seconds by overwhelming switches and end-devices  broadcast-storms can be caused by a hardware problem such as a faulty nic or from a layer-2 loop in the network-layer-2 broadcasts in a network  such as arp-requests are very common  layer-2 multicasts are typically forwarded the same way as a broadcast by the switch  ipv6-packets are never forwarded as a layer-2 broadcast  icmpv6 neighbor-discovery uses layer-2 multicasts a host caught in a layer-2 loop is not accessible to other hosts on the network  additionally  due to the constant changes in its mac-address table  the switch does not know out of which port to forward unicast-frames to prevent these issues from occurring in a redundant-network  some type of spanning-tree must be enabled on the switches  spanning-tree is enabled  by default  on cisco-switches to prevent layer-2 loops from occurring 
purpose of stp the spanning-tree-algorithmstp is based on an algorithm invented by radia perlman while working for digital-equipment corporation  and published in the 1985 paper  an algorithm for distributed computation of a spanning-tree in an extended lan   her spanning-tree-algorithm  sta  creates a loop-free topology by selecting a single root-bridge where all other switches determine a single least-cost-path stp prevents loops from occurring by configuring a loop-free path through the network using strategically placed  blocking-state  ports  the switches running stp are able to compensate for failures by dynamically unblocking the previously blocked ports and permitting traffic to traverse the alternate paths 
purpose of stp the spanning-tree-algorithm  cont  how does the sta create a loop-free topology selecting a root-bridge  this bridge  switch  is the reference point for the entire network to build a spanning-tree around block redundant paths  stp ensures that there is only one logical path between all destinations on the network by intentionally blocking redundant paths that could cause a loop  when a port is blocked  user data is prevented from entering or leaving that port create a loop-free topology  a blocked port has the effect of making that link a non-forwarding link between the two switches  this creates a topology where each switch has only a single-path to the root-bridge  similar to branches on a tree that connect to the root of the tree recalculate in case of link failure  the physical-paths still exist to provide redundancy  but these paths are disabled to prevent the loops from occurring  if the path is ever needed to compensate for a network cable or switch failure  stp recalculates the paths and unblocks the necessary-ports to allow the redundant path to become active  stp recalculations can also occur any time a new switch or new inter-switch link is added to the network 
purpose of stp video   observe stp-operationthis video demonstrates the use of stp in a network environment 
purpose of stp packet tracer   investigate stp loop preventionin this packet tracer activity  you will complete the following objectives create and configure a simple three switch network with stp view stp-operation disable stp and view operation again 
5 2 stp-operations
stp-operations steps to a loop-free topologyusing the sta  stp builds a loop-free topology in a four-step process elect the root-bridge elect the root-ports elect designated-ports elect alternate  blocked  ports during sta and stp functions  switches use bridge-protocol-data-units  bpdus  to share information about themselves and their connections  bpdus are used to elect the root-bridge  root-ports  designated-ports  and alternate-ports  each bpdu contains a bridge id  bid  that identifies which switch sent the bpdu  the bid is involved in making many of the sta decisions including root-bridge and port roles  the bid contains a priority-value  the mac-address of the switch  and an extended-system-id  the lowest bid value is determined by the combination of these three fields 
stp-operations steps to a loop-free topology  cont  bridge-priority  the default priority-value for all cisco-switches is the decimal value 32768  the range is 0 to 61440 in increments of 4096  a lower bridge-priority is preferable  a bridge-priority of 0 takes precedence over all other bridge priorities extended-system-id  the extended-system-id value is a decimal value added to the bridge-priority-value in the bid to identify the vlan for this bpdu mac-address  when two switches are configured with the same-priority and have the same extended-system-id  the switch having the mac-address with the lowest value  expressed in hexadecimal  will have the lower bid 
stp-operations 1  elect the root-bridgethe sta designates a single switch as the root-bridge and uses it as the reference point for all path calculations  switches exchange bpdus to build the loop-free topology beginning with selecting the root-bridge all switches in the-broadcast-domain participate in the election process  after a switch-boots  it begins to send out bpdu frames every two seconds  these bpdu frames contain the bid of the sending switch and the bid of the root-bridge  known as the root-id the switch with the lowest bid will become the root-bridge  at first  all switches declare themselves as the root-bridge with their own bid set as the root-id  eventually  the switches learn through the exchange of bpdus which switch has the lowest bid and will agree on one root-bridge 
stp-operations impact of default bidsbecause the default bid is 32768  it is possible for two or more switches to have the same-priority  in this scenario  where the priorities are the same  the switch with the lowest mac-address will become the root-bridge  the administrator should configure the desired root-bridge switch with a lower-priority in the figure  all switches are configured with the same-priority of 32769  here the mac-address becomes the deciding factor as to which switch becomes the root-bridge  the switch with the lowest hexadecimal mac-address value is the preferred root-bridge  in this example  s2 has the lowest value for its mac-address and is elected as the root-bridge for that spanning-tree-instance note  the priority of all the switches is 32769  the value is based on the 32768 default bridge-priority and the extended-system-id  vlan 1 assignment  associated with each switch  32768 1  
stp-operations determine the root path costwhen the root-bridge has been elected for a given spanning-tree-instance  the sta starts determining the best-paths to the root-bridge from all destinations in the-broadcast-domain  the path information  known as the internal-root-path-cost  is determined by the sum of all the individual-port costs along the path from the switch to the root-bridge when a switch receives the bpdu  it adds the ingress port cost of the segment to determine its internal-root-path-cost the default port costs are defined by the speed at which the port operates  the table shows the default port costs suggested by ieee  cisco-switches by default use the values as defined by the ieee 802 1d standard  also known as the short path cost  for both stp and rstp  although switch ports have a default port cost associated with them  the port cost is configurable  the ability to configure individual-port costs gives the administrator the flexibility to manually control the spanning-tree paths to the root-bridge link speedstp cost  ieee 802 1d-1998rstp cost  ieee 802 1w-200410 gbps2 0001 gbps20 000100 mbps19200 00010 mbps1002 000 000
stp-operations 2  elect the root-portsafter the root-bridge has been determined  the sta algorithm is used to select the root-port  every non-root switch will select one root-port  the root-port is the port closest to the root-bridge in terms of overall cost to the root-bridge  this overall cost is known as the internal-root-path-cost the internal-root-path-cost is equal to the sum of all the port costs along the path to the root-bridge  as shown in the figure  paths with the lowest cost become preferred  and all other redundant paths are blocked  in the example  the internal-root-path-cost from s2 to the root-bridge s1 over path 1 is 19 while the internal-root-path-cost over path 2 is 38  because path 1 has a lower overall path cost to the root-bridge  it is the preferred path and f0 1 becomes the root-port on s2 
stp-operations 3  elect designated-portsevery segment between two switches will have one designated-port  the designated-port is a port on the segment that has the internal-root-path-cost to the root-bridge  in other words  the designated-port has the best-path to receive traffic leading to the root-bridge what is not a root-port or a designated-port becomes an alternate or blocked port  all ports on the root-bridge are designated-ports if one end of a segment is a root-port  the other end is a designated-port all ports attached to end-devices are designated-ports on segments between two switches where neither of the switches is the root-bridge  the port on the switch with the least-cost-path to the root-bridge is a designated-port 
stp-operations 4  elect alternate  blocked  portsif a port is not a root-port or a designated-port  then it becomes an alternate  or backup  port  alternate-ports are in discarding or blocking state to prevent loops  in the figure  the sta has configured port f0 2 on s3 in the alternate role  port f0 2 on s3 is in the blocking state and will not forward ethernet-frames  all other inter-switch ports are in forwarding state  this is the loop-prevention part of stp 
stp-operations elect a root-port from multiple equal-cost-pathswhen a switch has multiple equal-cost-paths to the root-bridge  the switch will determine a port using the following criteria lowest sender bidlowest sender port prioritylowest sender port id
stp-operations elect a root-port from multiple equal-cost-paths  cont  lowest sender bid  this topology has four switches with switch s1 as the root-bridge  port f0 1 on switch s3 and port f0 3 on switch s4 have been selected as root-ports because they have the root path cost to the root-bridge for their respective switches  s2 has two ports  f0 1 and f0 2 with equal cost-paths to the root-bridge  the bridge ids of s3 and s4  will be used to break the tie  this is known as the sender s bid  s3 has a bid of 32769 5555 5555 5555 and s4 has a bid of 32769 1111 1111 1111  because s4 has a lower bid  the f0 1 port of s2  which is the port connected to s4  will be the root-port 
stp-operations elect a root-port from multiple equal-cost-paths  cont  lowest sender port priority  this topology has two switches which are connected with two equal-cost-paths between them  s1 is the root-bridge  so both of its ports are designated-ports s4 has two ports with equal-cost-paths to the root-bridge  because both ports are connected to the same switch  the sender s bid  s1  is equal  so the first step is a tie next  is the sender s  s1  port priority  the default port priority is 128  so both ports on s1 have the same port priority  this is also a tie  however  if either port on s1 was configured with a lower port priority  s4 would put its adjacent port in forwarding state  the other port on s4 would be a blocking state 
stp-operations elect a root-port from multiple equal-cost-paths  cont  lowest sender port id  the last tie-breaker is the lowest sender s port id  switch s4 has received bpdus from port f0 1 and port f0 2 on s1  the decision is based on the sender s port id  not the receiver s port id  because the port id of f0 1 on s1 is lower than port f0 2  the port f0 6 on switch s4 will be the root-port  this is the port on s4 that is connected to the f0 1 port on s1 port f0 5 on s4 will become an alternate-port and placed in the blocking state 
stp-operations stp timers and port statesstp convergence requires three timers  as follows hello-timer -the hello time is the interval between bpdus  the default is 2 seconds but can be modified to between 1 and 10 seconds forward delay timer -the forward delay is the time that is spent in the listening and learning state  the default is 15 seconds but can be modified to between 4 and 30 seconds max age timer -the max age is the maximum length of time that a switch waits before attempting to change the stp topology  the default is 20 seconds but can be modified to between 6 and 40 seconds note  the default times can be changed on the root-bridge  which dictates the value of these timers for the stp domain 
stp-operations stp timers and port states  cont  stp facilitates the logical loop-free path throughout the-broadcast-domain  the spanning-tree is determined through the information learned by the exchange of the bpdu frames between the interconnected switches  if a switch port transitions directly from the blocking state to the forwarding state without information about the full-topology during the transition  the port can temporarily create a data loop  for this reason  stp has five ports states  four of which are operational port states as shown in the figure  the disabled state is considered non-operational 
stp-operations operational details of each port statethe table summarizes the operational details of each port stateport statebpdumac-address tableforwarding data framesblockingreceive onlyno updatenolisteningreceive and sendno updatenolearningreceive and sendupdating tablenoforwardingreceive and sendupdating tableyesdisablednone sent or receivedno updateno
stp-operations per-vlan spanning-treestp can be configured to operate in an environment with multiple-vlans  in per-vlan spanning-tree  pvst  versions of stp  there is a root-bridge elected for each spanning-tree-instance  this makes it possible to have different root-bridges for different sets of vlans  stp operates a separate instance of stp for each individual vlan  if all ports on all switches are members of vlan 1  then there is only one spanning-tree-instance 
2 2 switching-domains
switching-domains collision-domainsswitches eliminate collision-domains and reduce congestion when there is full-duplex on the link the collision-domains are eliminated when there is one or more devices in half-duplex there will now be a collision-domain there will now be contention for the bandwidth collisions are now possible most devices  including cisco and microsoft use auto-negotiation as the default setting for duplex and speed 
switching-domains broadcast-domainsa broadcast-domain extends across all layer 1 or layer-2 devices on a lan only a layer-3 device  router  will break the-broadcast-domain  also called a mac broadcast-domain the-broadcast-domain consists of all devices on the lan that receive the broadcast-traffic when the layer-2 switch receives the broadcast it will flood it out all interfaces except for the ingress interface  too many broadcasts may cause congestion and poor network performance increasing devices at layer 1 or layer-2 will cause the-broadcast-domain to expand 
switching-domains alleviated network congestionswitches use the mac-address table and full-duplex to  eliminate collisions and avoid-congestion features of the switch that alleviate congestion are as follows protocolfunctionfast port-speedsdepending on the model  switches may have up to 100gbps port-speeds fast-internal-switchingthis uses fast internal bus or shared-memory to improve performance large frame-buffersthis allows for temporary storage while processing large quantities of frames high port-densitythis provides many ports for devices to be connected to lan with less cost  this also provides for more local-traffic with less congestion 
2 3 module practice and quiz
module practice and quiz what did i learn in this module frame-forwardingingress is the entry port  egress is the exit port the switch builds a mac-address table to forward frames on the lan the switch can use either the store-and-forward or cut-through method of switch-forwarding switching-domainsethernet ports in half-duplex will be a part of a collision-domain full-duplex will eliminate collision-domains a switch will flood out all interfaces except the ingress port if the frame is a broadcast or if the unicast destination-mac is unknown  broadcast-domains may be broken up by a layer-3 device  like a router switches extend broadcast-domains  but can eliminate collision-domains and relieve congestion 
module 2  switching concepts new terms and commandscontent-accessible-memory  cam mac-address tablestore-and-forward-switchingcut-through-switchingautomatic-bufferingfragment-free-switchingcollision-domainsbroadcast-domains
11 3 switch-hardware
switch-hardware switch platformsthere is a variety of switch platforms  form factors  and other features that must be considered before choosing a switch  when designing a network  it is important to select the proper hardware to meet current network requirements  as well as to allow for network growth  within an enterprise network  both switches and routers play a critical role in network-communication campus lan switches  such as the cisco 3850 series shown here  support high concentrations of user connections with speed and security appropriate for the enterprise network  
switch-hardware switch platforms  cont  cisco meraki cloud-managed access switches enable virtual stacking of switches  they monitor and configure thousands of switch ports over the web  without the intervention of onsite it staff the cisco nexus platform promotes infrastructure scalability  operational continuity  and transport flexibility in the data-center 
switch-hardware switch platforms  cont  service-provider ethernet access switches feature application intelligence  unified services  virtualization  integrated security  and simplified management cisco nexus virtual networking switch platforms provide secure multi-tenant services by adding virtualization intelligence technology to the data-center network 
switch-hardware switch form factorswhen selecting switches  network administrators must determine the switch form factors  this includes fixed configuration  modular configuration  stackable  or non-stackable features and options on fixed configuration switches are limited to those that originally come with the switch the chassis on modular switches accept field-replaceable line cards 
switch-hardware switch form factors  cont  special cables are used to connect stackable switches that allow them to effectively operate as one large switch the thickness of the switch  which is expressed in the number of rack-units  is also important for switches that are mounted in a rack  for example  the fixed configuration switches shown in the figure are all one rack-units  1u  or 1 75 inches  44 45 mm  in height 
switch-hardware port-densitythe port-density of a switch refers to the number of ports available on a single switch  fixed configuration switches support a variety of port-density configurations  the cisco catalyst 3850 come in 12  24  48 port configurations modular switches can support very high port densities through the addition of multiple switchport line cards  the modular catalyst 9400 switch supports 384 switchport interfaces 
switch-hardware forwarding-ratesforwarding-rates define the processing capabilities of a switch by rating how much data the switch can process per second  switch product lines are classified by forwarding-rates  entry-level switches have lower forwarding-rates than enterprise-level switches  if switch-forwarding rate is too low  it cannot accommodate full wire-speed communication across all of its switch ports  wire speed is the data rate that each ethernet port on the switch is capable of attaining  data rates can be 100 mbps  1 gbps  10 gbps  or 100 gbps access-layer switches typically do not need to operate at full wire speed  because they are physically limited by their uplinks to the distribution-layer  
switch-hardware power-over-ethernetpower-over-ethernet  poe  allows the switch to deliver power to a device  e g   ip phone  ap  camera  over the existing ethernet cabling  a network administrator should ensure that the poe features are actually required for a given installation  because switches that support poe are expensive 
switch-hardware multilayer switchingmultilayer-switches are typically deployed in the core and distribution-layers of an organization s switched network  they support some routing-protocols and forward ip-packets at a rate close to that of layer-2 forwarding  multilayer-switches often support specialized hardware  such as application-specific-integrated-circuits  asics   asics along with dedicated software data-structures can streamline the forwarding of ip-packets independent of the cpu 
switch-hardware business considerations for switch selectionconsiderationdescriptioncostthe cost of a switch will depend on the number and speed of the interfaces  supported features  and expansion capability port-densitynetwork-switches must support the appropriate number of devices on the network powerit is now common to power access-points  ip phones  and compact switches user power-over-ethernet  poe    in addition to poe considerations  some chassis-based switches support redundant power supplies reliabilitythe switch should provide continuous access to the network port-speedthe speed of the network connection is of primary concern to end users frame-buffersthe ability of the switch to store frames is important in a network where there may be congested ports to servers or other areas of the network scalabilitythe number of users on a network typically grows over time  therefore  the switch should provide the opportunity for growth 
7 4 switch speeds and forwarding methods
switch speeds and forwarding methods frame-forwarding methods on cisco-switchesswitches use one of the following forwarding methods for switching data between network ports store-and-forward-switching - this frame-forwarding method receives the entire frame and computes the crc  if the crc is valid  the switch looks up the destination address  which determines the outgoing-interface  then the frame is forwarded out of the correct port cut-through-switching - this frame-forwarding method forwards the frame before it is entirely received  at a minimum  the destination address of the frame must be read before the frame can be forwarded a big advantage of store-and-forward-switching is that it determines if a frame has errors before propagating the frame  when an error is detected in a frame  the switch discards the frame  discarding frames with errors reduces the amount of bandwidth consumed by corrupt data  store-and-forward-switching is required for quality-of-service  qos  analysis on converged networks where frame classification for traffic prioritization is necessary  for example  voice-over-ip  voip  data-streams need to have priority over web-browsing traffic 
switch speeds and forwarding methods cut-through-switchingin cut-through-switching  the switch acts upon the data as soon as it is received  even if the transmission is not complete  the switch buffers just enough of the frame to read the destination-mac-address so that it can determine to which port it should forward out the data  the switch does not perform any error-checking on the frame there are two variants of cut-through-switching fast-forward-switching - offers the lowest level of latency by immediately forwarding a packet after reading the destination address  because fast-forward-switching starts forwarding before the entire packet has been received  there may be times when packets are relayed with errors  the destination nic discards the faulty packet upon receipt  fast-forward-switching is the typical cut-through method of switching fragment-free-switching - a compromise between the high latency and high integrity of store-and-forward-switching and the low latency and reduced integrity of fast-forward-switching  the switch stores and performs an error check on the first 64 bytes of the frame before forwarding  because most network errors and collisions occur during the first 64 bytes  this ensures that a collision has not occurred before forwarding the frame 
switch speeds and forwarding methods memory buffering on switchesan ethernet switch may use a buffering technique to store frames before forwarding them or when the destination-port is busy because of congestion  shared-memory buffering also results in larger frames that can be transmitted with fewer dropped frames  this is important with asymmetric switching which allows for different data rates on different ports  therefore  more bandwidth can be dedicated to certain ports  e g   server port  methoddescriptionport-based-memoryframes are stored in queues that are linked to specific incoming and outgoing ports  a frame is transmitted to the outgoing port only when all the frames ahead in the queue have been successfully transmitted  it is possible for a single frame to delay the transmission of all the frames in memory because of a busy destination-port  this delay occurs even if the other frames could be transmitted to open destination-ports shared-memorydeposits all frames into a common memory buffer shared by all switch ports and the amount of buffer memory required by a port is dynamically allocated  the frames in the buffer are dynamically linked to the destination-port enabling a packet to be received on one port and then transmitted on another port  without moving it to a different queue 
switch speeds and forwarding methods duplex and speed settingstwo of the most basic settings on a switch are the bandwidth   speed   and duplex settings for each individual switch port  it is critical that the duplex and bandwidth settings match between the switch port and the connected devices there are two types of duplex settings used for communications on an ethernet-network full-duplex - both ends of the connection can send and receive simultaneously half-duplex - only one end of the connection can send at a time autonegotiation is an optional function found on most ethernet switches and nics  it enables two devices to automatically negotiate the best speed and duplex capabilities note  gigabit-ethernet ports only operate in full-duplex  
switch speeds and forwarding methods duplex and speed settingsduplex mismatch is one of the most common causes of performance issues on 10 100 mbps ethernet links  it occurs when one port on the link operates at half-duplex while the other port operates at full-duplex this can occur when one or both ports on a link are reset  and the autonegotiation-process does not result in both link partners having the same configuration  it also can occur when users reconfigure one side of a link and forget to reconfigure the other  both sides of a link should have autonegotiation on  or both sides should have it off  best-practice is to configure both ethernet switch ports as full-duplex 
switch speeds and forwarding methods auto-mdixconnections between devices once required the use of either a crossover or straight-through cable  the type of cable required depended on the type of interconnecting devices note  a direct-connection between a router and a host requires a cross-over connection most switch devices now support the automatic-medium-dependent-interface-crossover  auto-mdix  feature  when enabled  the switch automatically detects the type of cable attached to the port and configures the interfaces accordingly  the auto-mdix feature is enabled by default on switches running cisco ios release 12 2 18 se or later  however  the feature could be disabled  for this reason  you should always use the correct cable type and not rely on the auto-mdix feature  auto-mdix can be re-enabled using the mdix-auto interface configuration command 
7 3 the mac-address table
the mac-address table switch fundamentalsa layer-2 ethernet switch uses layer-2 mac-addresses to make forwarding decisions  it is completely unaware of the data  protocol  being carried in the data portion of the frame  such as an ipv4-packet  an arp message  or an ipv6 nd packet  the switch makes its forwarding decisions based solely on the layer-2 ethernet mac-addresses an ethernet switch examines its mac-address table to make a forwarding decision for each frame  unlike legacy ethernet hubs that repeat bits out all ports except the incoming port  when a switch is turned on  the mac-address table is emptynote  the mac-address table is sometimes referred to as a content-addressable-memory  cam  table 
the mac-address table switch learning and forwardingexamine the source-mac-address  learn every frame that enters a switch is checked for new information to learn  it does this by examining the source-mac-address of the frame and the port-number where the frame entered the switch  if the source-mac-address does not exist  it is added to the table along with the incoming port-number  if the source-mac-address does exist  the switch updates the refresh timer for that entry  by default  most ethernet switches keep an entry in the table for 5 minutes note  if the source-mac-address does exist in the table but on a different port  the switch treats this as a new entry  the entry is replaced using the same mac-address but with the more current port-number 
the mac-address table switch learning and forwarding  contd  find the destination-mac-address  forward if the destination-mac-address is a unicast address  the switch will look for a match between the destination-mac-address of the frame and an entry in its mac-address table  if the destination-mac-address is in the table  it will forward the frame out the specified port  if the destination-mac-address is not in the table  the switch will forward the frame out all ports except the incoming port  this is called an unknown unicast note  if the destination-mac-address is a broadcast or a multicast  the frame is also flooded out all ports except the incoming port 
the mac-address table filtering framesas a switch receives frames from different devices  it is able to populate its mac-address table by examining the source-mac-address of every frame  when the mac-address table of the switch contains the destination-mac-address  it is able to filter the frame and forward out a single port 
the mac-address table video   mac-address tables on connected switchesthis video will cover the following how switches build mac-address tableshow switches forward frames base on the content of their mac-address tables
the mac-address table video   sending the frame to the default-gatewaythis video will cover the following what a switch does when the destination amc address is not listed in the switch s mac-address table what a switch does when the source amc address is not listed in the switch s mac-address table
the mac-address table lab   view the switch mac-address tablein this lab  you will complete the following objectives part 1  build and configure the networkpart 2  examine the switch mac-address table
6 3 verify and troubleshoot etherchannel
verify and troubleshoot etherchannel verify etherchannelas always  when you configure devices in your network  you must verify your configuration  if there are problems  you will also need to be able to troubleshoot and fix them  there are a number of commands to verify an etherchannel configuration the show-interfaces port-channel command displays the general status of the port-channel-interface  the show-etherchannel-summary command displays one line of information per port-channel the show-etherchannel-port-channel command displays information about a specific port-channel-interface the show-interfaces etherchannel command can provide information about the role of a physical member interface of the etherchannel 
verify and troubleshoot etherchannel common issues with etherchannel configurationsall interfaces within an etherchannel must have the same configuration of speed and duplex-mode  native and allowed vlans on trunks  and access vlan on access-ports  ensuring these configurations will significantly reduce network problems related to etherchannel  common etherchannel issues include the following assigned-ports in the etherchannel are not part of the same vlan  or not configured as trunks  ports with different native-vlans cannot form an etherchannel trunking was configured on some of the ports that make up the etherchannel  but not all of them  it is not recommended that you configure trunking-mode on individual-ports that make up the etherchannel  when configuring a trunk on an etherchannel  verify the trunking-mode on the etherchannel if the allowed range of vlans is not the same  the ports do not form an etherchannel even when pagp is set to the auto or desirable-mode the dynamic negotiation options for pagp and lacp are not compatibly configured on both ends of the etherchannel 
verify and troubleshoot etherchannel troubleshoot etherchannel examplein the figure  interfaces f0 1 and f0 2 on switches s1 and s2 are connected with an etherchannel  however  the etherchannel is not operational 
verify and troubleshoot etherchannel troubleshoot etherchannel example  cont  step 1  view the etherchannel summary information  the output of the show-etherchannel-summary command indicates that the etherchannel is down  
verify and troubleshoot etherchannel troubleshoot etherchannel example  cont  step 2  view port-channel configuration  in the show run   begin interface port-channel output  more detailed output indicates that there are incompatible pagp modes configured on s1 and s2 
verify and troubleshoot etherchannel troubleshoot etherchannel example  cont  step 3  correct the misconfiguration  to correct the issue  the pagp mode on the etherchannel is changed to desirable note  etherchannel and stp must interoperate  for this reason  the order in which etherchannel-related commands are entered is important  which is why you see interface port-channel 1 removed and then re-added with the channel-group command  as opposed to directly changed  if one tries to change the configuration directly  stp errors cause the associated ports to go into blocking or errdisabled state 
verify and troubleshoot etherchannel troubleshoot etherchannel example  cont  step 4  verify etherchannel is operational  the etherchannel is now active as verified by the output of the show-etherchannel-summary command 
verify and troubleshoot etherchannel packet tracer   troubleshoot etherchannelin this packet tracer  you will complete the following examine the physical-layer and correct switch port mode issuesidentify and correct port-channel assignment issuesidentify and correct port-channel assignment issues
14 4 port-numbers
port-numbers multiple separate communicationstcp and udp transport-layer protocols use port-numbers to manage-multiple  simultaneous conversations the source-port-number is associated with the originating application on the local-host whereas the destination-port-number is associated with the destination application on the remote-host 
port-numbers socket pairsthe source and destination-ports are placed within the segment the segments are then encapsulated within an ip-packet the combination of the source ip-address and source-port-number  or the destination-ip-address and destination-port-number is known as a socket sockets enable multiple-processes  running on a client  to distinguish themselves from each other  and multiple-connections to a server process to be distinguished from each other 
port-numbers port-number groupsport groupnumber-rangedescriptionwell-known-ports0 to 1 023these port-numbers are reserved for common or popular services and applications such as web browsers  email clients  and remote-access clients  defined well-known-ports for common server applications enables clients to easily identify the associated service required registered-ports1 024 to 49 151these port-numbers are assigned by iana to a requesting entity to use with specific processes or applications  these processes are primarily individual applications that a user has chosen to install  rather than common applications that would receive a well-known port-number  for example  cisco has registered port 1812 for its radius server authentication process private and or dynamic-ports49 152 to 65 535these ports are also known as ephemeral ports  the client s os usually assign port-numbers dynamically when a connection to a service is initiated  the dynamic-port is then used to identify the client application during communication 
port-numbers port-number groups  cont  well-known port-numbersport-numberprotocolapplication20tcpfile-transfer-protocol  ftp  - data21tcpfile-transfer-protocol  ftp  - control22tcpsecure-shell  ssh 23tcptelnet25tcpsimple-mail-transfer-protocol  smtp 53udp  tcpdomain-name-service  dns 67udpdynamic-host-configuration-protocol  dhcp  - server68udpdynamic-host-configuration-protocol - client69udptrivial-file-transfer-protocol  tftp 80tcphypertext-transfer-protocol  http 110tcppost-office-protocol-version-3  pop3 143tcpinternet-message-access-protocol  imap 161udpsimple-network-management-protocol  snmp 443tcphypertext-transfer-protocol secure  https 
port-numbers the netstat commandunexplained tcp-connections can pose a major-security-threat  netstat is an important tool to verify connections  c    netstat active connections proto local-address    foreign address     state tcp   192 168 1 124 3126  192 168 0 2 netbios-ssn   established tcp   192 168 1 124 3158   207 138 126 152 http    established tcp   192 168 1 124 3159  207 138 126 169 http    established tcp   192 168 1 124 3160  207 138 126 169 http    established tcp   192 168 1 124 3161  sc msn com http     established tcp   192 168 1 124 3166  www cisco com http    established
14 6 reliability and flow-control
reliability and flow-control tcp-reliability- guaranteed and ordered deliverytcp can also help maintain the flow-of-packets so that devices do not become overloaded there may be times when tcp-segments do not arrive at their destination or arrive out of order all the data must be received and the data in these segments must be reassembled into the original order sequence-numbers are assigned in the header of each packet to achieve this goal 
reliability and flow-control video -tcp-reliability- sequence-numbers and acknowledgmentsthis video depicts a simplified example of the tcp operations 
reliability and flow-control tcp-reliability   data-loss and retransmissionno matter how well designed a network is  data-loss occasionally occurs tcp provides methods of managing these segment losses  among these is a mechanism to retransmit segments for unacknowledged data 
reliability and flow-control tcp-reliability   data-loss and retransmission  cont  host operating systems today typically employ an optional tcp feature called selective-acknowledgment  sack   negotiated during the three-way-handshake if both hosts support sack  the receiver can explicitly acknowledge which segments  bytes  were received including any discontinuous segments 
reliability and flow-control video - tcp-reliability   data-loss and retransmissionthis video shows the process of resending segments that are not initially received by the destination 
reliability and flow-control tcp flow-control   window-size and acknowledgmentstcp also provides mechanisms for flow-control as follows flow-control is the amount of data that the destination can receive and process reliably flow-control helps maintain the reliability of tcp transmission by adjusting the rate of data-flow between source and destination for a given session 
reliability and flow-control tcp flow-control   maximum-segment-sizemaximum-segment-size  mss  is the maximum amount of data that the destination-device can receive a common mss is 1 460 bytes when using ipv4 a host determines the value of its mss field by subtracting the ip and tcp-headers from the ethernet maximum-transmission-unit  mtu   which is 1500 bytes be default  1500 minus 60  20 bytes for the ipv4 header and 20 bytes for the tcp-header  leaves 1460 bytes 
reliability and flow-control tcp flow-control   congestion avoidancewhen congestion occurs on a network  it results in packets being discarded by the overloaded-router to avoid and control-congestion  tcp employs several congestion-handling-mechanisms  timers  and algorithms 
14 5 tcp communication process
tcp communication process tcp server processeseach application process running on a server is configured to use a port-number  an individual server cannot have two services assigned to the same port-number within the same transport-layer services an active server application assigned to a specific port is considered open  which means that the transport-layer accepts  and processes segments addressed to that port  any incoming client request addressed to the correct socket is accepted  and the data is passed to the server application  
tcp communication process tcp-connection establishmentstep 1  the initiating client requests a client-to-server communication-session with the server step 2  the server acknowledges the client-to-server communication-session and requests a server-to-client communication-session step 3  the initiating client acknowledges the server-to-client communication-session 
tcp communication process session-terminationstep 1  when the client has no more data to send in the stream  it sends a segment with the fin-flag-set step 2  the server sends an ack to acknowledge the receipt of the fin to terminate the session from client to server step 3  the server sends a fin to the client to terminate the server-to-client session step 4  the client responds with an ack to acknowledge the fin from the server 
tcp communication process tcp three-way-handshake analysisfunctions of the three-way-handshake it establishes that the destination-device is present on the network it verifies that the destination-device has an active service and is accepting requests on the destination-port-number that the initiating client intends to use it informs the destination-device that the source client intends to establish a communication-session on that port-number after the communication is completed the sessions are closed  and the connection is terminated  the connection and session mechanisms enable tcp-reliability function 
tcp communication process tcp three-way-handshake analysis  cont  the six control-bit flags are as follows urg - urgent-pointer-field-significantack - acknowledgment-flag used in connection establishment and session-terminationpsh - push-functionrst - reset-the-connection when an error or timeout-occurssyn - synchronize-sequence-numbers used in connection establishmentfin - no-more-data-from-sender and used in session-termination
tcp communication process video tcp 3-way handshakethe video covers the following tcp 3-way handshaketermination of a tcp conversation
14 2 tcp overview
establishes-a-session - tcp is a connection-oriented-protocol that negotiates and establishes a permanent connection  or session  between source and destination-devices prior to forwarding any traffic ensures reliable-delivery - for many reasons  it is possible for a segment to become corrupted or lost completely  as it is transmitted over the network  tcp ensures that each segment that is sent by the source arrives at the destination provides-same-order-delivery - because networks may provide multiple routes that can have different transmission rates  data can arrive in the wrong order  supports flow-control - network hosts have limited resources  i e   memory and processing power   when tcp is aware that these resources are overtaxed  it can request that the sending application reduce the rate of data-flow  tcp overview tcp features
tcp overview tcp  headertcp is a stateful-protocol which means it keeps track of the state of the communication-session tcp records which information it has sent  and which information has been acknowledged 
tcp overview tcp-header fieldstcp-header fielddescriptionsource-porta 16-bit field used to identify the source application by port-number destination-porta 16-bit field used to identify the destination application by port-number sequence-numbera 32-bit field used for data reassembly purposes acknowledgment-numbera 32-bit field used to indicate that data has been received and the next byte expected from the source header-lengtha 4-bit field known as  data offset  that indicates the length of the tcp-segment-header reserveda 6-bit field that is reserved for future use control-bitsa 6-bit field used that includes bit codes  or flags  which indicate the purpose and function of the tcp-segment window-sizea 16-bit field used to indicate the number of bytes that can be accepted at one time checksuma 16-bit field used for error-checking of the segment-header and data urgenta 16-bit field used to indicate if the contained data is urgent 
tcp overview applications that use tcptcp handles all tasks associated with dividing the data-stream into segments  providing reliability  controlling data-flow  and reordering segments 
module objectivesmodule title  transport-layermodule objective  compare the operations of transport-layer protocols in supporting end-to-end communication topic titletopic objectivetransportation of dataexplain the purpose of the transport-layer in managing the transportation of data in end-to-end communication tcp overviewexplain characteristics of tcp udp overviewexplain characteristics of udp port-numbersexplain how tcp and udp use port-numbers tcp communication processexplain how tcp session establishment and termination processes facilitate reliable communication reliability and flow-controlexplain how tcp protocol-data-units are transmitted and acknowledged to guarantee delivery udp communicationcompare the operations of transport-layer protocols in supporting end-to-end communication 
14 1 transportation of data
transportation of data role of the transport-layerthe transport-layer is responsible for logical communications between applications running on different hosts the link between the application-layer and the lower-layers that are responsible for network-transmission 
transportation of data transport-layer responsibilitiesthe transport-layer has the following responsibilities tracking individual-conversationssegmenting-data and reassembling segmentsadds header informationidentify  separate  and manage-multiple conversationsuses segmentation and multiplexing to enable different communication conversations to be interleaved on the same network
transportation of data transport-layer protocolsip does not specify how the delivery or transportation of the packets takes place transport-layer protocols specify how to transfer messages between hosts  and are responsible for managing reliability requirements of a conversation the transport-layer includes the tcp and udp-protocols 
transportation of data-transmission-control-protocoltcp provides reliability and flow-control  tcp basic operations number and track data-segments transmitted to a specific host from a specific applicationacknowledge received dataretransmit any unacknowledged data after a certain amount of timesequence data that might arrive in wrong ordersend data at an efficient rate that is acceptable by the receiver
transportation of data user-datagram-protocol  udp udp provides the basic functions for delivering datagrams between the appropriate applications  with very little overhead and data checking udp is a connectionless protocol  udp is known as a best-effort delivery protocol because there is no acknowledgment that the data is received at the destination 
transportation of data the right transport-layer protocol for the right applicationudp is also used by request-and-reply-applications where the data is minimal  and retransmission can be done quickly if it is important that all the data arrives and that it can be processed in its proper sequence  tcp is used as the transport-protocol 
14 7 udp communication
udp communication udp-low-overhead versus reliabilityudp does not establish a connection  udp provides low overhead data transport because it has a small datagram-header and no-network-management-traffic 
udp communication udp-datagram reassemblyudp does not track sequence-numbers the way tcp does udp has no way to reorder the datagrams into their transmission order udp simply reassembles the data in the order that it was received and forwards it to the application 
udp communication udp server processes and requestsudp-based server applications are assigned well-known or registered port-numbers udp receives a datagram destined for one of these ports  it forwards the application data to the appropriate application based on its port-number 
udp communication udp client processesthe udp client process dynamically selects a port-number from the range of port-numbers and uses this as the source-port for the conversation the destination-port is usually the well-known or registered port-number assigned to the server process after a client has selected the source and destination-ports  the same-pair-of-ports are used in the header of all datagrams in the transaction 
14 3 udp overview
udp overview udp-featuresudp-features include the following data is reconstructed in the order that it is received any segments that are lost are not-resent there is no-session establishment the sending is not informed about resource-availability 
udp overview udp-headerthe udp-header is far simpler than the tcp-header because it only has four fields and requires 8 bytes  i e  64 bits  
udp overview udp-header fieldsthe table identifies and describes the four fields in a udp-header udp-header fielddescriptionsource-porta 16-bit field used to identify the source application by port-number destination-porta 16-bit field used to identify the destination application by port-number lengtha 16-bit field that indicates the length of the udp-datagram-header-checksuma 16-bit field used for error-checking of the datagram-header and data 
udp overview applications that use udplive video and multimedia applications - these applications can tolerate some data-loss but require-little or no-delay  examples include voip and live-streaming-video simple request and reply-applications - applications with simple transactions where a host sends a request and may or may not receive a reply  examples include dns and dhcp applications that handle reliability themselves - unidirectional-communications where flow-control  error-detection  acknowledgments  and error-recovery is not required  or can be handled by the application  examples include snmp and tftp 
module 12  network-troubleshootingenterprise networking  security  and automation v7 0  ensa 
module objectivesmodule title  network-troubleshootingmodule objective  troubleshoot enterprise-networks topic titletopic objectivenetwork documentationexplain how network documentation is developed and used to troubleshoot network issues troubleshooting-processcompare troubleshooting methods that use a systematic  layered approach troubleshooting toolsdescribe different networking troubleshooting tools symptoms and causes of network problemsdetermine the symptoms and causes of network problems using a layered model troubleshooting ip connectivitytroubleshoot a network using the layered model 
12 1 network documentation
network documentation documentation overviewaccurate and complete network documentation is required to effectively monitor and troubleshoot networks common network documentation includes the following physical and logical network-topology diagramsnetwork-device documentation that records all pertinent device informationnetwork performance baseline documentationall network documentation should be kept in a single location and backup documentation should be maintained and kept in a separate location 
network documentation network-topology diagramsthere are two types of network-topology diagrams  physical and logical physical-topologylogical-topology
network documentation network-device documentationnetwork-device documentation should contain accurate  up-to-date records of the network hardware and software  documentation should include all pertinent information about the network-devices router device documentationswitch device documentationend-system documentation
network documentation establish a network-baselinea network-baseline is used to establish normal network performance to determine the  personality  of a network under normal conditions  establishing a network performance baseline requires collecting performance data from the ports and devices that are essential to network operation the baseline data is as follows provides insight into whether the current network design can meet business requirements  can reveal areas of congestion or areas in the network that are underutilized 
network documentation step 1 - determine what types of data to collectwhen conducting the initial baseline  start by selecting a few variables that represent the defined policies  if too many data points are selected  the amount of data can be overwhelming  making analysis of the collected data difficult  start out simply and fine-tune along the way  some good starting variables are interface utilization and cpu utilization 
network documentation step 2 - identify devices and ports of interesta logical network-topology can be useful in identifying key devices and ports to monitor as shown in the sample topology  the devices and ports of interest include pc1  the admin terminal two servers  i e   srv1 and svr2 router-interfaces key ports on switches
network documentation step 3 - determine the baseline durationwhen capturing data for analysis  the period specified should be at a minimum  seven days long last no more than six weeks  unless specific long-term trends need to be measured  generally  a two-to-four-week baseline is adequate conduct an annual analysis of the entire network  or baseline different sections of the network on a rotating basis  analysis must be conducted regularly to understand how the network is affected by growth and other changes 
network documentation data measurementthe table lists some of the most common cisco ios commands used for data collection commanddescriptionshow-versiondisplays uptime  version information for device software and hardwareshow-ip-interface  brief   show-ipv6-interface  brief displays all the configuration options that are set on an interface show-interfaces displays detailed output for each interface show-ip-route  static   eigrp   ospf   bgp  show-ipv6-route  static   eigrp   ospf   bgp displays the routing-table content listing directly-connected-networks and learned remote-networks show-cdp-neighbors-detaildisplays detailed information about directly-connected cisco devices show arp show ipv6 neighborsdisplays the contents of the arp-table  ipv4  and the neighbor-table  ipv6  show-running-configdisplays current configuration show vlandisplays the status of vlans on a switch show portdisplays the status of ports on a switch show tech-supportused to collect a large amount of information using multiple show commands for technical support reporting purposes 
12 4 symptoms and causes of network problems
symptoms and causes of network problems physical-layer troubleshootingthe table lists common symptoms of physical-layer network problems symptomdescriptionperformance lower than baselinerequires previous baselines for comparison  the most common reasons include overloaded or underpowered servers  unsuitable switch or router configurations  traffic congestion on a low-capacity link  and chronic frame loss loss of connectivityloss of connectivity could be due to a failed or disconnected cable  can be verified using a simple ping test  intermittent connectivity loss can indicate a loose or oxidized connection network bottlenecks or congestionif a route fails  routing-protocols could redirect traffic to sub-optimal routes  this can result in congestion or bottlenecks in parts of the network high cpu utilization rateshigh cpu utilization rates indicates that a device is operating at or exceeding its design limits  if not addressed quickly  cpu overloading can cause a device to shut-down or fail console error-messageserror-messages reported on the device console could indicate a physical-layer problem  console messages should be logged to a central syslog-server 
symptoms and causes of network problems physical-layer troubleshooting  cont  the table lists issues that commonly cause network problems at the physical-layer problem causedescriptionpower-relatedcheck the operation of the fans and ensure that the chassis intake and exhaust vents are clear hardware faultsfaulty or corrupt nic driver files  bad cabling  or grounding problems can cause network-transmission errors such as late-collisions  short frames  and jabber cabling faultslook for damaged cables  improper cable  and poorly crimped connectors  suspect cables should be tested or exchanged with a known functioning cable attenuationattenuation can be caused if a cable length exceeds the design limit for the media  or when there is a poor connection resulting from a loose cable  or dirty or oxidized contacts noiselocal electromagnetic-interference  emi  can be generated by many sources  such as crosstalk  nearby electric cables  large electric motors  fm radio stations  police radio  and more interface configuration errorscauses can include incorrect clock rate  incorrect clock source  and interface not being turned on  this causes a loss of connectivity with attached network-segments exceeding design limitsa component could operate sub-optimally if it is being utilized beyond specifications cpu overloadsymptoms include processes with high cpu utilization percentages  input queue drops  slow performance  snmp timeouts  no remote-access  no dhcp services  telnet  and pings are slow or fail to respond 
symptoms and causes of network problems data-link layer troubleshootingthe table lists common symptoms of data-link layer network problems symptomdescriptionno functionality or connectivity at the network-layer or abovesome layer-2 problems can stop the exchange of frames across a link  while others only cause network performance to degrade network is operating below baseline performance levels frames can take a suboptimal path to their destination but still arrive causing the network to experience unexpected high-bandwidth usage on links   an extended or continuous ping can help reveal if frames are being dropped excessive broadcasts operating systems use broadcasts and multicasts extensively   generally  excessive broadcasts are the result of a poorly programmed or configured applications  a large layer-2 broadcast-domains  or an underlying network problems  console messages routers send messages when it detects a problem with interpreting incoming frames  encapsulation or framing problems  or when keepalives are expected but do not arrive   the most common console message that indicates a layer-2 problem is a line protocol down message
symptoms and causes of network problems data-link layer troubleshootingthe table lists issues that commonly cause network problems at the data-link layer problem causedescriptionencapsulation errorsoccurs when bits placed in a field by the sender are not what the receiver expects to see  address mapping errorsoccurs when layer-2 and layer addressing is not available framing errorsframing errors can be caused by a noisy serial line  an improperly designed cable  faulty nic  duplex mismatch  or an incorrectly configured channel service unit  csu  line clock stp failures or loopsmost stp problems are related to forwarding loops that occur when no ports in a redundant topology are blocked and traffic is forwarded in circles indefinitely  excessive flooding because of a high rate of stp topology changes  
symptoms and causes of network problems network-layer troubleshootingthe table lists common symptoms of network-layer network problems symptomdescriptionnetwork failureoccurs when the network is nearly or completely non-functional  affecting all users and applications on the network  these failures are usually noticed quickly by users and network administrators and are obviously critical to the productivity of a company suboptimal performancethese involve a subset of users  applications  destinations  or a type of traffic  optimization issues can be difficult to detect and even harder to isolate and diagnose  this is because they usually involve multiple layers  or even a single host computer  determining that the problem is a network-layer problem can take time 
symptoms and causes of network problems network-layer troubleshooting  cont  the table lists common symptoms of network-layer network problems problem causedescriptiongeneral network issuesoften a change in the topology may unknowingly have effects on other areas of the network  determine whether anything in the network has recently changed  and if there is anyone currently working on the network infrastructure connectivity-issuescheck for any equipment and connectivity problems  including power problems  environmental problems  and layer 1 problems  such as cabling problems  bad ports  and isp problems routing-tablecheck the routing-table for anything unexpected  such as missing routes or unexpected routes neighbor issuescheck to see if there are any problems with the routers forming neighbor-adjacencies topology databasecheck the table for anything unexpected  such as missing entries or unexpected entries 
symptoms and causes of network problems transport-layer troubleshooting - aclsthe table lists areas where acl misconfigurations commonly occur misconfigurationsdescriptionselection of traffic flowan acl must be applied to the correct interface in the correct traffic direction order of access-control entriesthe entries in an acl should be from specific to general implicit deny anythe implicit ace can be the cause of an acl misconfiguration addresses and ipv4 wildcard-maskscomplex ipv4 wildcard-masks are more efficient  but are more subject to configuration errors selection of transport-layer protocolit is important that only the correct transport-layer protocol be specified in an ace source and destination-portsensuring that the correct inbound and outbound ports are specified in an aceuse of the established keywordthe established keyword applied incorrectly  can provide unexpected results uncommon protocolsmisconfigured acls often cause problems for protocols other than tcp and udp 
symptoms and causes of network problems transport-layer troubleshooting - nat for ipv4the table lists common interoperability areas with nat symptomdescriptionbootp and dhcpthe dhcp-request packet has a source ipv4-address of 0 0 0 0  however  nat requires both a valid destination and source ipv4-address  therefore  bootp and dhcp can have difficulty operating over a router running either static or dynamic-nat  configuring the ipv4 helper feature can help solve this problem dnsa dns server outside the nat router does not have an accurate representation of the network inside the router  configuring the ipv4 helper feature can help solve this problem snmpan snmp management station on one side of a nat router may not be able to contact snmp-agents on the other side of the nat router  configuring the ipv4 helper feature can help solve this problem tunneling and encryption protocolsencryption and tunneling-protocols often require that traffic be sourced from a specific udp or tcp port  or use a protocol at the transport-layer that cannot be processed by nat 
symptoms and causes of network problems application-layer troubleshootingthe table provides a short description of these application-layer protocols applicationsdescriptionssh telnetenables users to establish terminal session connections with remote-hosts httpsupports the exchanging of text  graphic-images  sound  video  and other multimedia-files on the web ftpperforms interactive file transfers between hosts tftpperforms basic interactive file transfers typically between hosts and networking-devices smtpsupports basic message delivery services popconnects to mail servers and downloads email snmpcollects management information from network-devices dnsmaps ip-addresses to the names assigned to network-devices nfsnetwork file-system  nfs  enables computers to mount and use drives on remote-hosts  
12 5 troubleshooting ip connectivity
troubleshooting ip connectivity components of troubleshooting end-to-end connectivitybottom-up approach steps when there is no end-to-end connectivity are as follows  check physical connectivity at the point where network-communication stops  check for duplex mismatches check data-link and network-layer addressing on the local-network  verify that the default-gateway is correct ensure that devices are determining the correct path from the source to the destination  verify the transport-layer is functioning properly  verify that there are no acls blocking traffic ensure that dns settings are correct  
troubleshooting ip connectivity end-to-end connectivity problem initiates troubleshootingusually what initiates a troubleshooting effort is the discovery that there is a problem with end-to-end connectivity  two of the most common utilities used to verify a problem with end-to-end connectivity are ping and traceroute 
troubleshooting ip connectivity step 1 - verify the physical-layerthe show-interfaces command is useful when troubleshooting performance-related issues and hardware is suspected to be at fault of interest in the output are the interface statusinput queue dropsoutput queue drops input-errorsoutput-errors
troubleshooting ip connectivity step 2 - check for duplex mismatchesthe ieee 802 3ab gigabit-ethernet standard mandates the use of autonegotiation for speed and duplex and practically all fast-ethernet-nics also use autonegotiation by default  problems can occur when there is a duplex mismatch 
troubleshooting ip connectivity step 3 - verify addressing on the local-networkthe arp windows command displays and modifies entries in the arp cache that are used to store ipv4-addresses and their resolved ethernet physical  mac  addresses  
troubleshooting ip connectivity troubleshoot vlan assignment exampleanother issue to consider when troubleshooting end-to-end connectivity is vlan assignment  for example  the mac-address on fa0 1 should be in vlan 10 instead of vlan 1  the following configuration changes fa0 1 to vlan 10 and verifies the change 
troubleshooting ip connectivity step 4 - verify default-gatewaymisconfigured or missing default-gateways can cause connectivity problems in the figure for example  the default-gateways for r1 is 192 168 1 2  r2 pc1 is 10 1 10 1  r1 g0 0 0 useful commands to verify the default-gateway on r1  show-ip-routepc1  route print  or netstat  r 
troubleshooting ip connectivity troubleshoot ipv6 default-gateway examplean ipv6default-gateway can be configured manually  using slaac  or by using dhcpv6 for example  a pc is unable to acquire its ipv6 configuration using slaac  the command output is missing the all ipv6-router multicast-group  ff02  2   r1 is enabled as an ipv6 router and now the output verifies that r1 is a member of ff02  2  the all-ipv6-routers multicast-group 
troubleshooting ip connectivity step 5 - verify correct pathwhen troubleshooting  it is often necessary to verify the path to the destination-network the figure describes the process for both the ipv4 and ipv6 routing-tables the process of forwarding ipv4 and ipv6-packets is based on the longest bit match or longest prefix match  the routing-table process will attempt to forward the packet using an entry in the routing-table with the greatest number of leftmost matching-bits  the number of matching-bits is indicated by the prefix-length of the route 
troubleshooting ip connectivity step 6 - verify the transport-layertwo of the most common issues that affect transport-layer connectivity include acl configurations and nat configurations  a common tool for testing transport-layer functionality is the telnet utility for example  the administrator attempts to telnet to r2 using port 80 
troubleshooting ip connectivity step 7 - verify aclson routers  there may be acls that prohibit protocols from passing through the interface in the inbound or outbound direction in this example  acl 100 has been incorrectly configured inbound on the g0 0 0 instead of inbound on s0 1 1 the acl is removed from g0 0 0 and configured inbound on s0 1 1 
troubleshooting ip connectivity step 8 - verify dnsthe dns protocol controls the dns  a distributed database with which you can map hostnames to ip-addresses  when you configure dns on the device  you can substitute the hostname for the ip-address with all ip commands  such as ping or telnet  command output use the ip host global-configuration-command to enter a name to be used instead of the ipv4-address of the switch or router  as shown in the command output use the nslookup windows command to display the name-to-ip-address mapping information 
troubleshooting ip connectivity packet tracer - troubleshoot enterprise-networksin this packet tracer activity  you complete the following objectives part 1  verify switching technologiespart 2  verify dhcppart 3  verify routingpart 4  verify wan technologiespart 5  verify connectivity
17 6 troubleshooting methodologies
troubleshooting methodologies basic troubleshooting approachesstepdescriptionstep 1  identify the problemthis is the first step in the troubleshooting-process  although tools can be used in this step  a conversation with the user is often very helpful step 2  establish a theory of probable causesafter the problem is identified  try to establish a theory of probable causes  this step often yields more than a few probable causes to the problem step 3  test the theory to determine causebased on the probable causes  test your theories to determine which one is the cause of the problem  a technician may apply a quick fix to test and see if it solves the problem  if a quick fix does not correct the problem  you might need to research the problem further to establish the exact cause step 4  establish a plan of action and implement the solutionafter you have determined the exact cause of the problem  establish a plan of action to resolve-the-problem and implement the solution step 5  verify solution and implement preventive measuresafter you have corrected the problem  verify full functionality  if applicable  implement preventive measures step 6  document findings  actions  and outcomesin the final step of the troubleshooting-process  document your findings  actions  and outcomes  this is very important for future reference 
troubleshooting methodologies resolve or escalate in some situations  it may not be possible to resolve-the-problem immediately  a problem should be escalated when it requires a manager decision  some specific expertise  or network access level unavailable to the troubleshooting technician a company policy should clearly state when and how a technician should escalate a problem 
troubleshooting methodologies the debug commandthe ios debug command allows the administrator to display os process  protocol  mechanism and event messages in real-time for analysis  all debug commands are entered in privileged-exec-mode  the cisco ios allows for narrowing the output of debug to include only the relevant feature or subfeature  use debug commands only to troubleshoot specific problems to list a brief description of all the debugging command options  use the debug   command in privileged-exec-mode at the command-line to turn off a specific debugging feature  add the no keyword in front of the debug commandalternatively  you can enter the undebug form of the command in privileged-exec-mode to turn off all active debug commands at once  use the undebug all command be cautious using some debug commands  as they may generate a substantial amount of output and use a large portion of system resources  the router could get so busy displaying debug messages that it would not have enough processing power to perform its network functions  or even listen to commands to turn off debugging  
troubleshooting methodologies the terminal monitor commanddebug  and certain other ios message output is not automatically displayed on remote connections  this is because log messages are prevented from being displayed on vty-lines to display log messages on a terminal  virtual console   use the terminal monitor privileged exec command  to stop logging messages on a terminal  use the terminal no monitor privileged exec command 
12 2 troubleshooting-process
troubleshooting-process general troubleshooting procedurestroubleshooting can be time consuming because networks differ  problems differ  and troubleshooting experience varies  using a structured troubleshooting method will shorten overall troubleshooting time there are several troubleshooting-processes that can be used to solve a problem  the figure displays the logic flowchart of a simplified three-stage troubleshooting-process 
troubleshooting-process seven-step troubleshooting-processthe figure displays a more detailed seven-step troubleshooting-process stepsdescriptiondefine-the-problemverify that there is a problem and then properly define what the problem is gather-informationtargets  i e   hosts  devices  are identified  accessed  and information gathered  analyze-informationidentify possible causes using network documentation  network-baselines  knowledge bases  and peers eliminate-possible-causesprogressively eliminate-possible-causes to eventually identify the most probable cause  propose-hypothesiswhen the most probable cause has been identified  a solution must be formulated test-hypothesisassess the urgency of the problem  create a rollback plan  implement the solution  and verify outcome solve-the-problemwhen solved  inform all involved and document the cause and solution to help solve future problems 
troubleshooting-process question end usersthe table provides questioning guidelines and sample open ended end-user questions guidelinesexample open ended end-user questionsask pertinent questions what does not work  what exactly is the problem  what are you trying to accomplish determine the scope of the problem who does this issue affect  is it just you or others  what device is this happening on determine when the problem occurred   occurs when exactly does the problem occur  when was the problem first noticed  were there any error message s  displayed determine if the problem is constant or intermittent can you reproduce the problem  can you send me a screenshot or video of the problem determine if anything has changed what has changed since the last time it did work use questions to eliminate or discover possible problems what works  what does not work 
troubleshooting-process gather-informationcommon cisco ios commands used to gather network problem symptoms commanddescriptionping  host  ip-address sends an echo request packet to an address  then waits for a reply traceroute destinationidentifies the path a packet takes through the networks telnet  host   ip-address connects to an ip-address using the telnet application  note  use ssh whenever possible  ssh -l user-id ip-addressconnects to an ip-address using ssh show-ip-interface-brief  show-ipv6-interface briefdisplays a summary status of all interfaces on a device show-ip-route show-ipv6-routedisplays the current ipv4 and ipv6 routing-tables show protocolsdisplays the global and interface-specific status of any configured layer-3 protocol debugdisplays a list of options for enabling or disabling debugging events 
troubleshooting-process troubleshooting with layered modelsthe osi and tcp ip models can be applied to isolate network problems when troubleshooting  the figure shows some common devices and the osi layers that must be examined during the troubleshooting-process for that device 
troubleshooting-process structured troubleshooting methodsdifferent troubleshooting approaches that can be used include the following troubleshooting approachdescriptionbottom-upgood approach to use when the problem is suspected to be a physical one top-downuse this approach for simpler problems  or when you think the problem is with a piece of software divide-and-conquerstart at a middle layer  i e  layer-3  and tests in both directions from that layer follow-the-pathused to discover the actual traffic path from source to destination to reduce the scope of troubleshooting  substitutionyou physically swap a suspected problematic device with a known  working one  comparisonattempts to resolve-the-problem by comparing a nonoperational element with the working one  educated guesssuccess of this method varies based on your troubleshooting experience and ability 
troubleshooting-process guidelines for selecting a troubleshooting methodto quickly resolve network problems  take the time to select the most effective network-troubleshooting method the figure illustrates which method could be used when a certain type of problem is discovered troubleshooting is a skill that is developed by doing it  every network problem you identify and solve gets added to your skill set 
17 7 troubleshooting scenarios
troubleshooting scenarios duplex operation and mismatch issuesinterconnecting ethernet-interfaces must operate in the same duplex-mode for best communication performance and to avoid inefficiency and latency on the link the ethernet autonegotiation feature facilitates configuration  minimizes problems and maximizes link performance between two interconnecting ethernet links  the connected devices first announce their supported capabilities and then choose the highest performance mode supported by both ends if one of the two connected devices is operating in full-duplex and the other is operating in half-duplex  a duplex mismatch occurs  while data communication will occur through a link with a duplex mismatch  link performance will be very poor duplex mismatches are typically caused by a misconfigured interface or in rare instances by a failed autonegotiation  duplex mismatches may be difficult to troubleshoot as the communication between devices still occurs 
troubleshooting scenarios ip-addressing issues on ios devicestwo common causes of incorrect ipv4 assignment are manual assignment mistakes or dhcp-related issues network administrators often have to manually assign ip-addresses to devices such as servers and routers  if a mistake is made during the assignment  then communications issues with the device are very likely to occur on an ios device  use the show-ip-interface or show-ip-interface-brief commands to verify what ipv4-addresses are assigned to the network interfaces  for example  issuing the show-ip-interface-brief command as shown would validate the interface status on r1 
troubleshooting scenarios ip-addressing issues on end-deviceson windows-based machines  when the device cannot contact a dhcp-server  windows will automatically assign an address belonging to the 169 254 0 0 16 range  this feature is called automatic private ip-addressing  apipa   a computer with an apipa address will not be able to communicate with other devices in the network because those devices will most likely not belong to the 169 254 0 0 16 network  note  other operating systems  such linux and os x  do not use apipa if the device is unable to communicate with the dhcp-server  then the server cannot assign an ipv4-address for the specific network and the device will not be able to communicate to verify the ip-addresses assigned to a windows-based computer  use the ipconfig command 
troubleshooting scenarios default-gateway issuesthe default-gateway for an end-device is the closest networking device  belonging to the same network as the end-device  that can forward traffic to other networks  if a device has an incorrect or nonexistent default-gateway address  it will not be able to communicate with devices in remote-networks  similar to ipv4-addressing issues  default-gateway problems can be related to misconfiguration  in the case of manual assignment  or dhcp problems  if automatic assignment is in use  to verify the default-gateway on windows-based computers  use the ipconfig command on a router  use the show-ip-route command to list the routing-table and verify that the default-gateway  known as a default-route  has been set  this route is used when the destination address of the packet does not match any other routes in its routing-table 
troubleshooting scenarios troubleshooting dns issuesit is common for users to mistakenly relate the operation of an internet link to the availability of the dns  dns-server-addresses can be manually or automatically assigned via dhcp although it is common for companies and organizations to manage their own dns servers  any reachable dns server can be used to resolve names  cisco offers opendns which provides secure dns service by filtering phishing and some malware sites  opendns-addresses are 208 67 222 222 and 208 67 220 220  advanced features such as web content filtering and security are available to families and businesses use the ipconfig  all as shown to verify which dns server is in use by the windows computer the nslookup command is another useful dns troubleshooting tool for pcs  with nslookup a user can manually place dns queries and analyze the dns response  
troubleshooting scenarios lab   troubleshoot connectivity-issuesin this lab  you will complete the following objectives identify the problemimplement network changesverify full functionalitydocument findings and configuration changes
troubleshooting scenarios packet tracer   troubleshoot connectivity-issuesthe objective of this packet tracer activity is to troubleshoot and resolve connectivity-issues  if possible  otherwise  the issues should be clearly documented and so they can be escalated 
3 5 dynamic-trunking-protocol
dynamic-trunking-protocol introduction to dtpdynamic-trunking-protocol  dtp  is a proprietary cisco protocol dtp characteristics are as follows on by default on catalyst-2960 and 2950-switchesdynamic-auto is default on the 2960 and 2950-switchesmay be turned off with the nonegotiate commandmay be turned back on by setting the interface to dynamic-autosetting a switch to a static trunk or static access will avoid negotiation issues with the switchport-mode trunk or the switchport-mode-access commands 
dynamic-trunking-protocol negotiated interface modesthe switchport-mode command has additional options use the switchport-nonegotiate interface configuration command to stop dtp negotiation optiondescriptionaccesspermanent access-mode and negotiates to convert the neighboring-link into an access-linkdynamic-autowill becomes a trunk interface if the neighboring interface is set to trunk or desirable-modedynamic-desirableactively seeks to become a trunk by negotiating with other auto or desirable interfacestrunkpermanent trunking-mode and negotiates to convert the neighboring-link into a trunk-link
dynamic-trunking-protocol results of a dtp configurationdtp configuration options are as follows dynamic-autodynamic-desirabletrunkaccessdynamic-autoaccesstrunktrunkaccessdynamic-desirabletrunktrunktrunkaccesstrunktrunktrunktrunklimited connectivityaccessaccessaccesslimited connectivityaccess
dynamic-trunking-protocol verify dtp modethe default dtp configuration is dependent on the cisco ios-version and platform use the show-dtp-interface command to determine the current dtp mode best-practice recommends that the interfaces be set to access or trunk and to turnoff dtp
dynamic-trunking-protocol packet tracer   configure dtpin this packet tracer activity  you will perform the following configure static trunking configure and verify dtp 
switching  routing and wireless essentials v7 0  srwe module 4  inter-vlan-routing
module objectivesmodule title  inter-vlan-routingmodule objective  troubleshoot inter-vlan-routing on layer-3 devicestopic titletopic objectiveinter-vlan-routing operationdescribe options for configuring inter-vlan-routing router-on-a-stick inter-vlan-routingconfigure router-on-a-stick inter-vlan-routing inter-vlan-routing using layer-3 switchesconfigure inter-vlan-routing using layer-3 switching troubleshoot inter-vlan-routingtroubleshoot common inter-vlan-configuration issues 
4 1 inter-vlan-routing operation
inter-vlan-routing operation what is inter-vlan-routing vlans are used to segment switched layer-2 networks for a variety of reasons  regardless of the reason  hosts in one vlan cannot communicate with hosts in another vlan unless there is a router or a layer-3 switch to provide routing services inter-vlan-routing is the process of forwarding network-traffic from one vlan to another vlan there are three inter-vlan-routing options legacy inter-vlan-routing - this is a legacy solution  it does not scale well router-on-a-stick - this is an acceptable solution for a small to medium-sized network-layer-3 switch using switched virtual-interfaces  svis  - this is the most scalable solution for medium to large organizations 
inter-vlan-routing operation legacy inter-vlan-routingthe first inter-vlan-routing solution relied on using a router with multiple ethernet-interfaces  each router-interface was connected to a switch port in different vlans  the router-interfaces served as the default-gateways to the local-hosts on the vlan subnet legacy inter-vlan-routing using physical-interfaces works  but it has a significant limitation  it is not reasonably scalable because routers have a limited number of physical-interfaces  requiring one physical router-interface per vlan quickly exhausts the physical interface capacity of a router note  this method of inter-vlan-routing is no longer implemented in switched networks and is included for explanation purposes only 
inter-vlan-routing operation router-on-a-stick inter-vlan-routingthe  router-on-a-stick  inter-vlan-routing method overcomes the limitation of the legacy inter-vlan-routing method  it only requires one physical ethernet-interface to route traffic between multiple-vlans on a network a cisco-ios-router ethernet-interface is configured as an 802 1q trunk and connected to a trunk port on a layer-2 switch  specifically  the router-interface is configured using subinterfaces to identify routable vlans the configured subinterfaces are software-based virtual-interfaces  each is associated with a single physical ethernet-interface  subinterfaces are configured in software on a router  each subinterface is independently configured with an ip-address and vlan assignment  subinterfaces are configured for different subnets that correspond to their vlan assignment  this facilitates logical routing when vlan-tagged traffic enters the router-interface  it is forwarded to the vlan subinterface  after a routing decision is made based on the destination ip-network address  the router determines the exit-interface for the traffic  if the exit-interface is configured as an 802 1q subinterface  the data frames are vlan-tagged with the new vlan and sent back out the physical interfacenote  the router-on-a-stick method of inter-vlan-routing does not scale beyond 50 vlans 
inter-vlan-routing operation inter-vlan-routing on a layer-3 switchthe modern method of performing inter-vlan-routing is to use layer-3 switches and switched virtual-interfaces  svi   an svi is a virtual-interface that is configured on a layer-3 switch  as shown in the figure note  a layer-3 switch is also called a multilayer switch as it operates at layer-2 and layer-3  however  in this course we use the term layer-3 switch 
inter-vlan-routing operation inter-vlan-routing on a layer-3 switch  cont  inter-vlan svis are created the same way that the management vlan interface is configured  the svi is created for a vlan that exists on the switch  although virtual  the svi performs the same functions for the vlan as a router-interface would  specifically  it provides layer-3 processing for packets that are sent to or from all switch ports associated with that vlan the following are advantages of using layer-3 switches for inter-vlan-routing they are much faster than router-on-a-stick because everything is hardware switched and routed there is no need for external links from the switch to the router for routing they are not limited to one link because layer-2 etherchannels can be used as trunk-links between the switches to increase bandwidth latency is much lower because data does not need to leave the switch in order to be routed to a different network they more commonly deployed in a campus lan than routers the only disadvantage is that layer-3 switches are more expensive 
4 3 inter-vlan-routing using layer-3 switches
inter-vlan-routing using layer-3 switches layer-3 switch inter-vlan-routinginter-vlan-routing using the router-on-a-stick method is simple to implement for a small to medium-sized organization  however  a large enterprise requires a faster  much more scalable method to provide inter-vlan-routing enterprise campus lans use layer-3 switches to provide inter-vlan-routing  layer-3 switches use hardware-based switching to achieve higher-packet processing rates than routers  layer-3 switches are also commonly implemented in enterprise distribution-layer wiring closets capabilities of a layer-3 switch include the ability to do the following route from one vlan to another using multiple switched virtual-interfaces  svis  convert a layer-2 switchport to a layer-3 interface  i e   a routed port   a routed port is similar to a physical interface on a cisco-ios-router to provide inter-vlan-routing  layer-3 switches use svis  svis are configured using the same interface-vlan-vlan-id command used to create the management svi on a layer-2 switch  a layer-3 svi must be created for each of the routable vlans 
inter-vlan-routing using layer-3 switches layer-3 switch scenarioin the figure  the layer-3 switch  d1  is connected to two hosts on different vlans  pc1 is in vlan 10 and pc2 is in vlan 20  as shown  the layer-3 switch will provide inter-vlan-routing services to the two hosts 
inter-vlan-routing using layer-3 switches layer-3 switch configurationcomplete the following steps to configure s1 with vlans and trunking step 1  create the vlans  in the example  vlans 10 and 20 are used step 2  create the svi vlan-interfaces  the ip-address configured will serve as the default-gateway for hosts in the respective vlan step 3  configure access-ports  assign the appropriate port to the required vlan step 4  enable ip-routing  issue the ip-routing global-configuration-command to allow traffic to be exchanged between vlans 10 and 20  this command must be configured to enable inter-van routing on a layer-3 switch for ipv4 
inter-vlan-routing using layer-3 switches layer-3 switch inter-vlan-routing verificationinter-vlan-routing using a layer-3 switch is simpler to configure than the router-on-a-stick method  after the configuration is complete  the configuration can be verified by testing connectivity between the hosts from a host  verify connectivity to a host in another vlan using the ping command  it is a good idea to first verify the current host ip configuration using the ipconfig windows host command  next  verify connectivity with pc2 using the ping windows host command  the successful ping output confirms inter-vlan-routing is operating 
inter-vlan-routing using layer-3 switches routing on a layer-3 switchif vlans are to be reachable by other layer-3 devices  then they must be advertised using static or dynamic-routing  to enable routing on a layer-3 switch  a routed port must be configured a routed port is created on a layer-3 switch by disabling the switchport feature on a layer-2 port that is connected to another layer-3 device  specifically  configuring the no-switchport interface configuration command on a layer-2 port converts it into a layer-3 interface  then the interface can be configured with an ipv4 configuration to connect to a router or another layer-3 switch 
inter-vlan-routing using layer-3 switches routing scenario on a layer-3 switchin the figure  the previously configured d1 layer-3 switch is now connected to r1  r1 and d1 are both in an open-shortest-path-first  ospf  routing-protocol domain  assume inter-vlan has been successfully implemented on d1  the g0 0 1 interface of r1 has also been configured and enabled  additionally  r1 is using ospf to advertise its two networks  10 10 10 0 24 and 10 20 20 0 24 note  ospf routing configuration is covered in another course  in this module  ospf configuration commands will be given to you in all activities and assessments  it is not required that you understand the configuration in order to enable ospf routing on the layer-3 switch 
inter-vlan-routing using layer-3 switches routing configuration on a layer-3 switchcomplete the following steps to configure d1 to route with r1 step 1  configure the routed port  use the no-switchport command to convert the port to a routed port  then assign an ip-address and subnet-mask  enable the port step 2  enable routing  use the ip-routing global-configuration-command to enable routing step 3  configure routing  use an appropriate routing method  in this example  single-area-ospfv2 is configuredstep 4  verify routing  use the show-ip-route command step 5  verify connectivity  use the ping command to verify reachability 
inter-vlan-routing using layer-3 switches packet tracer   configure layer-3 switching and inter-vlan-routingin this packet tracer  you will complete the following objectives part 1  configure layer-3 switchingpart 2  configure inter-vlan-routingpart 3  configure ipv6 inter-vlan-routing
module 3  vlansswitching  routing  and wireless essentials v7 0  srwe 
module objectivesmodule title  protocols and modelsmodule objective  explain how network-protocols enable devices to access local and remote-network resources topic titletopic objectiveoverview of vlansexplain the purpose of vlans in a switched network vlans in a multi-switched environmentexplain how a switch forwards frames based on vlan-configuration in a multi-switch environment vlan-configurationconfigure a switch port to be assigned to a vlan based on requirements vlan-trunksconfigure a trunk port on a lan switch dynamic-trunking-protocolconfigure dynamic-trunking-protocol  dtp  
3 1 overview of vlans
overview of vlans vlan definitionsvlans are logical-connections with other similar devices placing devices into various vlans have the following characteristics provides segmentation of the various groups of devices on the same switchesprovide organization that is more manageablebroadcasts  multicasts and unicasts are isolated in the individual vlaneach vlan will have its own unique range of ip-addressingsmaller broadcast-domains
overview of vlans benefits of a vlan designbenefits of using vlans are as follows  benefitsdescriptionsmaller broadcast-domainsdividing the lan reduces the number of broadcast-domainsimproved-securityonly users in the same vlan can communicate togetherimproved-it-efficiencyvlans can group devices with similar requirements  e g  faculty vs  studentsreduced-costone switch can support multiple groups or vlansbetter performancesmall broadcast-domains reduce traffic  improving bandwidthsimpler-managementsimilar groups will need similar applications and other network resources
overview of vlans types of vlansdefault-vlanvlan 1 is the following  the default-vlanthe default native-vlanthe default-management-vlancannot be deleted or renamednote  while we cannot delete vlan1 cisco will recommend that we assign these default features to other vlans
overview of vlans types of vlans  cont  data vlan dedicated to user-generated-traffic  email and web traffic   vlan 1 is the default data vlan because all interfaces are assigned to this vlan native-vlanthis is used for trunk-links only  all frames are tagged on an 802 1q trunk-link except for those on the native-vlan  management vlan this is used for ssh telnet vty traffic and should not be carried with end user traffic typically  the vlan that is the svi for the layer-2 switch   
overview of vlans types of vlans  cont  voice-vlan  a separate vlan is required because voice traffic requires assured-bandwidthhigh-qos-priorityability to avoid-congestiondelay-less that 150 ms from source to destinationthe entire network must be designed to support voice 
overview of vlans packet tracer   who hears the broadcast in this packet tracer activity  you will do the following observe broadcast-traffic in a vlan implementationcomplete review questions
4 2 router-on-a-stick inter-vlan-routing
router-on-a-stick inter-vlan-routing router-on-a-stick scenarioin the figure  the r1 gigabitethernet 0 0 1 interface is connected to the s1 fastethernet 0 5 port  the s1 fastethernet 0 1 port is connected to the s2 fastethernet 0 1 port  these are trunk-links that are required to forward traffic within and between vlans to route between vlans  the r1 gigabitethernet 0 0 1 interface is logically divided into three subinterfaces  as shown in the table  the table also shows the three vlans that will be configured on the switches assume that r1  s1  and s2 have initial basic configurations  currently  pc1 and pc2 cannot ping each other because they are on separate networks  only s1 and s2 can ping each other  but they but are unreachable by pc1 or pc2 because they are also on different networks to enable devices to ping each other  the switches must be configured with vlans and trunking  and the router must be configured for inter-vlan-routing subinterfacevlanip-addressg0 0 1 1010192 168 10 1 24g0 0 1 2020192 168 20 1 24g0 0 1 3099192 168 99 1 24
router-on-a-stick inter-vlan-routing s1 vlan and trunking configurationcomplete the following steps to configure s1 with vlans and trunking step 1  create and name the vlans step 2  create the management interface step 3  configure access-ports step 4  configure trunking-ports 
router-on-a-stick inter-vlan-routing s2 vlan and trunking configurationthe configuration for s2 is similar to s1 
router-on-a-stick inter-vlan-routing r1 subinterface configurationthe router-on-a-stick method requires you to create a subinterface for each vlan to be routed  a subinterface is created using the interface-interface-id subinterface-id global configuration-mode command  the subinterface syntax is the physical interface followed by a period and a subinterface number  although not required  it is customary to match the subinterface number with the vlan number each subinterface is then configured with the following two commands encapsulation-dot1q vlan-id  native  - this command configures the subinterface to respond to 802 1q encapsulated traffic from the specified vlan-id  the native keyword option is only appended to set the native-vlan to something other than vlan 1 ip-address ip-address subnet-mask - this command configures the ipv4-address of the subinterface  this address typically serves as the default-gateway for the identified vlan repeat the process for each vlan to be routed  each router subinterface must be assigned an ip-address on a unique subnet for routing to occur  when all subinterfaces have been created  enable the physical interface using the no-shutdown interface configuration command  if the physical interface is disabled  all subinterfaces are disabled 
router-on-a-stick inter-vlan-routing r1 subinterface configuration  cont  in the configuration  the r1 g0 0 1 subinterfaces are configured for vlans 10  20  and 99 
router-on-a-stick inter-vlan-routing verify connectivity between pc1 and pc2the router-on-a-stick configuration is complete after the switch trunk and the router subinterfaces have been configured  the configuration can be verified from the hosts  router  and switch from a host  verify connectivity to a host in another vlan using the ping command  it is a good idea to first verify the current host ip configuration using the ipconfig windows host command next  use ping to verify connectivity with pc2 and s1  as shown in the figure  the ping output successfully confirms inter-vlan-routing is operating 
router-on-a-stick inter-vlan-routing router-on-a-stick inter-vlan-routing verificationin addition to using ping between devices  the following show commands can be used to verify and troubleshoot the router-on-a-stick configuration show-ip-routeshow-ip-interface-briefshow-interfacesshow-interfaces trunk
router-on-a-stick inter-vlan-routing-packet tracer  configure router-on-a-stick inter-vlan-routingin this packet tracer  you will complete the following objectives part 1  add vlans to a switchpart 2  configure subinterfacespart 3  test connectivity with inter-vlan-routing
router-on-a-stick inter-vlan-routing lab   configure router-on-a-stick inter-vlan-routingin this lab  you will complete the following objectives part 1  build the network and configure basic-device-settingspart 2  configure switches with vlans and trunkingpart 3  configure trunk-based inter-vlan-routing
4 4 troubleshoot inter-vlan-routing
troubleshoot inter-vlan-routing common inter-vlan issuesthere are a number of reasons why an inter-van configuration may not work  all are related to connectivity-issues  first  check the physical-layer to resolve any issues where a cable might be connected to the wrong port  if the connections are correct  then use the list in the table for other common reasons why inter-vlan connectivity may fail issue typehow to fixhow to verifymissing vlanscreate  or re-create  the vlan if it does not exist  ensure host port is assigned to the correct vlan show vlan  brief  show-interfaces switchport pingswitch trunk port issuesensure trunks are configured correctly  ensure port is a trunk port and enabled show interface trunk show-running-configswitch access-port issuesassign correct vlan to access-port  ensure port is an access-port and enabled  host is incorrectly configured in the wrong subnet show-interfaces switchport show-running-config-interface ipconfigrouter configuration issuesrouter subinterface ipv4-address is incorrectly configured  router subinterface is assigned to the vlan-id show-ip-interface-brief show-interfaces
troubleshoot inter-vlan-routing troubleshoot inter-vlan-routing scenarioexamples of some of these inter-vlan-routing-problems will now be covered in more detail  this topology will be used for all of these issues router r1 subinterfacessubinterfacevlanip-addressg0 0 0 1010192 168 10 1 24g0 0 0 2020192 168 20 1 24g0 0 0 3099192 168 99 1 24
troubleshoot inter-vlan-routing missing vlansan inter-vlan connectivity issue could be caused by a missing vlan  the vlan could be missing if it was not created  it was accidently deleted  or it is not allowed on the trunk-link when a vlan is deleted  any ports assigned to that vlan become inactive  they remain associated with the vlan  and thus inactive  until you assign them to a new vlan or recreate the missing vlan  recreating the missing vlan would automatically reassign the hosts to it use the show interface-interface-id switchport command to verify the vlan membership of the port 
troubleshoot inter-vlan-routing switch trunk port issuesanother issue for inter-vlan-routing includes misconfigured switch ports  in a legacy inter-vlan solution  this could be caused when the connecting router port is not assigned to the correct vlan however  with a router-on-a-stick solution  the most common cause is a misconfigured trunk port verify that the port connecting to the router is correctly configured as a trunk-link using the show interface trunk command if that port is missing from the output  examine the configuration of the port with the show-running-config-interface x command to see how the port is configured 
troubleshoot inter-vlan-routing switch access-port issueswhen a problem is suspected with a switch access-port configuration  use verification commands to examine the configuration and identify the problem a common indicator of this issue is the pc having the correct address configuration  ip-address  subnet-mask  default-gateway   but being unable to ping its default-gateway use the show vlan brief  show interface x switchport or show-running-config-interface x command to verify the interface-vlan assignment 
troubleshoot inter-vlan-routing router configuration issuesrouter-on-a-stick configuration problems are usually related to subinterface misconfigurations verify the subinterface status using the show-ip-interface-brief command  verify which vlans each of the subinterfaces is on  to do so  the show-interfaces command is useful but it generates a great deal of additional unrequired output  the command output can be reduced using ios command filters  in this example  use the include keyword to identify that only lines containing the letters  gig  or  802 1q  
troubleshoot inter-vlan-routing-packet tracer   troubleshoot inter-vlan-routingin this packet tracer activity  you will complete the following objectives part 1  locate network problemspart 2  implement the solutionpart 3  verify network connectivity
troubleshoot inter-vlan-routing lab   troubleshoot inter-vlan-routingin this lab  you will complete the following objectives part 1  build the network and load device configurationspart 2  troubleshoot the inter-vlan-routing configurationpart 3  verify vlan-configuration  port assignment and trunkingpart 4  test layer-3 connectivity
3 2 vlans in a  multi-switched environment
vlans in a multi-switched environment defining vlan-trunksa trunk is a point-to-point-link between two network-devices cisco trunk functions allow more than one vlanextend the vlan across the entire networkby default  supports all vlanssupports 802 1q trunking
vlans in a multi-switched environment networks without vlanswithout vlans  all devices connected to the switches will receive all unicast  multicast  and broadcast-traffic 
vlans in a multi-switched environment networks with vlanswith vlans  unicast  multicast  and broadcast-traffic is confined to a vlan  without a layer-3 device to connect the vlans  devices in different vlans cannot communicate  
vlans in a multi-switched environment vlan-identification with a tagthe ieee 802 1q header is 4 byteswhen the tag is created the fcs must be recalculated when sent to end-devices  this tag must be removed and the fcs recalculated back to its original number 802 1q vlan tag fieldfunctiontype2-byte field with hexadecimal 0x8100 this is referred to as tag-protocol-id  tpid user-priority3-bit value that supports canonical-format-identifier  cfi 1-bit value that can support token-ring frames on ethernetvlan-id  vid 12-bit vlan-identifier that can support up to 4096 vlans
vlans in a multi-switched environment native-vlans and 802 1q tagging802 1q trunk basics tagging is typically done on all vlans the use of a native-vlan was designed for legacy-use  like the hub in the example unless changed  vlan1 is the native-vlan both ends of a trunk-link must be configured with the same native-vlan each trunk is configured separately  so it is possible to have a different native-vlans on separate trunks 
vlans in a multi-switched environment voice-vlan-taggingthe voip phone is a three port switch the switch will use cdp  to inform the phone of the voice-vlan the phone will tag its own traffic  voice  and can set cost of service  cos   cos is qos for layer-2 the phone may or may not tag frames from the pc traffictagging functionvoice-vlantagged with an appropriate layer-2 class-of-service  cos  priority-valueaccess vlancan also be tagged with a layer-2 cos priority-valueaccess vlanis not tagged  no layer-2 cos priority-value 
vlans in a multi-switched environment voice-vlan verification examplethe show-interfaces fa0 18 switchport command can show us both data and voice-vlans assigned to the interface 
vlans in a multi-switched environment packet tracer   investigate a vlan implementationin this packet tracer activity  you will part 1  observe broadcast-traffic in a vlan implementationpart 2  observe broadcast-traffic without vlans
3 3 vlan-configuration
vlan-configuration vlan ranges on catalyst switchescatalyst switches 2960 and 3650 support over 4000 vlans normal range vlan 1   1005 extended range vlan 1006 - 4095used in small to medium sized businessesused by service-providers1002   1005 are reserved for legacy vlansare in running-config1  1002   1005 are auto created and cannot be deletedsupports fewer vlan featuresstored in the vlan dat file in flashrequires vtp configurationsvtp can synchronize between switches
vlan-configuration vlan creation commandsvlan details are stored in the vlan dat file  you create vlans in the global configuration-mode taskios commandenter global configuration-mode switch  configure-terminalcreate a vlan with a valid id number switch config   vlan-vlan-idspecify a unique name to identify the vlan switch config-vlan   name-vlan-namereturn to the privileged-exec-mode switch config-vlan   endenter global configuration-mode switch  configure-terminal
vlan-configuration vlan creation exampleif the student pc is going to be in vlan 20  we will create the vlan first and then name it if you do not name it  the cisco ios will give it a default name of vlan and the four digit number of the vlan  e g  vlan0020 for vlan 20 promptcommands1 configure-terminals1 config  vlan 20s1 config-vlan  name students1 config-vlan  end
vlan-configuration vlan-port-assignment commandsonce the vlan is created  we can then assign it to the correct interfaces task commandenter global configuration-mode switch  configure-terminalenter interface configuration-mode switch config   interface-interface-idset the port to access-mode switch config-if   switchport-mode-accessassign the port to a vlan switch config-if   switchport access vlan-vlan-idreturn to the privileged-exec-mode switch config-if   end
vlan-configuration vlan-port-assignment examplewe can assign the vlan to the port interface once the device is assigned the vlan  then the end-device will need the ip-address information for that vlanhere  student pc receives 172 17 20 22promptcommands1 configure-terminals1 config  interface fa0 18s1 config-if  switchport-mode-accesss1 config-if  switchport access vlan 20s1 config-if  end
vlan-configuration data and voice-vlansan access-port may only be assigned to one data vlan  however it may also be assigned to one voice-vlan for when a phone and an end-device are off of the same switchport 
vlan-configuration data and voice-vlan examplewe will want to create and name both voice and data-vlans in addition to assigning the data vlan  we will also assign the voice-vlan and turn on qos for the voice traffic to the interface the newer catalyst switch will automatically create the vlan  if it does not already exist  when it is assigned to an interface note  qos is beyond the scope of this course  here we do show the use of the mls qos trust  cos   device cisco-phone   dscp   ip-precedence  command 
vlan-configuration verify vlan informationuse the show vlan command  the complete syntax is  show vlan  brief   id vlan-id   name-vlan-name   summary taskcommand optiondisplay vlan name  status  and its ports one vlan per line briefdisplay information about the identified vlan-id number  id vlan-iddisplay information about the identified vlan name  the vlan-name is an ascii string from 1 to 32 characters name-vlan-namedisplay vlan summary information summary
vlan-configuration change vlan port membershipthere are a number of ways to change vlan membership re-enter switchport access vlan-vlan-id commanduse the no-switchport access vlan to place interface back in vlan 1use the show vlan brief or the show interface fa0 18 switchport commands to verify the correct vlan association 
vlan-configuration delete-vlansdelete-vlans with the no vlan-vlan-id command caution  before deleting a vlan  reassign all member ports to a different vlan delete all vlans with the delete flash vlan dat or delete vlan dat commands reload the switch when deleting all vlans note  to restore to factory default   unplug all data cables  erase the startup-configuration and delete the vlan dat file  then reload the device 
vlan-configuration packet tracer   vlan-configurationin this packet tracer activity  you will perform the following verify the default-vlan-configurationconfigure vlansassign vlans to ports
3 4 vlan-trunks
vlan-trunks trunk-configuration commandsconfigure and verify vlan-trunks  trunks are layer-2 and carry traffic for all vlans taskios commandenter global configuration-mode switch  configure-terminalenter interface configuration-mode switch config   interface-interface-idset the port to permanent trunking-mode switch config-if   switchport-mode trunksets the native-vlan to something other than vlan 1 switch config-if   switchport trunk native-vlan-vlan-idspecify the list of vlans to be allowed on the trunk-link switch config-if   switchport-trunk-allowed-vlan-vlan-listreturn to the privileged-exec-mode switch config-if   end
vlan-trunks trunk-configuration examplethe subnets associated with each vlan are vlan 10 - faculty staff - 172 17 10 0 24vlan 20 - students - 172 17 20 0 24vlan 30 - guests - 172 17 30 0 24vlan-99 - native - 172 17 99 0 24f0 1 port on s1 is configured as a trunk port note  this assumes a 2960 switch using 802 1q tagging  layer-3 switches require the encapsulation to be configured before the trunk-mode  promptcommands1 config  interface fa0 1s1 config-if  switchport-mode trunks1 config-if  switchport trunk native-vlan-99s1 config-if  switchport trunk allowed vlan 10 20 30 99s1 config-if  end
vlan-trunks verify trunk-configurationset the trunk-mode and native-vlan notice sh int fa0 1 switchport command is set to trunk-administrativelyis set as trunk-operationally  functioning encapsulation is dot1qnative-vlan set to vlan-99 all vlans created on the switch will pass traffic on this trunk
vlan-trunks reset the trunk to the default statereset the default trunk settings with the no command all vlans allowed to pass trafficnative-vlan   vlan 1verify the default settings with a     sh int fa0 1 switchport command 
vlan-trunks reset the trunk to the default state  cont  reset the trunk to an access-mode with the switchport-mode-access command is set to an access-interface-administrativelyis set as an access-interface-operationally  functioning 
vlan-trunks packet tracer   configure trunksin this packet tracer activity  you will perform the following verify vlansconfigure trunks
vlan-trunks lab   configure vlans and trunksin this lab  you will perform the following build the network and configure basic-device-settingscreate vlans and assign switch portsmaintain vlan-port-assignments and the vlan databaseconfigure an 802 1q trunk between the switchesdelete the vlan database
8 3 ipsec
ipsec video   ipsec conceptsthis video will cover the following the purpose of ipsecipsec protocols  ah  esp  sa  ike 
ipsec ipsec technologiesipsec is an ietf standard that defines how a vpn can be secured across ip-networks  ipsec protects and authenticates ip-packets between source and destination and provides these essential security functions confidentiality - uses encryption-algorithms to prevent cybercriminals from reading the packet contents integrity - uses hashing algorithms to ensure that packets have not been altered between source and destination origin-authentication - uses the internet-key-exchange  ike  protocol to authenticate source and destination  diffie-hellman   used to secure-key-exchange 
ipsec ipsec technologies  cont  ipsec is not bound to any specific rules for secure communications ipsec can easily integrate new security technologies without updating existing ipsec standards the open slots in the ipsec framework shown in the figure can be filled with any of the choices that are available for that ipsec function to create a unique security association  sa  
ipsec ipsec protocol encapsulationchoosing the ipsec protocol encapsulation is the first building block of the framework ipsec encapsulates packets using authentication header  ah  or encapsulation security protocol  esp  the choice of ah or esp establishes which other building blocks are available ah is appropriate only when confidentiality is not required or permitted esp provides both confidentiality and authentication 
ipsec confidentialitythe degree of confidentiality depends on the encryption algorithm and the length of the key used in the encryption algorithm  the number of possibilities to try to hack the key is a function of the length of the key - the shorter the key  the easier it is to break 
ipsec confidentiality  cont  the encryption-algorithms highlighted in the figure are all symmetric key cryptosystems des uses a 56-bit key 3des uses three independent 56-bit encryption keys per 64-bit block aes offers three different key lengths  128 bits  192 bits  and 256 bits seal is a stream cipher  which means it encrypts data continuously rather than encrypting blocks of data  seal uses a 160-bit key 
ipsec integritydata-integrity means that the data has not changed in transit a method of proving data-integrity is required  the hashed-message-authentication-code  hmac  is a data-integrity algorithm that guarantees the integrity of the message using a hash value message-digest-5  md5  uses a 128-bit shared-secret-key the secure-hash-algorithm  sha  uses a 160-bit secret key 
ipsec authenticationthere are two ipsec peer authentication methods pre-shared-key  psk  -  psk  value is entered into each peer manually easy to configure manuallydoes not scale wellmust be configured on every peerrivest  shamir  and adleman  rsa  - authentication uses digital-certificates to authenticate the peers each peer must authenticate its opposite peer before the tunnel is considered secure 
ipsec secure-key-exchange with diffie - hellmandh provides allows two peers to establish a shared secret key over an insecure channel variations of the dh key exchange are specified as dh groups dh groups 1  2  and 5 should no longer be used dh groups 14  15  and 16 use larger key sizes with 2048 bits  3072 bits  and 4096 bits  respectivelydh groups 19  20  21 and 24 with respective key sizes of 256 bits  384 bits  521 bits  and 2048 bits support elliptical curve cryptography  ecc   which reduces the time needed to generate keys  
ipsec video   ipsec transport and tunnel modethis video will explain the process of the ipv4-packet with esp in transport mode and in tunnel mode 
8 2 types of vpns
types of vpns remote-access vpnsremote-access vpns let remote and mobile users securely connect to the enterprise  remote-access vpns are typically enabled dynamically by the user when required and  can be created using either ipsec or ssl clientless-vpn-connection -the connection is secured using a web browser ssl connection client-based-vpn-connection - vpn client software such as cisco anyconnect secure mobility client must be installed on the remote user s end-device 
types of vpns ssl vpnsssl uses the public-key-infrastructure and digital-certificates to authenticate peers  the type of vpn method implemented is based on the access requirements of the users and the organization s it processes  the table compares ipsec and ssl remote-access deployments  featureipsecsslapplications supportedextensive   all ip-based applicationslimited   only web-based applications and file sharingauthentication strengthstrong   two-way authentication with shared-keys or digital-certificatesmoderate   one-way or two-way authenticationencryption strengthstrong   key lengths 56   256 bitsmoderate to strong - key lengths 40   256 bitsconnection complexitymedium   requires vpn client installed on a hostlow   requires web browser on a hostconnection optionlimited   only specific devices with specific configurations can connectextensive   any device with a web browser can connect
types of vpns site-to-site ipsec-vpnssite-to-site vpns connect networks across an untrusted network such as the internet end hosts send and receive normal unencrypted tcp ip traffic through a vpn gateway the vpn gateway encapsulates and encrypts outbound traffic from a site and sends the traffic through the vpn tunnel to the vpn gateway at the target site  the receiving vpn gateway strips the headers  decrypts the content  and relays the packet toward the target-host inside its private-network 
types of vpns gre over ipsecgeneric-routing-encapsulation  gre  is a non-secure site-to-site vpn tunneling-protocol a gre tunnel can encapsulate various network-layer protocols as well as multicast and broadcast-traffic gre does not by default support encryption  and therefore  it does not provide a secure vpn tunnel a gre packet can be encapsulated into an ipsec packet to forward it securely to the destination vpn gateway standard ipsec-vpns  non-gre  can only create secure tunnels for unicast traffic encapsulating gre into ipsec allows multicast routing-protocol updates to be secured through a vpn 
types of vpns gre over ipsec  cont  the terms used to describe the encapsulation of gre over ipsec tunnel are passenger-protocol  carrier-protocol  and transport-protocol passenger-protocol   this is the original packet that is to be encapsulated by gre  it could be an ipv4 or ipv6-packet  a routing-update  and more carrier-protocol   gre is the carrier-protocol that encapsulates the original passenger packet transport-protocol   this is the protocol that will actually be used to forward the packet  this could be ipv4 or ipv6 
types of vpns gre over ipsec  cont  for example  branch and hq need to exchange ospf routing-information over an ipsec-vpn  gre over ipsec is used to support the routing-protocol traffic over the ipsec-vpn  specifically  the ospf-packets  i e   passenger-protocol  would be encapsulated by gre  i e   carrier-protocol  and subsequently encapsulated in an ipsec-vpn tunnel 
types of vpns dynamic-multipoint-vpnssite-to-site ipsec-vpns and gre over ipsec are not sufficient when the enterprise adds many more sites  dynamic multipoint vpn  dmvpn  is a cisco software solution for building multiple vpns in an easy  dynamic  and scalable manner dmvpn simplifies the vpn tunnel configuration and provides a flexible option to connect a central site with branch sites  it uses a hub-and-spoke configuration to establish a full mesh topology  spoke sites establish secure vpn tunnels with the hub site each site is configure using multipoint generic-routing-encapsulation  mgre   the mgre tunnel interface allows a single gre interface to dynamically support multiple ipsec tunnels spoke sites can also obtain information about each other  and alternatively build direct tunnels between themselves  spoke-to-spoke tunnels  
types of vpns ipsec virtual-tunnel-interfaceipsec virtual-tunnel-interface  vti  simplifies the configuration process required to support multiple sites and remote-access ipsec vti configurations are applied to a virtual-interface instead of static mapping the ipsec sessions to a physical interface ipsec vti is capable of sending and receiving both ip unicast and multicast encrypted traffic  therefore  routing-protocols are automatically supported without having to configure gre tunnels ipsec vti can be configured between sites or in a hub-and-spoke topology 
types of vpns service-provider mpls vpnstoday  service-providers use mpls in their core network  traffic is forwarded through the mpls backbone using labels  traffic is secure because service-provider customers cannot see each other s traffic mpls can provide clients with managed vpn solutions  therefore  securing traffic between client sites is the responsibility of the service-provider  there are two types of mpls vpn solutions supported by service-providers layer-3 mpls vpn - the service-provider participates in customer routing by establishing a peering between the customer s routers and the provider s routers  layer-2 mpls vpn - the service-provider is not involved in the customer routing  instead  the provider deploys a virtual-private-lan-service  vpls  to emulate an ethernet multiaccess-lan segment over the mpls network  no routing is involved  the customer s routers effectively belong to the same multiaccess-network 
module 8  vpn and ipsec conceptsenterprise networking  security  and automation v7 0  ensa  
module objectivesmodule title  vpn and ipsec conceptsmodule objective  explain how vpns and ipsec are used to secure site-to-site and remote-access connectivity topic titletopic objectivevpn technologydescribe the benefits of vpn technology types of vpnsdescribe different types of vpns ipsecexplain how the ipsec framework is used to secure-network-traffic 
8 1 vpn technology
vpn technology virtual private-networksvirtual private-networks  vpns  to create end-to-end private-network connections a vpn is virtual in that it carries information within a private-network  but that information is actually transported over a public network a vpn is private in that the traffic is encrypted to keep the data confidential while it is transported across the public network 
vpn technology vpn benefitsmodern vpns now support encryption features  such as internet-protocol-security  ipsec  and secure-sockets-layer  ssl  vpns to secure-network-traffic between sites major benefits of vpns are shown in the table benefitdescriptioncost-savingsorganizations can use vpns to reduce their connectivity costs while simultaneously increasing remote connection bandwidth securityencryption and authentication-protocols protect-data from unauthorized-access scalabilityvpns allow organizations to use the internet  making it easy to add new users without adding significant infrastructure compatibilityvpns can be implemented across a wide variety of wan link options including broadband technologies  remote workers can use these high-speed connections to gain secure access to corporate networks 
vpn technology site-to-site and remote-access vpnsa site-to-site vpn is terminated on vpn-gateways  vpn traffic is only encrypted between the gateways  internal hosts have no knowledge that a vpn is being used 
vpn technology site-to-site and remote-access vpns  cont  a remote-access vpn is dynamically created to establish a secure connection between a client and a vpn terminating device 
vpn technology enterprise and service-provider vpnsvpns can be managed and deployed as enterprise-vpns - common solution for securing enterprise traffic across the internet  site-to-site and remote-access vpns are created and managed by the enterprise using ipsec and ssl vpns service-provider vpns - created and managed by the provider network  the provider uses multiprotocol-label-switching  mpls  at layer-2 or layer-3 to create secure channels between an enterprise s sites  effectively segregating the traffic from other customer traffic  
7 5 internet-based connectivity
internet-based connectivity internet-based connectivity optionsinternet-based-broadband connectivity is an alternative to using dedicated wan options internet-based connectivity can be divided into wired and wireless options wired optionswired options use permanent cabling  e g   copper or fiber  to provide consistent bandwidth  and reduce error rates and latency  examples  dsl  cable connections  and optical-fiber networks wireless optionswireless options are less expensive to implement compared to other wan connectivity options because they use radio waves instead of wired media to transmit data  examples  cellular 3g 4g 5g or satellite-internet services wireless-signals can be negatively affected by factors such as distance from radio towers  interference from other sources and weather 
internet-based connectivity dsl technologydigital-subscriber-line  dsl  is a high-speed  always-on  connection technology that uses existing twisted-pair telephone lines to provide ip-services to users dsl are categorized as either asymmetric dsl  adsl  or symmetric dsl  sdsl   adsl and adsl2  provide higher downstream bandwidth to the user than upload bandwidth sdsl provides the same capacity in both directions dsl transfer rates are dependent on the actual length of the local-loop  and the type and condition of the cabling 
internet-based connectivity dsl connectionsservice-providers deploy dsl connections in the local-loop  the connection is set up between the dsl-modem and the dsl-access-multiplexer  dslam  the dsl-modem converts the ethernet signals from the teleworker device to a dsl signal  which is transmitted to a dsl-access-multiplexer  dslam  at the provider location a dslam is located at the central-office  co  of the provider and concentrates connections from multiple dsl subscribers dsl is not a shared-medium  each user has a separate direct-connection to the dslam  adding users does not impede performance 
internet-based connectivity dsl and pppisps use ppp as the layer-2 protocol for broadband dsl connections ppp can be used to authenticate the subscriber ppp can assign a public ipv4-address to the subscriber ppp provides link-quality management features there are two ways ppp over ethernet  pppoe  can be deployed host-with-ppoe-client - the pppoe client software communicates with the dsl-modem using pppoe and the modem communicates with the isp using ppp router-pppoe-client - the router is the pppoe client and obtains its configuration from the provider  
internet-based connectivity cable technologycable technology is a high-speed always-on connection technology that uses a coaxial-cable from the cable company to provide ip-services to users the data over cable service interface specification  docsis  is the international standard for adding high-bandwidth data to an existing cable system the optical node converts rf signals to light pulses over fiber-optic cable  the fiber media enables the signals to travel over long distances to the provider headend where a cable-modem termination system  cmts  is located the headend contains the databases needed to provide internet access while the cmts is responsible for communicating with the cable-modems note  all the local subscribers share the same cable bandwidth  as more users join the service  available bandwidth may drop below the expected rate 
internet-based connectivity optical-fibermany municipalities  cities  and providers install fiber-optic cable to the user location  this is commonly referred to as fiber to the x  fttx  and includes the following fiber-to-the-home  ftth  - fiber reaches the boundary of the residence  fiber-to-the-building  fttb  - fiber reaches the boundary of the building with the final connection to the individual living space being made via alternative means fiber to the node neighborhood  fttn    optical cabling reaches an optical node that converts optical signals to a format acceptable for twisted pair or coaxial-cable to the premise note  fttx can deliver the highest bandwidth of all broadband options 
internet-based connectivity wireless internet-based-broadbandwireless technology uses the unlicensed radio spectrum to send and receive data municipal-wi-fi -  municipal wireless networks are available in many cities providing high-speed internet access for free  or for substantially less than the price of other broadband services cellular   increasingly used to connect devices to the internet using radio waves to communicate through a nearby mobile phone tower  3g 4g 5g and long-term evolution  lte  are cellular technologies satellite-internet - typically used by rural users or in remote-locations where cable and dsl are not available  a router connects to a satellite dish which is pointed to a service-provider satellite in geosynchronous orbit  trees and heavy rains can impact the satellite signal wimax - worldwide-interoperability-for-microwave-access  wimax  is described in the ieee standard 802 16 provides high-speed broadband service with wireless-access and provides broad coverage like a cell phone network rather than through small wi-fi hotspots 
internet-based connectivity vpn technologyvpns can be used to address security concerns incurred when a remote office worker uses broadband services to access the corporate wan over the internet a vpn is an encrypted connection between private-networks over a public network  vpn tunnels are routed through the internet from the private-network of the company to the remote site or employee host there are several benefits to using vpn cost-savings - eliminates expensive  dedicated wan links and modem banks security - advanced encryption and authentication-protocols protect-data from unauthorized-access scalability - corporations can add large amounts of capacity without adding significant infrastructure compatibility with broadband technology - supported by broadband service-providers such as dsl and cable vpns are commonly implemented as the following site-to-site vpn - vpn settings are configured on routers  clients are unaware that their data is being encrypted remote-access - the user is aware and initiates remote-access connection  for example  using https in a browser to connect to your bank  alternatively  the user can run vpn client software on their host to connect to and authenticate with the destination-device 
internet-based connectivity isp connectivity optionsthere are different ways an organization can connect to an isp  the choice depends on the needs and budget of the organization single-homed  single connection to the isp using one link  provides no redundancy and is the least expensive solution dual-homed - connects to the same isp using two links  provides both redundancy and load-balancing  however  the organization loses internet connectivity if the isp experiences an outage multihomed -the client connects to two different isps  this design provides increased redundancy and enables load-balancing  but it can be expensive dual-multihomed - dual-multihomed is the most resilient topology of the four shown  the client connects with redundant links to multiple isps  this topology provides the most redundancy possible  it is the most expensive option of the four 
internet-based connectivity broadband solution comparisoneach broadband solution has advantages and disadvantages  if there are multiple broadband solutions available  a cost-versus-benefit analysis should be performed to determine the best solution some factors to consider include the following cable - bandwidth is shared by many users  therefore  upstream data rates are often slow during high-usage hours in areas with over-subscription dsl - limited bandwidth that is distance sensitive  in relation to the isp central-office   upload rate is proportionally lower compared to download rate fiber-to-the-home - this option requires fiber installation directly to the home cellular mobile - with this option  coverage is often an issue  even within a small office or home office where bandwidth is relatively limited municipal-wi-fi - most municipalities do not have a mesh wi-fi network deployed  if is available and in range  then it is a viable option satellite - this option is expensive and provides limited capacity per subscriber  typically used when no other option is available 
internet-based connectivity lab   configure and verify extended-ipv4-aclsin this lab  you will complete the following objectives investigate broadband distributionresearch broadband access options for specific scenarios
7 4 modern wan connectivity
modern wan connectivity modern wansmodern wans have more connectivity options than traditional wans  enterprises now require faster and more flexible wan connectivity options traditional wan connectivity options have rapidly declined in use because they are either no longer available  too expensive  or have limited bandwidth the figure displays the local-loop connections most likely encountered today 
modern wan connectivity modern wan connectivity optionsnew technologies are continually emerging  the figure summarizes the modern wan connectivity options dedicated-broadbandfiber can be installed independently by an organization to connect remote-locations directly together  dark fiber can be leased or purchased from a supplier  packet-switchedmetro ethernet   replacing many traditional wan options  mpls   enables sites to connect to the provider regardless of its access technologies internet-based-broadbandorganizations are now commonly using the global internet infrastructure for wan connectivity 
modern wan connectivity ethernet-wanservice-providers now offer ethernet-wan service using fiber-optic-cabling  the ethernet-wan service can go by many names  including the following metropolitan-ethernet  metro e ethernet-over-mpls  eompls virtual-private-lan-service  vpls there are several benefits to an ethernet-wan reduced expenses and administrationeasy integration with existing networksenhanced business productivitynote  ethernet-wans have gained in popularity and are now commonly being used to replace the traditional serial point-to-point  frame-relay and atm wan links 
modern wan connectivity mplsmultiprotocol-label-switching  mpls  is a high-performance service-provider wan routing technology to interconnect clients without regard to access-method or payload  mpls supports a variety of client access-methods  e g   ethernet  dsl  cable  frame-relay  mpls can encapsulate all types of protocols including ipv4 and ipv6 traffic an mpls router can be a customer edge  ce  router  a provider edge  pe  router  or an internal provider  p  router mpls routers are label switched routers  lsrs   they attach labels to packets that are then used by other mpls routers to forward traffic mpls also provides services for qos support  traffic engineering  redundancy  and vpns 
module 7  wan conceptsenterprise networking  security  and automation v7 0  ensa  
module objectivesmodule title  wan conceptsmodule objective  explain how wan access technologies can be used to satisfy business requirements topic titletopic objectivepurpose of wansexplain the purpose of a wan wan operationsexplain how wans operate traditional wan connectivitycompare traditional wan connectivity options modern wan connectivitycompare modern wan connectivity options internet-based connectivitycompare internet-based connectivity options 
7 1 purpose of wans
purpose of wans lans and wansa wan is a telecommunications network that spans over a relatively large geographical area and is required to connect beyond the boundary of the lan  local-area-networks  lans wide-area-networks  wans lans provide networking services within a small geographic area wans provide networking services over large geographical areas lans are used to interconnect local computers  peripherals  and other devices wans are used to interconnect remote users  networks  and sites a lan is owned and managed by an organization or home user wans are owned and managed by internet service  telephone  cable  and satellite providers other than the network infrastructure costs  there is no fee to use a lan wan services are provided for a fee lans provide high bandwidth-speeds using wired ethernet and wi-fi services wans providers offer low to high bandwidth-speeds  over long distances 
purpose of wans private and public-wansa private-wan is a connection that is dedicated to a single customer private-wans provide the following guaranteed service levelconsistent bandwidthsecuritya public-wan connection is typically provided by an isp or telecommunications service-provider using the internet  in this case  the service levels and bandwidth may vary  and the shared connections do not guarantee security 
purpose of wans wan-topologieswans are implemented using the following logical-topology designs point-to-point topologyhub-and-spoke topologydual-homed topologyfully-meshed topologypartially-meshed topologynote  large networks usually deploy a combination of these topologies 
purpose of wans wan-topologies  cont  point-to-point topology employs a point-to-point circuit between two endpoints involves a layer-2 transport service through the service-provider network the point-to-point connection is transparent to the customer network note  it can become expensive if many point-to-point connections are required 
purpose of wans wan-topologies  cont  hub-and-spoke topology enables a single interface on the hub router to be shared by all spoke circuits spoke-routers can be interconnected through the hub router using virtual-circuits and routed subinterfaces spoke-routers can only communicate with each other through the hub router note  the hub router represents a single-point of failure  if it fails  inter-spoke communication also fails 
purpose of wans wan-topologies  cont  dual-homed topologyoffers enhanced network redundancy  load-balancing  distributed computing and processing  and the ability to implement backup service-provider connections more expensive to implement than single-homed topologies  this is because they require additional networking hardware  such as additional routers and switches more difficult to implement because they require additional  and more complex  configurations 
purpose of wans wan-topologies  cont  fully-meshed topologyuses multiple virtual-circuits to connect all sitesthe most fault-tolerant topologypartially-meshed topologyconnects many but not all sites
purpose of wans carrier connectionsanother aspect of wan design is how an organization connects to the internet  an organization usually signs a service-level-agreement  sla  with a service-provider  the sla outlines the expected services relating to the reliability and availability of the connection  the service-provider may or may not be the actual carrier  a carrier owns and maintains the physical connection and equipment between the provider and the customer  typically  an organization will choose either a single-carrier or dual-carrier wan connection 
purpose of wans carrier connections  cont  a single-carrier connection is when an organization connects to only one service-provider  an sla is negotiated between the organization and the service-provider  a dual-carrier connection provides redundancy and increases network availability  the organization negotiates separate slas with two different service-providers  
purpose of wans evolving networksnetwork requirements of a company can change dramatically as the company grows over time a network must meet the day-to-day operational needs of business  and it must be able to adapt and grow as a company changes  network designers and administrators meet these challenges by carefully choosing network technologies  protocols  and service-providers  networks can be optimized by using a variety of network design techniques and architectures to illustrate differences between network size  we will use a fictitious company called span engineering as it grows from a small  local  business into a global enterprise 
purpose of wans evolving networks  cont  small networkspan  a small fictitious company  started with a few employees in a small office uses a single lan connected to a wireless-router for sharing data and peripherals connection to the internet is through a common broadband service called digital-subscriber-line  dsl it support is contracted from the dsl provider 
purpose of wans evolving networks  cont  campus networkwithin a few years span grew and required several floors of a building the company now required a campus-area-network  can  a firewall secures internet access to corporate users in-house it staff to support and maintain the network 
purpose of wans evolving networks  cont  branch networka few years later  the company expanded and added a branch site in the city  and remote and regional sites in other cities the company now required a metropolitan-area-network  man  to interconnect sites within the city  to connect to the central-office  branch offices in nearby cities used private dedicated lines through their local service-provider 
purpose of wans evolving networks  cont  distributed networkspan engineering has now been in business for 20 years and has grown to thousands of employees distributed in offices worldwide site-to-site and remote-access virtual private-networks  vpns  enable the company to use the internet to connect easily and securely with employees and facilities around the world 
7 3 traditional wan connectivity
traditional wan connectivity traditional wan connectivity optionsto understand the wans of today  it helps to know where they started  when lans appeared in the 1980s  organizations began to see the need to interconnect with other locations  to do so  they needed their networks to connect to the local-loop of a service-provider  this was accomplished by using dedicated lines  or by using switched services from a service-provider 
traditional wan connectivity common wan terminologypoint-to-point lines could be leased from a service-provider and were called  leased-lines   the term refers to the fact that the organization pays a monthly lease fee to a service-provider to use the line leased-lines are available in different fixed capacities and are generally priced based on the bandwidth required and the distance between the two connected points there are two systems used to define the digital capacity of a copper media serial-link t-carrier - used in north america  t-carrier provides t1 links supporting bandwidth up to 1 544 mbps and t3 links supporting bandwidth up to 43 7 mbps e-carrier   used in europe  e-carrier provides e1 links supporting bandwidth up to 2 048 mbps and e3 links supporting bandwidth up to 34 368 mbps 
traditional wan connectivity common wan terminology  cont  the table summarizes the advantages and disadvantages of leased-lines advantagessimplicitypoint-to-point communication links require minimal expertise to install and maintain qualitypoint-to-point communication links usually offer high quality service  if they have adequate bandwidth  availabilityconstant availability is essential for some applications  such as e-commerce  point-to-point communication links provide permanent  dedicated capacity which is required for voip or video over ip disadvantagescostpoint-to-point-links are generally the most expensive type of wan access  the cost of leased line solutions can become significant when they are used to connect many sites over increasing distances limited-flexibilitywan traffic is often variable  and leased-lines have a fixed capacity  so that the bandwidth of the line seldom matches the need exactly 
traditional wan connectivity circuit-switch optionscircuit-switched connections are provided by public-service-telephone-network  pstn  carriers  the local-loop connecting the cpe to the co is copper media  there are two traditional circuit-switched options public-service-telephone-network  pstn dialup wan access uses the pstn as its wan connection  traditional local-loops can transport binary computer data through the voice telephone network using a voiceband-modem the physical characteristics of the local-loop and its connection to the pstn limit the rate of the signal to less than 56 kbps integrated-services-digital-network  isdn isdn is a circuit-switching technology that enables the pstn local-loop to carry digital signals  this provided higher capacity switched connections than dialup access  isdn provides for data rates from 45 kbps to 2 048 mbps 
traditional wan connectivity packet-switch optionspacket switching segments data into packets that are routed over a shared network  it allows many pairs of nodes to communicate over the same channel there are two traditional  legacy  circuit-switched options frame-relayframe-relay is a simple layer-2 non-broadcast-multi-access  nbma  wan technology that is used to interconnect enterprise lans frame-relay creates pvcs which are uniquely identified by a data-link-connection-identifier  dlci  asynchronous-transfer-mode  atm asynchronous-transfer-mode  atm  technology is capable of transferring voice  video  and data through private and public networks  atm is built on a cell-based architecture rather than on a frame-based architecture  atm cells are always a fixed length of 53 bytes note  frame-relay and atm networks have been largely replaced by faster metro ethernet and internet-based solutions 
7 2 wan operation
wan operations wan standardsmodern wan standards are defined and managed by a number of recognized authorities including the following tia eia - telecommunications-industry-association and electronic-industries-allianceiso - international-organization-for-standardizationieee - institute-of-electrical-and-electronics-engineers
wan operations wans in the osi modelmost wan standards focus on the physical-layer and the data-link layer layer 1 protocolssynchronous-digital-hierarchy  sdh synchronous-optical-networking  sonet dense-wavelength-division-multiplexing  dwdm layer-2 protocolsbroadband  i e   dsl and cable wirelessethernet-wan  metro ethernet multiprotocol-label-switching  mpls point-to-point-protocol  ppp   less used high-level data-link control  hdlc   less used frame-relay  legacy asynchronous-transfer-mode  atm   legacy 
wan operations common wan terminologythere are specific terms used to describe wan connections between the subscriber  i e   the company   client  and the wan service-provider wan termdescriptiondata-terminal-equipment  dte connects the subscriber lans to the wan communication devicedata-communications-equipment  dce device used to communicate with the providercustomer-premises-equipment  cpe this is the dte and dce devices located on the enterprise edgepoint-of-presence  pop the point where the subscriber connects to the service-provider networkdemarcation-pointthe physical location in a building or complex that officially separates the cpe from service-provider equipment 
wan operations common wan terminology  cont  wan termdescriptionlocal-loop  last mile the copper or fiber cable that connects the cpe to the co of the service-providercentral-office  co the local service-provider facility or building that connects the cpe to the provider networktoll-networkincludes backhaul  long-haul  all-digital  fiber-optic communications lines  switches  routers  and other equipment inside the wan provider networkbackhaul-networkconnects multiple access nodes of the service-provider networkbackbone-networklarge  high-capacity networks used to interconnect service-provider networks and to create a redundant-network 
wan operations wan devicesthere are many types of devices that are specific to wan environments  wan devicedescriptionvoiceband-modemdial-up modem   uses telephone lines legacy devicedsl-modem   cable-modemcollectively known as broadband modems  these high-speed digital modems connect to the dte router using ethernet csu dsudigital-leased-lines require a csu and a dsu  it connects a digital device to a digital line optical-converterconnect fiber-optic media to copper media and convert optical signals to electronic pulses wireless-router   access-pointdevices are used to wirelessly connect to a wan provider wan-core-deviceswan backbone consists of multiple high-speed routers and layer-3 switches 
wan operations serial-communicationalmost all network-communications occur using a serial-communication delivery  serial-communication transmits bits sequentially over a single channel in contrast  parallel communications simultaneously transmit several bits using multiple wires as the cable length increases  the synchronization timing between multiple-channels becomes more sensitive to distance  for this reason  parallel communication is limited to very short distances
wan operations circuit-switched communicationa circuit-switched network establishes a dedicated circuit  or channel  between endpoints before the users can communicate establishes a dedicated virtual-connection through the service-provider network before communication can start all communication uses the same path the two most common types of circuit-switched wan technologies are the public-switched-telephone-network  pstn  and the legacy integrated-services-digital-network  isdn   
wan operations packet-switched communicationnetwork-communication is most commonly implemented using packet-switched communication segments traffic data into packets that are routed over a shared network much less expensive and more flexible than circuit switching common types of packet-switched wan technologies are ethernet-wan  metro ethernet   multiprotocol-label-switching  mpls frame-relayasynchronous-transfer-mode  atm  
wan operations sdh  sonet  and dwdmservice-provider networks use fiber-optic infrastructures to transport user data between destinations  fiber-optic cable is far superior to copper cable for long distance transmissions due to its much lower attenuation and interference there are two optical-fiber osi layer 1 standards available to service-providers sdh - synchronous-digital-hierarchy  sdh  is a global standard for transporting data over fiber-optic cable sonet - synchronous-optical-networking  sonet  is the north american standard that provides the same services as sdh sdh sonet define how to transfer multiple data  voice  and video communications over optical-fiber using lasers or light-emitting diodes  leds  over great distances dense-wavelength-division-multiplexing  dwdm  is a newer technology that increases the data-carrying capacity of sdh and sonet by simultaneously sending multiple-streams of data  multiplexing  using different wavelengths of light 
12 4 capwap operation
capwap operation video   capwapthis video will cover the following  control and provisioning of wireless-access-points  capwap  functionsplit media access-control  mac  architecturedtls-encryptionflex connect aps
capwap operation introduction to capwapcapwap is an ieee standard protocol that enables a wlc to manage-multiple-aps and wlans based on lwapp but adds additional security with datagram transport-layer-security  dlts  encapsulates and forwards wlan client traffic between an ap and a wlc over  tunnels using udp ports 5246 and 5247 operates over both ipv4 and ipv6  ipv4 uses ip protocol 17 and ipv6 uses ip protocol 136 
capwap operation split mac architecturethe capwap split mac concept does all the functions normally performed by individual-aps and distributes them between two functional components ap mac functionswlc mac functionsap mac functionswlc mac functionsbeacons and probe responsesauthenticationpacket acknowledgements and retransmissionsassociation and re-association of roaming clientsframe queueing and packet prioritizationframe translation to other protocolsmac layer data-encryption and decryptiontermination of 802 11 traffic on a wired interface
capwap operation dtls-encryptiondtls provides security between the ap and the wlc it is enabled by default to secure the capwap control channel and encrypt all management and control traffic between ap and wlc data-encryption is disabled by default and requires a dtls license to be installed on the wlc before it can be enabled on the ap 
capwap operation flex connect apsflexconnect enables the configuration and control of aps over a wan link there are two modes of option for the flexconnect ap connected-mode   the wlc is reachable  the flexconnect ap has capwap connectivity with the wlc through the capwap-tunnel  the wlc performs all capwap-functions standalone-mode   the wlc is unreachable  the flexconnect ap has lost capwap connectivity with the wlc  the flexconnect ap can assume some of the wlc functions such as switching client data traffic locally and performing client authentication locally 
12 5 channel management
channel management frequency channel saturationif the demand for a specific wireless channel is too high  the channel may become oversaturated  degrading the quality of the communication channel saturation can be mitigated using techniques that use the channels more efficiently direct-sequence-spread-spectrum  dsss  - a modulation technique designed to spread a signal over a larger frequency band  used by 802 11b devices to avoid interference from other devices using the same 2 4 ghz frequency frequency-hopping-spread-spectrum  fhss  - transmits radio signals by rapidly switching a carrier signal among many frequency channels  sender and receiver must be synchronized to  know  which channel to jump to  used by the original 802 11 standard orthogonal-frequency-division-multiplexing  ofdm  - a subset of frequency division multiplexing in which a single channel uses multiple sub-channels on adjacent frequencies  ofdm is used by a number of communication systems including 802 11a g n ac  
channel management channel selectionthe 2 4 ghz band is subdivided into multiple-channels each allotted 22 mhz bandwidth and separated from the next channel by 5 mhz a best-practice for 802 11b g n wlans requiring multiple-aps is to use non-overlapping channels such as 1  6  and 11 
channel management channel selection  cont  for the 5ghz standards 802 11a n ac  there are 24 channels  each channel is separated from the next channel by 20 mhz non-overlapping channels are 36  48  and 60 
channel management plan a wlan deploymentthe number of users supported by a wlan depends on the following the geographical layout of the facilitythe number of bodies and devices that can fit in a spacethe data rates users expectthe use of non-overlapping channels by multiple-aps and transmit power settingswhen planning the location of aps  the approximate circular coverage-area is important 
13 2 configure a basic wlan on the wlc
configure a basic wlan on the wlc video   configure a basic wlan on the wlcthis video will cover the following review the topologyaccess the gui for the wlan-controllerinformation about the wireless network on the network-summary screenconfigure a new wlansecure the new wlan
configure a basic wlan on the wlc wlc topologythe topology and addressing-scheme used for this topic are shown in the figure and the table  the access-point  ap  is a controller-based ap as opposed to an autonomous ap  so it requires no initial configuration and is often called lightweight-aps  laps   laps use the lightweight access-point protocol  lwapp  to communicate with a wlan-controller  wlc   controller-based-aps are useful in situations where many aps are required in the network  as more aps are added  each ap is automatically configured and managed by the wlc deviceinterfaceip-addresssubnet-maskr1f0 0172 16 1 1255 255 255 0r1f0 1 1192 168 200 1255 255 255 0s1vlan 1dhcpwlcmanagement192 168 200 254255 255 255 0ap1wired 0192 168 200 3255 255 255 0pc-anic172 16 1 254255 255 255 0pc-bnicdhcpwireless laptopnicdhcp
configure a basic wlan on the wlc log in to the wlcconfiguring a wireless-lan controller  wlc  is not that much different from configuring a wireless-router  the wlc controls aps and provides more services and management capabilities the user logs into the wlc using credentials that were configured during initial setup the network-summary page is a dashboard that provides a quick overview of configured wireless networks  associated access-points  aps   and active clients  you can also see the number of rogue access-points and clients 
configure a basic wlan on the wlc view ap informationclick access-points from the left menu to view an overall picture of the ap s system information and performance  the ap is using ip-address 192 168 200 3  because cisco-discovery-protocol  cdp  is active on this network  the wlc knows that the ap is connected to the fastethernet 0 1 port on the switch this ap in the topology is a cisco aironet 1815i which means you can use the command-line and a limited set of familiar ios commands 
configure a basic wlan on the wlc advanced settingsmost wlc will come with some basic settings and menus that users can quickly access to implement a variety of common configurations  however  as a network administrator  you will typically access the advanced settings  for the cisco 3504 wireless controller  click advanced in the upper right-hand corner to access the advanced summary page  from here  you can access all the features of the wlc 
configure a basic wlan on the wlc configure a wlanwireless-lan controllers have layer-2 switch ports and virtual-interfaces that are created in software and are very similar to vlan-interfaces  each physical port can support many aps and wlans  the ports on the wlc are essentially trunk-ports that can carry traffic from multiple-vlans to a switch for distribution to multiple-aps  each ap can support multiple wlans 
configure a basic wlan on the wlc configure a wlan  cont  basic wlan configuration on the wlc includes the following steps create the wlanapply and enable the wlanselect the interfacesecure the wlanverify the wlan is operationalmonitor the wlanview wireless client information
configure a basic wlan on the wlc configure a wlan  cont  create the wlan  in the figure  a new wlan with an ssid name  wireless-lan is created apply and enable the wlan  next the wlan is enabled the wlan settings are configured 
configure a basic wlan on the wlc configure a wlan  cont  select the interface  the interface that will carry the wlan traffic must be selected secure the wlan  the security-tab is used to access all the available options for securing the lan  
configure a basic wlan on the wlc configure a wlan  cont  verify the wlan is operational  the wlans menu on the left is used to view the newly configured wlan and its settings  monitor the wlan  the monitor tab is used to access the advanced summary page and confirm that the wireless-lan now has one client using its services 
configure a basic wlan on the wlc configure a wlan  cont  view wireless client details  click clients in the left menu to view more information about the clients connected to the wlan 
configure a basic wlan on the wlc packet tracer   configure a basic wlan on the wlcin this lab  you will explore some of the features of a wireless-lan controller  you will create a new wlan on the controller and implement security on that lan  then you will configure a wireless host to connect to the new wlan through an ap that is under the control of the wlc  finally  you will verify connectivity 
13 3 configure a wpa2 enterprise wlan on the wlc
configure a wpa2 enterprise wlan on the wlc video   define an snmp and radius server on the wlcthis video will cover the following configure the wlan-controller to send snmp-traps to an external-serverconfigure the wlan-controller to use an external radius server to authenticate wlan usersverify connectivity with the radius server
configure a wpa2 enterprise wlan on the wlc snmp and radiuspc-a is running simple-network-management-protocol  snmp  and remote-authentication-dial-in-user-service  radius  server software  the network administrator wants the wlc to forward all snmp log messages  i e   traps  to the snmp server the network administrator wants to use a radius server for authentication  authorization  and accounting  aaa  services  users will enter their username and password credentials which will be verified by the radius server  the radius server is required for wlans that are using wpa2 enterprise authentication note  snmp server and radius server configuration is beyond the scope of this module 
configure a wpa2 enterprise wlan on the wlc configure snmp server informationto enable snmp and configure settings click the management tab to access a variety of management features  click snmp to expand the sub-menus click trap-receivers  click new    to configure a new snmp trap receiver  enter the snmp community name and the ip-address  ipv4 or ipv6  for the snmp server and then click apply  the wlc will now forward snmp log messages to the snmp server 
configure a wpa2 enterprise wlan on the wlc configure radius server informationto configure the wlc with the radius server information click security click radiusclick authenticationclick new    to add pc-a as the radius server  enter the ipv4-address for pc-a and the shared secret that will be used between the wlc and the radius server and then click apply 
configure a wpa2 enterprise wlan on the wlc configure radius server information  cont  after clicking apply  the list of configured radius authentication-servers refreshes with the new server listed 
configure a wpa2 enterprise wlan on the wlc video   configure a vlan for a new wlanthis video will cover the following review the topologydeploy a new vlan interfaceassociate the new vlan interface with a wlan
configure a wpa2 enterprise wlan on the wlc topology with vlan 5 addressingeach wlan configured on the wlc needs its own virtual-interface  the wlc has five physical-data-ports that can be configured to support multiple wlans and virtual-interface  the new wlan will use interface-vlan 5 and network 192 168 5 0 24 and therefore r1 has been configured for vlan 5 as shown in the topology and show-ip-interface-brief output 
configure a wpa2 enterprise wlan on the wlc configure a new interfacevlan interface configuration on the wlc includes the following steps create a new interface configure the vlan name and id configure the port and interface-address configure the dhcp-server address apply and confirm verify interfaces 
configure a wpa2 enterprise wlan on the wlc configure a new interface  cont  create a new interface  click controller   interfaces   new   configure the vlan name and id  in the example  the new interface is named vlan5  the vlan-id is 5  and applied 
configure a wpa2 enterprise wlan on the wlc configure a new interface  cont  configure the port and interface-address  on the interface edit page  configure the physical port-number  i e   the wlc g1 interface is port-number 1 on the wlc   the vlan 5 interface-addressing  i e   192 168 5 254 24   and the default-gateway  i e   192 168 5 1 
configure a wpa2 enterprise wlan on the wlc configure a new interface  cont  configure the dhcp-server address  the example configures a primary dhcp-server at ipv4-address 192 168 5 1 which is the default-gateway router-address which is enabled as a dhcp-server apply and confirm  scroll to the top and click apply and then click ok for the warning message 
configure a wpa2 enterprise wlan on the wlc configure a new interface  cont  verify interfaces  click interfaces to verify that the new vlan5 interface is shown in the list of interfaces with its ipv4-address 
configure a wpa2 enterprise wlan on the wlc video   configure a dhcp-scopethis video will cover the following review the topologyexplain the role of the wlc dhcp-servercreate a new dhcp-scope
configure a wpa2 enterprise wlan on the wlc configure a dhcp-scopedhcp-scope configuration includes the following steps create a new dhcp-scope name the dhcp-scope verify the new dhcp-scope configure and enable the new dhcp-scope verify the enable dhcp-scope
configure a wpa2 enterprise wlan on the wlc configure a dhcp-scope  cont  create a new dhcp-scope  to configure a new dhcp-scope  click internal dhcp-server   dhcp-scope   new    name the dhcp-scope  the scope is named wireless-management and then applied 
configure a wpa2 enterprise wlan on the wlc configure a dhcp-scope  cont  verify the new dhcp-scope  in the dhcp-scopes page click the new scope name to configure the dhcp-scope configure and enable the new dhcp-scope  on the edit screen for the wireless-management scope  configure a pool of addresses  i e   192 168 200 240 24 to  249   the default-router ipv4-address  i e   192 168 200 1   then enabled and apply 
configure a wpa2 enterprise wlan on the wlc configure a dhcp-scope  cont  verify the enable dhcp-scope  the network administrator is returned to the dhcp-scopes page and can verify the scope is ready to be allocated to a new wlan 
configure a wpa2 enterprise wlan on the wlc video   configure a wpa2 enterprise wlanthis video will cover the following review the topologycreate a wlanconfigure the wlc to use the radius serversecure the new wlan with wpa2-enterpriseverify wpa2-enterprise-security
configure a wpa2 enterprise wlan on the wlc configure a wpa2 enterprise wlanby default  all newly created wlans on the wlc will use wpa2 with advanced-encryption-system  aes   802 1x is the default key management protocol used to communicate with the radius server next  create a new wlan to use interface-vlan5 configuring a new wlan on the wlc includes the following steps create a new wlan configure the wlan name and ssid enable the wlan for vlan 5 verify aes and 802 1x defaults configure wlan security to use the radius server verify the new wlan is available 
configure a wpa2 enterprise wlan on the wlc configure a wpa2 enterprise wlan  cont  create a new wlan  click the wlans tab and then go to create a new wlan configure the wlan name and ssid  enter the profile name and ssid  choose an id of 5  and then click apply to create the new wlan 
configure a wpa2 enterprise wlan on the wlc configure a wpa2 enterprise wlan  cont  enable the wlan for vlan 5  once the wlan  change the status to enabled  choose vlan5 from the interface interface group g  dropdown list  and then click apply and click ok to accept the popup-message verify aes and 802 1x defaults  click the security-tab to view the default security configuration for the new wlan  
configure a wpa2 enterprise wlan on the wlc configure a wpa2 enterprise wlan  cont  configure the radius server  to select the radius server that will be used to authenticate wlan users  click the aaa-servers tab and in the dropdown box  select the radius server that was configured on the wlc previously  and then apply your changes verify that the new wlan is available  to verify that the new wlan is listed and enabled click on the wlans submenu 
configure a wpa2 enterprise wlan on the wlc packet tracer   configure a wpa2 enterprise wlan on the wlcin this packet tracer activity  you will configure a new wlan on a wireless-lan controller  wlc   including the vlan interface that it will use  you will configure the wlan to use a radius server and wpa2-enterprise to authenticate users  you will also configure the wlc to use an snmp server configure a new vlan interface on a wlc configure a new wlan on a wlc configure a new scope on the wlc internal dhcp-server configure the wlc with snmp settings configure the wlc to use a radius server to authenticate wlan users secure a wlan with wpa2-enterprise connect hosts to the new wlc 
module 12  wlan conceptsswitching  routing and wireless essentials v7 0  srwe 
module objectivesmodule title  wlan conceptsmodule objective  explain how wlans enable network connectivity topic titletopic objectiveintroduction to wirelessdescribe wlan technology and standards components of wlansdescribe the components of a wlan infrastructure wlan operationexplain how wireless technology enables wlan operation capwap operationexplain how a wlc uses capwap to manage-multiple-aps channel managementdescribe channel management in a wlan wlan threatsdescribe threats to wlans secure wlansdescribe wlan security mechanisms 
12 1 introduction to wireless
introduction to wireless benefits of wirelessa wireless-lan  wlan  is a type of wireless network that is commonly used in homes  offices  and campus environments wlans make mobility possible within the home and business environments wireless infrastructures adapt to rapidly changing needs and technologies 
introduction to wireless types of wireless networkswireless-personal-area-network  wpan    low power and short-range  20-30ft or 6-9 meters   based on ieee 802 15 standard and 2 4 ghz frequency  bluetooth and zigbee are wpan examples wireless-lan  wlan    medium sized networks up to about 300 feet  based on ieee 802 11 standard and 2 4 or 5 0 ghz frequency wireless-man  wman    large geographic area such as city or district  uses specific licensed frequencies wireless-wan  wwan    extensive geographic area for national or global-communication  uses specific licensed frequencies 
introduction to wireless wireless technologiesbluetooth   ieee wpan standard used for device pairing at up to 300ft  100m  distance bluetooth-low-energy  ble    supports mesh topology to large scale network-devices bluetooth-basic-rate enhanced-rate  br edr    supports point-to-point topologies and is optimized for audio streaming wimax  worldwide-interoperability-for-microwave-access    alternative broadband wired internet connections  ieee 802 16 wlan standard for up 30 miles  50 km  
introduction to wireless wireless technologies  cont  cellular-broadband   carry both voice and data  used by phones  automobiles  tablets  and laptops global-system-of-mobile  gsm    internationally recognizedcode-division-multiple-access  cdma    primarily used on the us satellite-broadband   uses directional satellite dish aligned with satellite in geostationary orbit  needs clear line of site  typically used in rural locations where cable and dsl are unavailable 
introduction to wireless 802 11 standards802 11 wlan standards define how radio frequencies are used for wireless links ieee standardradio frequencydescription802 112 4 ghzdata rates up to 2 mb s802 11a5 ghzdata rates up to 54 mb s not interoperable with 802 11b or 802 11g802 11b2 4 ghzdata rates up to 11 mb s longer range than 802 11a and better able to penetrate building structures802 11g2 4 ghzdata rates up to 54 mb s backward compatible with 802 11b802 11n2 4 and 5 ghzdata rates 150   600 mb s require multiple antennas with mimo technology802 11ac5 ghzdata rates 450 mb s   1 3 gb s supports up to eight antennas802 11ax2 4 and 5 ghzhigh-efficiency-wireless  hew  capable of using 1 ghz and 7 ghz frequencies
introduction to wireless radio frequenciesall wireless-devices operate in the range of the electromagnetic spectrum  wlan networks operate in the 2 4 and 5 ghz frequency bands 2 4 ghz  uhf    802 11b g n ax5 ghz  shf    802 11a n ac ax
introduction to wireless wireless standards-organizationsstandards ensure interoperability between devices that are made by different manufacturers  internationally  the three organizations influencing wlan standards  international-telecommunication-union  itu    regulates the allocation of radio spectrum and satellite orbits institute-of-electrical-and-electronics-engineers  ieee    specifies how a radio frequency is modulated to carry information  maintains the standards for local and metropolitan-area-networks  man  with the ieee 802 lan man family of standards  wi-fi-alliance   promotes  the growth and acceptance of wlans  it is an association of vendors whose objective is to improve the interoperability of products that are based on the 802 11 standard
13 5 module practice and summary
module practice and quiz packet tracer   wlan configurationin this packet tracer activity  you will configure both a wireless home router and a wlc-based-network  you will implement both wpa2-psk and wpa2-enterprise-security configure a home router to provide wi-fi connectivity to a variety of devices configure wpa2-psk security on a home router configure interfaces on a wlc configure wpa2-psk security on a wlan and connect hosts to the wlan configure wpa2-enterprise on a wlan and connect hosts to the wlan verify connectivity 
module practice and quiz what did i learn in this module remote workers  small-branch-offices  and home networks often use a wireless-router  which typically include a switch for wired clients  a port for an internet connection  sometimes labeled  wan    and wireless components for wireless client access  most wireless-routers are preconfigured to be connected to the network and provide services  the wireless-router uses dhcp to automatically provide addressing information to connected devices  your first priority should be to change the username and password of your wireless-router  if you want to extend the range beyond approximately 45 meters indoors and 90 meters outdoors  you can add wireless-access-points  the router will use a process called network-address-translation  nat  to convert private ipv4-addresses to internet-routable ipv4-addresses  by configuring qos  you can guarantee that certain traffic-types  such as voice and video  are prioritized over traffic that is not as time-sensitive  such as email and web browsing lightweight-aps  laps  use the lightweight access-point protocol  lwapp  to communicate with a wlan-controller  wlc   
module practice and quiz what did i learn in this module   cont  configuring a wireless-lan controller  wlc  is similar to configuring a wireless-router except that a wlc controls aps and provides more services and management capabilities  use the wlc interface to view an overall picture of the ap s system information and performance  to access advanced settings and to configure a wlan snmp is used monitor the network  the wlc is set to forward all snmp log messages  called traps  to the snmp server  for wlan user-authentication  a radius server is used for authentication  accounting  and auditing  aaa  services  individual user access can be tracked and audited  use the wlc interface to configure snmp server and radius server information  vlan-interfaces  dhcp-scope  and a wpa2 enterprise wlan there are six steps to the troubleshooting-process  when troubleshooting a wlan  a process of elimination is recommended  common problems are  no connectivity and poorly performing wireless connection when the pc is operational  to optimize and increase the bandwidth of 802 11 dual-band-routers and aps  either  upgrade your wireless-clients or split the traffic  most wireless-routers and aps offer upgradable firmware  firmware releases may contain fixes for common problems reported by customers as well as security vulnerabilities  you should periodically check the router or ap for updated firmware 
module 13  wlan configuration new terms and commandsnetwork-address-translation  nat  wireless-mesh-network  wmn port forwardingport triggering
module 13  wlan configurationswitching  routing  and wireless essentials v7 0 srwe 
module objectivesmodule title  wlan configurationmodule objective  implement a wlan using a wireless-router and wlc topic titletopic objectiveremote site wlan configurationconfigure a wlan to support a remote site configure a basic wlan on the wlcconfigure a wlc wlan to use the management interface and wpa2 psk authentication configure a wpa2 enterprise wlan on the wlcconfigure a wlc wlan to use a vlan interface  a dhcp-server  and wpa2 enterprise authentication troubleshoot wlan issuestroubleshoot common wireless configuration issues 
13 1 remote site wlan configuration
remote site wlan configuration video   configure a wireless networkthis video will cover the following use the wireless-router web pagechange the passwordchange the wan and lan settingsconnect the wireless network
remote site wlan configuration the wireless-routerremote workers  small-branch-offices  and home networks often use a small office and home router  these  integrated  routers typically include a switch for wired clients  a port for an internet connection  sometimes labeled  wan    and wireless components for wireless client access  these wireless-routers typically provide wlan security  dhcp services  integrated name-address-translation  nat   quality-of-service  qos   as well as a variety of other features  the feature set will vary based on the router model note  cable or dsl-modem configuration is usually done by the service-provider s representative either on-site or remotely  
remote site wlan configuration log in to the wireless-routermost wireless-routers are preconfigured to be connected to the network and provide services  wireless-router default ip-addresses  usernames  and passwords can easily be found on the internet  therefore  your first priority should be to change these defaults for security reasons to gain access to the wireless-router s configuration guiopen a web browser and enter the default ip-address for your wireless-router  the default ip-address can be found in the documentation that came with the wireless-router or you can search the internet  the word admin is commonly used as the default username and password  
remote site wlan configuration basic network setupbasic network setup includes the following steps log in to the router from a web browser change the default-administrative-password log in with the new administrative password change the default dhcp ipv4-addresses renew the ip-address log in to the router with the new ip-address 
remote site wlan configuration basic wireless setupbasic wireless setup includes the following steps view the wlan defaults change the network-mode  identifying which 802 11 standard is to be implemented configure the ssid configure the channel  ensuring there are no overlapping channels in use configure the security-mode  selecting from open  wpa  wpa2 personal  wpa2 enterprise  etc  configure the passphrase  as required for the selected security-mode 
remote site wlan configuration configure a wireless-mesh-networkin a small office or home network  one wireless-router may suffice to provide wireless-access to all the clients  if you want to extend the range beyond approximately 45 meters indoors and 90 meters outdoors  you create a wireless mesh  create the mesh by adding access-points with the same settings  except using different channels to prevent interference extending a wlan in a small office or home has become increasingly easier  manufacturers have made creating a wireless-mesh-network  wmn  simple through smartphone apps  
remote site wlan configuration nat for ipv4typically  the wireless-router is assigned a publicly routable-address by the isp and uses a private-network address for addressing on the lan to allow hosts on the lan to communicate with the outside world  the router will use a process called network-address-translation  nat   nat translates a private  local  source ipv4-address to a public  global  address  the process is reversed for incoming packets   nat makes sharing one public ipv4-address possible by tracking the source-port-numbers for every session established by a device  if your isp has ipv6-enabled  you will see a unique ipv6-address for each device 
remote site wlan configuration quality-of-servicemany wireless-routers have an option for configuring quality-of-service  qos   by configuring qos  you can guarantee that certain traffic-types  such as voice and video  are prioritized over traffic that is not as time-sensitive  such as email and web browsing  on some wireless-routers  traffic can also be prioritized on specific ports 
remote site wlan configuration port forwardingwireless-routers typically block tcp and udp ports to prevent unauthorized-access in and out of a lan  however  there are situations when specific ports must be opened so that certain programs and applications can communicate with devices on different networks  port forwarding is a rule-based method of directing traffic between devices on separate networks port triggering allows the router to temporarily forward data through inbound ports to a specific device  you can use port triggering to forward data to a computer only when a designated-port range is used to make an outbound request  
remote site wlan configuration packet tracer   configure a wireless networkin this packet tracer activity  you will complete the following objectives connect to a wireless-routerconfigure the wireless-routerconnect a wired device to the wireless-routerconnect a wireless device to the wireless-routeradd an ap to the network to extend wireless coverageupdate default-router settings
remote site wlan configuration lab   configure a wireless networkin this lab  you will configure basic settings on a wireless-router and connect a pc to router wirelessly 
12 7 secure wlans
secure wlans video   secure wlansthis video will cover the following  ssid cloakingmac-address filteringauthentication and encryption-systems  open authentication and shared-key-authentication 
secure wlans ssid cloaking and mac-address filteringto address the threats of keeping wireless-intruders out and protecting data  two early security features were used and are still available on most routers and aps ssid cloakingaps and some wireless-routers allow the ssid beacon frame to be disabled  wireless-clients must be manually-configured with the ssid to connect to the network mac-address filteringan administrator can manually permit or deny clients wireless-access based on their physical mac hardware address  in the figure  the router is configured to permit two mac-addresses  devices with different mac-addresses will not be able to join the 2 4ghz wlan 
secure wlans 802 11 original authentication methodsthe best way to secure a wireless network is to use authentication and encryption-systems  two types of authentication were introduced with the original 802 11 standard open-system-authenticationno password required  typically used to provide free internet access in public areas like cafes  airports  and hotels client is responsible for providing security such as through a vpn  shared-key-authenticationprovides mechanisms  such as wep  wpa  wpa2  and wpa3 to authenticate and encrypt data between a wireless client and ap  however  the password must be pre-shared between both parties to connect 
secure wlans shared-key-authentication methodsthere are currently four shared-key-authentication techniques available  as shown in the table authentication methoddescriptionwired-equivalent-privacy  wep the original 802 11 specification designed to secure the data using the rivest-cipher-4  rc4  encryption method with a static key  wep is no longer recommended and should never be used wi-fi protected access  wpa a wi-fi-alliance standard that uses wep but secures the data with the much stronger temporal-key-integrity-protocol  tkip  encryption algorithm  tkip changes the key for each packet  making it much more difficult to hack wpa2it uses the advanced-encryption-standard  aes  for encryption  aes is currently considered the strongest encryption protocol wpa3this is the next generation of wi-fi security  all wpa3-enabled devices use the latest security methods  disallow outdated legacy protocols  and require the use of protected-management-frames  pmf  
secure wlans authenticating a home userhome routers typically have two choices for authentication  wpa and wpa2  with wpa 2 having two authentication methods personal   intended for home or small office networks  users authenticate using a pre-shared-key  psk   wireless-clients authenticate with the wireless-router using a pre-shared-password  no special authentication-server is required enterprise   intended for enterprise-networks  requires a remote-authentication-dial-in-user-service  radius  authentication-server  the device must be authenticated by the radius server and then users must authenticate using 802 1x standard  which uses the extensible authentication-protocol  eap  for authentication 
secure wlans encryption methodswpa and wpa2 include two encryption protocols temporal-key-integrity-protocol  tkip    used by wpa and provides support for legacy wlan equipment  makes use of wep but encrypts the layer-2 payload using tkip advanced-encryption-standard  aes    used by wpa2 and uses the counter cipher mode with block chaining message authentication code protocol  ccmp  that allows destination-hosts to recognize if the encrypted and non-encrypted bits have been altered 
secure wlans authentication in the enterpriseenterprise security-mode choice requires an authentication  authorization  and accounting  aaa  radius server there pieces of information are required radius server ip-address   ip-address of the server udp port-numbers  udp ports 1812 for radius authentication  and 1813 for radius accounting  but can also operate using udp ports 1645 and 1646 shared-key   used to authenticate the ap with the radius server note  user-authentication and authorization is handled by the 802 1x standard  which provides a centralized  server-based authentication of end users 
secure wlans wpa 3because wpa2 is no longer considered secure  wpa3 is recommended when available  wpa3 includes four features wpa3   personal   thwarts brute-force attacks by using simultaneous-authentication-of-equals  sae  wpa3   enterprise   uses 802 1x eap authentication  however  it requires the use of a 192-bit cryptographic suite and eliminates the mixing of security protocols for previous 802 11 standards open networks   does not use any authentication  however  uses opportunistic-wireless-encryption  owe  to encrypt all wireless traffic iot onboarding   uses device-provisioning-protocol  dpp  to quickly onboard iot devices 
13 4 troubleshoot wlan issues
troubleshoot wlan issues troubleshooting approachesnetwork problems can be simple or complex  and can result from a combination of hardware  software  and connectivity-issues  technicians must be able to analyze the problem and determine the cause of the error before they can resolve the network issue  this process is called troubleshooting troubleshooting any sort of network problem should follow a systematic approach  a common and efficient troubleshooting-methodology is based on the scientific method and can be broken into the six main steps shown in the table on the next slide 
troubleshoot wlan issues troubleshooting approaches  cont  steptitledescriptionidentify the problemthe first step in the troubleshooting-process is to identify the problem  while tools can be used in this step  a conversation with the user is often very helpful establish a theory of probable causesafter you have talked to the user and identified the problem  you can try and establish a theory of probable causes  this step often yields more than a few probable causes to the problem test the theory to determine causebased on the probable causes  test your theories to determine which one is the cause of the problem  a technician will often apply a quick procedure to test and see if it solves the problem  if a quick procedure does not correct the problem  you might need to research the problem further to establish the exact cause establish a plan of action to resolve-the-problem and implement the solutionafter you have determined the exact cause of the problem  establish a plan of action to resolve-the-problem and implement the solution verify full system functionality and implement preventive measuresafter you have corrected the problem  verify full functionality and  if applicable  implement preventive measures document findings  actions  and outcomesin the final step of the troubleshooting-process  document your findings  actions  and outcomes  this is very important for future reference 
troubleshoot wlan issues wireless client not connectingif there is no connectivity  check the following confirm the network configuration on the pc using the ipconfig command confirm that the device can connect to the wired-network  ping a known ip-address if needed  reload drivers as appropriate for the client or try a different wireless nic if the wireless nic of the client is working  check the security-mode and encryption settings on the client  if the pc is operational but the wireless connection is performing poorly  check the following is the pc out of the planned coverage-area  bsa  check the channel settings on the wireless client  check for interference with the 2 4 ghz band 
troubleshoot wlan issues wireless client not connecting  cont  next  ensure that all the devices are actually in place  consider a possible physical-security issue  is there power to all devices and are they powered on finally  inspect links between cabled devices looking for bad connectors or damaged or missing cables  if the physical plant is in place  verify the wired lan by pinging devices  including the ap  if connectivity still fails at this point  perhaps something is wrong with the ap or its configuration when the user pc is eliminated as the source of the problem  and the physical status of devices is confirmed  begin investigating the performance of the ap  check the power status of the ap 
troubleshoot wlan issues troubleshooting when the network is slowto optimize and increase the bandwidth of 802 11 dual-band-routers and aps  either upgrade your wireless-clients - older 802 11b  802 11g  and even 802 11n devices can slow the entire wlan  for the best performance  all wireless-devices should support the same highest acceptable standard  split the traffic - the easiest way to improve wireless performance is to split the wireless traffic between the 802 11n 2 4 ghz band and the 5 ghz band  therefore  802 11n  or better  can use the two bands as two separate wireless networks to help manage the traffic there are several reasons for using a split-the-traffic-approach the 2 4 ghz band may be suitable for basic internet traffic that is not time-sensitive the bandwidth may still be shared with other nearby wlans the 5 ghz band is much less crowded than the 2 4 ghz band  ideal for streaming multimedia the 5 ghz band has more channels  therefore  the channel chosen is likely interference-free 
troubleshoot wlan issues troubleshooting when the network is slow  cont  by default  dual-band-routers and aps use the same network name on both the 2 4 ghz band and the 5 ghz band  it may be useful to segment the traffic the simplest way to segment traffic is to rename one of the wireless networks to improve the range of a wireless network  ensure the wireless-router or ap location is free of obstructions  such as furniture  fixtures  and tall appliances  these block the signal  which shortens the range of the wlan  if this still does not solve-the-problem  then a wi-fi range extender or deploying the powerline wireless technology may be used 
troubleshoot wlan issues updating firmwaremost wireless-routers and aps offer upgradable firmware that should be periodically verified on a wlc  there will most likely be the ability to upgrade the firmware on all aps that the wlc controls  in the figure  the firmware image that will be used to upgrade all the aps is downloaded  on a cisco 3504 wireless controller  click  wireless   access-points   global configuration and then scroll to the bottom of the page for the ap image pre-download section 
troubleshoot wlan issues packet tracer   troubleshoot wlan issuesin this packet tracer  you will complete the following objectives troubleshoot wireless-lan connectivity-issues in a home network troubleshoot wireless-lan connectivity-issues in an enterprise network  
12 2 wlan components
wlan components video   wlan componentsthis video will cover the following  antennaswireless-routerinternet-portwireless-access-pointautonomous and controller-based access-points
wlan components wireless nicsto communicate wirelessly  laptops  tablets  smart-phones  and even the latest automobiles include integrated wireless nics that incorporate a radio transmitter receiver if a device does not have an integrated wireless nic  then a usb wireless adapter can be used 
wlan components wireless home routera home user typically interconnects wireless-devices using a small  wireless-router wireless-routers serve as the following access-point   to provide wires accessswitch   to interconnect wired devicesrouter  - to provide a default-gateway to other networks and the internet
wlan components wireless-access-pointwireless-clients use their wireless nic to discover nearby access-points  aps  clients then attempt to associate and authenticate with an ap after being authenticated  wireless users have access to network resources cisco meraki go access-points
wlan components ap categoriesaps can be categorized as either autonomous-aps or controller-based-aps  autonomous-aps   standalone devices configured through a command-line interface or gui  each autonomous ap acts independently of the others and is configured and managed manually by an administrator controller-based-aps   also known as lightweight-aps  laps   use lightweight access-point protocol  lwapp  to communicate with a lwan-controller  wlc   each lap is automatically configured and managed by the wlc 
wlan components wireless antennastypes of external antennas omnidirectional   provide 360-degree coverage  ideal in houses and office areas directional   focus the radio signal in a specific direction  examples are the yagi and parabolic dish multiple-input-multiple-output  mimo    uses multiple antennas  up to eight  to increase bandwidth 
12 3 wlan operation
wlan operation video   wlan operationthis video will cover the following  infrastructure modead hoc modetetheringbasic-service-set  bss extended-service-set  ess 802 11 frame structurecarrier-sense-multiple-access-collision-avoidance  csma ca wireless client ap associationpassive and active-delivery-mode
wlan operation 802 11 wireless topology modesad hoc mode - used to connect clients in peer-to-peer manner without an ap infrastructure mode - used to connect clients to the network using an ap tethering - variation of the ad hoc topology is when a smart phone or tablet with cellular data-access is enabled to create a personal hotspot 
wlan operation bss and essinfrastructure mode defines two topology blocks basic-service-set  bss uses single ap to interconnect all associated wireless-clients clients in different bsss cannot communicate extended-service-set  ess a union of two or more bsss interconnected by a wired distribution system clients in each bss can communication through the ess 
wlan operation 802 11 frame structurethe 802 11 frame format is similar to the ethernet-frame format  except that it contains more fields 
wlan operation csma cawlans are half-duplex and a client cannot  hear  while it is sending  making it impossible to detect a collision  wlans use carrier-sense-multiple-access-with-collision-avoidance  csma ca  to determine how and when to send data  a wireless client does the following listens to the channel to see if it is idle  i e  no other traffic currently on the channel sends a ready-to-send  rts  message the ap to request dedicated access to the network receives a clear-to-send  cts  message from the ap granting access to send waits a random amount of time before restarting the process if no cts message received transmits the data acknowledges all transmissions  if a wireless client does not receive an acknowledgment  it assumes a collision occurred and restarts the process
wlan operation wireless client and ap associationfor wireless-devices to communicate over a network  they must first associate with an ap or wireless-router wireless-devices complete the following three stage process discover a wireless apauthenticate with the apassociate with the ap
wlan operation wireless client and ap association  cont  to achieve successful association  a wireless client and an ap must agree on specific parameters ssid   the client needs to know the name of the network to connect password   this is required for the client to authenticate to the ap network-mode   the 802 11 standard in use security-mode   the security parameter settings  i e  wep  wpa  or wpa2 channel settings   the frequency bands in use 
wlan operation passive and active discover modewireless-clients connect to the ap using a passive or active scanning  probing  process  passive-mode   ap openly advertises its service by periodically sending broadcast beacon frames containing the ssid  supported standards  and security settings active-mode   wireless-clients must know the name of the ssid  the wireless client initiates the process by broadcasting a probe request frame on multiple-channels  passive-modeactive-mode
12 6 wlan threats
wlan threats video   wlan threatsthis video will cover the following  interception-of-datawireless-intrudersdenial-of-service  dos  attacksrogue-aps
wlan threats wireless security overviewa wlan is open to anyone within range of an ap and the appropriate credentials to associate to it attacks can be generated by outsiders  disgruntled employees  and even unintentionally by employees  wireless networks are specifically susceptible to several threats  including the following interception-of-datawireless-intrudersdenial-of-service  dos  attacksrogue-aps
wlan threats dos-attackswireless dos-attacks can be the result of the following improperly configured devicesa malicious user intentionally interfering with the wireless communicationaccidental interferenceto minimize the risk of a dos-attack due to improperly configured devices and malicious-attacks  harden all devices  keep passwords-secure  create backups  and ensure that all configuration changes are incorporated off-hours 
wlan threats rogue access-pointsa rogue ap is an ap or wireless-router that has been connected to a corporate network without explicit authorization and against corporate policy once connected  the rogue ap can be used by an attacker to capture mac-addresses  capture data packets  gain access to network resources  or launch a man-in-the-middle-attack a personal-network-hotspot could also be used as a rogue ap  for example  a user with secure-network access enables their authorized windows host to become a wi-fi ap to prevent the installation of rogue-aps  organizations must configure wlcs with rogue ap policies and use monitoring software to actively monitor the radio spectrum for unauthorized aps 
wlan threats man-in-the-middle-attackin a man-in-the-middle  mitm  attack  the hacker is positioned in between two legitimate entities in order to read or modify the data that passes between the two parties  a popular wireless mitm attack is called the  evil twin ap  attack  where an attacker introduces a rogue ap and configures it with the same ssid as a legitimate ap defeating a mitm attack begins with identifying legitimate devices on the wlan  to do this  users must be authenticated  after all of the legitimate devices are known  the network can be monitored for abnormal devices or traffic 
